[supervisord]
childlogdir = /var/log/supervisor
logfile = /dev/null
logfile_maxbytes = 0
nodaemon = true
pidfile = /var/run/supervisord.pid
user = root

{% if dev_mode %}
[unix_http_server]
file = /var/run/supervisor.sock
chown = rs:rs
[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface
{% endif %}

{% for name, opts in services.items() %}
[program:{{ name }}]
{% for k, v in opts.items() %}
{{ k }} = {{ v }}
{% endfor %}
{% endfor %}

[eventlistener:logger]
command = python -u /rs/radstar/scripts/supervisord-logger.py
buffer_size = 128
events = PROCESS_LOG
stdout_logfile = NONE
stderr_logfile = /dev/stderr
stderr_logfile_maxbytes = 0
