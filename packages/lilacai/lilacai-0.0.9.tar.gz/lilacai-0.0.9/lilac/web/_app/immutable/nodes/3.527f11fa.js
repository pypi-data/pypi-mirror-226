import{S as ie,i as fe,s as x,y as P,z as N,A as V,g as _,d as h,B,R as O,k as v,a as j,e as H,l as C,m as w,h as m,c as z,n as y,b as g,J as k,v as R,f as U,H as F,K as ee,a7 as ue,aa as pe,P as me,a1 as L,ab as de,q as S,r as I,u as M,ac as _e}from"../chunks/index.8c57c90c.js";import{g as G}from"../chunks/navigation.f3a961f4.js";import{P as he}from"../chunks/Page.e5620253.js";import{g as $e,e as be,T as ge,f as ke,h as ve}from"../chunks/Commands.ee6d0aff.js";import{c as Ce,j as we,h as ye,k as Ee}from"../chunks/HoverTooltip.6e48cba9.js";import{T as Te,I as Q,C as Se}from"../chunks/ConceptView.6480581f.js";import{c as Ie,e as W,S as De}from"../chunks/JSONSchemaForm.e9659771.js";import{M as Pe}from"../chunks/ChevronUp.848eea78.js";function X(a){let e,n,t,o;const r=[Be,Ve,Ne],c=[];function u(s,i){var l,f,$;return(l=s[7])!=null&&l.isLoading?0:(f=s[7])!=null&&f.isError?1:($=s[7])!=null&&$.isSuccess?2:-1}return~(e=u(a))&&(n=c[e]=r[e](a)),{c(){n&&n.c(),t=H()},l(s){n&&n.l(s),t=H()},m(s,i){~e&&c[e].m(s,i),g(s,t,i),o=!0},p(s,i){let l=e;e=u(s),e===l?~e&&c[e].p(s,i):(n&&(R(),h(c[l],1,1,()=>{c[l]=null}),U()),~e?(n=c[e],n?n.p(s,i):(n=c[e]=r[e](s),n.c()),_(n,1),n.m(t.parentNode,t)):n=null)},i(s){o||(_(n),o=!0)},o(s){h(n),o=!1},d(s){~e&&c[e].d(s),s&&m(t)}}}function Ne(a){let e=a[7].data,n,t,o=Y(a);return{c(){o.c(),n=H()},l(r){o.l(r),n=H()},m(r,c){o.m(r,c),g(r,n,c),t=!0},p(r,c){c&128&&x(e,e=r[7].data)?(R(),h(o,1,1,L),U(),o=Y(r),o.c(),_(o,1),o.m(n.parentNode,n)):o.p(r,c)},i(r){t||(_(o),t=!0)},o(r){h(o),t=!1},d(r){r&&m(n),o.d(r)}}}function Ve(a){let e,n=a[7].error+"",t;return{c(){e=v("p"),t=S(n)},l(o){e=C(o,"P",{});var r=w(e);t=I(r,n),r.forEach(m)},m(o,r){g(o,e,r),k(e,t)},p(o,r){r&128&&n!==(n=o[7].error+"")&&M(t,n)},i:L,o:L,d(o){o&&m(e)}}}function Be(a){let e,n;return e=new De({}),{c(){P(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,o){V(e,t,o),n=!0},p:L,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Y(a){let e,n;return e=new Se({props:{concept:a[7].data}}),{c(){P(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,o){V(e,t,o),n=!0},p(t,o){const r={};o&128&&(r.concept=t[7].data),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Z(a){let e,n;return e=new Pe({props:{danger:!0,open:!0,modalHeading:"Delete concept",primaryButtonText:"Delete",primaryButtonIcon:a[6].isLoading?Q:void 0,secondaryButtonText:"Cancel",$$slots:{default:[He]},$$scope:{ctx:a}}}),e.$on("click:button--secondary",a[17]),e.$on("close",a[18]),e.$on("submit",a[19]),{c(){P(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,o){V(e,t,o),n=!0},p(t,o){const r={};o&64&&(r.primaryButtonIcon=t[6].isLoading?Q:void 0),o&1048580&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function He(a){let e,n,t,o=a[2].namespace+"",r,c,u=a[2].name+"",s,i,l,f,$;return{c(){e=v("p"),n=S("Confirm deleting "),t=v("code"),r=S(o),c=S("/"),s=S(u),i=S(" ?"),l=j(),f=v("p"),$=S("This is a permanent action and cannot be undone."),this.h()},l(p){e=C(p,"P",{class:!0});var d=w(e);n=I(d,"Confirm deleting "),t=C(d,"CODE",{});var D=w(t);r=I(D,o),c=I(D,"/"),s=I(D,u),D.forEach(m),i=I(d," ?"),d.forEach(m),l=z(p),f=C(p,"P",{class:!0});var E=w(f);$=I(E,"This is a permanent action and cannot be undone."),E.forEach(m),this.h()},h(){y(e,"class","!text-lg"),y(f,"class","mt-2")},m(p,d){g(p,e,d),k(e,n),k(e,t),k(t,r),k(t,c),k(t,s),k(e,i),g(p,l,d),g(p,f,d),k(f,$)},p(p,d){d&4&&o!==(o=p[2].namespace+"")&&M(r,o),d&4&&u!==(u=p[2].name+"")&&M(s,u)},d(p){p&&m(e),p&&m(l),p&&m(f)}}}function qe(a){let e,n,t,o,r,c,u,s=a[0]!=null&&a[1]!=null&&X(a);o=new be({});let i=a[2]&&Z(a);return{c(){e=v("div"),n=v("div"),s&&s.c(),t=j(),P(o.$$.fragment),r=j(),i&&i.c(),c=H(),this.h()},l(l){e=C(l,"DIV",{class:!0});var f=w(e);n=C(f,"DIV",{class:!0});var $=w(n);s&&s.l($),$.forEach(m),f.forEach(m),t=z(l),N(o.$$.fragment,l),r=z(l),i&&i.l(l),c=H(),this.h()},h(){y(n,"class","lilac-page flex w-full"),y(e,"class","flex h-full w-full overflow-x-hidden overflow-y-scroll")},m(l,f){g(l,e,f),k(e,n),s&&s.m(n,null),g(l,t,f),V(o,l,f),g(l,r,f),i&&i.m(l,f),g(l,c,f),u=!0},p(l,f){l[0]!=null&&l[1]!=null?s?(s.p(l,f),f&3&&_(s,1)):(s=X(l),s.c(),_(s,1),s.m(n,null)):s&&(R(),h(s,1,1,()=>{s=null}),U()),l[2]?i?(i.p(l,f),f&4&&_(i,1)):(i=Z(l),i.c(),_(i,1),i.m(c.parentNode,c)):i&&(R(),h(i,1,1,()=>{i=null}),U())},i(l){u||(_(s),_(o.$$.fragment,l),_(i),u=!0)},o(l){h(s),h(o.$$.fragment,l),h(i),u=!1},d(l){l&&m(e),s&&s.d(),l&&m(t),B(o,l),l&&m(r),i&&i.d(l),l&&m(c)}}}function Le(a){let e,n=W(a[0],a[1])+"",t,o,r;return{c(){e=v("a"),t=S(n),this.h()},l(c){e=C(c,"A",{class:!0,href:!0});var u=w(e);t=I(u,n),u.forEach(m),this.h()},h(){y(e,"class","font-semibold text-black"),y(e,"href",a[3])},m(c,u){g(c,e,u),k(e,t),o||(r=ee(e,"click",a[16]),o=!0)},p(c,u){u&3&&n!==(n=W(c[0],c[1])+"")&&M(t,n),u&8&&y(e,"href",c[3])},d(c){c&&m(e),o=!1,r()}}}function Re(a){let e,n,t;return n=new ge({props:{type:"green",$$slots:{default:[Le]},$$scope:{ctx:a}}}),{c(){e=v("div"),P(n.$$.fragment),this.h()},l(o){e=C(o,"DIV",{slot:!0});var r=w(e);N(n.$$.fragment,r),r.forEach(m),this.h()},h(){y(e,"slot","header-subtext")},m(o,r){g(o,e,r),V(n,e,null),t=!0},p(o,r){const c={};r&1048587&&(c.$$scope={dirty:r,ctx:o}),n.$set(c)},i(o){t||(_(n.$$.fragment,o),t=!0)},o(o){h(n.$$.fragment,o),t=!1},d(o){o&&m(e),B(n)}}}function Ue(a){let e,n,t,o,r,c,u,s,i;return o=new Te({props:{size:16}}),{c(){e=v("div"),n=v("div"),t=v("button"),P(o.$$.fragment),this.h()},l(l){e=C(l,"DIV",{slot:!0});var f=w(e);n=C(f,"DIV",{});var $=w(n);t=C($,"BUTTON",{title:!0,class:!0});var p=w(t);N(o.$$.fragment,p),p.forEach(m),$.forEach(m),f.forEach(m),this.h()},h(){y(t,"title","Remove concept"),t.disabled=r=!a[4],y(t,"class","p-3 hover:text-red-400 hover:opacity-100"),F(n,"opacity-40",!a[4]),y(e,"slot","header-right")},m(l,f){g(l,e,f),k(e,n),k(n,t),V(o,t,null),u=!0,s||(i=[ee(t,"click",a[15]),ue(c=ye.call(null,n,{text:a[4]?"":"User does not have access to delete this concept."}))],s=!0)},p(l,f){(!u||f&16&&r!==(r=!l[4]))&&(t.disabled=r),c&&pe(c.update)&&f&16&&c.update.call(null,{text:l[4]?"":"User does not have access to delete this concept."}),(!u||f&16)&&F(n,"opacity-40",!l[4])},i(l){u||(_(o.$$.fragment,l),u=!0)},o(l){h(o.$$.fragment,l),u=!1},d(l){l&&m(e),B(o),s=!1,me(i)}}}function Me(a){let e,n;return e=new he({props:{$$slots:{"header-right":[Ue],"header-subtext":[Re],default:[qe]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,o){V(e,t,o),n=!0},p(t,[o]){const r={};o&1048799&&(r.$$scope={dirty:o,ctx:t}),e.$set(r)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Oe(a,e,n){let t,o,r,c,u,s,i,l,f=L,$=()=>(f(),f=de(t,b=>n(7,l=b)),t);a.$$.on_destroy.push(()=>f());let p,d;const D=$e();O(a,D,b=>n(14,i=b));let E=null;const A=Ce();O(a,A,b=>n(13,s=b));const K=we();O(a,K,b=>n(6,u=b));function J(){if(E==null)return;const{namespace:b,name:T}=E;u.mutate([b,T],{onSuccess:()=>{var q;for(const[se,ae]of Object.entries(ke)){const ce=(q=_e(ve[se]).selectRowsSchema)==null?void 0:q.data;ae.deleteConcept(b,T,ce)}n(2,E=null),G("/")}})}const te=()=>n(2,E={namespace:p,name:d}),ne=()=>G(c),oe=()=>n(2,E=null),re=()=>n(2,E=null),le=()=>J();return a.$$.update=()=>{var b;if(a.$$.dirty&16387&&i.page==="concepts"&&i.identifier!=null){const[T,q]=i.identifier.split("/");(p!=T||d!=q)&&(n(0,p=T),n(1,d=q))}a.$$.dirty&3&&$(n(5,t=p&&d?Ee(p,d):void 0)),a.$$.dirty&8195&&n(12,o=(b=s.data)==null?void 0:b.find(T=>T.namespace===p&&T.name===d)),a.$$.dirty&4096&&n(4,r=o==null?void 0:o.acls.write),a.$$.dirty&3&&n(3,c=Ie(p,d))},[p,d,E,c,r,t,u,l,D,A,K,J,o,s,i,te,ne,oe,re,le]}class We extends ie{constructor(e){super(),fe(this,e,Oe,Me,x,{})}}export{We as component};
