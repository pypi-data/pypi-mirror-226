import{S as le,i as ie,s as ne,E as R,k as H,a as U,l as L,m as w,c as X,h as c,I as De,H as C,n as P,b as V,J as S,al as Oe,K as O,g as N,v as x,d as A,f as $,O as he,P as Me,D as G,ah as wt,F as ee,G as Et,L as yt,M as Tt,N as Nt,q as M,r as z,u as Y,y as ae,z as se,A as oe,B as re,Q,w as Ct,_ as K,$ as J,a0 as fe,a1 as j,a7 as pe,W as Pt,a2 as bt,a3 as Fe,C as Vt,X as gt,Y as Bt,p as te,ae as Ht,an as Lt,a4 as At,R as Ye,ai as It,e as Ee,ab as Mt,aa as je}from"./index.27e2a960.js";import{aO as zt,e as Rt,h as vt,a5 as Le,E as pt,O as kt,az as Dt,M as Se,F as we,aA as Ot,L as Ft,B as St,aR as Yt}from"./Commands.2fa1e469.js";import{A as Ue,p as Xe,I as jt,u as Ut,v as Xt,f as Wt}from"./notificationsStore.4af93bc4.js";import{a as qt}from"./utils.97898c57.js";const Gt=i=>({}),We=i=>({});function qe(i){let e,t,l,a;const f=i[20].labelText,o=Et(f,i,i[19],We),n=o||Kt(i);let r=i[5]&&Ge(i);return{c(){e=H("div"),t=H("label"),n&&n.c(),l=U(),r&&r.c(),this.h()},l(s){e=L(s,"DIV",{});var u=w(e);t=L(u,"LABEL",{for:!0});var d=w(t);n&&n.l(d),d.forEach(c),l=X(u),r&&r.l(u),u.forEach(c),this.h()},h(){P(t,"for",i[14]),C(t,"bx--label",!0),C(t,"bx--visually-hidden",i[11]),C(t,"bx--label--disabled",i[7]),C(e,"bx--text-area__label-wrapper",!0)},m(s,u){V(s,e,u),S(e,t),n&&n.m(t,null),S(e,l),r&&r.m(e,null),a=!0},p(s,u){o?o.p&&(!a||u[0]&524288)&&yt(o,f,s,s[19],a?Nt(f,s[19],u,Gt):Tt(s[19]),We):n&&n.p&&(!a||u[0]&1024)&&n.p(s,a?u:[-1,-1]),(!a||u[0]&16384)&&P(t,"for",s[14]),(!a||u[0]&2048)&&C(t,"bx--visually-hidden",s[11]),(!a||u[0]&128)&&C(t,"bx--label--disabled",s[7]),s[5]?r?r.p(s,u):(r=Ge(s),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(s){a||(N(n,s),a=!0)},o(s){A(n,s),a=!1},d(s){s&&c(e),n&&n.d(s),r&&r.d()}}}function Kt(i){let e;return{c(){e=M(i[10])},l(t){e=z(t,i[10])},m(t,l){V(t,e,l)},p(t,l){l[0]&1024&&Y(e,t[10])},d(t){t&&c(e)}}}function Ge(i){let e,t=i[0].length+"",l,a,f;return{c(){e=H("div"),l=M(t),a=M("/"),f=M(i[5]),this.h()},l(o){e=L(o,"DIV",{});var n=w(e);l=z(n,t),a=z(n,"/"),f=z(n,i[5]),n.forEach(c),this.h()},h(){C(e,"bx--label",!0),C(e,"bx--label--disabled",i[7])},m(o,n){V(o,e,n),S(e,l),S(e,a),S(e,f)},p(o,n){n[0]&1&&t!==(t=o[0].length+"")&&Y(l,t),n[0]&32&&Y(f,o[5]),n[0]&128&&C(e,"bx--label--disabled",o[7])},d(o){o&&c(e)}}}function Ke(i){let e,t;return e=new zt({props:{class:"bx--text-area__invalid-icon"}}),{c(){ae(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function Je(i){let e,t;return{c(){e=H("div"),t=M(i[9]),this.h()},l(l){e=L(l,"DIV",{});var a=w(e);t=z(a,i[9]),a.forEach(c),this.h()},h(){C(e,"bx--form__helper-text",!0),C(e,"bx--form__helper-text--disabled",i[7])},m(l,a){V(l,e,a),S(e,t)},p(l,a){a[0]&512&&Y(t,l[9]),a[0]&128&&C(e,"bx--form__helper-text--disabled",l[7])},d(l){l&&c(e)}}}function Qe(i){let e,t;return{c(){e=H("div"),t=M(i[13]),this.h()},l(l){e=L(l,"DIV",{id:!0});var a=w(e);t=z(a,i[13]),a.forEach(c),this.h()},h(){P(e,"id",i[16]),C(e,"bx--form-requirement",!0)},m(l,a){V(l,e,a),S(e,t)},p(l,a){a[0]&8192&&Y(t,l[13]),a[0]&65536&&P(e,"id",l[16])},d(l){l&&c(e)}}}function Jt(i){let e,t,l,a,f,o,n,r,s,u,d,m,g,y,h=(i[10]||i[17].labelText)&&!i[11]&&qe(i),v=i[12]&&Ke(),T=[{"aria-invalid":o=i[12]||void 0},{"aria-describedby":n=i[12]?i[16]:void 0},{disabled:i[7]},{id:i[14]},{name:i[15]},{cols:i[3]},{rows:i[4]},{placeholder:i[2]},{readOnly:i[8]},{maxlength:r=i[5]??void 0},i[18]],I={};for(let _=0;_<T.length;_+=1)I=R(I,T[_]);let E=!i[12]&&i[9]&&Je(i),B=i[12]&&Qe(i);return{c(){e=H("div"),h&&h.c(),t=U(),l=H("div"),v&&v.c(),a=U(),f=H("textarea"),u=U(),E&&E.c(),d=U(),B&&B.c(),this.h()},l(_){e=L(_,"DIV",{});var k=w(e);h&&h.l(k),t=X(k),l=L(k,"DIV",{"data-invalid":!0});var F=w(l);v&&v.l(F),a=X(F),f=L(F,"TEXTAREA",{"aria-invalid":!0,"aria-describedby":!0,id:!0,name:!0,cols:!0,rows:!0,placeholder:!0,maxlength:!0}),w(f).forEach(c),F.forEach(c),u=X(k),E&&E.l(k),d=X(k),B&&B.l(k),k.forEach(c),this.h()},h(){De(f,I),C(f,"bx--text-area",!0),C(f,"bx--text-area--light",i[6]),C(f,"bx--text-area--invalid",i[12]),P(l,"data-invalid",s=i[12]||void 0),C(l,"bx--text-area__wrapper",!0),C(e,"bx--form-item",!0)},m(_,k){V(_,e,k),h&&h.m(e,null),S(e,t),S(e,l),v&&v.m(l,null),S(l,a),S(l,f),f.autofocus&&f.focus(),i[32](f),Oe(f,i[0]),S(e,u),E&&E.m(e,null),S(e,d),B&&B.m(e,null),m=!0,g||(y=[O(f,"input",i[33]),O(f,"change",i[25]),O(f,"input",i[26]),O(f,"keydown",i[27]),O(f,"keyup",i[28]),O(f,"focus",i[29]),O(f,"blur",i[30]),O(f,"paste",i[31]),O(e,"click",i[21]),O(e,"mouseover",i[22]),O(e,"mouseenter",i[23]),O(e,"mouseleave",i[24])],g=!0)},p(_,k){(_[10]||_[17].labelText)&&!_[11]?h?(h.p(_,k),k[0]&134144&&N(h,1)):(h=qe(_),h.c(),N(h,1),h.m(e,t)):h&&(x(),A(h,1,1,()=>{h=null}),$()),_[12]?v?k[0]&4096&&N(v,1):(v=Ke(),v.c(),N(v,1),v.m(l,a)):v&&(x(),A(v,1,1,()=>{v=null}),$()),De(f,I=he(T,[(!m||k[0]&4096&&o!==(o=_[12]||void 0))&&{"aria-invalid":o},(!m||k[0]&69632&&n!==(n=_[12]?_[16]:void 0))&&{"aria-describedby":n},(!m||k[0]&128)&&{disabled:_[7]},(!m||k[0]&16384)&&{id:_[14]},(!m||k[0]&32768)&&{name:_[15]},(!m||k[0]&8)&&{cols:_[3]},(!m||k[0]&16)&&{rows:_[4]},(!m||k[0]&4)&&{placeholder:_[2]},(!m||k[0]&256)&&{readOnly:_[8]},(!m||k[0]&32&&r!==(r=_[5]??void 0))&&{maxlength:r},k[0]&262144&&_[18]])),k[0]&1&&Oe(f,_[0]),C(f,"bx--text-area",!0),C(f,"bx--text-area--light",_[6]),C(f,"bx--text-area--invalid",_[12]),(!m||k[0]&4096&&s!==(s=_[12]||void 0))&&P(l,"data-invalid",s),!_[12]&&_[9]?E?E.p(_,k):(E=Je(_),E.c(),E.m(e,d)):E&&(E.d(1),E=null),_[12]?B?B.p(_,k):(B=Qe(_),B.c(),B.m(e,null)):B&&(B.d(1),B=null)},i(_){m||(N(h),N(v),m=!0)},o(_){A(h),A(v),m=!1},d(_){_&&c(e),h&&h.d(),v&&v.d(),i[32](null),E&&E.d(),B&&B.d(),g=!1,Me(y)}}}function Qt(i,e,t){let l;const a=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let f=G(e,a),{$$slots:o={},$$scope:n}=e;const r=wt(o);let{value:s=""}=e,{placeholder:u=""}=e,{cols:d=50}=e,{rows:m=4}=e,{maxCount:g=void 0}=e,{light:y=!1}=e,{disabled:h=!1}=e,{readonly:v=!1}=e,{helperText:T=""}=e,{labelText:I=""}=e,{hideLabel:E=!1}=e,{invalid:B=!1}=e,{invalidText:_=""}=e,{id:k="ccs-"+Math.random().toString(36)}=e,{name:F=void 0}=e,{ref:W=null}=e;function q(b){Q.call(this,i,b)}function ue(b){Q.call(this,i,b)}function de(b){Q.call(this,i,b)}function ce(b){Q.call(this,i,b)}function Z(b){Q.call(this,i,b)}function ke(b){Q.call(this,i,b)}function me(b){Q.call(this,i,b)}function ye(b){Q.call(this,i,b)}function Te(b){Q.call(this,i,b)}function Ne(b){Q.call(this,i,b)}function Ce(b){Q.call(this,i,b)}function Pe(b){Ct[b?"unshift":"push"](()=>{W=b,t(1,W)})}function Ve(){s=this.value,t(0,s)}return i.$$set=b=>{e=R(R({},e),ee(b)),t(18,f=G(e,a)),"value"in b&&t(0,s=b.value),"placeholder"in b&&t(2,u=b.placeholder),"cols"in b&&t(3,d=b.cols),"rows"in b&&t(4,m=b.rows),"maxCount"in b&&t(5,g=b.maxCount),"light"in b&&t(6,y=b.light),"disabled"in b&&t(7,h=b.disabled),"readonly"in b&&t(8,v=b.readonly),"helperText"in b&&t(9,T=b.helperText),"labelText"in b&&t(10,I=b.labelText),"hideLabel"in b&&t(11,E=b.hideLabel),"invalid"in b&&t(12,B=b.invalid),"invalidText"in b&&t(13,_=b.invalidText),"id"in b&&t(14,k=b.id),"name"in b&&t(15,F=b.name),"ref"in b&&t(1,W=b.ref),"$$scope"in b&&t(19,n=b.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&t(16,l=`error-${k}`)},[s,W,u,d,m,g,y,h,v,T,I,E,B,_,k,F,l,r,f,n,o,q,ue,de,ce,Z,ke,me,ye,Te,Ne,Ce,Pe,Ve]}class Zt extends le{constructor(e){super(),ie(this,e,Qt,Jt,ne,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Yl=Zt;function Ze(i){let e,t;return{c(){e=K("title"),t=M(i[1])},l(l){e=J(l,"title",{});var a=w(e);t=z(a,i[1]),a.forEach(c)},m(l,a){V(l,e,a),S(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&c(e)}}}function xt(i){let e,t,l=i[1]&&Ze(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=R(f,a[o]);return{c(){e=K("svg"),l&&l.c(),t=K("path"),this.h()},l(o){e=J(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=J(n,"path",{d:!0}),w(t).forEach(c),n.forEach(c),this.h()},h(){P(t,"d","M24.59 16.59L17 24.17 17 4 15 4 15 24.17 7.41 16.59 6 18 16 28 26 18 24.59 16.59z"),fe(e,f)},m(o,n){V(o,e,n),l&&l.m(e,null),S(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=Ze(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),fe(e,f=he(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&c(e),l&&l.d()}}}function $t(i,e,t){let l,a;const f=["size","title"];let o=G(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=R(R({},e),ee(s))),t(3,o=G(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ee(e),[n,r,a,o,l]}class el extends le{constructor(e){super(),ie(this,e,$t,xt,ne,{size:0,title:1})}}function xe(i){let e,t;return{c(){e=K("title"),t=M(i[1])},l(l){e=J(l,"title",{});var a=w(e);t=z(a,i[1]),a.forEach(c)},m(l,a){V(l,e,a),S(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&c(e)}}}function tl(i){let e,t,l=i[1]&&xe(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=R(f,a[o]);return{c(){e=K("svg"),l&&l.c(),t=K("path"),this.h()},l(o){e=J(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=J(n,"path",{d:!0}),w(t).forEach(c),n.forEach(c),this.h()},h(){P(t,"d","M16 4L6 14 7.41 15.41 15 7.83 15 28 17 28 17 7.83 24.59 15.41 26 14 16 4z"),fe(e,f)},m(o,n){V(o,e,n),l&&l.m(e,null),S(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=xe(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),fe(e,f=he(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&c(e),l&&l.d()}}}function ll(i,e,t){let l,a;const f=["size","title"];let o=G(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=R(R({},e),ee(s))),t(3,o=G(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ee(e),[n,r,a,o,l]}class il extends le{constructor(e){super(),ie(this,e,ll,tl,ne,{size:0,title:1})}}function $e(i){let e,t;return{c(){e=K("title"),t=M(i[1])},l(l){e=J(l,"title",{});var a=w(e);t=z(a,i[1]),a.forEach(c)},m(l,a){V(l,e,a),S(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&c(e)}}}function nl(i){let e,t,l=i[1]&&$e(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=R(f,a[o]);return{c(){e=K("svg"),l&&l.c(),t=K("path"),this.h()},l(o){e=J(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=J(n,"path",{d:!0}),w(t).forEach(c),n.forEach(c),this.h()},h(){P(t,"d","M2 2H7V16H2zM23 2H9V16.8027l3.0422 4.5635.8453 5.9165A2.0094 2.0094 0 0014.8672 29H15a3.0033 3.0033 0 003-3V20h8a4.0045 4.0045 0 004-4V9A7.0078 7.0078 0 0023 2z"),fe(e,f)},m(o,n){V(o,e,n),l&&l.m(e,null),S(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=$e(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),fe(e,f=he(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&c(e),l&&l.d()}}}function al(i,e,t){let l,a;const f=["size","title"];let o=G(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=R(R({},e),ee(s))),t(3,o=G(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ee(e),[n,r,a,o,l]}class sl extends le{constructor(e){super(),ie(this,e,al,nl,ne,{size:0,title:1})}}function et(i){let e,t;return{c(){e=K("title"),t=M(i[1])},l(l){e=J(l,"title",{});var a=w(e);t=z(a,i[1]),a.forEach(c)},m(l,a){V(l,e,a),S(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&c(e)}}}function ol(i){let e,t,l=i[1]&&et(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let o=0;o<a.length;o+=1)f=R(f,a[o]);return{c(){e=K("svg"),l&&l.c(),t=K("path"),this.h()},l(o){e=J(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=J(n,"path",{d:!0}),w(t).forEach(c),n.forEach(c),this.h()},h(){P(t,"d","M2 16H7V30H2zM23 30H9V15.1973l3.0422-4.5635.8453-5.9165A2.0094 2.0094 0 0114.8672 3H15a3.0033 3.0033 0 013 3v6h8a4.0045 4.0045 0 014 4v7A7.0078 7.0078 0 0123 30z"),fe(e,f)},m(o,n){V(o,e,n),l&&l.m(e,null),S(e,t)},p(o,[n]){o[1]?l?l.p(o,n):(l=et(o),l.c(),l.m(e,t)):l&&(l.d(1),l=null),fe(e,f=he(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:o[0]},n&1&&{height:o[0]},n&4&&o[2],n&8&&o[3]]))},i:j,o:j,d(o){o&&c(e),l&&l.d()}}}function rl(i,e,t){let l,a;const f=["size","title"];let o=G(e,f),{size:n=16}=e,{title:r=void 0}=e;return i.$$set=s=>{t(5,e=R(R({},e),ee(s))),t(3,o=G(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,r=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||r),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ee(e),[n,r,a,o,l]}class fl extends le{constructor(e){super(),ie(this,e,rl,ol,ne,{size:0,title:1})}}function ul(i,e){const t=l=>i&&!i.contains(l.target)&&!l.defaultPrevented&&e();return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function dl(i){let e=(i[1]?"":i[0])+"",t;return{c(){t=M(e)},l(l){t=z(l,e)},m(l,a){V(l,t,a)},p(l,a){a&3&&e!==(e=(l[1]?"":l[0])+"")&&Y(t,e)},d(l){l&&c(t)}}}function cl(i){let e,t,l,a,f;const o=[i[2],{type:"purple"},{icon:Ue}];let n={$$slots:{default:[dl]},$$scope:{ctx:i}};for(let r=0;r<o.length;r+=1)n=R(n,o[r]);return t=new Rt({props:n}),{c(){e=H("div"),ae(t.$$.fragment),this.h()},l(r){e=L(r,"DIV",{class:!0});var s=w(e);se(t.$$.fragment,s),s.forEach(c),this.h()},h(){P(e,"class","embedding-badge truncate"),C(e,"embedding-badge-nolabel",i[1])},m(r,s){V(r,e,s),oe(t,e,null),l=!0,a||(f=pe(vt.call(null,e,{text:"Embedding index"})),a=!0)},p(r,[s]){const u=s&4?he(o,[s&4&&Pt(r[2]),o[1],s&0&&{icon:Ue}]):{};s&11&&(u.$$scope={dirty:s,ctx:r}),t.$set(u),(!l||s&2)&&C(e,"embedding-badge-nolabel",r[1])},i(r){l||(N(t.$$.fragment,r),l=!0)},o(r){A(t.$$.fragment,r),l=!1},d(r){r&&c(e),re(t),a=!1,f()}}}function hl(i,e,t){const l=["embedding","hideEmbeddingName"];let a=G(e,l),{embedding:f}=e,{hideEmbeddingName:o=!1}=e;return i.$$set=n=>{e=R(R({},e),ee(n)),t(2,a=G(e,l)),"embedding"in n&&t(0,f=n.embedding),"hideEmbeddingName"in n&&t(1,o=n.hideEmbeddingName)},[f,o,a]}class ml extends le{constructor(e){super(),ie(this,e,hl,cl,ne,{embedding:0,hideEmbeddingName:1})}}function tt(i,e,t){const l=i.slice();return l[12]=e[t],l}function lt(i){let e,t,l=i[0].conceptNamespace+"",a,f,o=i[0].conceptName+"",n,r,s,u,d,m,g,y,h,v,T;return d=new fl({}),y=new sl({}),{c(){e=H("div"),t=H("div"),a=M(l),f=M(" / "),n=M(o),r=U(),s=H("div"),u=H("button"),ae(d.$$.fragment),m=U(),g=H("button"),ae(y.$$.fragment),this.h()},l(I){e=L(I,"DIV",{class:!0});var E=w(e);t=L(E,"DIV",{class:!0});var B=w(t);a=z(B,l),f=z(B," / "),n=z(B,o),B.forEach(c),r=X(E),s=L(E,"DIV",{class:!0});var _=w(s);u=L(_,"BUTTON",{class:!0});var k=w(u);se(d.$$.fragment,k),k.forEach(c),m=X(_),g=L(_,"BUTTON",{class:!0});var F=w(g);se(y.$$.fragment,F),F.forEach(c),_.forEach(c),E.forEach(c),this.h()},h(){P(t,"class","flex-grow"),P(u,"class","p-1"),P(g,"class","p-1"),P(s,"class","shrink-0"),P(e,"class","flex flex-row items-center justify-between gap-x-4 p-2")},m(I,E){V(I,e,E),S(e,t),S(t,a),S(t,f),S(t,n),S(e,r),S(e,s),S(s,u),oe(d,u,null),S(s,m),S(s,g),oe(y,g,null),h=!0,v||(T=[O(u,"click",i[8]),O(g,"click",i[9])],v=!0)},p(I,E){(!h||E&1)&&l!==(l=I[0].conceptNamespace+"")&&Y(a,l),(!h||E&1)&&o!==(o=I[0].conceptName+"")&&Y(n,o)},i(I){h||(N(d.$$.fragment,I),N(y.$$.fragment,I),h=!0)},o(I){A(d.$$.fragment,I),A(y.$$.fragment,I),h=!1},d(I){I&&c(e),re(d),re(y),v=!1,Me(T)}}}function it(i){let e,t=[],l=new Map,a,f=i[2];const o=n=>n[12];for(let n=0;n<f.length;n+=1){let r=tt(i,f,n),s=o(r);l.set(s,t[n]=nt(s,r))}return{c(){e=H("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=L(n,"DIV",{class:!0});var r=w(e);for(let s=0;s<t.length;s+=1)t[s].l(r);r.forEach(c),this.h()},h(){P(e,"class","more-button flex flex-col")},m(n,r){V(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);a=!0},p(n,r){r&29&&(f=n[2],x(),t=gt(t,r,o,1,n,f,l,e,Bt,nt,null,tt),$())},i(n){if(!a){for(let r=0;r<f.length;r+=1)N(t[r]);a=!0}},o(n){for(let r=0;r<t.length;r+=1)A(t[r]);a=!1},d(n){n&&c(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function nt(i,e){let t,l,a,f,o,n,r,s,u;o=new ml({props:{class:"hover:cursor-pointer",embedding:e[12]}});function d(){return e[10](e[12])}return{key:i,first:null,c(){t=H("button"),l=H("div"),a=M("Find similar"),f=U(),ae(o.$$.fragment),n=U(),this.h()},l(m){t=L(m,"BUTTON",{class:!0});var g=w(t);l=L(g,"DIV",{});var y=w(l);a=z(y,"Find similar"),y.forEach(c),f=X(g),se(o.$$.fragment,g),n=X(g),g.forEach(c),this.h()},h(){P(t,"class","flex w-full items-center justify-between"),this.first=t},m(m,g){V(m,t,g),S(t,l),S(l,a),S(t,f),oe(o,t,null),S(t,n),r=!0,s||(u=O(t,"click",d),s=!0)},p(m,g){e=m;const y={};g&4&&(y.embedding=e[12]),o.$set(y)},i(m){r||(N(o.$$.fragment,m),r=!0)},o(m){A(o.$$.fragment,m),r=!1},d(m){m&&c(t),re(o),s=!1,u()}}}function _l(i){let e,t,l,a,f,o,n,r=i[0].conceptName!=null&&i[0].conceptNamespace!=null&&lt(i),s=i[3]!=null&&it(i);return{c(){e=H("div"),r&&r.c(),t=U(),s&&s.c(),this.h()},l(u){e=L(u,"DIV",{style:!0,class:!0});var d=w(e);r&&r.l(d),t=X(d),s&&s.l(d),d.forEach(c),this.h()},h(){P(e,"style",l=i[1]!=null?`left: ${i[1].x}px; top: ${i[1].y}px`:""),P(e,"class","absolute z-10 inline-flex -translate-x-1/2 translate-y-6 flex-col divide-y divide-gray-200 rounded border border-gray-200 bg-white shadow")},m(u,d){V(u,e,d),r&&r.m(e,null),S(e,t),s&&s.m(e,null),f=!0,o||(n=pe(ul.call(null,e,i[11])),o=!0)},p(u,[d]){u[0].conceptName!=null&&u[0].conceptNamespace!=null?r?(r.p(u,d),d&1&&N(r,1)):(r=lt(u),r.c(),N(r,1),r.m(e,t)):r&&(x(),A(r,1,1,()=>{r=null}),$()),u[3]!=null?s?(s.p(u,d),d&8&&N(s,1)):(s=it(u),s.c(),N(s,1),s.m(e,null)):s&&(x(),A(s,1,1,()=>{s=null}),$()),(!f||d&2&&l!==(l=u[1]!=null?`left: ${u[1].x}px; top: ${u[1].y}px`:""))&&P(e,"style",l)},i(u){f||(N(r),N(s),bt(()=>{f&&(a||(a=Fe(e,Xe,{duration:60},!0)),a.run(1))}),f=!0)},o(u){A(r),A(s),a||(a=Fe(e,Xe,{duration:60},!1)),a.run(0),f=!1},d(u){u&&c(e),r&&r.d(),s&&s.d(),u&&a&&a.end(),o=!1,n()}}}function bl(i,e,t){let{details:l}=e,{clickPosition:a}=e,{embeddings:f}=e,{addConceptLabel:o}=e,{findSimilar:n}=e,{addNotification:r}=e;const s=Vt();function u(h){if(!l.conceptName||!l.conceptNamespace)throw Error("Label could not be added, no active concept.");o(l.conceptNamespace,l.conceptName,l.text,h),r({kind:"success",title:`[${h===!0?"Positive":"Negative"}] Concept label added`,subtitle:qt(l.conceptNamespace,l.conceptName),message:l.text}),s("click")}const d=()=>u(!0),m=()=>u(!1),g=h=>{n&&n(h,l.text),s("click")},y=()=>s("close");return i.$$set=h=>{"details"in h&&t(0,l=h.details),"clickPosition"in h&&t(1,a=h.clickPosition),"embeddings"in h&&t(2,f=h.embeddings),"addConceptLabel"in h&&t(6,o=h.addConceptLabel),"findSimilar"in h&&t(3,n=h.findSimilar),"addNotification"in h&&t(7,r=h.addNotification)},[l,a,f,n,s,u,o,r,d,m,g,y]}class gl extends le{constructor(e){super(),ie(this,e,bl,_l,ne,{details:0,clickPosition:1,embeddings:2,addConceptLabel:6,findSimilar:3,addNotification:7})}}function vl(i,e){let t,l=e;i.addEventListener("click",o=>a(o));function a(o){l.disabled||(t=new gl({props:{details:l.details(),clickPosition:{x:o.clientX,y:o.clientY},embeddings:l.embeddings,addConceptLabel:l.addConceptLabel,addNotification:l.addNotification,findSimilar:l.findSimilar},target:document.body}),t.$on("close",f),t.$on("click",f))}function f(){t==null||t.$destroy(),t=void 0}return{update(o){l=o,t==null||t.$set({details:l.details()})},destroy(){f()}}}const He=.5,at=.3,pl=.8,st="#3366cc";function Ae(i){return`rgba(180,215,255,${i})`}function Ie(i){let e=0;if(i>He){const t=(i-He)/(1-He);e=at+t*(pl-at)}return Ae(e)}function ot(i,e,t){const l=i.slice();return l[7]=e[t],l}function rt(i,e){let t,l,a=e[7].info.name+"",f,o,n,r,s=ft(e[7])+"",u,d;return{key:i,first:null,c(){t=H("div"),l=H("div"),f=M(a),o=U(),n=H("div"),r=H("span"),u=M(s),d=U(),this.h()},l(m){t=L(m,"DIV",{class:!0});var g=w(t);l=L(g,"DIV",{class:!0});var y=w(l);f=z(y,a),y.forEach(c),o=X(g),n=L(g,"DIV",{class:!0});var h=w(n);r=L(h,"SPAN",{class:!0});var v=w(r);u=z(v,s),v.forEach(c),h.forEach(c),d=X(g),g.forEach(c),this.h()},h(){P(l,"class","named-value-name table-cell max-w-xs truncate pr-2 svelte-1689hje"),P(r,"class","px-1"),C(r,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Le(e[7].info.dtype)),te(r,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?Ie(e[7].value):""),P(n,"class","table-cell rounded text-right"),P(t,"class","table-row"),this.first=t},m(m,g){V(m,t,g),S(t,l),S(l,f),S(t,o),S(t,n),S(n,r),S(r,u),S(t,d)},p(m,g){e=m,g&1&&a!==(a=e[7].info.name+"")&&Y(f,a),g&1&&s!==(s=ft(e[7])+"")&&Y(u,s),g&1&&C(r,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Le(e[7].info.dtype)),g&1&&te(r,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?Ie(e[7].value):"")},d(m){m&&c(t)}}}function kl(i){let e,t,l=[],a=new Map,f,o=`${i[4]}px`,n=`${Math.min(i[1],i[3]-i[2]-20)}px`,r=i[0];const s=u=>u[7];for(let u=0;u<r.length;u+=1){let d=ot(i,r,u),m=s(d);a.set(m,l[u]=rt(m,d))}return{c(){e=H("div"),t=H("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=L(u,"DIV",{role:!0,class:!0});var d=w(e);t=L(d,"DIV",{class:!0});var m=w(t);for(let g=0;g<l.length;g+=1)l[g].l(m);m.forEach(c),d.forEach(c),this.h()},h(){P(t,"class","table border-spacing-y-2"),P(e,"role","tooltip"),P(e,"class","absolute max-w-fit -translate-y-full break-words border border-gray-300 bg-white px-2 shadow-md"),bt(()=>i[6].call(e)),C(e,"hidden",i[0].length===0),te(e,"top",o),te(e,"left",n)},m(u,d){V(u,e,d),S(e,t);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(t,null);f=Ht(e,i[6].bind(e))},p(u,[d]){d&1&&(r=u[0],l=gt(l,d,s,1,u,r,a,t,Lt,rt,null,ot)),d&1&&C(e,"hidden",u[0].length===0),d&6&&n!==(n=`${Math.min(u[1],u[3]-u[2]-20)}px`)&&te(e,"left",n)},i:j,o:j,d(u){u&&c(e);for(let d=0;d<l.length;d+=1)l[d].d();f()}}}function ft(i){return typeof i.value=="number"?i.value.toFixed(3):i.info.dtype==="string_span"?"true":i.value}function Sl(i,e,t){let{namedValues:l}=e,{x:a}=e,{y:f}=e;const o=window.innerWidth;let n=0;const r=f-1;function s(){n=this.clientWidth,t(2,n)}return i.$$set=u=>{"namedValues"in u&&t(0,l=u.namedValues),"x"in u&&t(1,a=u.x),"y"in u&&t(5,f=u.y)},[l,a,n,o,r,f,s]}class wl extends le{constructor(e){super(),ie(this,e,Sl,kl,ne,{namedValues:0,x:1,y:5})}}function El(i,e){let t,l=e;const a=()=>o();l.isHovered&&f();function f(){const n=l.namedValues.filter(m=>Array.from(l.spansHovered).some(g=>{const y=pt(g);return kt(m.specificPath.slice(0,y.length),y)}));l.itemScrollContainer!=null&&l.itemScrollContainer.addEventListener("scroll",a);const r=i.getBoundingClientRect(),s=window.getComputedStyle(i),u=parseInt(s.getPropertyValue("line-height")),d=r.height>u?r.x+i.offsetLeft||i.clientLeft:r.x;t=new wl({props:{namedValues:n,x:d,y:r.top},target:document.body})}function o(){var n;t==null||t.$destroy(),(n=l.itemScrollContainer)==null||n.removeEventListener("scroll",a)}return{update(n){o(),l=n,l.isHovered&&f()},destroy(){o()}}}const yl=500,ve=100;function Tl(i,e,t){const l=[],a=new Set;for(const f of i){let o=!1;const n=[];for(const T of f.paths)a.has(T)||(n.push(T),a.add(T));const r=[],s=[];let u=-1/0;for(const[T,I]of Object.entries(f.originalSpans)){const E=e[T],B=pt(T);if(!(E==null||E.length===0))for(const _ of I)for(const k of E){const F=k.path.slice(B.length),W=Dt(_,F);if(W==null)continue;const q=Se.value(W);if(q==null)continue;if(k.dtype==="float32"){const Z=Se.value(W);Z!=null&&(u=Math.max(u,Z))}const ue=we(Se.path(_)),de=!n.includes(ue),ce={value:q,info:k,specificPath:Se.path(W)};de||r.push(ce),s.push(ce),k.type==="concept_score"||k.type==="semantic_similarity"?q>.5&&(o=!0):o=!0}}const d=s.some(T=>T.info.type==="label"),m=s.some(T=>T.info.type==="leaf_span"),g=s.some(T=>T.info.type==="keyword"),y=s.some(T=>T.info.type==="metadata"&&!Le(T.info.dtype)),h=f.paths.some(T=>t.has(T)),v=h&&n.length>0&&Array.from(t).some(T=>n.includes(T));l.push({backgroundColor:Ie(u),isBlackBolded:g||y||m,isHighlightBolded:d,isShownSnippet:o,snippetScore:u,namedValues:r,paths:f.paths,text:f.text,snippetText:f.text,originalSpans:f.originalSpans,isHovered:h,isFirstHover:v})}return l}function Nl(i,e){var o,n,r;if(i=i.map(s=>{if(s.isShownSnippet&&s.text.length>ve){const u={...s,text:s.text.slice(0,ve),snippetText:s.snippetText.slice(0,ve)},d={...s,text:s.text.slice(ve),snippetText:s.snippetText.slice(ve),isShownSnippet:!1,namedValues:[]};return[u,d]}else return[s]}).flat(),e)return{snippetSpans:i.map(s=>({renderSpan:s,isShown:!0})),someSnippetsHidden:!1};const t=[];let l=0;for(const s of i)s.isShownSnippet&&(l+=s.text.length);const a=i.filter(s=>!s.isShownSnippet).sort((s,u)=>u.snippetScore-s.snippetScore);for(const s of a)if(s.isShownSnippet=!0,l+=s.text.length,l>yl)break;let f=!1;for(const[s,u]of i.entries())if(u.isShownSnippet)t.push({renderSpan:u,isShown:!0});else{const d=((o=i[s+1])==null?void 0:o.isShownSnippet)===!0,m=((n=i[s-1])==null?void 0:n.isShownSnippet)===!0,g=((r=t[t.length-1])==null?void 0:r.isShown)===!0;t.push({renderSpan:u,isShown:!1,isEllipsis:(d||m)&&g,hasNewline:u.text.includes(`
`)}),f=!0}return{snippetSpans:t,someSnippetsHidden:f}}function ut(i,e,t){const l=i.slice();l[34]=e[t];const a=l[34].renderSpan;return l[35]=a,l}function Cl(i){let e,t,l,a,f,o=i[34].hasNewline&&dt();return{c(){e=H("span"),t=M("..."),o&&o.c(),l=Ee(),this.h()},l(n){e=L(n,"SPAN",{class:!0});var r=w(e);t=z(r,"..."),r.forEach(c),o&&o.l(n),l=Ee(),this.h()},h(){P(e,"class","highlight-span text-sm leading-5 svelte-8ox5pu")},m(n,r){V(n,e,r),S(e,t),o&&o.m(n,r),V(n,l,r),a||(f=pe(vt.call(null,e,{text:`Some text was hidden to improve readability. 
Click "Show all" to show the entire document.`})),a=!0)},p(n,r){n[34].hasNewline?o||(o=dt(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},i:j,o:j,d(n){n&&c(e),o&&o.d(n),n&&c(l),a=!1,f()}}}function Pl(i){let e,t,l,a,f,o,n,r;const s=[Bl,Vl],u=[];function d(h,v){return h[1]?0:1}t=d(i),l=u[t]=s[t](i);function m(){return i[27](i[35])}function g(){return i[28](i[35])}function y(){return i[29](i[35])}return{c(){e=H("span"),l.c(),this.h()},l(h){e=L(h,"SPAN",{class:!0});var v=w(e);l.l(v),v.forEach(c),this.h()},h(){P(e,"class","hover:cursor-poiner highlight-span break-words text-sm leading-5 svelte-8ox5pu"),C(e,"hover:cursor-pointer",i[0].length>0),C(e,"font-bold",i[35].isBlackBolded),C(e,"font-medium",i[35].isHighlightBolded&&!i[35].isBlackBolded),te(e,"color",i[35].isHighlightBolded&&!i[35].isBlackBolded?st:""),te(e,"background-color",i[35].isHovered?Ae(mt):i[35].backgroundColor)},m(h,v){V(h,e,v),u[t].m(e,null),o=!0,n||(r=[pe(a=El.call(null,e,{namedValues:i[35].namedValues,isHovered:i[35].isFirstHover,spansHovered:i[5],itemScrollContainer:i[9]})),pe(f=vl.call(null,e,{details:m,findSimilar:i[4]!=null?i[16]:null,embeddings:i[2],addConceptLabel:i[14],addNotification:i[17]!=null?i[17].addNotification:_t,disabled:i[35].paths.length===0||i[2].length===0})),O(e,"mouseenter",g),O(e,"mouseleave",y)],n=!0)},p(h,v){i=h;let T=t;t=d(i),t===T?u[t].p(i,v):(x(),A(u[T],1,1,()=>{u[T]=null}),$(),l=u[t],l?l.p(i,v):(l=u[t]=s[t](i),l.c()),N(l,1),l.m(e,null)),a&&je(a.update)&&v[0]&800&&a.update.call(null,{namedValues:i[35].namedValues,isHovered:i[35].isFirstHover,spansHovered:i[5],itemScrollContainer:i[9]}),f&&je(f.update)&&v[0]&276&&f.update.call(null,{details:m,findSimilar:i[4]!=null?i[16]:null,embeddings:i[2],addConceptLabel:i[14],addNotification:i[17]!=null?i[17].addNotification:_t,disabled:i[35].paths.length===0||i[2].length===0}),(!o||v[0]&1)&&C(e,"hover:cursor-pointer",i[0].length>0),(!o||v[0]&256)&&C(e,"font-bold",i[35].isBlackBolded),(!o||v[0]&256)&&C(e,"font-medium",i[35].isHighlightBolded&&!i[35].isBlackBolded),v[0]&256&&te(e,"color",i[35].isHighlightBolded&&!i[35].isBlackBolded?st:""),v[0]&256&&te(e,"background-color",i[35].isHovered?Ae(mt):i[35].backgroundColor)},i(h){o||(N(l),o=!0)},o(h){A(l),o=!1},d(h){h&&c(e),u[t].d(),n=!1,Me(r)}}}function dt(i){let e,t;return{c(){e=H("span"),t=H("br")},l(l){e=L(l,"SPAN",{});var a=w(e);t=L(a,"BR",{}),a.forEach(c)},m(l,a){V(l,e,a),S(e,t)},d(l){l&&c(e)}}}function Vl(i){let e=i[35].snippetText+"",t;return{c(){t=M(e)},l(l){t=z(l,e)},m(l,a){V(l,t,a)},p(l,a){a[0]&256&&e!==(e=l[35].snippetText+"")&&Y(t,e)},i:j,o:j,d(l){l&&c(t)}}}function Bl(i){let e,t;return e=new Yt({props:{source:i[35].snippetText}}),{c(){ae(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},p(l,a){const f={};a[0]&256&&(f.source=l[35].snippetText),e.$set(f)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function ct(i){let e,t,l,a;const f=[Pl,Cl],o=[];function n(r,s){return r[34].isShown?0:r[34].isEllipsis?1:-1}return~(e=n(i))&&(t=o[e]=f[e](i)),{c(){t&&t.c(),l=Ee()},l(r){t&&t.l(r),l=Ee()},m(r,s){~e&&o[e].m(r,s),V(r,l,s),a=!0},p(r,s){let u=e;e=n(r),e===u?~e&&o[e].p(r,s):(t&&(x(),A(o[u],1,1,()=>{o[u]=null}),$()),~e?(t=o[e],t?t.p(r,s):(t=o[e]=f[e](r),t.c()),N(t,1),t.m(l.parentNode,l)):t=null)},i(r){a||(N(t),a=!0)},o(r){A(t),a=!1},d(r){~e&&o[e].d(r),r&&c(l)}}}function ht(i){let e,t,l,a,f;const o=[Ll,Hl],n=[];function r(s,u){return s[6]?1:0}return l=r(i),a=n[l]=o[l](i),{c(){e=H("div"),t=H("div"),a.c(),this.h()},l(s){e=L(s,"DIV",{class:!0});var u=w(e);t=L(u,"DIV",{class:!0});var d=w(t);a.l(d),d.forEach(c),u.forEach(c),this.h()},h(){P(t,"class","w-30 mt-2 rounded border border-neutral-300 text-center"),P(e,"class","flex flex-row justify-center")},m(s,u){V(s,e,u),S(e,t),n[l].m(t,null),f=!0},p(s,u){let d=l;l=r(s),l===d?n[l].p(s,u):(x(),A(n[d],1,1,()=>{n[d]=null}),$(),a=n[l],a?a.p(s,u):(a=n[l]=o[l](s),a.c()),N(a,1),a.m(t,null))},i(s){f||(N(a),f=!0)},o(s){A(a),f=!1},d(s){s&&c(e),n[l].d()}}}function Hl(i){let e,t;return e=new St({props:{size:"small",class:"w-full",kind:"ghost",icon:il,$$slots:{default:[Al]},$$scope:{ctx:i}}}),e.$on("click",i[31]),{c(){ae(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},p(l,a){const f={};a[1]&128&&(f.$$scope={dirty:a,ctx:l}),e.$set(f)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function Ll(i){let e,t;return e=new St({props:{size:"small",class:"w-full",kind:"ghost",icon:el,$$slots:{default:[Il]},$$scope:{ctx:i}}}),e.$on("click",i[30]),{c(){ae(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,a){oe(e,l,a),t=!0},p(l,a){const f={};a[1]&128&&(f.$$scope={dirty:a,ctx:l}),e.$set(f)},i(l){t||(N(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){re(e,l)}}}function Al(i){let e;return{c(){e=M("Hide excess")},l(t){e=z(t,"Hide excess")},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function Il(i){let e;return{c(){e=M("Show all")},l(t){e=z(t,"Show all")},m(t,l){V(t,e,l)},d(t){t&&c(e)}}}function Ml(i){let e,t,l,a=i[8],f=[];for(let r=0;r<a.length;r+=1)f[r]=ct(ut(i,a,r));const o=r=>A(f[r],1,1,()=>{f[r]=null});let n=(i[7]||i[6])&&ht(i);return{c(){e=H("div");for(let r=0;r<f.length;r+=1)f[r].c();t=U(),n&&n.c(),this.h()},l(r){e=L(r,"DIV",{class:!0});var s=w(e);for(let u=0;u<f.length;u+=1)f[u].l(s);t=X(s),n&&n.l(s),s.forEach(c),this.h()},h(){P(e,"class","relative overflow-x-hidden text-ellipsis whitespace-break-spaces py-4")},m(r,s){V(r,e,s);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(e,null);S(e,t),n&&n.m(e,null),l=!0},p(r,s){if(s[0]&220983){a=r[8];let u;for(u=0;u<a.length;u+=1){const d=ut(r,a,u);f[u]?(f[u].p(d,s),N(f[u],1)):(f[u]=ct(d),f[u].c(),N(f[u],1),f[u].m(e,t))}for(x(),u=a.length;u<f.length;u+=1)o(u);$()}r[7]||r[6]?n?(n.p(r,s),s[0]&192&&N(n,1)):(n=ht(r),n.c(),N(n,1),n.m(e,null)):n&&(x(),A(n,1,1,()=>{n=null}),$())},i(r){if(!l){for(let s=0;s<a.length;s+=1)N(f[s]);N(n),l=!0}},o(r){f=f.filter(Boolean);for(let s=0;s<f.length;s+=1)A(f[s]);A(n),l=!1},d(r){r&&c(e),At(f,r),n&&n.d()}}}const mt=.9,_t=()=>null;function zl(i,e,t){let l,a,f,o,n,r,s=j,u=()=>(s(),s=Mt(E,p=>t(26,r=p)),E),d,m;i.$$.on_destroy.push(()=>s());let{text:g}=e,{row:y}=e,{spanPaths:h}=e,{valuePaths:v}=e,{markdown:T=!1}=e,{embeddings:I}=e,{datasetViewStore:E=void 0}=e;u();let{datasetStore:B=void 0}=e,_={},k=new Set;const F=p=>{p.paths.forEach(D=>k.add(D)),t(5,k)},W=p=>{p.paths.forEach(D=>k.delete(D)),t(5,k)};let q={};const ue=p=>{const _e={conceptName:null,conceptNamespace:null,text:f.filter(be=>be.paths.some(Be=>((p==null?void 0:p.paths)||[]).some(ge=>kt(ge,Be)))).map(be=>be.text).join("")};for(const be of Object.keys(p.originalSpans)){const Be=(_[be]||[]).filter(ge=>ge.type==="concept_score");for(const ge of Be){const Re=ge.signal;_e.conceptName=Re.concept_name,_e.conceptNamespace=Re.namespace;break}}return _e},de=Ot();Ye(i,de,p=>t(33,d=p));const ce=(p,D,ze,_e)=>{if(!D||!p)throw Error("Label could not be added, no active concept.");d.mutate([p,D,{insert:[{text:ze,label:_e}]}])};let Z=!1,ke=It(jt);Ye(i,ke,p=>t(9,m=p));let me;const ye=(p,D)=>{E==null||me==null||E.addSearch({path:[we(me)],type:"semantic",query:D,embedding:p})},Te=Ut(),Ne=p=>ue(p),Ce=p=>F(p),Pe=p=>W(p),Ve=()=>t(6,Z=!0),b=()=>t(6,Z=!1);return i.$$set=p=>{"text"in p&&t(18,g=p.text),"row"in p&&t(19,y=p.row),"spanPaths"in p&&t(0,h=p.spanPaths),"valuePaths"in p&&t(20,v=p.valuePaths),"markdown"in p&&t(1,T=p.markdown),"embeddings"in p&&t(2,I=p.embeddings),"datasetViewStore"in p&&u(t(3,E=p.datasetViewStore)),"datasetStore"in p&&t(4,B=p.datasetStore)},i.$$.update=()=>{if(i.$$.dirty[0]&524289&&t(25,l=Object.fromEntries(h.map(p=>[we(p),Ft(y,p)]))),i.$$.dirty[0]&3145728){t(21,_={});for(const p of v){const D=we(p.spanPath);_[D]==null&&t(21,_[D]=[],_),_[D].push(p)}}if(i.$$.dirty[0]&33816576&&t(24,a=Xt(g,l)),i.$$.dirty[0]&18874400&&t(23,f=Tl(a,_,k)),i.$$.dirty[0]&20971520){t(22,q={});for(const p of a)for(const D of p.paths)t(22,q[D]=q[D]||[],q),q[D].push(p)}i.$$.dirty[0]&8388672&&t(8,{snippetSpans:o,someSnippetsHidden:n}=Nl(f,Z),o,(t(7,n),t(23,f),t(6,Z),t(24,a),t(21,_),t(5,k),t(18,g),t(25,l),t(20,v),t(0,h),t(19,y))),i.$$.dirty[0]&67108880&&r!=null&&B!=null&&(me=Wt(r,B))},[h,T,I,E,B,k,Z,n,o,m,F,W,ue,de,ce,ke,ye,Te,g,y,v,_,q,f,a,l,r,Ne,Ce,Pe,Ve,b]}class jl extends le{constructor(e){super(),ie(this,e,zl,Ml,ne,{text:18,row:19,spanPaths:0,valuePaths:20,markdown:1,embeddings:2,datasetViewStore:3,datasetStore:4},null,[-1,-1])}}export{ml as E,jl as S,Yl as T,fl as a,sl as b};
