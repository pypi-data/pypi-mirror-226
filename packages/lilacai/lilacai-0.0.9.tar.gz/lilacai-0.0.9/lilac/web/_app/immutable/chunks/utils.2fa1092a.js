import{aq as p}from"./Commands.543935b9.js";import{P as h,an as d,aj as y}from"./index.b333a928.js";import{w as S}from"./index.2b0dd2f8.js";function u(n){return!!(n&&typeof n=="object"&&!Array.isArray(n))}function a(n,...t){if(!t.length)return n;const o=t.shift();if(u(n)&&u(o))for(const s in o){const e=n[s],i=o[s];u(i)&&u(e)?(e||Object.assign(n,{[s]:{}}),a(e,i)):e||Object.assign(n,{[s]:i})}return a(n,...t)}const c="URL_HASH_CONTEXT";function k(){const{subscribe:n,update:t}=S({hash:"",page:null,identifier:null,hashState:null});return{subscribe:n,setHash(o,s){t(e=>{const[i,...r]=s.slice(1).split("&");return e.page=o,e.hash=s,e.identifier=i,e.hashState=r.join("&"),e})}}}function b(n,t){const o=`#${n}`+(t!=""?`&${t}`:"");o!=location.hash&&history.pushState(null,"",o)}function J(n){h(c,n)}function N(){if(!d(c))throw new Error("UrlHashStoreContext not found");return y(c)}function l(n,t){const o=Object.keys(n);for(const s of o){const e=n[s],i=t[s],r=JSON.stringify(e),f=JSON.stringify(i);r==f&&delete n[s],typeof e=="object"&&i!=null&&e!=null&&l(e,i)}}function O(n,t){n=JSON.parse(JSON.stringify(n)),l(n,t);const o=[];for(const s of Object.keys(n)){const e=JSON.stringify(n[s]);o.push([s,e])}return o.map(([s,e])=>`${s}=${encodeURIComponent(e)}`).join("&")}function U(n,t){if(t=JSON.parse(JSON.stringify(t)),n==null||n=="")return t;const o={},s=(decodeURIComponent(n)||"").split("&");for(const e of s){if(e==null)continue;const[i,r]=e.split("=");o[i]=JSON.parse(r)}return a(t,o)}function H(n,t,o,s,e,i){let r=!1;s.subscribe(f=>{f.page===n&&f.identifier===t&&(r=!0,o.set(e(f.hashState)))}),o.subscribe(f=>{f!=null&&(r||b(t,i(f)),r=!1)})}function x(n){return n!=null}function $(n,t){return`${n}/${t}`}function V(n,t){return`/concepts#${$(n,t)}`}function j(n,t){return`${n}/${t}`}function L(n,t,o){let s=null;if(o!=null){const e=p(n,t);s=O(o,e)}return`/datasets#${j(n,t)}${s!=null?`&${s}`:""}`}function w(n){return`/signals#${n}`}export{J as a,k as b,V as c,$ as d,j as e,L as f,N as g,O as h,U as i,x as n,H as p,w as s};
