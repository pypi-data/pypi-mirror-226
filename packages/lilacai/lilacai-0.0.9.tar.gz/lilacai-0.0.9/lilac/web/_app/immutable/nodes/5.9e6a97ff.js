import{S as R,i as j,s as F,y as T,z as E,A as S,g as _,d as k,B,O as A,k as q,a as O,l as H,m as I,c as V,h as a,n as y,b as p,a0 as G,v as D,f as P,e as L,q as d,r as $,u as w}from"../chunks/index.b7741aa8.js";import{g as J}from"../chunks/navigation.079c90e4.js";import{P as K,b as Q}from"../chunks/Page.db7c5102.js";import{q as X,B as Y}from"../chunks/Commands.5462b365.js";import{g as Z,f as x}from"../chunks/utils.9aeb0141.js";import{A as ee}from"../chunks/ArrowUpRight.0bb31a07.js";import{T as M}from"../chunks/ToastNotification.72480eaf.js";function U(o){let l,r;return l=new M({props:{hideCloseButton:!0,kind:"warning",fullWidth:!0,lowContrast:!0,title:"Unknown task",caption:"This could be from a stale link, or a new server instance."}}),{c(){T(l.$$.fragment)},l(s){E(l.$$.fragment,s)},m(s,t){S(l,s,t),r=!0},i(s){r||(_(l.$$.fragment,s),r=!0)},o(s){k(l.$$.fragment,s),r=!1},d(s){B(l,s)}}}function z(o){let l,r,s,t,e,i,n;function h(f,m){if(f[0].status=="pending")return se;if(f[0].status==="completed")return le;if(f[0].status==="error")return te}let b=h(o),c=b&&b(o),u=o[0].status!="error"&&W(o);const C=[ie,re],g=[];function v(f,m){return f[0].status=="completed"?0:f[0].status==="error"?1:-1}return~(t=v(o))&&(e=g[t]=C[t](o)),{c(){l=q("h3"),c&&c.c(),r=O(),u&&u.c(),s=O(),e&&e.c(),i=L()},l(f){l=H(f,"H3",{});var m=I(l);c&&c.l(m),m.forEach(a),r=V(f),u&&u.l(f),s=V(f),e&&e.l(f),i=L()},m(f,m){p(f,l,m),c&&c.m(l,null),p(f,r,m),u&&u.m(f,m),p(f,s,m),~t&&g[t].m(f,m),p(f,i,m),n=!0},p(f,m){b===(b=h(f))&&c?c.p(f,m):(c&&c.d(1),c=b&&b(f),c&&(c.c(),c.m(l,null))),f[0].status!="error"?u?(u.p(f,m),m&1&&_(u,1)):(u=W(f),u.c(),_(u,1),u.m(s.parentNode,s)):u&&(D(),k(u,1,1,()=>{u=null}),P());let N=t;t=v(f),t===N?~t&&g[t].p(f,m):(e&&(D(),k(g[N],1,1,()=>{g[N]=null}),P()),~t?(e=g[t],e?e.p(f,m):(e=g[t]=C[t](f),e.c()),_(e,1),e.m(i.parentNode,i)):e=null)},i(f){n||(_(u),_(e),n=!0)},o(f){k(u),k(e),n=!1},d(f){f&&a(l),c&&c.d(),f&&a(r),u&&u.d(f),f&&a(s),~t&&g[t].d(f),f&&a(i)}}}function te(o){let l,r,s,t;return{c(){l=d("Error loading "),r=d(o[2]),s=d("/"),t=d(o[3])},l(e){l=$(e,"Error loading "),r=$(e,o[2]),s=$(e,"/"),t=$(e,o[3])},m(e,i){p(e,l,i),p(e,r,i),p(e,s,i),p(e,t,i)},p(e,i){i&4&&w(r,e[2]),i&8&&w(t,e[3])},d(e){e&&a(l),e&&a(r),e&&a(s),e&&a(t)}}}function le(o){let l,r,s,t;return{c(){l=d("Done loading "),r=d(o[2]),s=d("/"),t=d(o[3])},l(e){l=$(e,"Done loading "),r=$(e,o[2]),s=$(e,"/"),t=$(e,o[3])},m(e,i){p(e,l,i),p(e,r,i),p(e,s,i),p(e,t,i)},p(e,i){i&4&&w(r,e[2]),i&8&&w(t,e[3])},d(e){e&&a(l),e&&a(r),e&&a(s),e&&a(t)}}}function se(o){let l,r,s,t,e;return{c(){l=d("Loading "),r=d(o[2]),s=d("/"),t=d(o[3]),e=d("...")},l(i){l=$(i,"Loading "),r=$(i,o[2]),s=$(i,"/"),t=$(i,o[3]),e=$(i,"...")},m(i,n){p(i,l,n),p(i,r,n),p(i,s,n),p(i,t,n),p(i,e,n)},p(i,n){n&4&&w(r,i[2]),n&8&&w(t,i[3])},d(i){i&&a(l),i&&a(r),i&&a(s),i&&a(t),i&&a(e)}}}function W(o){let l,r,s;return r=new Q({props:{labelText:o[0].message||"",helperText:o[0].status!="completed"?o[0].details:"",value:o[0].status==="completed"?1:o[4],max:1,status:o[7][o[0].status]}}),{c(){l=q("div"),T(r.$$.fragment),this.h()},l(t){l=H(t,"DIV",{class:!0});var e=I(l);E(r.$$.fragment,e),e.forEach(a),this.h()},h(){y(l,"class","mt-6")},m(t,e){p(t,l,e),S(r,l,null),s=!0},p(t,e){const i={};e&1&&(i.labelText=t[0].message||""),e&1&&(i.helperText=t[0].status!="completed"?t[0].details:""),e&17&&(i.value=t[0].status==="completed"?1:t[4]),e&1&&(i.status=t[7][t[0].status]),r.$set(i)},i(t){s||(_(r.$$.fragment,t),s=!0)},o(t){k(r.$$.fragment,t),s=!1},d(t){t&&a(l),B(r)}}}function re(o){let l,r;return l=new M({props:{hideCloseButton:!0,kind:"error",fullWidth:!0,lowContrast:!0,title:"Error loading dataset",caption:o[0].error}}),{c(){T(l.$$.fragment)},l(s){E(l.$$.fragment,s)},m(s,t){S(l,s,t),r=!0},p(s,t){const e={};t&1&&(e.caption=s[0].error),l.$set(e)},i(s){r||(_(l.$$.fragment,s),r=!0)},o(s){k(l.$$.fragment,s),r=!1},d(s){B(l,s)}}}function ie(o){let l,r,s;return r=new Y({props:{size:"xl",icon:ee,iconDescription:"Open dataset",$$slots:{default:[oe]},$$scope:{ctx:o}}}),r.$on("click",o[10]),{c(){l=q("div"),T(r.$$.fragment),this.h()},l(t){l=H(t,"DIV",{class:!0});var e=I(l);E(r.$$.fragment,e),e.forEach(a),this.h()},h(){y(l,"class","dataset-link mt-8")},m(t,e){p(t,l,e),S(r,l,null),s=!0},p(t,e){const i={};e&2048&&(i.$$scope={dirty:e,ctx:t}),r.$set(i)},i(t){s||(_(r.$$.fragment,t),s=!0)},o(t){k(r.$$.fragment,t),s=!1},d(t){t&&a(l),B(r)}}}function oe(o){let l;return{c(){l=d("Open dataset")},l(r){l=$(r,"Open dataset")},m(r,s){p(r,l,s)},d(r){r&&a(l)}}}function fe(o){let l,r,s,t=o[1].isSuccess&&o[0]==null&&U(),e=o[0]&&z(o);return{c(){l=q("div"),t&&t.c(),r=O(),e&&e.c(),this.h()},l(i){l=H(i,"DIV",{class:!0});var n=I(l);t&&t.l(n),r=V(n),e&&e.l(n),n.forEach(a),this.h()},h(){y(l,"class","w-full p-8")},m(i,n){p(i,l,n),t&&t.m(l,null),G(l,r),e&&e.m(l,null),s=!0},p(i,n){i[1].isSuccess&&i[0]==null?t?n&3&&_(t,1):(t=U(),t.c(),_(t,1),t.m(l,r)):t&&(D(),k(t,1,1,()=>{t=null}),P()),i[0]?e?(e.p(i,n),n&1&&_(e,1)):(e=z(i),e.c(),_(e,1),e.m(l,null)):e&&(D(),k(e,1,1,()=>{e=null}),P())},i(i){s||(_(t),_(e),s=!0)},o(i){k(t),k(e),s=!1},d(i){i&&a(l),t&&t.d(),e&&e.d()}}}function ne(o){let l,r;return l=new K({props:{$$slots:{default:[fe]},$$scope:{ctx:o}}}),{c(){T(l.$$.fragment)},l(s){E(l.$$.fragment,s)},m(s,t){S(l,s,t),r=!0},p(s,[t]){const e={};t&2079&&(e.$$scope={dirty:t,ctx:s}),l.$set(e)},i(s){r||(_(l.$$.fragment,s),r=!0)},o(s){k(l.$$.fragment,s),r=!1},d(s){B(l,s)}}}function ae(o,l,r){let s,t,e,i,n,h,b;const c=Z();A(o,c,v=>r(9,i=v));const u=X();A(o,u,v=>r(1,e=v));const C={pending:"active",completed:"finished",error:"error"},g=()=>J(x(n,h));return o.$$.update=()=>{o.$$.dirty&512&&i.page==="datasets/loading"&&i.identifier!=null&&r(2,[n,h,b]=i.identifier.split("/"),n,(r(3,h),r(9,i)),(r(8,b),r(9,i))),o.$$.dirty&258&&r(0,s=b!=null&&e.data!=null?e.data.tasks[b]:null),o.$$.dirty&1&&r(4,t=(s==null?void 0:s.step_progress)==null?void 0:s.step_progress)},[s,e,n,h,t,c,u,C,b,i,g]}class ke extends R{constructor(l){super(),j(this,l,ae,ne,F,{})}}export{ke as component};
