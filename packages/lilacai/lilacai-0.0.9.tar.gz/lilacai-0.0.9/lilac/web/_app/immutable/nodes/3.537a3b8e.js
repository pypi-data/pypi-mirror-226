import{S as he,i as be,s as ge,y as q,z as A,A as H,g as k,d as C,B as L,R as Z,k as S,a as O,e as U,l as V,m as D,h,c as R,n as T,b as y,J as E,v as z,f as M,a1 as Y,a5 as $e,q as N,r as P,u as K,a3 as ie,a6 as fe,a7 as ve,H as x,K as ke,a8 as Ce,P as we}from"../chunks/index.0caa4e13.js";import{g as ye}from"../chunks/navigation.ef3253b6.js";import{P as Ee,q as Ie,d as Se,a as Ve,h as ue}from"../chunks/Page.41f539ef.js";import{g as De,C as Te,t as Be,a as Ne,I as te,d as Pe,b as qe,c as Ae,V as He,T as Le}from"../chunks/ConceptView.cddc5a9d.js";import{a as Oe,B as Re}from"../chunks/taskMonitoringStore.1f1b6bec.js";import{g as Ue,M as je}from"../chunks/urlHashStore.65424eb1.js";import{c as ee,S as pe}from"../chunks/utils.1c6f7d43.js";function le(o,t,l){const e=o.slice();return e[3]=t[l].namespace,e[14]=t[l].concepts,e}function ne(o,t,l){const e=o.slice();e[24]=t[l];const n=e[24].acls.write;return e[25]=n,e}function ze(o){let t,l,e=o[7],n=[];for(let c=0;c<e.length;c+=1)n[c]=se(le(o,e,c));const f=c=>C(n[c],1,1,()=>{n[c]=null});return{c(){for(let c=0;c<n.length;c+=1)n[c].c();t=U()},l(c){for(let u=0;u<n.length;u+=1)n[u].l(c);t=U()},m(c,u){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(c,u);y(c,t,u),l=!0},p(c,u){if(u&211){e=c[7];let a;for(a=0;a<e.length;a+=1){const d=le(c,e,a);n[a]?(n[a].p(d,u),k(n[a],1)):(n[a]=se(d),n[a].c(),k(n[a],1),n[a].m(t.parentNode,t))}for(z(),a=e.length;a<n.length;a+=1)f(a);M()}},i(c){if(!l){for(let u=0;u<e.length;u+=1)k(n[u]);l=!0}},o(c){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)C(n[u]);l=!1},d(c){ie(n,c),c&&h(t)}}}function Me(o){let t,l;return t=new pe({}),{c(){q(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,n){H(t,e,n),l=!0},p:Y,i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){C(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function Ke(o){let t=o[3]+"",l;return{c(){l=N(t)},l(e){l=P(e,t)},m(e,n){y(e,l,n)},p(e,n){n&128&&t!==(t=e[3]+"")&&K(l,t)},d(e){e&&h(l)}}}function Ge(o){let t,l;return{c(){t=N(o[6]),l=N("'s concepts")},l(e){t=P(e,o[6]),l=P(e,"'s concepts")},m(e,n){y(e,t,n),y(e,l,n)},p(e,n){n&64&&K(t,e[6])},d(e){e&&h(t),e&&h(l)}}}function oe(o){let t,l;return t=new He({}),{c(){q(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,n){H(t,e,n),l=!0},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){C(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function re(o){let t,l,e,n=o[24].name+"",f,c,u,a,d,b,v,g,_,p,m,$;b=new Le({props:{size:16}});function s(){return o[18](o[24])}return{c(){t=S("div"),l=S("a"),e=S("span"),f=N(n),u=O(),a=S("div"),d=S("button"),q(b.$$.fragment),_=O(),this.h()},l(r){t=V(r,"DIV",{class:!0});var i=D(t);l=V(i,"A",{href:!0,class:!0});var I=D(l);e=V(I,"SPAN",{});var B=D(e);f=P(B,n),B.forEach(h),I.forEach(h),u=R(i),a=V(i,"DIV",{});var j=D(a);d=V(j,"BUTTON",{title:!0,class:!0});var F=D(d);A(b.$$.fragment,F),F.forEach(h),j.forEach(h),_=R(i),i.forEach(h),this.h()},h(){T(l,"href",c=ee(o[24].namespace,o[24].name)),T(l,"class","flex w-full flex-row items-center whitespace-pre px-8 py-2"),T(d,"title","Remove concept"),d.disabled=v=!o[25],T(d,"class","p-3 opacity-50 hover:text-red-400 hover:opacity-100"),x(a,"opacity-40",!o[25]),T(t,"class","flex justify-between border-b border-gray-200 hover:bg-gray-100"),x(t,"bg-blue-100",o[24].name===o[0])},m(r,i){y(r,t,i),E(t,l),E(l,e),E(e,f),E(t,u),E(t,a),E(a,d),H(b,d,null),E(t,_),p=!0,m||($=[ke(d,"click",s),fe(g=ue.call(null,a,{text:o[25]?"":"User does not have access to delete this concept."}))],m=!0)},p(r,i){o=r,(!p||i&128)&&n!==(n=o[24].name+"")&&K(f,n),(!p||i&128&&c!==(c=ee(o[24].namespace,o[24].name)))&&T(l,"href",c),(!p||i&128&&v!==(v=!o[25]))&&(d.disabled=v),g&&Ce(g.update)&&i&128&&g.update.call(null,{text:o[25]?"":"User does not have access to delete this concept."}),(!p||i&128)&&x(a,"opacity-40",!o[25]),(!p||i&129)&&x(t,"bg-blue-100",o[24].name===o[0])},i(r){p||(k(b.$$.fragment,r),p=!0)},o(r){C(b.$$.fragment,r),p=!1},d(r){r&&h(t),L(b),m=!1,we($)}}}function se(o){let t,l,e,n,f,c,u,a,d;function b(s,r){return s[3]===s[1]?Ge:Ke}let v=b(o),g=v(o),_=o[3]===o[1]&&oe(),p=o[14],m=[];for(let s=0;s<p.length;s+=1)m[s]=re(ne(o,p,s));const $=s=>C(m[s],1,1,()=>{m[s]=null});return{c(){t=S("div"),l=S("div"),g.c(),e=O(),n=S("div"),_&&_.c(),f=O();for(let s=0;s<m.length;s+=1)m[s].c();c=U(),this.h()},l(s){t=V(s,"DIV",{class:!0});var r=D(t);l=V(r,"DIV",{});var i=D(l);g.l(i),i.forEach(h),e=R(r),n=V(r,"DIV",{class:!0});var I=D(n);_&&_.l(I),I.forEach(h),r.forEach(h),f=R(s);for(let B=0;B<m.length;B+=1)m[B].l(s);c=U(),this.h()},h(){T(n,"class","opacity-70"),T(t,"class","flex flex-row justify-between border-b border-gray-200 bg-neutral-50 p-3 text-sm opacity-80 hover:bg-gray-100")},m(s,r){y(s,t,r),E(t,l),g.m(l,null),E(t,e),E(t,n),_&&_.m(n,null),y(s,f,r);for(let i=0;i<m.length;i+=1)m[i]&&m[i].m(s,r);y(s,c,r),u=!0,a||(d=fe(ue.call(null,n,{text:"Your concepts are only visible to you when logged in with Google."})),a=!0)},p(s,r){if(v===(v=b(s))&&g?g.p(s,r):(g.d(1),g=v(s),g&&(g.c(),g.m(l,null))),s[3]===s[1]?_?r&130&&k(_,1):(_=oe(),_.c(),k(_,1),_.m(n,null)):_&&(z(),C(_,1,1,()=>{_=null}),M()),r&145){p=s[14];let i;for(i=0;i<p.length;i+=1){const I=ne(s,p,i);m[i]?(m[i].p(I,r),k(m[i],1)):(m[i]=re(I),m[i].c(),k(m[i],1),m[i].m(c.parentNode,c))}for(z(),i=p.length;i<m.length;i+=1)$(i);M()}},i(s){if(!u){k(_);for(let r=0;r<p.length;r+=1)k(m[r]);u=!0}},o(s){C(_),m=m.filter(Boolean);for(let r=0;r<m.length;r+=1)C(m[r]);u=!1},d(s){s&&h(t),g.d(),_&&_.d(),s&&h(f),ie(m,s),s&&h(c),a=!1,d()}}}function ae(o){let t,l,e,n;const f=[Fe,Ye,Je],c=[];function u(a,d){var b,v,g;return(b=a[9])!=null&&b.isLoading?0:(v=a[9])!=null&&v.isError?1:(g=a[9])!=null&&g.isSuccess?2:-1}return~(t=u(o))&&(l=c[t]=f[t](o)),{c(){l&&l.c(),e=U()},l(a){l&&l.l(a),e=U()},m(a,d){~t&&c[t].m(a,d),y(a,e,d),n=!0},p(a,d){let b=t;t=u(a),t===b?~t&&c[t].p(a,d):(l&&(z(),C(c[b],1,1,()=>{c[b]=null}),M()),~t?(l=c[t],l?l.p(a,d):(l=c[t]=f[t](a),l.c()),k(l,1),l.m(e.parentNode,e)):l=null)},i(a){n||(k(l),n=!0)},o(a){C(l),n=!1},d(a){~t&&c[t].d(a),a&&h(e)}}}function Je(o){let t,l;return t=new qe({props:{concept:o[9].data}}),{c(){q(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,n){H(t,e,n),l=!0},p(e,n){const f={};n&512&&(f.concept=e[9].data),t.$set(f)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){C(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function Ye(o){let t,l=o[9].error+"",e;return{c(){t=S("p"),e=N(l)},l(n){t=V(n,"P",{});var f=D(t);e=P(f,l),f.forEach(h)},m(n,f){y(n,t,f),E(t,e)},p(n,f){f&512&&l!==(l=n[9].error+"")&&K(e,l)},i:Y,o:Y,d(n){n&&h(t)}}}function Fe(o){let t,l;return t=new pe({}),{c(){q(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,n){H(t,e,n),l=!0},p:Y,i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){C(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function ce(o){let t,l;return t=new je({props:{danger:!0,open:!0,modalHeading:"Delete concept",primaryButtonText:"Delete",primaryButtonIcon:o[8].isLoading?te:void 0,secondaryButtonText:"Cancel",$$slots:{default:[Qe]},$$scope:{ctx:o}}}),t.$on("click:button--secondary",o[19]),t.$on("close",o[20]),t.$on("submit",o[21]),{c(){q(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,n){H(t,e,n),l=!0},p(e,n){const f={};n&256&&(f.primaryButtonIcon=e[8].isLoading?te:void 0),n&268435472&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){C(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function Qe(o){let t,l,e,n=o[4].namespace+"",f,c,u=o[4].name+"",a,d,b,v,g;return{c(){t=S("p"),l=N("Confirm deleting "),e=S("code"),f=N(n),c=N("/"),a=N(u),d=N(" ?"),b=O(),v=S("p"),g=N("This is a permanent action and cannot be undone."),this.h()},l(_){t=V(_,"P",{class:!0});var p=D(t);l=P(p,"Confirm deleting "),e=V(p,"CODE",{});var m=D(e);f=P(m,n),c=P(m,"/"),a=P(m,u),m.forEach(h),d=P(p," ?"),p.forEach(h),b=R(_),v=V(_,"P",{class:!0});var $=D(v);g=P($,"This is a permanent action and cannot be undone."),$.forEach(h),this.h()},h(){T(t,"class","!text-lg"),T(v,"class","mt-2")},m(_,p){y(_,t,p),E(t,l),E(t,e),E(e,f),E(e,c),E(e,a),E(t,d),y(_,b,p),y(_,v,p),E(v,g)},p(_,p){p&16&&n!==(n=_[4].namespace+"")&&K(f,n),p&16&&u!==(u=_[4].name+"")&&K(a,u)},d(_){_&&h(t),_&&h(b),_&&h(v)}}}function We(o){let t,l,e,n,f,c,u,a,d,b,v,g;const _=[Me,ze],p=[];function m(r,i){return r[2].isLoading?0:r[2].isSuccess?1:-1}~(l=m(o))&&(e=p[l]=_[l](o));let $=o[3]!=null&&o[0]!=null&&ae(o);d=new Te({});let s=o[4]&&ce(o);return{c(){t=S("div"),e&&e.c(),n=O(),f=S("div"),c=S("div"),u=S("div"),$&&$.c(),a=O(),q(d.$$.fragment),b=O(),s&&s.c(),v=U(),this.h()},l(r){t=V(r,"DIV",{class:!0});var i=D(t);e&&e.l(i),i.forEach(h),n=R(r),f=V(r,"DIV",{class:!0});var I=D(f);c=V(I,"DIV",{class:!0});var B=D(c);u=V(B,"DIV",{class:!0});var j=D(u);$&&$.l(j),j.forEach(h),B.forEach(h),I.forEach(h),a=R(r),A(d.$$.fragment,r),b=R(r),s&&s.l(r),v=U(),this.h()},h(){T(t,"class","flex-col border-r border-gray-200"),T(u,"class","lilac-page flex"),T(c,"class","lilac-container px-4"),T(f,"class","flex h-full w-full")},m(r,i){y(r,t,i),~l&&p[l].m(t,null),y(r,n,i),y(r,f,i),E(f,c),E(c,u),$&&$.m(u,null),y(r,a,i),H(d,r,i),y(r,b,i),s&&s.m(r,i),y(r,v,i),g=!0},p(r,i){let I=l;l=m(r),l===I?~l&&p[l].p(r,i):(e&&(z(),C(p[I],1,1,()=>{p[I]=null}),M()),~l?(e=p[l],e?e.p(r,i):(e=p[l]=_[l](r),e.c()),k(e,1),e.m(t,null)):e=null),r[3]!=null&&r[0]!=null?$?($.p(r,i),i&9&&k($,1)):($=ae(r),$.c(),k($,1),$.m(u,null)):$&&(z(),C($,1,1,()=>{$=null}),M()),r[4]?s?(s.p(r,i),i&16&&k(s,1)):(s=ce(r),s.c(),k(s,1),s.m(v.parentNode,v)):s&&(z(),C(s,1,1,()=>{s=null}),M())},i(r){g||(k(e),k($),k(d.$$.fragment,r),k(s),g=!0)},o(r){C(e),C($),C(d.$$.fragment,r),C(s),g=!1},d(r){r&&h(t),~l&&p[l].d(),r&&h(n),r&&h(f),$&&$.d(),r&&h(a),L(d,r),r&&h(b),s&&s.d(r),r&&h(v)}}}function Xe(o){let t;return{c(){t=N("Add Concept")},l(l){t=P(l,"Add Concept")},m(l,e){y(l,t,e)},d(l){l&&h(t)}}}function Ze(o){let t,l,e;return l=new Re({props:{size:"small",$$slots:{default:[Xe]},$$scope:{ctx:o}}}),l.$on("click",o[17]),{c(){t=S("div"),q(l.$$.fragment),this.h()},l(n){t=V(n,"DIV",{slot:!0});var f=D(t);A(l.$$.fragment,f),f.forEach(h),this.h()},h(){T(t,"slot","header-right")},m(n,f){y(n,t,f),H(l,t,null),e=!0},p(n,f){const c={};f&268435456&&(c.$$scope={dirty:f,ctx:n}),l.$set(c)},i(n){e||(k(l.$$.fragment,n),e=!0)},o(n){C(l.$$.fragment,n),e=!1},d(n){n&&h(t),L(l)}}}function xe(o){let t,l;return t=new Ee({props:{title:"Concepts",$$slots:{"header-right":[Ze],default:[We]},$$scope:{ctx:o}}}),{c(){q(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,n){H(t,e,n),l=!0},p(e,[n]){const f={};n&268436447&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){C(t.$$.fragment,e),l=!1},d(e){L(t,e)}}}function et(o,t,l){let e,n,f,c,u,a,d,b,v,g=Y,_=()=>(g(),g=$e(c,w=>l(9,v=w)),c);o.$$.on_destroy.push(()=>g());let p,m;const $=Ue();Z(o,$,w=>l(16,b=w));let s=null;const r=Ie();Z(o,r,w=>l(2,d=w));const i=Se();Z(o,i,w=>l(8,u=w));const I=Oe();Z(o,I,w=>l(15,a=w));function B(){if(s==null)return;const{namespace:w,name:G}=s;u.mutate([w,G],{onSuccess:()=>{var J;for(const[Q,W]of Object.entries(Pe)){const X=(J=ve(Ae[Q]).selectRowsSchema)==null?void 0:J.data;W.deleteConcept(w,G,X)}l(4,s=null)}})}const j=()=>Be({command:Ne.CreateConcept,onCreate:w=>ye(ee(w.detail.namespace,w.detail.name))}),F=w=>l(4,s={namespace:w.namespace,name:w.name}),_e=()=>l(4,s=null),me=()=>l(4,s=null),de=()=>B();return o.$$.update=()=>{var w,G,J,Q;if(o.$$.dirty&65545&&b.page==="concepts")if(b.identifier==""||b.identifier==null)l(3,p=void 0),l(0,m=void 0);else{const[W,X]=b.identifier.split("/");(p!=W||m!=X)&&(l(3,p=W),l(0,m=X))}o.$$.dirty&32768&&l(1,e=(G=(w=a.data)==null?void 0:w.user)==null?void 0:G.id),o.$$.dirty&6&&l(7,n=De(d.data||[],e)),o.$$.dirty&32768&&l(6,f=(Q=(J=a.data)==null?void 0:J.user)==null?void 0:Q.given_name),o.$$.dirty&9&&_(l(5,c=p&&m?Ve(p,m):void 0))},[m,e,d,p,s,c,f,n,u,v,$,i,I,B,r,a,b,j,F,_e,me,de]}class ct extends he{constructor(t){super(),be(this,t,et,xe,ge,{})}}export{ct as component};
