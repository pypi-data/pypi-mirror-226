import{S as $e,i as ke,s as be,E as pe,Z as ve,_ as we,m as $,h as m,n as I,$ as Fe,b as N,a0 as p,L as Oe,a1 as x,N as Ne,Q as Te,q as Z,r as G,u as fe,e as ie,C as _t,o as On,Y as Hn,k as S,l as E,p as st,w as Be,y as B,z as O,A as R,V as qn,g as h,d as v,B as A,R as ct,D as Ln,a as Q,c as J,H as Pe,ae as jn,I as Un,J as Yn,K as Qn,a7 as Ie,ab as Le,O as ge,v as le,f as ne,M as Qe,a4 as ze,ac as Me,a2 as gt,af as Jn,W as _n,X as gn,G as Se,P as Kn,T as Ue,U as Ye,ag as Zn,a8 as ut,a3 as dt,x as et,a6 as ft,ah as Gn}from"../chunks/index.b333a928.js";import{g as pn}from"../chunks/navigation.003ba896.js";import{C as Tt,O as Wn,a as nt,P as Xn}from"../chunks/Page.4b0754ae.js";import{d as Xe,v as xn,h as Ve,w as Re,x as ye,y as kt,z as Ee,t as Ge,C as We,A as Je,S as pt,D as St,E as er,r as tr,F as lr,c as je,a as at,G as ot,H as nr,L as rr,I as Ze,J as sr,K as Et,M as ir,N as ar,O as bn,B as vn,P as Ct,R as wn,U as $n,f as or,b as yt,V as fr,W as cr,X as tt,Y as Dt,Z as mt,_ as vt,$ as ur,a0 as dr,a1 as mr,a2 as kn,a3 as wt,a4 as rt,a5 as hr,a6 as Sn,a7 as _r,a8 as gr,a9 as pr,aa as En,ab as yn,ac as Dn,ad as br,ae as vr,af as wr,ag as $r,ah as kr,ai as Sr,aj as Er,ak as yr,al as Dr,am as Ir,an as Vr,ao as Nr,ap as Tr,aq as Cr}from"../chunks/Commands.1fffdf33.js";import{d as It,e as Fr,f as In,h as Vn,i as Mr,j as zr,k as Pr,I as Br,l as Rr,m as Ar,n as Or,o as Nn,s as ht,D as lt,p as Hr,q as qr}from"../chunks/notificationsStore.e7f2bd3e.js";import{w as Lr}from"../chunks/index.2b0dd2f8.js";import{C as jr,a as $t,I as Ft,T as Ur}from"../chunks/ConceptView.0f70535c.js";import{E as Tn,S as Yr,T as Cn}from"../chunks/StringSpanHighlight.d53dc1a7.js";import{M as Vt,C as Qr}from"../chunks/ChevronUp.95b74f6d.js";import{n as Jr,e as Kr,f as Zr,g as Gr,p as Wr,h as Xr,i as xr}from"../chunks/utils.4eeb8687.js";import{R as es,S as ts,T as ls,a as Mt,b as zt}from"../chunks/RowItemMetadata.760ed6a3.js";import{g as Fn}from"../chunks/settingsStore.6e7d5078.js";import{C as ns}from"../chunks/ComboBox.5bfb4a00.js";import{S as rs}from"../chunks/Settings.e24cc1d1.js";function Pt(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ss(s){let e,l,t=s[1]&&Pt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Pt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function is(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class as extends $e{constructor(e){super(),ke(this,e,is,ss,be,{size:0,title:1})}}function Bt(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function os(s){let e,l,t=s[1]&&Bt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M10 16L20 6 21.4 7.4 12.8 16 21.4 24.6 20 26z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Bt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function fs(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class cs extends $e{constructor(e){super(),ke(this,e,fs,os,be,{size:0,title:1})}}function Rt(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function us(s){let e,l,t=s[1]&&Rt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Rt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function ds(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class ms extends $e{constructor(e){super(),ke(this,e,ds,us,be,{size:0,title:1})}}function At(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function hs(s){let e,l,t=s[1]&&At(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=At(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function _s(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class gs extends $e{constructor(e){super(),ke(this,e,_s,hs,be,{size:0,title:1})}}function Ot(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ps(s){let e,l,t,n=s[1]&&Ot(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],r={};for(let i=0;i<o.length;i+=1)r=pe(r,o[i]);return{c(){e=ve("svg"),n&&n.c(),l=ve("path"),t=ve("path"),this.h()},l(i){e=we(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=$(e);n&&n.l(a),l=we(a,"path",{d:!0}),$(l).forEach(m),t=we(a,"path",{d:!0}),$(t).forEach(m),a.forEach(m),this.h()},h(){I(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),I(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Fe(e,r)},m(i,a){N(i,e,a),n&&n.m(e,null),p(e,l),p(e,t)},p(i,[a]){i[1]?n?n.p(i,a):(n=Ot(i),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Fe(e,r=Oe(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:i[0]},a&1&&{height:i[0]},a&4&&i[2],a&8&&i[3]]))},i:x,o:x,d(i){i&&m(e),n&&n.d()}}}function bs(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class it extends $e{constructor(e){super(),ke(this,e,bs,ps,be,{size:0,title:1})}}function Ht(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function vs(s){let e,l,t=s[1]&&Ht(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Ht(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function ws(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class Mn extends $e{constructor(e){super(),ke(this,e,ws,vs,be,{size:0,title:1})}}function qt(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function $s(s){let e,l,t=s[1]&&qt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=qt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function ks(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class Ss extends $e{constructor(e){super(),ke(this,e,ks,$s,be,{size:0,title:1})}}function Lt(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Es(s){let e,l,t=s[1]&&Lt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Lt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function ys(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class zn extends $e{constructor(e){super(),ke(this,e,ys,Es,be,{size:0,title:1})}}function jt(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Ds(s){let e,l,t=s[1]&&jt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=jt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Is(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class Pn extends $e{constructor(e){super(),ke(this,e,Is,Ds,be,{size:0,title:1})}}function Ut(s){let e,l;return{c(){e=ve("title"),l=Z(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,s[1]),n.forEach(m)},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Vs(s){let e,l,t=s[1]&&Ut(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M30 19.415L28.586 18 25 21.587 21.414 18 20 19.415 23.586 23 20 26.586 21.414 28 25 24.414 28.586 28 30 26.586 26.414 23 30 19.415zM10 18H16V20H10zM2 6H16V8H2zM6 12H16V14H6z"),Fe(e,o)},m(r,i){N(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Ut(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Fe(e,o=Oe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Ns(s,e,l){let t,n;const o=["size","title"];let r=Ne(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Te(f))),l(3,r=Ne(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Te(e),[i,a,n,r,t]}class Ts extends $e{constructor(e){super(),ke(this,e,Ns,Vs,be,{size:0,title:1})}}function Yt(s){let e;return{c(){e=S("div"),this.h()},l(l){e=E(l,"DIV",{id:!0,style:!0}),$(e).forEach(m),this.h()},h(){I(e,"id","svelte-infinite-scroll"),st(e,"width","0")},m(l,t){N(l,e,t),s[11](e)},p:x,d(l){l&&m(e),s[11](null)}}}function Cs(s){let e,l=!s[1]&&!s[0]&&Yt(s);return{c(){l&&l.c(),e=ie()},l(t){l&&l.l(t),e=ie()},m(t,n){l&&l.m(t,n),N(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=Yt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:x,o:x,d(t){l&&l.d(t),t&&m(e)}}}function Fs(s,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:o=null}=e,{hasMore:r=!0}=e,{reverse:i=!1}=e,{window:a=!1}=e;const f=_t();let c=!1,d,u,_,g;const b=C=>{if(!r)return;const M=C.target;w(M,i,n)<=t?(!c&&r&&(f("loadMore"),l(8,u=M.scrollHeight),l(9,_=M.scrollTop)),l(7,c=!0)):l(7,c=!1)},w=(C,M,L)=>{const T=C.documentElement?C.documentElement:C;return M?L?T.scrollLeft:T.scrollTop:L?T.scrollWidth-T.clientWidth-T.scrollLeft:T.scrollHeight-T.clientHeight-T.scrollTop};On(()=>{a?l(10,g=document):o?l(10,g=o):l(10,g=d.parentNode)}),Hn(()=>{g&&(g.removeEventListener("scroll",b),g.removeEventListener("resize",b))});function y(C){Be[C?"unshift":"push"](()=>{d=C,l(2,d)})}return s.$$set=C=>{"threshold"in C&&l(3,t=C.threshold),"horizontal"in C&&l(4,n=C.horizontal),"elementScroll"in C&&l(0,o=C.elementScroll),"hasMore"in C&&l(5,r=C.hasMore),"reverse"in C&&l(6,i=C.reverse),"window"in C&&l(1,a=C.window)},s.$$.update=()=>{s.$$.dirty&1088&&g&&(i&&l(10,g.scrollTop=g.scrollHeight,g),g.addEventListener("scroll",b),g.addEventListener("resize",b)),s.$$.dirty&1984&&c&&i&&l(10,g.scrollTop=g.scrollHeight-u+_,g)},[o,a,d,t,n,r,i,c,u,_,g,y]}class Ms extends $e{constructor(e){super(),ke(this,e,Fs,Cs,be,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function zs(s){let e,l,t,n,o,r,i,a;t=new xn({});const f=s[3].default,c=Ln(f,s,s[6],null);return{c(){e=S("div"),l=S("button"),B(t.$$.fragment),n=Q(),o=S("span"),c&&c.c(),this.h()},l(d){e=E(d,"DIV",{class:!0});var u=$(e);l=E(u,"BUTTON",{class:!0});var _=$(l);O(t.$$.fragment,_),_.forEach(m),n=J(u),o=E(u,"SPAN",{class:!0});var g=$(o);c&&c.l(g),g.forEach(m),u.forEach(m),this.h()},h(){I(l,"class","p-0 opacity-50 hover:opacity-100"),I(o,"class","truncate"),I(e,"class","removable-tag flex items-center gap-x-1")},m(d,u){N(d,e,u),p(e,l),R(t,l,null),p(e,n),p(e,o),c&&c.m(o,null),r=!0,i||(a=Pe(l,"click",jn(s[4])),i=!0)},p(d,u){c&&c.p&&(!r||u&64)&&Un(c,f,d,d[6],r?Qn(f,d[6],u,null):Yn(d[6]),null)},i(d){r||(h(t.$$.fragment,d),h(c,d),r=!0)},o(d){v(t.$$.fragment,d),v(c,d),r=!1},d(d){d&&m(e),A(t),c&&c.d(d),i=!1,a()}}}function Ps(s){let e,l;const t=[{type:s[0]},s[2]];let n={$$slots:{default:[zs]},$$scope:{ctx:s}};for(let o=0;o<t.length;o+=1)n=pe(n,t[o]);return e=new Xe({props:n}),e.$on("click",s[5]),{c(){B(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,r){R(e,o,r),l=!0},p(o,[r]){const i=r&5?Oe(t,[r&1&&{type:o[0]},r&4&&qn(o[2])]):{};r&64&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){v(e.$$.fragment,o),l=!1},d(o){A(e,o)}}}function Bs(s,e,l){const t=["type"];let n=Ne(e,t),{$$slots:o={},$$scope:r}=e;const i=_t();let{type:a}=e;const f=()=>i("remove");function c(d){ct.call(this,s,d)}return s.$$set=d=>{e=pe(pe({},e),Te(d)),l(2,n=Ne(e,t)),"type"in d&&l(0,a=d.type),"$$scope"in d&&l(6,r=d.$$scope)},[a,i,n,o,f,c,r]}class Nt extends $e{constructor(e){super(),ke(this,e,Bs,Ps,be,{type:0})}}function Rs(s){let e,l=(s[2]?"":s[5])+"",t,n,o=s[0][s[1].op]+"",r,i,a;return{c(){e=S("span"),t=Z(l),n=Q(),r=Z(o),i=Q(),a=Z(s[4]),this.h()},l(f){e=E(f,"SPAN",{class:!0});var c=$(e);t=G(c,l),c.forEach(m),n=J(f),r=G(f,o),i=J(f),a=G(f,s[4]),this.h()},h(){I(e,"class","font-mono")},m(f,c){N(f,e,c),p(e,t),N(f,n,c),N(f,r,c),N(f,i,c),N(f,a,c)},p(f,c){c&36&&l!==(l=(f[2]?"":f[5])+"")&&fe(t,l),c&2&&o!==(o=f[0][f[1].op]+"")&&fe(r,o),c&16&&fe(a,f[4])},d(f){f&&m(e),f&&m(n),f&&m(r),f&&m(i),f&&m(a)}}}function As(s){let e,l,t,n,o,r;return l=new Nt({props:{interactive:!0,type:"magenta",$$slots:{default:[Rs]},$$scope:{ctx:s}}}),l.$on("click",s[9]),l.$on("remove",s[10]),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","filter-pill items-center")},m(i,a){N(i,e,a),R(l,e,null),n=!0,o||(r=Ie(t=Ve.call(null,e,{text:s[6]})),o=!0)},p(i,[a]){const f={};a&2102&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Le(t.update)&&a&64&&t.update.call(null,{text:i[6]})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),A(l),o=!1,r()}}}function Os(s,e,l){let t,n,o,r,i;const a={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists"};let{filter:f}=e,{hidePath:c=!1}=e;const d=Re();ge(s,d,g=>l(7,i=g));const u=()=>Ge({command:We.EditFilter,namespace:i.namespace,datasetName:i.datasetName,path:n}),_=()=>d.removeFilter(f);return s.$$set=g=>{"filter"in g&&l(1,f=g.filter),"hidePath"in g&&l(2,c=g.hidePath)},s.$$.update=()=>{s.$$.dirty&2&&l(4,t=ye(f.value||"false")),s.$$.dirty&2&&l(3,n=kt(f.path)),s.$$.dirty&18&&l(6,o=`${Ee(f.path)} ${a[f.op]} ${t}`),s.$$.dirty&8&&l(5,r=n.at(-1))},[a,f,c,n,t,r,o,i,d,u,_]}class Bn extends $e{constructor(e){super(),ke(this,e,Os,As,be,{FILTER_SHORTHANDS:0,filter:1,hidePath:2})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function Qt(s){let e,l=s[0].concept_namespace+"",t,n,o=s[0].concept_name+"",r;return{c(){e=S("div"),t=Z(l),n=Z(" / "),r=Z(o),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);t=G(a,l),n=G(a," / "),r=G(a,o),a.forEach(m),this.h()},h(){I(e,"class","mb-2 w-full text-center text-xs")},m(i,a){N(i,e,a),p(e,t),p(e,n),p(e,r)},p(i,a){a&1&&l!==(l=i[0].concept_namespace+"")&&fe(t,l),a&1&&o!==(o=i[0].concept_name+"")&&fe(r,o)},d(i){i&&m(e)}}}function Hs(s){let e=Ee(s[0].path)+"",l,t,n=s[0].type+"",o;return{c(){l=Z(e),t=Z(": "),o=Z(n)},l(r){l=G(r,e),t=G(r,": "),o=G(r,n)},m(r,i){N(r,l,i),N(r,t,i),N(r,o,i)},p(r,i){i&1&&e!==(e=Ee(r[0].path)+"")&&fe(l,e),i&1&&n!==(n=r[0].type+"")&&fe(o,n)},d(r){r&&m(l),r&&m(t),r&&m(o)}}}function Jt(s){let e,l,t;return l=new Tn({props:{embedding:s[0].embedding}}),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","ml-2")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const r={};o&1&&(r.embedding=n[0].embedding),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),A(l)}}}function Kt(s){let e,l;return{c(){e=S("div"),l=Z(s[2]),this.h()},l(t){e=E(t,"DIV",{class:!0});var n=$(e);l=G(n,s[2]),n.forEach(m),this.h()},h(){I(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){N(t,e,n),p(e,l)},p(t,n){n&4&&fe(l,t[2])},d(t){t&&m(e)}}}function qs(s){let e,l,t,n,o,r,i,a,f=s[0].type==="concept"&&Qt(s);n=new Xe({props:{type:s[1],$$slots:{default:[Hs]},$$scope:{ctx:s}}});let c=(s[0].type==="semantic"||s[0].type==="concept")&&Jt(s),d=s[2]&&Kt(s);return{c(){f&&f.c(),e=Q(),l=S("div"),t=S("div"),B(n.$$.fragment),o=Q(),c&&c.c(),r=Q(),d&&d.c(),i=ie(),this.h()},l(u){f&&f.l(u),e=J(u),l=E(u,"DIV",{class:!0});var _=$(l);t=E(_,"DIV",{class:!0});var g=$(t);O(n.$$.fragment,g),g.forEach(m),o=J(_),c&&c.l(_),_.forEach(m),r=J(u),d&&d.l(u),i=ie(),this.h()},h(){I(t,"class","whitespace-nowrap"),I(l,"class","flex items-center justify-items-center")},m(u,_){f&&f.m(u,_),N(u,e,_),N(u,l,_),p(l,t),R(n,t,null),p(l,o),c&&c.m(l,null),N(u,r,_),d&&d.m(u,_),N(u,i,_),a=!0},p(u,[_]){u[0].type==="concept"?f?f.p(u,_):(f=Qt(u),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const g={};_&2&&(g.type=u[1]),_&9&&(g.$$scope={dirty:_,ctx:u}),n.$set(g),u[0].type==="semantic"||u[0].type==="concept"?c?(c.p(u,_),_&1&&h(c,1)):(c=Jt(u),c.c(),h(c,1),c.m(l,null)):c&&(le(),v(c,1,1,()=>{c=null}),ne()),u[2]?d?d.p(u,_):(d=Kt(u),d.c(),d.m(i.parentNode,i)):d&&(d.d(1),d=null)},i(u){a||(h(n.$$.fragment,u),h(c),a=!0)},o(u){v(n.$$.fragment,u),v(c),a=!1},d(u){f&&f.d(u),u&&m(e),u&&m(l),A(n),c&&c.d(),u&&m(r),d&&d.d(u),u&&m(i)}}}function Ls(s,e,l){let t,{search:n}=e,{tagType:o="outline"}=e;return s.$$set=r=>{"search"in r&&l(0,n=r.search),"tagType"in r&&l(1,o=r.tagType)},s.$$.update=()=>{s.$$.dirty&1&&l(2,t=n.type==="concept"?"":n.query)},[n,o,t]}class Zt extends $e{constructor(e){super(),ke(this,e,Ls,qs,be,{search:0,tagType:1})}}function js(s){let e,l=Ee(s[0].path)+"",t,n,o,r;return{c(){e=S("span"),t=Z(l),n=Z(' has "'),o=Z(s[2]),r=Z('"'),this.h()},l(i){e=E(i,"SPAN",{class:!0});var a=$(e);t=G(a,l),a.forEach(m),n=G(i,' has "'),o=G(i,s[2]),r=G(i,'"'),this.h()},h(){I(e,"class","font-mono")},m(i,a){N(i,e,a),p(e,t),N(i,n,a),N(i,o,a),N(i,r,a)},p(i,a){a&1&&l!==(l=Ee(i[0].path)+"")&&fe(t,l),a&4&&fe(o,i[2])},d(i){i&&m(e),i&&m(n),i&&m(o),i&&m(r)}}}function Us(s){let e,l,t,n,o,r;return l=new Nt({props:{title:"query",interactive:!0,type:s[1],$$slots:{default:[js]},$$scope:{ctx:s}}}),l.$on("click",s[6]),l.$on("remove",s[7]),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","search-pill items-center text-left")},m(i,a){N(i,e,a),R(l,e,null),n=!0,o||(r=Ie(t=Ve.call(null,e,{component:Zt,props:{search:s[0],tagType:s[1]}})),o=!0)},p(i,[a]){const f={};a&2&&(f.type=i[1]),a&517&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Le(t.update)&&a&3&&t.update.call(null,{component:Zt,props:{search:i[0],tagType:i[1]}})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),A(l),o=!1,r()}}}function Ys(s,e,l){let t,n,o,{search:r}=e;const i={keyword:"outline",semantic:"teal",concept:"green"},a=Re(),f=Je();ge(s,f,u=>l(3,o=u));function c(u){ct.call(this,s,u)}const d=()=>{var u;return a.removeSearch(r,((u=o.selectRowsSchema)==null?void 0:u.data)||null)};return s.$$set=u=>{"search"in u&&l(0,r=u.search)},s.$$.update=()=>{s.$$.dirty&1&&l(2,t=r.type==="concept"?r.concept_name:r.query),s.$$.dirty&1&&l(1,n=r.type!=null?i[r.type]:"outline")},[r,n,t,o,a,f,c,d]}class Rn extends $e{constructor(e){super(),ke(this,e,Ys,Us,be,{search:0})}}function Gt(s,e,l){const t=s.slice();return t[26]=e[l][0],t[27]=e[l][1],t}function Wt(s,e,l){const t=s.slice();return t[30]=e[l],t}function Xt(s,e,l){const t=s.slice();return t[33]=e[l],t}function xt(s,e,l){const t=s.slice();return t[36]=e[l],t}function el(s,e,l){const t=s.slice();return t[39]=e[l],t}function Qs(s){let e,l,t,n=s[13],o=[];for(let a=0;a<n.length;a+=1)o[a]=nl(xt(s,n,a));const r=a=>v(o[a],1,1,()=>{o[a]=null});let i=s[8]!=null&&s[8].length>0&&rl(s);return{c(){e=S("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Q(),i&&i.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=J(f),i&&i.l(f),f.forEach(m),this.h()},h(){I(e,"class","flex w-full flex-row gap-x-4")},m(a,f){N(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);p(e,l),i&&i.m(e,null),t=!0},p(a,f){if(f[0]&57352){n=a[13];let c;for(c=0;c<n.length;c+=1){const d=xt(a,n,c);o[c]?(o[c].p(d,f),h(o[c],1)):(o[c]=nl(d),o[c].c(),h(o[c],1),o[c].m(e,l))}for(le(),c=n.length;c<o.length;c+=1)r(c);ne()}a[8]!=null&&a[8].length>0?i?(i.p(a,f),f[0]&256&&h(i,1)):(i=rl(a),i.c(),h(i,1),i.m(e,null)):i&&(le(),v(i,1,1,()=>{i=null}),ne())},i(a){if(!t){for(let f=0;f<n.length;f+=1)h(o[f]);h(i),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)v(o[f]);v(i),t=!1},d(a){a&&m(e),ze(o,a),i&&i.d()}}}function tl(s){let e,l,t=s[14][s[36]]+"",n,o,r,i,a,f=s[3][s[36]],c=[];for(let u=0;u<f.length;u+=1)c[u]=ll(el(s,f,u));const d=u=>v(c[u],1,1,()=>{c[u]=null});return{c(){e=S("div"),l=S("div"),n=Z(t),o=Q(),r=S("div");for(let u=0;u<c.length;u+=1)c[u].c();i=Q(),this.h()},l(u){e=E(u,"DIV",{class:!0});var _=$(e);l=E(_,"DIV",{class:!0});var g=$(l);n=G(g,t),g.forEach(m),o=J(_),r=E(_,"DIV",{class:!0});var b=$(r);for(let w=0;w<c.length;w+=1)c[w].l(b);b.forEach(m),i=J(_),_.forEach(m),this.h()},h(){I(l,"class","text-xs font-light"),I(r,"class","flex flex-row gap-x-1"),I(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(u,_){N(u,e,_),p(e,l),p(l,n),p(e,o),p(e,r);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(r,null);p(e,i),a=!0},p(u,_){if(_[0]&40968){f=u[3][u[36]];let g;for(g=0;g<f.length;g+=1){const b=el(u,f,g);c[g]?(c[g].p(b,_),h(c[g],1)):(c[g]=ll(b),c[g].c(),h(c[g],1),c[g].m(r,null))}for(le(),g=f.length;g<c.length;g+=1)d(g);ne()}},i(u){if(!a){for(let _=0;_<f.length;_+=1)h(c[_]);a=!0}},o(u){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)v(c[_]);a=!1},d(u){u&&m(e),ze(c,u)}}}function ll(s){let e,l;function t(){return s[23](s[39])}return e=new Rn({props:{search:s[39]}}),e.$on("click",t),{c(){B(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){s=n;const r={};o[0]&8&&(r.search=s[39]),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function nl(s){let e,l,t=s[3][s[36]]&&tl(s);return{c(){t&&t.c(),e=ie()},l(n){t&&t.l(n),e=ie()},m(n,o){t&&t.m(n,o),N(n,e,o),l=!0},p(n,o){n[3][n[36]]?t?(t.p(n,o),o[0]&8&&h(t,1)):(t=tl(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(le(),v(t,1,1,()=>{t=null}),ne())},i(n){l||(h(t),l=!0)},o(n){v(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function rl(s){let e,l,t,n,o,r,i=s[8],a=[];for(let c=0;c<i.length;c+=1)a[c]=sl(Xt(s,i,c));const f=c=>v(a[c],1,1,()=>{a[c]=null});return{c(){e=S("div"),l=S("div"),t=Z("Filters"),n=Q(),o=S("div");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=E(c,"DIV",{class:!0});var d=$(e);l=E(d,"DIV",{class:!0});var u=$(l);t=G(u,"Filters"),u.forEach(m),n=J(d),o=E(d,"DIV",{class:!0});var _=$(o);for(let g=0;g<a.length;g+=1)a[g].l(_);_.forEach(m),d.forEach(m),this.h()},h(){I(l,"class","text-xs font-light"),I(o,"class","flex flex-row gap-x-1"),I(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(c,d){N(c,e,d),p(e,l),p(l,t),p(e,n),p(e,o);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,null);r=!0},p(c,d){if(d[0]&256){i=c[8];let u;for(u=0;u<i.length;u+=1){const _=Xt(c,i,u);a[u]?(a[u].p(_,d),h(a[u],1)):(a[u]=sl(_),a[u].c(),h(a[u],1),a[u].m(o,null))}for(le(),u=i.length;u<a.length;u+=1)f(u);ne()}},i(c){if(!r){for(let d=0;d<i.length;d+=1)h(a[d]);r=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)v(a[d]);r=!1},d(c){c&&m(e),ze(a,c)}}}function sl(s){let e,l;return e=new Bn({props:{filter:s[33]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&256&&(o.filter=t[33]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function il(s){let e=ye(s[0])+"",l,t,n=ye(s[1].dataset_manifest.num_items)+"",o,r;return{c(){l=Z(e),t=Z(" of "),o=Z(n),r=Z(" rows")},l(i){l=G(i,e),t=G(i," of "),o=G(i,n),r=G(i," rows")},m(i,a){N(i,l,a),N(i,t,a),N(i,o,a),N(i,r,a)},p(i,a){a[0]&1&&e!==(e=ye(i[0])+"")&&fe(l,e),a[0]&2&&n!==(n=ye(i[1].dataset_manifest.num_items)+"")&&fe(o,n)},d(i){i&&m(l),i&&m(t),i&&m(o),i&&m(r)}}}function al(s){let e,l;return e=new at({props:{value:s[30].path!=null?Ee(s[30].path):void 0,text:s[30].text,disabled:s[30].disabled}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.value=t[30].path!=null?Ee(t[30].path):void 0),n[0]&128&&(o.text=t[30].text),n[0]&128&&(o.disabled=t[30].disabled),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Js(s){let e,l,t=s[27],n=[];for(let r=0;r<t.length;r+=1)n[r]=al(Wt(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Q()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=J(r)},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);N(r,e,i),l=!0},p(r,i){if(i[0]&128){t=r[27];let a;for(a=0;a<t.length;a+=1){const f=Wt(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=al(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function ol(s){let e,l;return e=new lr({props:{label:s[26],$$slots:{default:[Js]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.label=t[26]),n[0]&128|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ks(s){let e,l,t=Object.entries(s[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=ol(Gt(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);N(r,e,i),l=!0},p(r,i){if(i[0]&128){t=Object.entries(r[7]);let a;for(a=0;a<t.length;a+=1){const f=Gt(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=ol(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function fl(s){let e,l,t,n,o,r;return l=new er({}),{c(){e=S("button"),B(l.$$.fragment),this.h()},l(i){e=E(i,"BUTTON",{});var a=$(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){e.disabled=t=s[4]==null},m(i,a){N(i,e,a),R(l,e,null),n=!0,o||(r=[Ie(Ve.call(null,e,{text:"Clear sort"})),Pe(e,"click",s[18])],o=!0)},p(i,a){(!n||a[0]&16&&t!==(t=i[4]==null))&&(e.disabled=t)},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),A(l),o=!1,Qe(r)}}}function Zs(s){let e,l;return e=new Pn({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Gs(s){let e,l;return e=new zn({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ws(s){let e,l;return e=new Ts({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function cl(s){let e,l;return e=new Vt({props:{open:!0,modalHeading:"Concept",passiveModal:!0,size:"lg",$$slots:{default:[ti]},$$scope:{ctx:s}}}),e.$on("close",s[24]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1024|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Xs(s){let e,l;return e=new jr({props:{concept:s[10].data}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1024&&(o.concept=t[10].data),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function xs(s){let e,l=s[10].error.message+"",t;return{c(){e=S("p"),t=Z(l)},l(n){e=E(n,"P",{});var o=$(e);t=G(o,l),o.forEach(m)},m(n,o){N(n,e,o),p(e,t)},p(n,o){o[0]&1024&&l!==(l=n[10].error.message+"")&&fe(t,l)},i:x,o:x,d(n){n&&m(e)}}}function ei(s){let e,l;return e=new je({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ti(s){let e,l,t,n;const o=[ei,xs,Xs],r=[];function i(a,f){var c,d,u;return(c=a[10])!=null&&c.isLoading?0:(d=a[10])!=null&&d.isError?1:(u=a[10])!=null&&u.isSuccess?2:-1}return~(e=i(s))&&(l=r[e]=o[e](s)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),N(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?~e&&r[e].p(a,f):(l&&(le(),v(r[c],1,1,()=>{r[c]=null}),ne()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function li(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,M,L,T,H,V=s[13].length>0&&Qs(s),F=s[0]&&s[1]&&il(s);c=new pt({props:{noLabel:!0,size:"sm",class:"w-80",selected:s[5],$$slots:{default:[Ks]},$$scope:{ctx:s}}}),c.$on("update",s[16]);let D=s[6]!=null&&fl(s);const k=[Ws,Gs,Zs],P=[];function ee(K,z){var j,U,q;return((j=K[4])==null?void 0:j.order)==null?0:((U=K[4])==null?void 0:U.order)==="ASC"?1:((q=K[4])==null?void 0:q.order)==="DESC"?2:-1}~(g=ee(s))&&(b=P[g]=k[g](s));let X=s[2]&&cl(s);return{c(){e=S("div"),V&&V.c(),l=Q(),t=S("div"),n=S("div"),F&&F.c(),o=Q(),r=S("div"),i=S("div"),a=Z("Sort by"),f=Q(),B(c.$$.fragment),d=Q(),D&&D.c(),u=Q(),_=S("button"),b&&b.c(),C=Q(),X&&X.c(),M=ie(),this.h()},l(K){e=E(K,"DIV",{class:!0});var z=$(e);V&&V.l(z),l=J(z),t=E(z,"DIV",{class:!0});var j=$(t);n=E(j,"DIV",{class:!0});var U=$(n);F&&F.l(U),U.forEach(m),o=J(j),r=E(j,"DIV",{class:!0});var q=$(r);i=E(q,"DIV",{class:!0});var Y=$(i);a=G(Y,"Sort by"),Y.forEach(m),f=J(q),O(c.$$.fragment,q),d=J(q),D&&D.l(q),u=J(q),_=E(q,"BUTTON",{});var de=$(_);b&&b.l(de),de.forEach(m),q.forEach(m),j.forEach(m),z.forEach(m),C=J(K),X&&X.l(K),M=ie(),this.h()},h(){I(n,"class","py-1"),I(i,"class","mr-1"),_.disabled=w=s[4]==null,I(r,"class","sort-container flex flex-row items-center gap-x-1"),I(t,"class","flex w-full flex-row items-center justify-between"),I(e,"class","mx-5 my-2 flex flex-col gap-y-2")},m(K,z){var j;N(K,e,z),V&&V.m(e,null),p(e,l),p(e,t),p(t,n),F&&F.m(n,null),p(t,o),p(t,r),p(r,i),p(i,a),p(r,f),R(c,r,null),p(r,d),D&&D.m(r,null),p(r,u),p(r,_),~g&&P[g].m(_,null),N(K,C,z),X&&X.m(K,z),N(K,M,z),L=!0,T||(H=[Ie(y=Ve.call(null,_,{text:((j=s[4])==null?void 0:j.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Pe(_,"click",s[17])],T=!0)},p(K,z){var q;K[13].length>0&&V.p(K,z),K[0]&&K[1]?F?F.p(K,z):(F=il(K),F.c(),F.m(n,null)):F&&(F.d(1),F=null);const j={};z[0]&32&&(j.selected=K[5]),z[0]&128|z[1]&2048&&(j.$$scope={dirty:z,ctx:K}),c.$set(j),K[6]!=null?D?(D.p(K,z),z[0]&64&&h(D,1)):(D=fl(K),D.c(),h(D,1),D.m(r,u)):D&&(le(),v(D,1,1,()=>{D=null}),ne());let U=g;g=ee(K),g!==U&&(b&&(le(),v(P[U],1,1,()=>{P[U]=null}),ne()),~g?(b=P[g],b||(b=P[g]=k[g](K),b.c()),h(b,1),b.m(_,null)):b=null),(!L||z[0]&16&&w!==(w=K[4]==null))&&(_.disabled=w),y&&Le(y.update)&&z[0]&16&&y.update.call(null,{text:((q=K[4])==null?void 0:q.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."}),K[2]?X?(X.p(K,z),z[0]&4&&h(X,1)):(X=cl(K),X.c(),h(X,1),X.m(M.parentNode,M)):X&&(le(),v(X,1,1,()=>{X=null}),ne())},i(K){L||(h(V),h(c.$$.fragment,K),h(D),h(b),h(X),L=!0)},o(K){v(V),v(c.$$.fragment,K),v(D),v(b),v(X),L=!1},d(K){K&&m(e),V&&V.d(),F&&F.d(),A(c),D&&D.d(),~g&&P[g].d(),K&&m(C),X&&X.d(K),K&&m(M),T=!1,Qe(H)}}}function ni(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g=x,b=()=>(g(),g=Me(t,z=>l(10,_=z)),t);s.$$.on_destroy.push(()=>g());let{totalNumRows:w}=e,{manifest:y}=e,C=Re();ge(s,C,z=>l(22,u=z));let M=Je();ge(s,M,z=>l(21,d=z));let L=null;const T=["keyword","semantic","concept"],H={keyword:"Keyword",semantic:"Semantic",concept:"Concepts"};let V={};function F(z){z.type==="concept"&&l(2,L={namespace:z.concept_namespace,name:z.concept_name})}let D={};const k=z=>{const j=z.detail;j!==i&&C.setSortBy(j===""?null:kt(j))},P=()=>{r!=null&&C.setSortBy(r.path),C.setSortOrder((r==null?void 0:r.order)==="ASC"?"DESC":"ASC")},ee=()=>{C.clearSorts()},X=z=>F(z),K=()=>l(2,L=null);return s.$$set=z=>{"totalNumRows"in z&&l(0,w=z.totalNumRows),"manifest"in z&&l(1,y=z.manifest)},s.$$.update=()=>{var z,j,U,q;if(s.$$.dirty[0]&4&&b(l(9,t=L?tr(L.namespace,L.name):void 0)),s.$$.dirty[0]&4194304&&l(20,n=It(u)),s.$$.dirty[0]&4194304&&l(8,o=u.query.filters),s.$$.dirty[0]&1048584){l(3,V={});for(const Y of n)Y.type&&(Y.type in V||l(3,V[Y.type]=[],V),V[Y.type].push(Y))}if(s.$$.dirty[0]&2097152&&l(4,r=Fr(d)),s.$$.dirty[0]&2097152)for(const Y of((j=(z=d.selectRowsSchema)==null?void 0:z.data)==null?void 0:j.search_results)||[])D[Ee(Y.result_path)]=Y;s.$$.dirty[0]&16&&l(5,i=r!=null&&r.path?Ee(r.path):""),s.$$.dirty[0]&4194304&&l(6,a=u.query.sort_by),s.$$.dirty[0]&2097248&&l(19,f=((q=(U=d.selectRowsSchema)==null?void 0:U.data)==null?void 0:q.schema)!=null?[{path:[""],text:"None",disabled:a==null&&i!==""},...St(d.selectRowsSchema.data.schema).filter(Y=>Y.dtype!="embedding"&&Y.dtype!="string_span").map(Y=>({path:Y.path,text:Ee(Y.path.slice(1)),disabled:!1}))]:[]),s.$$.dirty[0]&524288&&l(7,c=f.reduce((Y,de)=>{const me=de.path[0];return(Y[me]=Y[me]||[]).push(de),Y},{}))},[w,y,L,V,r,i,a,c,o,t,_,C,M,T,H,F,k,P,ee,f,n,d,u,X,K]}class ri extends $e{constructor(e){super(),ke(this,e,ni,li,be,{totalNumRows:0,manifest:1},null,[-1,-1])}}function ul(s,e,l){var r,i,a;const t=s.slice();t[14]=e[l],t[18]=l;const n=t[3].length>1?`[${t[18]}]`:"";t[15]=n;const o=((a=(i=(r=t[7].data)==null?void 0:r.ui)==null?void 0:i.markdown_paths)==null?void 0:a.find(f=>Ze(f,t[0])))!=null;return t[16]=o,t}function dl(s){let e,l,t,n=s[0].join(".")+s[15]+"",o,r,i,a,f,c;return a=new Yr({props:{text:ye(s[14]),row:s[1],markdown:s[16],spanPaths:s[5].spanPaths,valuePaths:s[5].valuePaths,datasetViewStore:s[8],datasetStore:s[2],embeddings:s[6]}}),{c(){e=S("div"),l=S("div"),t=S("div"),o=Z(n),r=Q(),i=S("div"),B(a.$$.fragment),f=Q(),this.h()},l(d){e=E(d,"DIV",{class:!0});var u=$(e);l=E(u,"DIV",{class:!0});var _=$(l);t=E(_,"DIV",{class:!0});var g=$(t);o=G(g,n),g.forEach(m),r=J(_),i=E(_,"DIV",{class:!0});var b=$(i);O(a.$$.fragment,b),b.forEach(m),_.forEach(m),f=J(u),u.forEach(m),this.h()},h(){I(t,"class","sticky top-0 z-10 w-full self-start border-t border-neutral-200 bg-neutral-100 px-2 py-2 pb-2 font-mono font-medium text-neutral-500"),I(i,"class","mx-4 font-normal"),I(l,"class","flex w-full flex-col"),I(e,"class","flex flex-row")},m(d,u){N(d,e,u),p(e,l),p(l,t),p(t,o),p(l,r),p(l,i),R(a,i,null),p(e,f),c=!0},p(d,u){(!c||u&9)&&n!==(n=d[0].join(".")+d[15]+"")&&fe(o,n);const _={};u&8&&(_.text=ye(d[14])),u&2&&(_.row=d[1]),u&129&&(_.markdown=d[16]),u&32&&(_.spanPaths=d[5].spanPaths),u&32&&(_.valuePaths=d[5].valuePaths),u&4&&(_.datasetStore=d[2]),u&64&&(_.embeddings=d[6]),a.$set(_)},i(d){c||(h(a.$$.fragment,d),c=!0)},o(d){v(a.$$.fragment,d),c=!1},d(d){d&&m(e),A(a)}}}function si(s){let e,l,t=s[3],n=[];for(let r=0;r<t.length;r+=1)n[r]=dl(ul(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);N(r,e,i),l=!0},p(r,[i]){if(i&495){t=r[3];let a;for(a=0;a<t.length;a+=1){const f=ul(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=dl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function ii(s,e,l){let t,n,o,r,i,a,f,c,d,u=x,_=()=>(u(),u=Me(i,M=>l(7,d=M)),i);s.$$.on_destroy.push(()=>u());let{path:g}=e,{row:b}=e,{field:w}=e;const y=Re();ge(s,y,M=>l(13,f=M));const C=Je();return ge(s,C,M=>l(2,c=M)),s.$$set=M=>{"path"in M&&l(0,g=M.path),"row"in M&&l(1,b=M.row),"field"in M&&l(10,w=M.field)},s.$$.update=()=>{s.$$.dirty&4&&l(11,t=c.visibleFields||[]),s.$$.dirty&8196&&l(12,n=In(f,c)),s.$$.dirty&4100&&l(6,o=Vn(c,n)),s.$$.dirty&3072&&l(5,r=Mr(w,t)),s.$$.dirty&8192&&_(l(4,i=ot(f.namespace,f.datasetName))),s.$$.dirty&3&&l(3,a=nr(b,g).map(M=>rr.value(M)).filter(Jr))},[g,b,c,a,i,r,o,d,y,C,w,t,n,f]}class ai extends $e{constructor(e){super(),ke(this,e,ii,si,be,{path:0,row:1,field:10})}}function ml(s,e,l){const t=s.slice();return t[8]=e[l],t[10]=l,t}function hl(s){let e,l=[],t=new Map,n,o,r=s[1];const i=a=>Ee(a[8].path);for(let a=0;a<r.length;a+=1){let f=ml(s,r,a),c=i(f);t.set(c,l[a]=_l(c,f))}return{c(){e=S("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<l.length;c+=1)l[c].l(f);f.forEach(m),this.h()},h(){I(e,"class","w-2/3 overflow-hidden"),gt(()=>s[7].call(e))},m(a,f){N(a,e,f);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=Jn(e,s[7].bind(e)),o=!0},p(a,f){f&3&&(r=a[1],le(),l=_n(l,f,i,1,a,r,t,e,gn,_l,null,ml),ne())},i(a){if(!o){for(let f=0;f<r.length;f+=1)h(l[f]);o=!0}},o(a){for(let f=0;f<l.length;f+=1)v(l[f]);o=!1},d(a){a&&m(e);for(let f=0;f<l.length;f+=1)l[f].d();n()}}}function _l(s,e){let l,t,n,o;return t=new ai({props:{row:e[0],path:e[8].path,field:e[8]}}),{key:s,first:null,c(){l=S("div"),B(t.$$.fragment),n=Q(),this.h()},l(r){l=E(r,"DIV",{class:!0});var i=$(l);O(t.$$.fragment,i),n=J(i),i.forEach(m),this.h()},h(){I(l,"class","border-gray-100"),Se(l,"border-b",e[10]<e[1].length-1),this.first=l},m(r,i){N(r,l,i),R(t,l,null),p(l,n),o=!0},p(r,i){e=r;const a={};i&1&&(a.row=e[0]),i&2&&(a.path=e[8].path),i&2&&(a.field=e[8]),t.$set(a),(!o||i&2)&&Se(l,"border-b",e[10]<e[1].length-1)},i(r){o||(h(t.$$.fragment,r),o=!0)},o(r){v(t.$$.fragment,r),o=!1},d(r){r&&m(l),A(t)}}}function oi(s){let e,l,t,n,o,r,i,a,f,c=s[1].length>0&&hl(s);return i=new es({props:{row:s[0],visibleFields:s[2],selectRowsSchema:s[4]}}),{c(){e=S("div"),l=S("div"),c&&c.c(),t=Q(),n=S("div"),o=S("div"),r=S("div"),B(i.$$.fragment),this.h()},l(d){e=E(d,"DIV",{class:!0});var u=$(e);l=E(u,"DIV",{class:!0});var _=$(l);c&&c.l(_),t=J(_),n=E(_,"DIV",{class:!0});var g=$(n);o=E(g,"DIV",{class:!0});var b=$(o);r=E(b,"DIV",{style:!0,class:!0});var w=$(r);O(i.$$.fragment,w),w.forEach(m),b.forEach(m),g.forEach(m),_.forEach(m),u.forEach(m),this.h()},h(){I(r,"style",a=`max-height: ${Math.max(gl,s[3])}px`),I(r,"class","overflow-y-auto"),I(o,"class","sticky top-0 self-start"),I(n,"class","flex h-full w-1/3 bg-neutral-100"),I(l,"class","flex h-full w-full flex-row"),I(e,"class","rounded border-x border-b border-neutral-200 shadow-md")},m(d,u){N(d,e,u),p(e,l),c&&c.m(l,null),p(l,t),p(l,n),p(n,o),p(o,r),R(i,r,null),f=!0},p(d,[u]){d[1].length>0?c?(c.p(d,u),u&2&&h(c,1)):(c=hl(d),c.c(),h(c,1),c.m(l,t)):c&&(le(),v(c,1,1,()=>{c=null}),ne());const _={};u&1&&(_.row=d[0]),u&4&&(_.visibleFields=d[2]),u&16&&(_.selectRowsSchema=d[4]),i.$set(_),(!f||u&8&&a!==(a=`max-height: ${Math.max(gl,d[3])}px`))&&I(r,"style",a)},i(d){f||(h(c),h(i.$$.fragment,d),f=!0)},o(d){v(c),v(i.$$.fragment,d),f=!1},d(d){d&&m(e),c&&c.d(),A(i)}}}const gl=320;function fi(s,e,l){let t,n,{row:o}=e,{mediaFields:r}=e,{visibleFields:i}=e;const a=Je();ge(s,a,d=>l(6,n=d));let f=0;function c(){f=this.clientHeight,l(3,f)}return s.$$set=d=>{"row"in d&&l(0,o=d.row),"mediaFields"in d&&l(1,r=d.mediaFields),"visibleFields"in d&&l(2,i=d.visibleFields)},s.$$.update=()=>{var d;s.$$.dirty&64&&l(4,t=(d=n.selectRowsSchema)==null?void 0:d.data)},[o,r,i,f,t,a,n,c]}class ci extends $e{constructor(e){super(),ke(this,e,fi,oi,be,{row:0,mediaFields:1,visibleFields:2})}}function pl(s,e,l){const t=s.slice();return t[23]=e[l],t}function ui(s){let e,l;return{c(){e=S("div"),l=Z("No results."),this.h()},l(t){e=E(t,"DIV",{class:!0});var n=$(e);l=G(n,"No results."),n.forEach(m),this.h()},h(){I(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){N(t,e,n),p(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function di(s){let e,l;return{c(){e=S("div"),l=Z("Select fields to display"),this.h()},l(t){e=E(t,"DIV",{class:!0});var n=$(e);l=G(n,"Select fields to display"),n.forEach(m),this.h()},h(){I(e,"class","mt-12 w-full text-center text-gray-600")},m(t,n){N(t,e,n),p(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function mi(s){let e,l;return e=new je({props:{paragraph:!0,lines:3}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function hi(s){var t,n;let e,l;return e=new bn({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=s[2].error.body)==null?void 0:t.detail)||((n=s[2])==null?void 0:n.error.message)}}),{c(){B(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,r){R(e,o,r),l=!0},p(o,r){var a,f;const i={};r&4&&(i.subtitle=((a=o[2].error.body)==null?void 0:a.detail)||((f=o[2])==null?void 0:f.error.message)),e.$set(i)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){v(e.$$.fragment,o),l=!1},d(o){A(e,o)}}}function _i(s){var t;let e,l;return e=new bn({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=s[4].error.body)==null?void 0:t.detail)||s[4].error.message}}),{c(){B(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var i;const r={};o&16&&(r.subtitle=((i=n[4].error.body)==null?void 0:i.detail)||n[4].error.message),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function bl(s){let e,l,t,n=s[6],o=[];for(let a=0;a<n.length;a+=1)o[a]=vl(pl(s,n,a));const r=a=>v(o[a],1,1,()=>{o[a]=null});let i=s[6].length>0&&wl(s);return{c(){e=S("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Q(),i&&i.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=J(f),i&&i.l(f),f.forEach(m),this.h()},h(){I(e,"class","flex h-full w-full flex-col gap-y-10 overflow-y-scroll px-5 pb-32")},m(a,f){N(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);p(e,l),i&&i.m(e,null),s[21](e),t=!0},p(a,f){if(f&98){n=a[6];let c;for(c=0;c<n.length;c+=1){const d=pl(a,n,c);o[c]?(o[c].p(d,f),h(o[c],1)):(o[c]=vl(d),o[c].c(),h(o[c],1),o[c].m(e,l))}for(le(),c=n.length;c<o.length;c+=1)r(c);ne()}a[6].length>0?i?(i.p(a,f),f&64&&h(i,1)):(i=wl(a),i.c(),h(i,1),i.m(e,null)):i&&(le(),v(i,1,1,()=>{i=null}),ne())},i(a){if(!t){for(let f=0;f<n.length;f+=1)h(o[f]);h(i),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)v(o[f]);v(i),t=!1},d(a){a&&m(e),ze(o,a),i&&i.d(),s[21](null)}}}function vl(s){let e,l;return e=new ci({props:{visibleFields:s[1],row:s[23],mediaFields:s[5]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&2&&(o.visibleFields=t[1]),n&64&&(o.row=t[23]),n&32&&(o.mediaFields=t[5]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function wl(s){let e,l;return e=new Ms({props:{threshold:100}}),e.$on("loadMore",s[20]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function gi(s){let e,l,t,n,o,r,i;e=new ri({props:{totalNumRows:s[7],manifest:s[12].data}});const a=[_i,hi,mi,di,ui],f=[];function c(u,_){var g,b,w,y;return u[4].isError?0:(g=u[2])!=null&&g.isError?1:(b=u[4])!=null&&b.isFetching||u[13].isFetching||(w=u[2])!=null&&w.isFetching||u[3].isFetching?2:u[1].length===0?3:(y=u[4])!=null&&y.isSuccess&&u[6]&&u[6].length===0?4:-1}~(t=c(s))&&(n=f[t]=a[t](s));let d=s[6]&&s[1].length>0&&s[13].isSuccess&&s[5]!=null&&bl(s);return{c(){B(e.$$.fragment),l=Q(),n&&n.c(),o=Q(),d&&d.c(),r=ie()},l(u){O(e.$$.fragment,u),l=J(u),n&&n.l(u),o=J(u),d&&d.l(u),r=ie()},m(u,_){R(e,u,_),N(u,l,_),~t&&f[t].m(u,_),N(u,o,_),d&&d.m(u,_),N(u,r,_),i=!0},p(u,[_]){const g={};_&128&&(g.totalNumRows=u[7]),_&4096&&(g.manifest=u[12].data),e.$set(g);let b=t;t=c(u),t===b?~t&&f[t].p(u,_):(n&&(le(),v(f[b],1,1,()=>{f[b]=null}),ne()),~t?(n=f[t],n?n.p(u,_):(n=f[t]=a[t](u),n.c()),h(n,1),n.m(o.parentNode,o)):n=null),u[6]&&u[1].length>0&&u[13].isSuccess&&u[5]!=null?d?(d.p(u,_),_&8290&&h(d,1)):(d=bl(u),d.c(),h(d,1),d.m(r.parentNode,r)):d&&(le(),v(d,1,1,()=>{d=null}),ne())},i(u){i||(h(e.$$.fragment,u),h(n),h(d),i=!0)},o(u){v(e.$$.fragment,u),v(n),v(d),i=!1},d(u){A(e,u),u&&m(l),~t&&f[t].d(u),u&&m(o),d&&d.d(u),u&&m(r)}}}function pi(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g,b=x,w=()=>(b(),b=Me(r,q=>l(3,g=q)),r),y,C,M=x,L=()=>(M(),M=Me(a,q=>l(4,C=q)),a),T,H,V=x,F=()=>(V(),V=Me(t,q=>l(12,H=q)),t),D,k=x,P=()=>(k(),k=Me(n,q=>l(13,D=q)),n);s.$$.on_destroy.push(()=>b()),s.$$.on_destroy.push(()=>M()),s.$$.on_destroy.push(()=>V()),s.$$.on_destroy.push(()=>k());const ee=Re();ge(s,ee,q=>l(19,T=q));const X=Je();ge(s,X,q=>l(18,y=q));let K=null;const z=Lr(K),j=()=>C==null?void 0:C.fetchNextPage();function U(q){Be[q?"unshift":"push"](()=>{K=q,l(0,K)})}return s.$$.update=()=>{var q,Y,de,me;s.$$.dirty&524288&&F(l(11,t=sr(T.namespace,T.datasetName))),s.$$.dirty&524288&&P(l(10,n=Et(T.namespace,T.datasetName))),s.$$.dirty&524288&&l(17,o=ir(T)),s.$$.dirty&524288&&w(l(9,r=ot(T.namespace,T.datasetName))),s.$$.dirty&262144&&l(2,i=y.selectRowsSchema),s.$$.dirty&655364&&L(l(8,a=ar(T.namespace,T.datasetName,o||{},i!=null&&i.isSuccess?i.data.schema:void 0))),s.$$.dirty&16&&l(7,f=(q=C.data)==null?void 0:q.pages[0].total_num_rows),s.$$.dirty&16&&l(6,c=(Y=C.data)==null?void 0:Y.pages.flatMap(re=>re.rows)),s.$$.dirty&262144&&l(1,d=(y.visibleFields||[]).sort((re,De)=>Ee(re.path)>Ee(De.path)?1:-1)),s.$$.dirty&6&&l(16,u=((de=i==null?void 0:i.data)==null?void 0:de.schema)!=null?zr((me=i==null?void 0:i.data)==null?void 0:me.schema,d):null),s.$$.dirty&65544&&l(5,_=g.data?Pr(u,g.data):[]),s.$$.dirty&1&&z.set(K)},Kn(Br,z),[K,d,i,g,C,_,c,f,a,r,n,t,H,D,ee,X,u,o,y,T,j,U]}class bi extends $e{constructor(e){super(),ke(this,e,pi,gi,be,{})}}function $l(s,e,l){const t=s.slice();return t[45]=e[l],t}function kl(s,e,l){const t=s.slice();return t[48]=e[l],t}function Sl(s){const e=s[5].find(function(...t){return s[37](s[51],...t)});s[52]=e}function vi(s){let e,l,t=s[52].text+"",n,o,r=s[52].description&&El(s);return{c(){e=S("div"),l=S("div"),n=Z(t),o=Q(),r&&r.c(),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);l=E(a,"DIV",{});var f=$(l);n=G(f,t),f.forEach(m),o=J(a),r&&r.l(a),a.forEach(m),this.h()},h(){I(e,"class","flex justify-between gap-x-4")},m(i,a){N(i,e,a),p(e,l),p(l,n),p(e,o),r&&r.m(e,null)},p(i,a){a[0]&32|a[1]&1048576&&t!==(t=i[52].text+"")&&fe(n,t),i[52].description?r?r.p(i,a):(r=El(i),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:x,o:x,d(i){i&&m(e),r&&r.d()}}}function wi(s){let e,l,t,n,o,r,i;return l=new Xe({props:{$$slots:{default:[Ei]},$$scope:{ctx:s}}}),{c(){e=S("div"),B(l.$$.fragment),t=Q(),n=S("div"),o=Z(`Semantic search:
                    `),r=Z(s[0]),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);O(l.$$.fragment,f),t=J(f),n=E(f,"DIV",{class:!0});var c=$(n);o=G(c,`Semantic search:
                    `),r=G(c,s[0]),c.forEach(m),f.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),p(e,t),p(e,n),p(n,o),p(n,r),i=!0},p(a,f){const c={};f[1]&4194304&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!i||f[0]&1)&&fe(r,a[0])},i(a){i||(h(l.$$.fragment,a),i=!0)},o(a){v(l.$$.fragment,a),i=!1},d(a){a&&m(e),A(l)}}}function $i(s){let e,l,t,n,o,r,i;return l=new Xe({props:{$$slots:{default:[yi]},$$scope:{ctx:s}}}),{c(){e=S("div"),B(l.$$.fragment),t=Q(),n=S("div"),o=Z(`Keyword search:
                    `),r=Z(s[0]),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);O(l.$$.fragment,f),t=J(f),n=E(f,"DIV",{class:!0});var c=$(n);o=G(c,`Keyword search:
                    `),r=G(c,s[0]),c.forEach(m),f.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),p(e,t),p(e,n),p(n,o),p(n,r),i=!0},p(a,f){const c={};f[1]&4194304&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!i||f[0]&1)&&fe(r,a[0])},i(a){i||(h(l.$$.fragment,a),i=!0)},o(a){v(l.$$.fragment,a),i=!1},d(a){a&&m(e),A(l)}}}function ki(s){let e,l,t,n,o,r=s[0]!=""?":":"",i,a,f,c;return l=new Xe({props:{$$slots:{default:[Di]},$$scope:{ctx:s}}}),{c(){e=S("div"),B(l.$$.fragment),t=Q(),n=S("div"),o=Z("New concept"),i=Z(r),a=Q(),f=Z(s[0]),this.h()},l(d){e=E(d,"DIV",{class:!0});var u=$(e);O(l.$$.fragment,u),t=J(u),n=E(u,"DIV",{class:!0});var _=$(n);o=G(_,"New concept"),i=G(_,r),a=J(_),f=G(_,s[0]),_.forEach(m),u.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-concept flex flex-row items-center justify-items-center")},m(d,u){N(d,e,u),R(l,e,null),p(e,t),p(e,n),p(n,o),p(n,i),p(n,a),p(n,f),c=!0},p(d,u){const _={};u[1]&4194304&&(_.$$scope={dirty:u,ctx:d}),l.$set(_),(!c||u[0]&1)&&r!==(r=d[0]!=""?":":"")&&fe(i,r),(!c||u[0]&1)&&fe(f,d[0])},i(d){c||(h(l.$$.fragment,d),c=!0)},o(d){v(l.$$.fragment,d),c=!1},d(d){d&&m(e),A(l)}}}function Si(s){let e;return{c(){e=S("div")},l(l){e=E(l,"DIV",{}),$(e).forEach(m)},m(l,t){N(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function El(s){let e,l=s[52].description+"",t;return{c(){e=S("div"),t=Z(l),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){I(e,"class","truncate text-xs text-gray-500")},m(n,o){N(n,e,o),p(e,t)},p(n,o){o[0]&32|o[1]&1048576&&l!==(l=n[52].description+"")&&fe(t,l)},d(n){n&&m(e)}}}function Ei(s){let e,l;return e=new Mn({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function yi(s){let e,l;return e=new Mn({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Di(s){let e,l;return e=new as({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ii(s){Sl(s);let e,l,t,n;const o=[Si,ki,$i,wi,vi],r=[];function i(a,f){return a[52]==null?0:a[52].id==="new-concept"?1:a[52].id==="keyword-search"?2:a[52].id==="semantic-search"?3:4}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),N(a,t,f),n=!0},p(a,f){Sl(a);let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function yl(s){let e,l;return e=new at({props:{value:Ee(s[48]),text:Ee(s[48])}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=Ee(t[48])),n[0]&512&&(o.text=Ee(t[48])),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Vi(s){let e,l,t=s[9],n=[];for(let r=0;r<t.length;r+=1)n[r]=yl(kl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);N(r,e,i),l=!0},p(r,i){if(i[0]&512){t=r[9];let a;for(a=0;a<t.length;a+=1){const f=kl(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=yl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Dl(s){let e,l;return e=new pt({props:{size:"xl",class:"field-select w-48",selected:s[2]?Ee(s[2]):"",disabled:s[9].length===0,warn:s[9].length===0,$$slots:{default:[Vi]},$$scope:{ctx:s}}}),e.$on("change",s[21]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&4&&(o.selected=t[2]?Ee(t[2]):""),n[0]&512&&(o.disabled=t[9].length===0),n[0]&512&&(o.warn=t[9].length===0),n[0]&512|n[1]&4194304&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Il(s){let e,l;return e=new at({props:{value:s[45].name,text:s[45].name}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&16&&(o.value=t[45].name),n[0]&16&&(o.text=t[45].name),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ni(s){let e,l,t=s[4].data||[],n=[];for(let r=0;r<t.length;r+=1)n[r]=Il($l(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);N(r,e,i),l=!0},p(r,i){if(i[0]&16){t=r[4].data||[];let a;for(a=0;a<t.length;a+=1){const f=$l(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=Il(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Ti(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g=s[9],b,w,y,C,M,L,T;t=new vn({props:{disabled:s[3]||s[8],iconDescription:"Compute embedding index. This may be expensive.",icon:s[3]?Tt:s[8]?Ct:$t}}),t.$on("click",s[36]);function H(D){s[39](D)}let V={size:"xl",items:s[5],shouldFilterItem:Ci,placeholder:s[7],$$slots:{default:[Ii,({item:D})=>({51:D}),({item:D})=>[0,D?1048576:0]]},$$scope:{ctx:s}};s[0]!==void 0&&(V.value=s[0]),c=new ns({props:V}),s[38](c),Be.push(()=>Ue(c,"value",H)),c.$on("select",s[20]);let F=Dl(s);return C=new pt({props:{size:"xl",selected:s[1]||"",name:s[1]||"",$$slots:{default:[Ni]},$$scope:{ctx:s}}}),C.$on("change",s[18]),{c(){e=S("div"),l=S("div"),B(t.$$.fragment),n=Q(),o=S("div"),r=S("div"),i=S("div"),a=S("div"),f=S("div"),B(c.$$.fragment),u=Q(),_=S("div"),F.c(),b=Q(),w=S("div"),y=S("div"),B(C.$$.fragment),this.h()},l(D){e=E(D,"DIV",{class:!0});var k=$(e);l=E(k,"DIV",{class:!0});var P=$(l);O(t.$$.fragment,P),P.forEach(m),n=J(k),o=E(k,"DIV",{class:!0});var ee=$(o);r=E(ee,"DIV",{class:!0});var X=$(r);i=E(X,"DIV",{class:!0});var K=$(i);a=E(K,"DIV",{class:!0});var z=$(a);f=E(z,"DIV",{class:!0});var j=$(f);O(c.$$.fragment,j),j.forEach(m),z.forEach(m),K.forEach(m),X.forEach(m),ee.forEach(m),u=J(k),_=E(k,"DIV",{class:!0});var U=$(_);F.l(U),U.forEach(m),b=J(k),w=E(k,"DIV",{class:!0});var q=$(w);y=E(q,"DIV",{class:!0});var Y=$(y);O(C.$$.fragment,Y),Y.forEach(m),q.forEach(m),k.forEach(m),this.h()},h(){I(l,"class","compute-embedding mr-1"),Se(l,"compute-embedding-indexing",s[8]),I(f,"class","flex-grow"),I(a,"class","flex w-full flex-row items-start justify-items-start"),I(i,"class","flex flex-row"),I(r,"class","w-full"),I(o,"class","search-container flex w-full flex-grow flex-row"),I(_,"class","mx-1"),I(y,"class","w-32"),I(w,"class","embedding-select flex flex-row"),I(e,"class","border-1 flex w-full flex-row items-center")},m(D,k){N(D,e,k),p(e,l),R(t,l,null),p(e,n),p(e,o),p(o,r),p(r,i),p(i,a),p(a,f),R(c,f,null),p(e,u),p(e,_),F.m(_,null),p(e,b),p(e,w),p(w,y),R(C,y,null),M=!0,L||(T=[Ie(Ve.call(null,_,{text:"Select the field to search over."})),Ie(Ve.call(null,y,{text:"Select the embedding to use."}))],L=!0)},p(D,k){const P={};k[0]&264&&(P.disabled=D[3]||D[8]),k[0]&264&&(P.icon=D[3]?Tt:D[8]?Ct:$t),t.$set(P),(!M||k[0]&256)&&Se(l,"compute-embedding-indexing",D[8]);const ee={};k[0]&32&&(ee.items=D[5]),k[0]&128&&(ee.placeholder=D[7]),k[0]&33|k[1]&5242880&&(ee.$$scope={dirty:k,ctx:D}),!d&&k[0]&1&&(d=!0,ee.value=D[0],Ye(()=>d=!1)),c.$set(ee),k[0]&512&&be(g,g=D[9])?(le(),v(F,1,1,x),ne(),F=Dl(D),F.c(),h(F,1),F.m(_,null)):F.p(D,k);const X={};k[0]&2&&(X.selected=D[1]||""),k[0]&2&&(X.name=D[1]||""),k[0]&16|k[1]&4194304&&(X.$$scope={dirty:k,ctx:D}),C.$set(X)},i(D){M||(h(t.$$.fragment,D),h(c.$$.fragment,D),h(F),h(C.$$.fragment,D),M=!0)},o(D){v(t.$$.fragment,D),v(c.$$.fragment,D),v(F),v(C.$$.fragment,D),M=!1},d(D){D&&m(e),A(t),s[38](null),A(c),F.d(D),A(C),L=!1,Qe(T)}}}const Ci=(s,e)=>s.text.toLowerCase().includes(e.toLowerCase())||s.id==="new-concept";function Fi(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,M,L,T,H,V,F,D=x,k=()=>(D(),D=Me(t,ae=>l(34,F=ae)),t),P;s.$$.on_destroy.push(()=>D());const ee=Re();ge(s,ee,ae=>l(33,V=ae));const X=Je();ge(s,X,ae=>l(32,T=ae));const K=Fn();ge(s,K,ae=>l(35,P=ae));const z=wn();ge(s,z,ae=>l(42,C=ae));const j=$n();ge(s,j,ae=>l(4,H=ae));const U=(ae,Ce)=>`${Ee(ae||"")}_${Ce}`;let q={};const Y=or();ge(s,Y,ae=>l(31,L=ae));const de=yt();ge(s,de,ae=>l(30,M=ae));let me=[],re="",De;const ue=ae=>{l(1,f=ae.target.value),ee.setSearchEmbedding(ae.target.value)},se=()=>{f!=null&&(l(22,q[U(r,f)]=!0,q),C.mutate([n,o,{leaf_path:kt(r||[]),signal:{signal_name:f}}]))};let oe;const _e=(ae,Ce)=>{r==null||f==null||(ee.addSearch({path:r,type:"concept",concept_namespace:ae,concept_name:Ce,embedding:f}),oe.clear())},W=ae=>{if(r!=null)if(ae.detail.selectedId==="new-concept"){re===De.id&&l(0,re="");const Ce=re.split("/",2);let qe="",Ae="";Ce.length===2?[qe,Ae]=Ce:[Ae]=Ce,Ge({command:We.CreateConcept,namespace:qe,conceptName:Ae,dataset:{namespace:n,name:o},path:r,onCreate:xe=>_e(xe.detail.namespace,xe.detail.name)}),oe.clear()}else if(ae.detail.selectedId==="keyword-search"){if(re=="")return;ee.addSearch({path:r,type:"keyword",query:re}),oe.clear()}else if(ae.detail.selectedId=="semantic-search"){if(re==""||f==null)return;ee.addSearch({path:r,type:"semantic",query:re,embedding:f}),oe.clear()}else _e(ae.detail.selectedId.namespace,ae.detail.selectedId.name)},te=ae=>{ee.setSearchPath(ae.target.value)},ce=()=>{se()},He=(ae,Ce)=>Ce.id===ae.id;function Ke(ae){Be[ae?"unshift":"push"](()=>{oe=ae,l(6,oe)})}function he(ae){re=ae,l(0,re)}return s.$$.update=()=>{var ae,Ce;s.$$.dirty[1]&4&&k(l(10,t=ot(V.namespace,V.datasetName))),s.$$.dirty[1]&4&&(n=V.namespace),s.$$.dirty[1]&4&&(o=V.datasetName),s.$$.dirty[1]&6&&l(2,r=In(V,T)),s.$$.dirty[0]&4|s.$$.dirty[1]&4&&l(24,i=It(V,r)),s.$$.dirty[1]&2&&l(9,a=(T.visibleFields||[]).filter(qe=>qe.dtype==="string").map(qe=>Ee(qe.path))),s.$$.dirty[0]&20|s.$$.dirty[1]&30&&l(1,f=Rr(P,F.data,V,T,r,(H.data||[]).map(qe=>qe.name))),s.$$.dirty[0]&4|s.$$.dirty[1]&2&&l(29,c=Vn(T,r)),s.$$.dirty[0]&536870914&&l(3,d=c!=null&&!!c.includes(f||"")),s.$$.dirty[0]&4194318&&l(8,u=!d&&q[U(r,f)]),s.$$.dirty[0]&8&&l(7,_=d?"Search by concept or keyword.":'Search by keyword. Click "compute embedding" to search by concept.'),s.$$.dirty[0]&1073741824&&l(28,g=(Ce=(ae=M.data)==null?void 0:ae.user)==null?void 0:Ce.id),s.$$.dirty[0]&268435456|s.$$.dirty[1]&1&&l(25,b=Ar(L.data||[],g)),s.$$.dirty[0]&9&&l(23,De={id:"new-concept",text:re,disabled:!d}),s.$$.dirty[0]&1&&l(27,w={id:"keyword-search",text:re}),s.$$.dirty[0]&9&&l(26,y={id:"semantic-search",text:re,disabled:!d}),s.$$.dirty[0]&1333788683|s.$$.dirty[1]&1&&l(5,me=L!=null&&L.data?[De,...re!=""?[w]:[],...re!=""&&f?[y]:[],...b.flatMap(qe=>qe.concepts.map(Ae=>({id:{namespace:Ae.namespace,name:Ae.name},text:Or(Ae.namespace,Ae.name,M.data),description:Ae.description,disabled:!d||i.some(xe=>xe.type==="concept"&&xe.concept_namespace===Ae.namespace&&xe.concept_name===Ae.name)})))]:[])},[re,f,r,d,H,me,oe,_,u,a,t,ee,X,K,z,j,Y,de,ue,se,W,te,q,De,i,b,y,w,g,c,M,L,T,V,F,P,ce,He,Ke,he]}class Mi extends $e{constructor(e){super(),ke(this,e,Fi,Ti,be,{},null,[-1,-1])}}function zi(s){let e,l;return e=new vn({props:{$$slots:{default:[Bi]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Pi(s){let e,l;return{c(){e=S("span"),l=Z("Invalid query"),this.h()},l(t){e=E(t,"SPAN",{class:!0});var n=$(e);l=G(n,"Invalid query"),n.forEach(m),this.h()},h(){I(e,"class","text-red-500")},m(t,n){N(t,e,n),p(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function Bi(s){let e;return{c(){e=Z("Apply")},l(l){e=G(l,"Apply")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function Ri(s){let e,l,t,n,o,r,i,a,f,c,d;const u=[Pi,zi],_=[];function g(b,w){return b[0]?b[3]?1:-1:0}return~(r=g(s))&&(i=_[r]=u[r](s)),{c(){e=S("pre"),l=Z(""),t=Z(s[2]),n=Z(`
`),o=Q(),i&&i.c(),a=ie(),this.h()},l(b){e=E(b,"PRE",{class:!0,contenteditable:!0});var w=$(e);l=G(w,""),t=G(w,s[2]),n=G(w,`
`),w.forEach(m),o=J(b),i&&i.l(b),a=ie(),this.h()},h(){I(e,"class","whitespace-pre bg-gray-50 p-4 font-mono"),I(e,"contenteditable",""),s[1]===void 0&&gt(()=>s[8].call(e)),Se(e,"outline-red-500",!s[0])},m(b,w){N(b,e,w),p(e,l),p(e,t),p(e,n),s[1]!==void 0&&(e.innerText=s[1]),N(b,o,w),~r&&_[r].m(b,w),N(b,a,w),f=!0,c||(d=Pe(e,"input",s[8]),c=!0)},p(b,[w]){(!f||w&4)&&Zn(t,b[2]),w&2&&b[1]!==e.innerText&&(e.innerText=b[1]),(!f||w&1)&&Se(e,"outline-red-500",!b[0]);let y=r;r=g(b),r===y?~r&&_[r].p(b,w):(i&&(le(),v(_[y],1,1,()=>{_[y]=null}),ne()),~r?(i=_[r],i?i.p(b,w):(i=_[r]=u[r](b),i.c()),h(i,1),i.m(a.parentNode,a)):i=null)},i(b){f||(h(i),f=!0)},o(b){v(i),f=!1},d(b){b&&m(e),b&&m(o),~r&&_[r].d(b),b&&m(a),c=!1,d()}}}function Ai(s,e,l){let t,n,o,r,i;const a=Re();ge(s,a,u=>l(7,i=u));let f=!0;function c(){ut(a,i.query=JSON.parse(o),i)}function d(){o=this.innerText,l(1,o),l(2,n),l(6,t),l(7,i)}return s.$$.update=()=>{if(s.$$.dirty&128&&l(6,t=i.query),s.$$.dirty&64&&l(2,n=t?JSON.stringify(t,null,2):""),s.$$.dirty&4&&l(1,o=n),s.$$.dirty&2)try{JSON.parse(o),l(0,f=!0)}catch{l(0,f=!1)}s.$$.dirty&67&&l(3,r=f&&!fr(JSON.parse(o),t))},[f,o,n,r,a,c,t,i,d]}class Oi extends $e{constructor(e){super(),ke(this,e,Ai,Ri,be,{})}}function Vl(s){let e,l;return e=new Wn({props:{light:!0,flipped:!0,$$slots:{default:[Hi]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&1073742079&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Nl(s){let e,l;return e=new nt({props:{text:"Sort by"}}),e.$on("click",s[20]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Tl(s){let e,l;return e=new nt({props:{text:"Filter"}}),e.$on("click",s[21]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Cl(s){let e,l,t,n,o,r;return l=new nt({props:{disabled:!s[7],text:"Compute embedding"}}),l.$on("click",s[22]),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(i,a){N(i,e,a),R(l,e,null),n=!0,o||(r=Ie(t=Ve.call(null,e,{text:s[7]?"":"User does not have access to compute embeddings over this dataset."})),o=!0)},p(i,a){const f={};a&128&&(f.disabled=!i[7]),l.$set(f),t&&Le(t.update)&&a&128&&t.update.call(null,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),A(l),o=!1,r()}}}function Fl(s){let e,l;return e=new nt({props:{text:"Preview signal"}}),e.$on("click",s[23]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ml(s){let e,l,t,n,o,r;return l=new nt({props:{text:"Compute signal",disabled:!s[7]}}),l.$on("click",s[24]),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(i,a){N(i,e,a),R(l,e,null),n=!0,o||(r=Ie(t=Ve.call(null,e,{text:s[7]?"":"User does not have access to compute signals over this dataset."})),o=!0)},p(i,a){const f={};a&128&&(f.disabled=!i[7]),l.$set(f),t&&Le(t.update)&&a&128&&t.update.call(null,{text:i[7]?"":"User does not have access to compute signals over this dataset."})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),A(l),o=!1,r()}}}function zl(s){let e,l,t,n,o,r;return l=new nt({props:{disabled:!s[6],text:"Delete signal"}}),l.$on("click",s[25]),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);O(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(i,a){N(i,e,a),R(l,e,null),n=!0,o||(r=Ie(t=Ve.call(null,e,{text:s[6]?"":"User does not have access to delete signals for this dataset."})),o=!0)},p(i,a){const f={};a&64&&(f.disabled=!i[6]),l.$set(f),t&&Le(t.update)&&a&64&&t.update.call(null,{text:i[6]?"":"User does not have access to delete signals for this dataset."})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),A(l),o=!1,r()}}}function Hi(s){let e=mt(s[0]),l,t=vt(s[0]),n,o,r,i,a,f,c=e&&Nl(s),d=t&&Tl(s),u=!s[2]&&Cl(s),_=!s[2]&&Fl(s),g=!s[2]&&Ml(s),b=s[1]&&zl(s);return{c(){c&&c.c(),l=Q(),d&&d.c(),n=Q(),u&&u.c(),o=Q(),_&&_.c(),r=Q(),g&&g.c(),i=Q(),b&&b.c(),a=ie()},l(w){c&&c.l(w),l=J(w),d&&d.l(w),n=J(w),u&&u.l(w),o=J(w),_&&_.l(w),r=J(w),g&&g.l(w),i=J(w),b&&b.l(w),a=ie()},m(w,y){c&&c.m(w,y),N(w,l,y),d&&d.m(w,y),N(w,n,y),u&&u.m(w,y),N(w,o,y),_&&_.m(w,y),N(w,r,y),g&&g.m(w,y),N(w,i,y),b&&b.m(w,y),N(w,a,y),f=!0},p(w,y){y&1&&(e=mt(w[0])),e?c?(c.p(w,y),y&1&&h(c,1)):(c=Nl(w),c.c(),h(c,1),c.m(l.parentNode,l)):c&&(le(),v(c,1,1,()=>{c=null}),ne()),y&1&&(t=vt(w[0])),t?d?(d.p(w,y),y&1&&h(d,1)):(d=Tl(w),d.c(),h(d,1),d.m(n.parentNode,n)):d&&(le(),v(d,1,1,()=>{d=null}),ne()),w[2]?u&&(le(),v(u,1,1,()=>{u=null}),ne()):u?(u.p(w,y),y&4&&h(u,1)):(u=Cl(w),u.c(),h(u,1),u.m(o.parentNode,o)),w[2]?_&&(le(),v(_,1,1,()=>{_=null}),ne()):_?(_.p(w,y),y&4&&h(_,1)):(_=Fl(w),_.c(),h(_,1),_.m(r.parentNode,r)),w[2]?g&&(le(),v(g,1,1,()=>{g=null}),ne()):g?(g.p(w,y),y&4&&h(g,1)):(g=Ml(w),g.c(),h(g,1),g.m(i.parentNode,i)),w[1]?b?(b.p(w,y),y&2&&h(b,1)):(b=zl(w),b.c(),h(b,1),b.m(a.parentNode,a)):b&&(le(),v(b,1,1,()=>{b=null}),ne())},i(w){f||(h(c),h(d),h(u),h(_),h(g),h(b),f=!0)},o(w){v(c),v(d),v(u),v(_),v(g),v(b),f=!1},d(w){c&&c.d(w),w&&m(l),d&&d.d(w),w&&m(n),u&&u.d(w),w&&m(o),_&&_.d(w),w&&m(r),g&&g.d(w),w&&m(i),b&&b.d(w),w&&m(a)}}}function qi(s){let e,l,t,n=Ee(s[0].path)+"",o,r,i,a,f;return{c(){e=S("p"),l=Z("Confirm deleting "),t=S("code"),o=Z(n),r=Z(" ?"),i=Q(),a=S("p"),f=Z("This is a permanent action and cannot be undone."),this.h()},l(c){e=E(c,"P",{class:!0});var d=$(e);l=G(d,"Confirm deleting "),t=E(d,"CODE",{});var u=$(t);o=G(u,n),u.forEach(m),r=G(d," ?"),d.forEach(m),i=J(c),a=E(c,"P",{class:!0});var _=$(a);f=G(_,"This is a permanent action and cannot be undone."),_.forEach(m),this.h()},h(){I(e,"class","!text-lg"),I(a,"class","mt-2")},m(c,d){N(c,e,d),p(e,l),p(e,t),p(t,o),p(e,r),N(c,i,d),N(c,a,d),p(a,f)},p(c,d){d&1&&n!==(n=Ee(c[0].path)+"")&&fe(o,n)},d(c){c&&m(e),c&&m(i),c&&m(a)}}}function Li(s){let e,l,t,n,o=s[8]&&Vl(s);function r(a){s[26](a)}let i={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:s[9].isLoading?Ft:void 0,secondaryButtonText:"Cancel",$$slots:{default:[qi]},$$scope:{ctx:s}};return s[3]!==void 0&&(i.open=s[3]),l=new Vt({props:i}),Be.push(()=>Ue(l,"open",r)),l.$on("click:button--secondary",s[27]),l.$on("open",s[28]),l.$on("close",s[29]),l.$on("submit",s[14]),{c(){o&&o.c(),e=Q(),B(l.$$.fragment)},l(a){o&&o.l(a),e=J(a),O(l.$$.fragment,a)},m(a,f){o&&o.m(a,f),N(a,e,f),R(l,a,f),n=!0},p(a,[f]){a[8]?o?(o.p(a,f),f&256&&h(o,1)):(o=Vl(a),o.c(),h(o,1),o.m(e.parentNode,e)):o&&(le(),v(o,1,1,()=>{o=null}),ne());const c={};f&512&&(c.primaryButtonIcon=a[9].isLoading?Ft:void 0),f&1073741825&&(c.$$scope={dirty:f,ctx:a}),!t&&f&8&&(t=!0,c.open=a[3],Ye(()=>t=!1)),l.$set(c)},i(a){n||(h(o),h(l.$$.fragment,a),n=!0)},o(a){v(o),v(l.$$.fragment,a),n=!1},d(a){o&&o.d(a),a&&m(e),A(l,a)}}}function ji(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g,{field:b}=e,{schema:w}=e,y=!1;const C=Re();ge(s,C,U=>l(19,g=U));const M=Je();ge(s,M,U=>l(18,_=U));const L=cr();ge(s,L,U=>l(9,d=U));const T=yt();ge(s,T,U=>l(17,u=U));function H(){d.mutate([t,n,{signal_path:b.path}],{onSuccess:()=>{l(3,y=!1),C.deleteSignal(b.path)}})}const V=()=>C.addSortBy(b.path),F=()=>Ge({command:We.EditFilter,namespace:t,datasetName:n,path:b.path}),D=()=>Ge({command:We.ComputeEmbedding,namespace:t,datasetName:n,path:b==null?void 0:b.path}),k=()=>Ge({command:We.PreviewConcept,namespace:t,datasetName:n,path:b==null?void 0:b.path}),P=()=>Ge({command:We.ComputeSignal,namespace:t,datasetName:n,path:b==null?void 0:b.path}),ee=()=>l(3,y=!0);function X(U){y=U,l(3,y)}const K=()=>l(3,y=!1);function z(U){ct.call(this,s,U)}function j(U){ct.call(this,s,U)}return s.$$set=U=>{"field"in U&&l(0,b=U.field),"schema"in U&&l(15,w=U.schema)},s.$$.update=()=>{var U,q,Y;s.$$.dirty&524288&&l(5,t=g.namespace),s.$$.dirty&524288&&l(4,n=g.datasetName),s.$$.dirty&32769&&l(2,o=tt(b,w)),s.$$.dirty&1&&l(1,r=Dt(b)),s.$$.dirty&262145&&l(16,i=Nn(((U=_.selectRowsSchema)==null?void 0:U.data)||null,b.path)),s.$$.dirty&65543&&l(8,a=(mt(b)||vt(b)||!o||r)&&!i),s.$$.dirty&131072&&l(7,f=(q=u.data)==null?void 0:q.access.dataset.compute_signals),s.$$.dirty&131072&&l(6,c=(Y=u.data)==null?void 0:Y.access.dataset.delete_signals)},[b,r,o,y,n,t,c,f,a,d,C,M,L,T,H,w,i,u,_,g,V,F,D,k,P,ee,X,K,z,j]}class Ui extends $e{constructor(e){super(),ke(this,e,ji,Li,be,{field:0,schema:15})}}function Pl(s,e,l){const t=s.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const o=`${t[8]/t[1]*100}%`;t[10]=o;const r=ye(t[8]);return t[11]=r,t}function Bl(s){let e,l,t=s[9]+"",n,o,r,i,a,f=s[11]+"",c,d,u,_,g;function b(){return s[6](s[7])}return{c(){e=S("button"),l=S("div"),n=Z(t),r=Q(),i=S("div"),a=S("div"),c=Z(f),u=Q(),this.h()},l(w){e=E(w,"BUTTON",{class:!0});var y=$(e);l=E(y,"DIV",{title:!0,class:!0});var C=$(l);n=G(C,t),C.forEach(m),r=J(y),i=E(y,"DIV",{class:!0});var M=$(i);a=E(M,"DIV",{title:!0,class:!0});var L=$(a);c=G(L,f),L.forEach(m),M.forEach(m),u=J(y),y.forEach(m),this.h()},h(){I(l,"title",o=s[9]),I(l,"class","w-48 flex-none truncate px-2"),I(a,"title",d=s[11]),I(a,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),st(a,"width",s[10]),I(i,"class","w-36 border-l border-gray-300 pl-2"),I(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(w,y){N(w,e,y),p(e,l),p(l,n),p(e,r),p(e,i),p(i,a),p(a,c),p(e,u),_||(g=Pe(e,"click",b),_=!0)},p(w,y){s=w,y&1&&t!==(t=s[9]+"")&&fe(n,t),y&1&&o!==(o=s[9])&&I(l,"title",o),y&1&&f!==(f=s[11]+"")&&fe(c,f),y&1&&d!==(d=s[11])&&I(a,"title",d),y&3&&st(a,"width",s[10])},d(w){w&&m(e),_=!1,g()}}}function Yi(s){let e,l=s[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=Bl(Pl(s,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){I(e,"class","histogram")},m(n,o){N(n,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(n,[o]){if(o&15){l=n[0];let r;for(r=0;r<l.length;r+=1){const i=Pl(n,l,r);t[r]?t[r].p(i,o):(t[r]=Bl(i),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},i:x,o:x,d(n){n&&m(e),ze(t,n)}}}function Qi(s,e,l){let t,{field:n}=e,{counts:o}=e,{bins:r}=e;function i(c){if(c==null)return ye(c);if(r==null||n.bins!=null)return ye(c);const[d,u]=r[c.toString()];return d==null?`< ${ye(u)}`:u==null?`≥ ${ye(d)}`:`${ye(d)} .. ${ye(u)}`}const a=_t(),f=c=>a("row-click",{value:c});return s.$$set=c=>{"field"in c&&l(4,n=c.field),"counts"in c&&l(0,o=c.counts),"bins"in c&&l(5,r=c.bins)},s.$$.update=()=>{s.$$.dirty&1&&l(1,t=Math.max(...o.map(([c,d])=>d)))},[o,t,i,a,n,r,f]}class Ji extends $e{constructor(e){super(),ke(this,e,Qi,Yi,be,{field:4,counts:0,bins:5})}}function Ki(s){let e,l,t,n,o,r,i,a,f,c,d,u=ye(s[4].total_count)+"",_,g,b,w,y,C,M,L,T,H,V,F,D=ye(s[4].approx_count_distinct)+"",k,P,ee,X,K,z;r=new it({props:{class:"inline"}}),C=new it({props:{class:"inline"}});let j=s[4].avg_text_length&&Rl(s),U=s[4].min_val&&s[4].max_val&&Al(s);return{c(){e=S("table"),l=S("tbody"),t=S("tr"),n=S("td"),o=S("span"),B(r.$$.fragment),i=Q(),a=S("span"),f=Z("Total count"),c=Q(),d=S("td"),_=Z(u),g=Q(),b=S("tr"),w=S("td"),y=S("span"),B(C.$$.fragment),M=Q(),L=S("span"),T=Z("Unique values"),H=Q(),V=S("td"),F=Z("~"),k=Z(D),P=Q(),j&&j.c(),ee=Q(),U&&U.c(),this.h()},l(q){e=E(q,"TABLE",{class:!0});var Y=$(e);l=E(Y,"TBODY",{});var de=$(l);t=E(de,"TR",{});var me=$(t);n=E(me,"TD",{class:!0});var re=$(n);o=E(re,"SPAN",{});var De=$(o);O(r.$$.fragment,De),De.forEach(m),i=J(re),a=E(re,"SPAN",{});var ue=$(a);f=G(ue,"Total count"),ue.forEach(m),re.forEach(m),c=J(me),d=E(me,"TD",{class:!0});var se=$(d);_=G(se,u),se.forEach(m),me.forEach(m),g=J(de),b=E(de,"TR",{});var oe=$(b);w=E(oe,"TD",{class:!0});var _e=$(w);y=E(_e,"SPAN",{});var W=$(y);O(C.$$.fragment,W),W.forEach(m),M=J(_e),L=E(_e,"SPAN",{});var te=$(L);T=G(te,"Unique values"),te.forEach(m),_e.forEach(m),H=J(oe),V=E(oe,"TD",{class:!0});var ce=$(V);F=G(ce,"~"),k=G(ce,D),ce.forEach(m),oe.forEach(m),P=J(de),j&&j.l(de),ee=J(de),U&&U.l(de),de.forEach(m),Y.forEach(m),this.h()},h(){I(n,"class","svelte-1tctrjz"),I(d,"class","svelte-1tctrjz"),I(w,"class","svelte-1tctrjz"),I(V,"class","svelte-1tctrjz"),I(e,"class","stats-table w-full svelte-1tctrjz")},m(q,Y){N(q,e,Y),p(e,l),p(l,t),p(t,n),p(n,o),R(r,o,null),p(n,i),p(n,a),p(a,f),p(t,c),p(t,d),p(d,_),p(l,g),p(l,b),p(b,w),p(w,y),R(C,y,null),p(w,M),p(w,L),p(L,T),p(b,H),p(b,V),p(V,F),p(V,k),p(l,P),j&&j.m(l,null),p(l,ee),U&&U.m(l,null),X=!0,K||(z=[Ie(Ve.call(null,o,{text:"Total number of rows where the value is defined."})),Ie(Ve.call(null,y,{text:"An approximation of the total number of unique values."}))],K=!0)},p(q,Y){(!X||Y&16)&&u!==(u=ye(q[4].total_count)+"")&&fe(_,u),(!X||Y&16)&&D!==(D=ye(q[4].approx_count_distinct)+"")&&fe(k,D),q[4].avg_text_length?j?(j.p(q,Y),Y&16&&h(j,1)):(j=Rl(q),j.c(),h(j,1),j.m(l,ee)):j&&(le(),v(j,1,1,()=>{j=null}),ne()),q[4].min_val&&q[4].max_val?U?(U.p(q,Y),Y&16&&h(U,1)):(U=Al(q),U.c(),h(U,1),U.m(l,null)):U&&(le(),v(U,1,1,()=>{U=null}),ne())},i(q){X||(h(r.$$.fragment,q),h(C.$$.fragment,q),h(j),h(U),X=!0)},o(q){v(r.$$.fragment,q),v(C.$$.fragment,q),v(j),v(U),X=!1},d(q){q&&m(e),A(r),A(C),j&&j.d(),U&&U.d(),K=!1,Qe(z)}}}function Zi(s){let e,l;return e=new je({props:{paragraph:!0,width:"50%"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Gi(s){let e,l,t=s[2].error.message+"",n;return{c(){e=S("p"),l=Z("Error: "),n=Z(t)},l(o){e=E(o,"P",{});var r=$(e);l=G(r,"Error: "),n=G(r,t),r.forEach(m)},m(o,r){N(o,e,r),p(e,l),p(e,n)},p(o,r){r&4&&t!==(t=o[2].error.message+"")&&fe(n,t)},i:x,o:x,d(o){o&&m(e)}}}function Rl(s){let e,l,t,n,o,r,i,a,f,c=ye(s[4].avg_text_length)+"",d,u,_,g;return n=new it({props:{class:"inline"}}),{c(){e=S("tr"),l=S("td"),t=S("span"),B(n.$$.fragment),o=Q(),r=S("span"),i=Z("Average text length"),a=Q(),f=S("td"),d=Z(c),this.h()},l(b){e=E(b,"TR",{});var w=$(e);l=E(w,"TD",{class:!0});var y=$(l);t=E(y,"SPAN",{});var C=$(t);O(n.$$.fragment,C),C.forEach(m),o=J(y),r=E(y,"SPAN",{});var M=$(r);i=G(M,"Average text length"),M.forEach(m),y.forEach(m),a=J(w),f=E(w,"TD",{class:!0});var L=$(f);d=G(L,c),L.forEach(m),w.forEach(m),this.h()},h(){I(l,"class","svelte-1tctrjz"),I(f,"class","svelte-1tctrjz")},m(b,w){N(b,e,w),p(e,l),p(l,t),R(n,t,null),p(l,o),p(l,r),p(r,i),p(e,a),p(e,f),p(f,d),u=!0,_||(g=Ie(Ve.call(null,t,{text:"The average length of the text in characters."})),_=!0)},p(b,w){(!u||w&16)&&c!==(c=ye(b[4].avg_text_length)+"")&&fe(d,c)},i(b){u||(h(n.$$.fragment,b),u=!0)},o(b){v(n.$$.fragment,b),u=!1},d(b){b&&m(e),A(n),_=!1,g()}}}function Al(s){let e,l,t,n,o,r,i,a,f,c=ye(s[4].min_val)+"",d,u,_=ye(s[4].max_val)+"",g,b,w,y;return n=new it({props:{class:"inline"}}),{c(){e=S("tr"),l=S("td"),t=S("span"),B(n.$$.fragment),o=Q(),r=S("span"),i=Z("Range"),a=Q(),f=S("td"),d=Z(c),u=Z(" .. "),g=Z(_),this.h()},l(C){e=E(C,"TR",{});var M=$(e);l=E(M,"TD",{class:!0});var L=$(l);t=E(L,"SPAN",{});var T=$(t);O(n.$$.fragment,T),T.forEach(m),o=J(L),r=E(L,"SPAN",{});var H=$(r);i=G(H,"Range"),H.forEach(m),L.forEach(m),a=J(M),f=E(M,"TD",{class:!0});var V=$(f);d=G(V,c),u=G(V," .. "),g=G(V,_),V.forEach(m),M.forEach(m),this.h()},h(){I(l,"class","svelte-1tctrjz"),I(f,"class","svelte-1tctrjz")},m(C,M){N(C,e,M),p(e,l),p(l,t),R(n,t,null),p(l,o),p(l,r),p(r,i),p(e,a),p(e,f),p(f,d),p(f,u),p(f,g),b=!0,w||(y=Ie(Ve.call(null,t,{text:"The minimum and maximum value across the dataset"})),w=!0)},p(C,M){(!b||M&16)&&c!==(c=ye(C[4].min_val)+"")&&fe(d,c),(!b||M&16)&&_!==(_=ye(C[4].max_val)+"")&&fe(g,_)},i(C){b||(h(n.$$.fragment,C),b=!0)},o(C){v(n.$$.fragment,C),b=!1},d(C){C&&m(e),A(n),w=!1,y()}}}function Wi(s){let e,l,t;return l=new Ji({props:{counts:s[5],bins:s[3],field:s[0]}}),l.$on("row-click",s[13]),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","mt-4")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const r={};o&32&&(r.counts=n[5]),o&8&&(r.bins=n[3]),o&1&&(r.field=n[0]),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),A(l)}}}function Xi(s){let e,l;return e=new je({props:{paragraph:!0,width:"50%"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function xi(s){let e,l,t=s[1].error.message+"",n;return{c(){e=S("p"),l=Z("Error: "),n=Z(t)},l(o){e=E(o,"P",{});var r=$(e);l=G(r,"Error: "),n=G(r,t),r.forEach(m)},m(o,r){N(o,e,r),p(e,l),p(e,n)},p(o,r){r&2&&t!==(t=o[1].error.message+"")&&fe(n,t)},i:x,o:x,d(o){o&&m(e)}}}function ea(s){let e,l,t,n,o,r,i;const a=[Gi,Zi,Ki],f=[];function c(g,b){return g[2].error?0:g[4]==null?1:2}l=c(s),t=f[l]=a[l](s);const d=[xi,Xi,Wi],u=[];function _(g,b){return g[1].error?0:g[5]==null?1:g[5].length>0?2:-1}return~(o=_(s))&&(r=u[o]=d[o](s)),{c(){e=S("div"),t.c(),n=Q(),r&&r.c(),this.h()},l(g){e=E(g,"DIV",{class:!0});var b=$(e);t.l(b),n=J(b),r&&r.l(b),b.forEach(m),this.h()},h(){I(e,"class","p-4")},m(g,b){N(g,e,b),f[l].m(e,null),p(e,n),~o&&u[o].m(e,null),i=!0},p(g,[b]){let w=l;l=c(g),l===w?f[l].p(g,b):(le(),v(f[w],1,1,()=>{f[w]=null}),ne(),t=f[l],t?t.p(g,b):(t=f[l]=a[l](g),t.c()),h(t,1),t.m(e,n));let y=o;o=_(g),o===y?~o&&u[o].p(g,b):(r&&(le(),v(u[y],1,1,()=>{u[y]=null}),ne()),~o?(r=u[o],r?r.p(g,b):(r=u[o]=d[o](g),r.c()),h(r,1),r.m(e,null)):r=null)},i(g){i||(h(t),h(r),i=!0)},o(g){v(t),v(r),i=!1},d(g){g&&m(e),f[l].d(),~o&&u[o].d()}}}function ta(s,e,l){let t,n,o,r,i,a=x,f=()=>(a(),a=Me(n,T=>l(1,i=T)),n),c,d=x,u=()=>(d(),d=Me(t,T=>l(2,c=T)),t),_;s.$$.on_destroy.push(()=>a()),s.$$.on_destroy.push(()=>d());let{field:g}=e;const b=Re();ge(s,b,T=>l(12,_=T));let w,y,C=null;function M(T){if(T==null)return;if(C!=null){const[V,F]=C[T.toString()];if(V!=null){const D={path:g.path,op:"greater_equal",value:V};b.addFilter(D)}if(F!=null){const D={path:g.path,op:"less",value:F};b.addFilter(D)}return}const H={path:g.path,op:"equals",value:T};b.addFilter(H)}const L=T=>M(T.detail.value);return s.$$set=T=>{"field"in T&&l(0,g=T.field)},s.$$.update=()=>{var T;if(s.$$.dirty&4097&&u(l(7,t=ur(_.namespace,_.datasetName,{leaf_path:g.path}))),s.$$.dirty&1&&l(10,w=dr(g.dtype)&&!g.categorical?"value":"count"),s.$$.dirty&1024&&l(11,y=w==="value"?"ASC":"DESC"),s.$$.dirty&7169&&f(l(6,n=mr(_.namespace,_.datasetName,{leaf_path:g.path,filters:_.query.filters,sort_by:w,sort_order:y}))),s.$$.dirty&2&&l(5,o=i.data!=null?i.data.counts:null),s.$$.dirty&4&&l(4,r=c.data!=null?c.data:null),s.$$.dirty&2)if(((T=i.data)==null?void 0:T.bins)!=null){l(3,C={});for(const[H,V,F]of Object.values(i.data.bins))l(3,C[H]=[V,F],C)}else l(3,C=null)},[g,i,c,C,r,o,n,t,b,M,w,y,_,L]}class la extends $e{constructor(e){super(),ke(this,e,ta,ea,be,{field:0})}}function Ol(s,e,l){const t=s.slice();return t[38]=e[l],t}function Hl(s,e,l){const t=s.slice();return t[41]=e[l],t}function ql(s,e,l){const t=s.slice();return t[44]=e[l],t}function Ll(s,e,l){const t=s.slice();return t[47]=e[l],t}function na(s){let e,l="{}",t;return{c(){e=S("span"),t=Z(l),this.h()},l(n){e=E(n,"SPAN",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){I(e,"class","font-mono")},m(n,o){N(n,e,o),p(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function ra(s){let e,l,t,n;var o=lt[s[1].repeated_field.dtype];function r(i){return{props:{title:i[1].dtype}}}return o&&(l=et(o,r(s))),{c(){e=S("div"),l&&B(l.$$.fragment),t=Z("[]"),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);l&&O(l.$$.fragment,a),t=G(a,"[]"),a.forEach(m),this.h()},h(){I(e,"class","flex")},m(i,a){N(i,e,a),l&&R(l,e,null),p(e,t),n=!0},p(i,a){const f={};if(a[0]&2&&(f.title=i[1].dtype),a[0]&2&&o!==(o=lt[i[1].repeated_field.dtype])){if(l){le();const c=l;v(c.$$.fragment,1,0,()=>{A(c,1)}),ne()}o?(l=et(o,r(i)),B(l.$$.fragment),h(l.$$.fragment,1),R(l,e,t)):l=null}else o&&l.$set(f)},i(i){n||(l&&h(l.$$.fragment,i),n=!0)},o(i){l&&v(l.$$.fragment,i),n=!1},d(i){i&&m(e),l&&A(l)}}}function sa(s){let e,l,t;var n=lt[s[1].dtype];function o(r){return{props:{title:r[1].dtype}}}return n&&(e=et(n,o(s))),{c(){e&&B(e.$$.fragment),l=ie()},l(r){e&&O(e.$$.fragment,r),l=ie()},m(r,i){e&&R(e,r,i),N(r,l,i),t=!0},p(r,i){const a={};if(i[0]&2&&(a.title=r[1].dtype),i[0]&2&&n!==(n=lt[r[1].dtype])){if(e){le();const f=e;v(f.$$.fragment,1,0,()=>{A(f,1)}),ne()}n?(e=et(n,o(r)),B(e.$$.fragment),h(e.$$.fragment,1),R(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&h(e.$$.fragment,r),t=!0)},o(r){e&&v(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&A(e,r)}}}function jl(s){let e,l;return e=new Nt({props:{interactive:!0,type:"green",$$slots:{default:[oa]},$$scope:{ctx:s}}}),e.$on("click",s[32]),e.$on("remove",s[33]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&16384|n[1]&524288&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ia(s){let e,l;return e=new Pn({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function aa(s){let e,l;return e=new zn({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function oa(s){let e,l,t,n,o,r,i,a;const f=[aa,ia],c=[];function d(u,_){return u[14]=="ASC"?0:1}return r=d(s),i=c[r]=f[r](s),{c(){e=S("div"),l=S("div"),t=Z("Sorted"),n=Q(),o=S("span"),i.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var _=$(e);l=E(_,"DIV",{class:!0});var g=$(l);t=G(g,"Sorted"),g.forEach(m),n=J(_),o=E(_,"SPAN",{});var b=$(o);i.l(b),b.forEach(m),_.forEach(m),this.h()},h(){I(l,"class","mr-1"),I(e,"class","flex flex-row")},m(u,_){N(u,e,_),p(e,l),p(l,t),p(e,n),p(e,o),c[r].m(o,null),a=!0},p(u,_){let g=r;r=d(u),r!==g&&(le(),v(c[g],1,1,()=>{c[g]=null}),ne(),i=c[r],i||(i=c[r]=f[r](u),i.c()),h(i,1),i.m(o,null))},i(u){a||(h(i),a=!0)},o(u){v(i),a=!1},d(u){u&&m(e),c[r].d()}}}function Ul(s){let e,l,t=s[7],n=[];for(let r=0;r<t.length;r+=1)n[r]=Yl(Ll(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);N(r,e,i),l=!0},p(r,i){if(i[0]&128){t=r[7];let a;for(a=0;a<t.length;a+=1){const f=Ll(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=Yl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Yl(s){let e,l;return e=new Bn({props:{filter:s[47],hidePath:!0}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.filter=t[47]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ql(s){let e,l;return e=new Rn({props:{search:s[44]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&4096&&(o.search=t[44]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Jl(s){var t;let e,l;return e=new Tn({props:{embedding:(t=s[41].signal)==null?void 0:t.signal_name}}),{c(){B(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var i;const r={};o[0]&65536&&(r.embedding=(i=n[41].signal)==null?void 0:i.signal_name),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Kl(s){let e,l,t,n,o,r,i;return l=new Xe({props:{type:"cyan",icon:$t}}),l.$on("click",s[34]),n=new ts({props:{isPreview:!0}}),n.$on("click",s[35]),{c(){e=S("div"),B(l.$$.fragment),t=Q(),B(n.$$.fragment),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);O(l.$$.fragment,f),f.forEach(m),t=J(a),O(n.$$.fragment,a),this.h()},h(){I(e,"class","compute-signal-preview pointer-events-auto")},m(a,f){N(a,e,f),R(l,e,null),N(a,t,f),R(n,a,f),o=!0,r||(i=Ie(Ve.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),r=!0)},p:x,i(a){o||(h(l.$$.fragment,a),h(n.$$.fragment,a),o=!0)},o(a){v(l.$$.fragment,a),v(n.$$.fragment,a),o=!1},d(a){a&&m(e),A(l),a&&m(t),A(n,a),r=!1,i()}}}function Zl(s){let e,l,t,n,o,r,i;return t=new Qr({}),{c(){e=S("button"),l=S("div"),B(t.$$.fragment),this.h()},l(a){e=E(a,"BUTTON",{});var f=$(e);l=E(f,"DIV",{class:!0});var c=$(l);O(t.$$.fragment,c),c.forEach(m),f.forEach(m),this.h()},h(){I(l,"class","transition"),Se(l,"rotate-180",s[20]),Se(e,"bg-slate-300",s[20])},m(a,f){N(a,e,f),p(e,l),R(t,l,null),o=!0,r||(i=[Ie(n=Ve.call(null,e,{text:s[20]?"Close statistics":"See statistics"})),Pe(e,"click",s[36])],r=!0)},p(a,f){(!o||f[0]&1048576)&&Se(l,"rotate-180",a[20]),n&&Le(n.update)&&f[0]&1048576&&n.update.call(null,{text:a[20]?"Close statistics":"See statistics"}),(!o||f[0]&1048576)&&Se(e,"bg-slate-300",a[20])},i(a){o||(h(t.$$.fragment,a),o=!0)},o(a){v(t.$$.fragment,a),o=!1},d(a){a&&m(e),A(t),r=!1,Qe(i)}}}function Gl(s){let e,l,t,n;return l=new la({props:{field:s[1]}}),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(o){e=E(o,"DIV",{class:!0});var r=$(e);O(l.$$.fragment,r),r.forEach(m),this.h()},h(){I(e,"class","px-2")},m(o,r){N(o,e,r),R(l,e,null),n=!0},p(o,r){const i={};r[0]&2&&(i.field=o[1]),l.$set(i)},i(o){n||(h(l.$$.fragment,o),o&&gt(()=>{n&&(t||(t=dt(e,ht,{},!0)),t.run(1))}),n=!0)},o(o){v(l.$$.fragment,o),o&&(t||(t=dt(e,ht,{},!1)),t.run(0)),n=!1},d(o){o&&m(e),A(l),o&&t&&t.end()}}}function Wl(s){let e,l,t=s[18],n=[];for(let r=0;r<t.length;r+=1)n[r]=Xl(Ol(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);N(r,e,i),l=!0},p(r,i){if(i[0]&262415){t=r[18];let a;for(a=0;a<t.length;a+=1){const f=Ol(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=Xl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Xl(s){let e,l;return e=new An({props:{schema:s[0],field:s[38],indent:s[3]+1,sourceField:s[8]&&tt(s[38],s[0])?s[1]:s[2]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&262144&&(o.field=t[38]),n[0]&8&&(o.indent=t[3]+1),n[0]&262407&&(o.sourceField=t[8]&&tt(t[38],t[0])?t[1]:t[2]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function fa(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,M,L,T,H,V,F,D,k,P,ee;n=new kn({props:{labelText:"Show",hideLabel:!0,checked:s[17]}}),n.$on("change",s[30]);const X=[sa,ra,na],K=[];function z(W,te){return W[1].dtype?0:W[1].repeated_field&&W[1].repeated_field.dtype?1:2}i=z(s),a=K[i]=X[i](s);let j=s[15]&&jl(s),U=s[13]&&Ul(s),q=s[12],Y=[];for(let W=0;W<q.length;W+=1)Y[W]=Ql(ql(s,q,W));const de=W=>v(Y[W],1,1,()=>{Y[W]=null});let me=s[16],re=[];for(let W=0;W<me.length;W+=1)re[W]=Jl(Hl(s,me,W));const De=W=>v(re[W],1,1,()=>{re[W]=null});let ue=s[4]&&s[21]&&Kl(s),se=s[10]&&Zl(s);T=new Ui({props:{field:s[1],schema:s[0]}});let oe=s[20]&&Gl(s),_e=s[18].length&&Wl(s);return{c(){e=S("div"),l=S("div"),t=S("div"),B(n.$$.fragment),o=Q(),r=S("div"),a.c(),c=Q(),d=S("button"),u=Z(s[19]),g=Q(),j&&j.c(),b=Q(),U&&U.c(),w=Q();for(let W=0;W<Y.length;W+=1)Y[W].c();y=Q();for(let W=0;W<re.length;W+=1)re[W].c();C=Q(),ue&&ue.c(),M=Q(),se&&se.c(),L=Q(),B(T.$$.fragment),H=Q(),oe&&oe.c(),V=Q(),F=S("div"),_e&&_e.c(),this.h()},l(W){e=E(W,"DIV",{class:!0});var te=$(e);l=E(te,"DIV",{class:!0});var ce=$(l);t=E(ce,"DIV",{});var He=$(t);O(n.$$.fragment,He),He.forEach(m),o=J(ce),r=E(ce,"DIV",{class:!0});var Ke=$(r);a.l(Ke),Ke.forEach(m),c=J(ce),d=E(ce,"BUTTON",{class:!0});var he=$(d);u=G(he,s[19]),he.forEach(m),g=J(ce),j&&j.l(ce),b=J(ce),U&&U.l(ce),w=J(ce);for(let Ce=0;Ce<Y.length;Ce+=1)Y[Ce].l(ce);y=J(ce);for(let Ce=0;Ce<re.length;Ce+=1)re[Ce].l(ce);C=J(ce),ue&&ue.l(ce),M=J(ce),se&&se.l(ce),L=J(ce),O(T.$$.fragment,ce),ce.forEach(m),H=J(te),oe&&oe.l(te),V=J(te),F=E(te,"DIV",{});var ae=$(F);_e&&_e.l(ae),ae.forEach(m),te.forEach(m),this.h()},h(){st(t,"margin-left",s[3]*1.5+"rem"),I(r,"class","rounded-md bg-blue-200 p-0.5"),Se(r,"bg-blue-200",s[5]),I(d,"class","ml-2 grow cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),d.disabled=_=!s[10],Se(d,"cursor-default",!s[10]),I(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),Se(l,"bg-blue-50",s[5]),Se(l,"bg-emerald-100",s[4]),Se(l,"hover:bg-blue-100",s[5]),I(e,"class","border-gray-300"),Se(e,"border-b",!s[5])},m(W,te){N(W,e,te),p(e,l),p(l,t),R(n,t,null),p(l,o),p(l,r),K[i].m(r,null),p(l,c),p(l,d),p(d,u),p(l,g),j&&j.m(l,null),p(l,b),U&&U.m(l,null),p(l,w);for(let ce=0;ce<Y.length;ce+=1)Y[ce]&&Y[ce].m(l,null);p(l,y);for(let ce=0;ce<re.length;ce+=1)re[ce]&&re[ce].m(l,null);p(l,C),ue&&ue.m(l,null),p(l,M),se&&se.m(l,null),p(l,L),R(T,l,null),p(e,H),oe&&oe.m(e,null),p(e,V),p(e,F),_e&&_e.m(F,null),k=!0,P||(ee=[Ie(f=Ve.call(null,r,{text:s[11]})),Pe(d,"click",s[31])],P=!0)},p(W,te){const ce={};te[0]&131072&&(ce.checked=W[17]),n.$set(ce),te[0]&8&&st(t,"margin-left",W[3]*1.5+"rem");let He=i;if(i=z(W),i===He?K[i].p(W,te):(le(),v(K[He],1,1,()=>{K[He]=null}),ne(),a=K[i],a?a.p(W,te):(a=K[i]=X[i](W),a.c()),h(a,1),a.m(r,null)),f&&Le(f.update)&&te[0]&2048&&f.update.call(null,{text:W[11]}),(!k||te[0]&32)&&Se(r,"bg-blue-200",W[5]),(!k||te[0]&524288)&&fe(u,W[19]),(!k||te[0]&1024&&_!==(_=!W[10]))&&(d.disabled=_),(!k||te[0]&1024)&&Se(d,"cursor-default",!W[10]),W[15]?j?(j.p(W,te),te[0]&32768&&h(j,1)):(j=jl(W),j.c(),h(j,1),j.m(l,b)):j&&(le(),v(j,1,1,()=>{j=null}),ne()),W[13]?U?(U.p(W,te),te[0]&8192&&h(U,1)):(U=Ul(W),U.c(),h(U,1),U.m(l,w)):U&&(le(),v(U,1,1,()=>{U=null}),ne()),te[0]&4096){q=W[12];let he;for(he=0;he<q.length;he+=1){const ae=ql(W,q,he);Y[he]?(Y[he].p(ae,te),h(Y[he],1)):(Y[he]=Ql(ae),Y[he].c(),h(Y[he],1),Y[he].m(l,y))}for(le(),he=q.length;he<Y.length;he+=1)de(he);ne()}if(te[0]&65536){me=W[16];let he;for(he=0;he<me.length;he+=1){const ae=Hl(W,me,he);re[he]?(re[he].p(ae,te),h(re[he],1)):(re[he]=Jl(ae),re[he].c(),h(re[he],1),re[he].m(l,C))}for(le(),he=me.length;he<re.length;he+=1)De(he);ne()}W[4]&&W[21]?ue?(ue.p(W,te),te[0]&2097168&&h(ue,1)):(ue=Kl(W),ue.c(),h(ue,1),ue.m(l,M)):ue&&(le(),v(ue,1,1,()=>{ue=null}),ne()),W[10]?se?(se.p(W,te),te[0]&1024&&h(se,1)):(se=Zl(W),se.c(),h(se,1),se.m(l,L)):se&&(le(),v(se,1,1,()=>{se=null}),ne());const Ke={};te[0]&2&&(Ke.field=W[1]),te[0]&1&&(Ke.schema=W[0]),T.$set(Ke),(!k||te[0]&32)&&Se(l,"bg-blue-50",W[5]),(!k||te[0]&16)&&Se(l,"bg-emerald-100",W[4]),(!k||te[0]&32)&&Se(l,"hover:bg-blue-100",W[5]),W[20]?oe?(oe.p(W,te),te[0]&1048576&&h(oe,1)):(oe=Gl(W),oe.c(),h(oe,1),oe.m(e,V)):oe&&(le(),v(oe,1,1,()=>{oe=null}),ne()),W[18].length?_e?(_e.p(W,te),te[0]&262144&&h(_e,1)):(_e=Wl(W),_e.c(),h(_e,1),_e.m(F,null)):_e&&(le(),v(_e,1,1,()=>{_e=null}),ne()),(!k||te[0]&32)&&Se(e,"border-b",!W[5])},i(W){if(!k){h(n.$$.fragment,W),h(a),h(j),h(U);for(let te=0;te<q.length;te+=1)h(Y[te]);for(let te=0;te<me.length;te+=1)h(re[te]);h(ue),h(se),h(T.$$.fragment,W),h(oe),h(_e),W&&gt(()=>{k&&(D||(D=dt(F,ht,{},!0)),D.run(1))}),k=!0}},o(W){v(n.$$.fragment,W),v(a),v(j),v(U),Y=Y.filter(Boolean);for(let te=0;te<Y.length;te+=1)v(Y[te]);re=re.filter(Boolean);for(let te=0;te<re.length;te+=1)v(re[te]);v(ue),v(se),v(T.$$.fragment,W),v(oe),v(_e),W&&(D||(D=dt(F,ht,{},!1)),D.run(0)),k=!1},d(W){W&&m(e),A(n),K[i].d(),j&&j.d(),U&&U.d(),ze(Y,W),ze(re,W),ue&&ue.d(),se&&se.d(),A(T),oe&&oe.d(),_e&&_e.d(),W&&D&&D.end(),P=!1,Qe(ee)}}}function ca(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,M,L,T,H,V,F,D,{schema:k}=e,{field:P}=e,{sourceField:ee=void 0}=e,{indent:X=0}=e;const K=wn();ge(s,K,se=>l(22,D=se));const z=Re();ge(s,z,se=>l(9,V=se));const j=Je();ge(s,j,se=>l(29,F=se));function U(se){return se!=null&&se.repeated_field?U(se.repeated_field):se!=null&&se.fields?[...Object.values(se.fields).filter(oe=>oe.path.at(-1)!==hr)].filter(oe=>{var _e,W,te,ce;return!(oe.dtype==="embedding"||oe.signal!=null&&rt(oe).some(He=>He.dtype==="embedding")||((_e=oe.signal)==null?void 0:_e.signal_name)==="sentences"||((W=oe.signal)==null?void 0:W.signal_name)==="substring_search"||((te=oe.signal)==null?void 0:te.signal_name)==="semantic_similarity"||((ce=oe.signal)==null?void 0:ce.signal_name)==="concept_labels")}):[]}const q=()=>{d?z.removeSelectedColumn(r):z.addSelectedColumn(r)},Y=()=>{H&&(i?z.removeExpandedColumn(r):z.addExpandedColumn(r))},de=()=>g==="ASC"?ut(z,V.query.sort_order="DESC",V):ut(z,V.query.sort_order="ASC",V),me=()=>z.removeSortBy(r),re=()=>P.signal&&y&&ee&&D.mutate([V.namespace,V.datasetName,{leaf_path:ee.path,signal:P.signal}]),De=()=>{var se;return P.signal&&y&&Ge({command:We.EditPreviewConcept,namespace:V.namespace,datasetName:V.datasetName,path:ee==null?void 0:ee.path,signalName:(se=P.signal)==null?void 0:se.signal_name,value:P.signal})},ue=()=>{i?z.removeExpandedColumn(r):z.addExpandedColumn(r)};return s.$$set=se=>{"schema"in se&&l(0,k=se.schema),"field"in se&&l(1,P=se.field),"sourceField"in se&&l(2,ee=se.sourceField),"indent"in se&&l(3,X=se.indent)},s.$$.update=()=>{var se,oe,_e,W;s.$$.dirty[0]&3&&l(5,t=tt(P,k)),s.$$.dirty[0]&2&&l(21,n=Dt(P)),s.$$.dirty[0]&32&&l(8,o=!t),s.$$.dirty[0]&2&&l(6,r=P.path),s.$$.dirty[0]&576&&l(20,i=V.expandedColumns[Ee(r)]||!1),s.$$.dirty[0]&64&&l(28,a=r.at(-1)===wt),s.$$.dirty[0]&268435520&&l(19,f=a?r.at(-2):r.at(-1)),s.$$.dirty[0]&2&&l(18,c=U(P)),s.$$.dirty[0]&536870976&&l(17,d=(se=F.visibleFields)==null?void 0:se.some(te=>Ze(te.path,r))),s.$$.dirty[0]&258&&l(16,u=o?rt(P).filter(te=>te.signal!=null&&rt(te).some(ce=>ce.dtype==="embedding")):[]),s.$$.dirty[0]&576&&l(15,_=(oe=V.query.sort_by)==null?void 0:oe.some(te=>Ze(te,r))),s.$$.dirty[0]&512&&l(14,g=V.query.sort_order),s.$$.dirty[0]&576&&l(7,b=((_e=V.query.filters)==null?void 0:_e.filter(te=>Ze(te.path,r)))||[]),s.$$.dirty[0]&128&&l(13,w=b.length>0),s.$$.dirty[0]&536870976&&l(4,y=Nn(((W=F.selectRowsSchema)==null?void 0:W.data)||null,r)),s.$$.dirty[0]&576&&l(12,C=It(V,r)),s.$$.dirty[0]&32&&l(26,M=t?". Generated by a signal":""),s.$$.dirty[0]&2&&l(27,L=P.dtype??(P.repeated_field&&P.repeated_field.dtype?`${P.repeated_field.dtype}[]`:"object")),s.$$.dirty[0]&201326592&&l(11,T=`${L}${M}`),s.$$.dirty[0]&18&&l(10,H=mt(P)&&!y)},[k,P,ee,X,y,t,r,b,o,V,H,T,C,w,g,_,u,d,c,f,i,n,D,K,z,j,M,L,a,F,q,Y,de,me,re,De,ue]}class An extends $e{constructor(e){super(),ke(this,e,ca,fa,be,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function xl(s,e,l){const t=s.slice();return t[3]=e[l],t}function ua(s){let e,l,t,n;return e=new Mt({props:{label:"Schema",class:"w-1/3"}}),t=new Mt({props:{label:"Query",class:"w-1/3"}}),{c(){B(e.$$.fragment),l=Q(),B(t.$$.fragment)},l(o){O(e.$$.fragment,o),l=J(o),O(t.$$.fragment,o)},m(o,r){R(e,o,r),N(o,l,r),R(t,o,r),n=!0},p:x,i(o){n||(h(e.$$.fragment,o),h(t.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),v(t.$$.fragment,o),n=!1},d(o){A(e,o),o&&m(l),A(t,o)}}}function da(s){let e=[],l=new Map,t,n,o=Object.keys(s[0].data.schema.fields);const r=i=>i[3];for(let i=0;i<o.length;i+=1){let a=xl(s,o,i),f=r(a);l.set(f,e[i]=en(f,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=ie()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);t=ie()},m(i,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(i,a);N(i,t,a),n=!0},p(i,a){a&1&&(o=Object.keys(i[0].data.schema.fields),le(),e=_n(e,a,r,1,i,o,l,t.parentNode,gn,en,t,xl),ne())},i(i){if(!n){for(let a=0;a<o.length;a+=1)h(e[a]);n=!0}},o(i){for(let a=0;a<e.length;a+=1)v(e[a]);n=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&m(t)}}}function ma(s){let e,l;return e=new je({props:{paragraph:!0,lines:3}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function en(s,e){let l,t,n;return t=new An({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:s,first:null,c(){l=ie(),B(t.$$.fragment),this.h()},l(o){l=ie(),O(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,r){N(o,l,r),R(t,o,r),n=!0},p(o,r){e=o;const i={};r&1&&(i.schema=e[0].data.schema),r&1&&(i.field=e[0].data.schema.fields[e[3]]),t.$set(i)},i(o){n||(h(t.$$.fragment,o),n=!0)},o(o){v(t.$$.fragment,o),n=!1},d(o){o&&m(l),A(t,o)}}}function ha(s){let e,l,t,n;const o=[ma,da],r=[];function i(a,f){var c,d;return(c=a[0])!=null&&c.isLoading?0:(d=a[0])!=null&&d.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(e=i(s))&&(l=r[e]=o[e](s)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),N(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?~e&&r[e].p(a,f):(l&&(le(),v(r[c],1,1,()=>{r[c]=null}),ne()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function _a(s){let e,l;return e=new Oi({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ga(s){let e,l,t,n,o;return l=new zt({props:{$$slots:{default:[ha]},$$scope:{ctx:s}}}),n=new zt({props:{$$slots:{default:[_a]},$$scope:{ctx:s}}}),{c(){e=S("div"),B(l.$$.fragment),t=Q(),B(n.$$.fragment),this.h()},l(r){e=E(r,"DIV",{class:!0,slot:!0});var i=$(e);O(l.$$.fragment,i),t=J(i),O(n.$$.fragment,i),i.forEach(m),this.h()},h(){I(e,"class","h-full overflow-y-auto"),I(e,"slot","content")},m(r,i){N(r,e,i),R(l,e,null),p(e,t),R(n,e,null),o=!0},p(r,i){const a={};i&65&&(a.$$scope={dirty:i,ctx:r}),l.$set(a);const f={};i&64&&(f.$$scope={dirty:i,ctx:r}),n.$set(f)},i(r){o||(h(l.$$.fragment,r),h(n.$$.fragment,r),o=!0)},o(r){v(l.$$.fragment,r),v(n.$$.fragment,r),o=!1},d(r){r&&m(e),A(l),A(n)}}}function pa(s){let e,l,t;return l=new ls({props:{class:"overflow-hidden border-b border-gray-200",$$slots:{content:[ga],default:[ua]},$$scope:{ctx:s}}}),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","schema flex h-full flex-col pt-4")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,[o]){const r={};o&65&&(r.$$scope={dirty:o,ctx:n}),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),A(l)}}}function ba(s,e,l){let t,n;const o=Je();return ge(s,o,r=>l(2,n=r)),s.$$.update=()=>{s.$$.dirty&4&&l(0,t=n.selectRowsSchema)},[t,o,n]}class va extends $e{constructor(e){super(),ke(this,e,ba,pa,be,{})}}function tn(s,e,l){const t=s.slice();return t[5]=e[l],t}function wa(s){let e,l="{}",t;return{c(){e=S("span"),t=Z(l),this.h()},l(n){e=E(n,"SPAN",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){I(e,"class","font-mono")},m(n,o){N(n,e,o),p(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function $a(s){let e,l,t;var n=lt[s[5].dtype];function o(r){return{props:{title:r[5].dtype}}}return n&&(e=et(n,o(s))),{c(){e&&B(e.$$.fragment),l=ie()},l(r){e&&O(e.$$.fragment,r),l=ie()},m(r,i){e&&R(e,r,i),N(r,l,i),t=!0},p(r,i){const a={};if(i&2&&(a.title=r[5].dtype),i&2&&n!==(n=lt[r[5].dtype])){if(e){le();const f=e;v(f.$$.fragment,1,0,()=>{A(f,1)}),ne()}n?(e=et(n,o(r)),B(e.$$.fragment),h(e.$$.fragment,1),R(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&h(e.$$.fragment,r),t=!0)},o(r){e&&v(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&A(e,r)}}}function ln(s){let e;return{c(){e=Z("[]")},l(l){e=G(l,"[]")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function nn(s){let e,l,t,n,o,r,i,a,f,c=s[5].path.indexOf(wt)>=0,d,u,_=Ee(s[5].path)+"",g,b,w;function y(...V){return s[3](s[5],...V)}function C(...V){return s[4](s[5],...V)}t=new kn({props:{labelText:"Download",hideLabel:!0,checked:s[0].find(y)!=null}}),t.$on("change",C);const M=[$a,wa],L=[];function T(V,F){return V[5].dtype?0:1}i=T(s),a=L[i]=M[i](s);let H=c&&ln();return{c(){e=S("div"),l=S("div"),B(t.$$.fragment),n=Q(),o=S("div"),r=S("div"),a.c(),f=Q(),H&&H.c(),d=Q(),u=S("div"),g=Z(_),b=Q(),this.h()},l(V){e=E(V,"DIV",{class:!0});var F=$(e);l=E(F,"DIV",{class:!0});var D=$(l);O(t.$$.fragment,D),D.forEach(m),n=J(F),o=E(F,"DIV",{class:!0});var k=$(o);r=E(k,"DIV",{class:!0});var P=$(r);a.l(P),f=J(P),H&&H.l(P),P.forEach(m),k.forEach(m),d=J(F),u=E(F,"DIV",{class:!0});var ee=$(u);g=G(ee,_),ee.forEach(m),b=J(F),F.forEach(m),this.h()},h(){I(l,"class","mr-2"),I(r,"class","inline-flex items-center rounded-md bg-blue-200 p-0.5"),I(o,"class","flex w-10"),I(u,"class","flex-grow"),I(e,"class","flex items-center")},m(V,F){N(V,e,F),p(e,l),R(t,l,null),p(e,n),p(e,o),p(o,r),L[i].m(r,null),p(r,f),H&&H.m(r,null),p(e,d),p(e,u),p(u,g),p(e,b),w=!0},p(V,F){s=V;const D={};F&3&&(D.checked=s[0].find(y)!=null),t.$set(D);let k=i;i=T(s),i===k?L[i].p(s,F):(le(),v(L[k],1,1,()=>{L[k]=null}),ne(),a=L[i],a?a.p(s,F):(a=L[i]=M[i](s),a.c()),h(a,1),a.m(r,f)),F&2&&(c=s[5].path.indexOf(wt)>=0),c?H||(H=ln(),H.c(),H.m(r,null)):H&&(H.d(1),H=null),(!w||F&2)&&_!==(_=Ee(s[5].path)+"")&&fe(g,_)},i(V){w||(h(t.$$.fragment,V),h(a),w=!0)},o(V){v(t.$$.fragment,V),v(a),w=!1},d(V){V&&m(e),A(t),L[i].d(),H&&H.d()}}}function ka(s){let e,l,t=s[1],n=[];for(let r=0;r<t.length;r+=1)n[r]=nn(tn(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);N(r,e,i),l=!0},p(r,[i]){if(i&7){t=r[1];let a;for(a=0;a<t.length;a+=1){const f=tn(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=nn(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Sa(s,e,l){let{fields:t}=e,{checkedFields:n}=e;function o(a,f){f.target.checked?(n.push(a),l(0,n)):l(0,n=n.filter(d=>d!==a))}const r=(a,f)=>Ze(f.path,a.path),i=(a,f)=>o(a,f);return s.$$set=a=>{"fields"in a&&l(1,t=a.fields),"checkedFields"in a&&l(0,n=a.checkedFields)},[n,t,o,r,i]}class bt extends $e{constructor(e){super(),ke(this,e,Sa,ka,be,{fields:1,checkedFields:0})}}function rn(s,e,l){const t=s.slice();return t[29]=e[l],t}function Ea(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,M,L,T,H,V,F,D,k,P,ee;function X(z){s[23](z)}let K={invalid:s[8]!=s[9]};return s[8]!==void 0&&(K.value=s[8]),M=new vr({props:K}),Be.push(()=>Ue(M,"value",X)),F=new Ur({}),{c(){e=S("div"),l=S("section"),t=S("div"),n=Z("Delete this dataset"),o=Q(),r=S("div"),i=S("p"),a=Z("This action cannot be undone."),f=Q(),c=S("p"),d=Z(`This will permanently delete the
                  `),u=S("span"),_=Z(s[9]),g=Z(` dataset and all its files. Please type
                  `),b=S("span"),w=Z(s[9]),y=Z(" to confirm."),C=Q(),B(M.$$.fragment),T=Q(),H=S("button"),V=Z(`I understand, delete this dataset
                `),B(F.$$.fragment),this.h()},l(z){e=E(z,"DIV",{class:!0});var j=$(e);l=E(j,"SECTION",{class:!0});var U=$(l);t=E(U,"DIV",{class:!0});var q=$(t);n=G(q,"Delete this dataset"),q.forEach(m),o=J(U),r=E(U,"DIV",{class:!0});var Y=$(r);i=E(Y,"P",{class:!0});var de=$(i);a=G(de,"This action cannot be undone."),de.forEach(m),f=J(Y),c=E(Y,"P",{});var me=$(c);d=G(me,`This will permanently delete the
                  `),u=E(me,"SPAN",{class:!0});var re=$(u);_=G(re,s[9]),re.forEach(m),g=G(me,` dataset and all its files. Please type
                  `),b=E(me,"SPAN",{class:!0});var De=$(b);w=G(De,s[9]),De.forEach(m),y=G(me," to confirm."),me.forEach(m),Y.forEach(m),C=J(U),O(M.$$.fragment,U),T=J(U),H=E(U,"BUTTON",{class:!0});var ue=$(H);V=G(ue,`I understand, delete this dataset
                `),O(F.$$.fragment,ue),ue.forEach(m),U.forEach(m),j.forEach(m),this.h()},h(){I(t,"class","text-lg text-gray-700"),I(i,"class","mb-2"),I(u,"class","font-bold"),I(b,"class","font-bold"),I(r,"class","mb-4 text-sm text-gray-500"),I(H,"class","flex cursor-pointer flex-row justify-between p-4 text-left hover:bg-gray-200"),H.disabled=D=s[8]!=s[9],Se(H,"cursor-not-allowed",s[8]!=s[9]),I(l,"class","flex flex-col gap-y-1"),I(e,"class","flex flex-col gap-y-6")},m(z,j){N(z,e,j),p(e,l),p(l,t),p(t,n),p(l,o),p(l,r),p(r,i),p(i,a),p(r,f),p(r,c),p(c,d),p(c,u),p(u,_),p(c,g),p(c,b),p(b,w),p(c,y),p(l,C),R(M,l,null),p(l,T),p(l,H),p(H,V),R(F,H,null),k=!0,P||(ee=Pe(H,"click",s[24]),P=!0)},p(z,j){(!k||j[0]&512)&&fe(_,z[9]),(!k||j[0]&512)&&fe(w,z[9]);const U={};j[0]&768&&(U.invalid=z[8]!=z[9]),!L&&j[0]&256&&(L=!0,U.value=z[8],Ye(()=>L=!1)),M.$set(U),(!k||j[0]&768&&D!==(D=z[8]!=z[9]))&&(H.disabled=D),(!k||j[0]&768)&&Se(H,"cursor-not-allowed",z[8]!=z[9])},i(z){k||(h(M.$$.fragment,z),h(F.$$.fragment,z),k=!0)},o(z){v(M.$$.fragment,z),v(F.$$.fragment,z),k=!1},d(z){z&&m(e),A(M),A(F),P=!1,ee()}}}function ya(s){let e,l,t,n;const o=[Ia,Da],r=[];function i(a,f){return a[6].isFetching?0:1}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),N(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function Da(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,M,L,T,H,V,F,D,k=s[3]!=null&&sn(s);const P=[Na,Va],ee=[];function X(z,j){return z[11].isFetching?0:1}C=X(s),M=ee[C]=P[C](s);let K=s[3]!=null&&s[4]!=null&&on(s);return{c(){e=S("div"),l=S("section"),t=S("div"),n=Z("Media fields"),o=Q(),r=S("div"),i=Z("These fields will be presented differently from the rest of the metadata fields."),a=Q(),k&&k.c(),f=Q(),c=S("section"),d=S("div"),u=Z("Preferred embedding"),_=Q(),g=S("div"),b=Z("This embedding will be used by default when indexing and querying the data."),w=Q(),y=S("div"),M.c(),L=Q(),T=S("section"),H=S("div"),V=Z("Render as markdown"),F=Q(),K&&K.c(),this.h()},l(z){e=E(z,"DIV",{class:!0});var j=$(e);l=E(j,"SECTION",{class:!0});var U=$(l);t=E(U,"DIV",{class:!0});var q=$(t);n=G(q,"Media fields"),q.forEach(m),o=J(U),r=E(U,"DIV",{class:!0});var Y=$(r);i=G(Y,"These fields will be presented differently from the rest of the metadata fields."),Y.forEach(m),a=J(U),k&&k.l(U),U.forEach(m),f=J(j),c=E(j,"SECTION",{class:!0});var de=$(c);d=E(de,"DIV",{class:!0});var me=$(d);u=G(me,"Preferred embedding"),me.forEach(m),_=J(de),g=E(de,"DIV",{class:!0});var re=$(g);b=G(re,"This embedding will be used by default when indexing and querying the data."),re.forEach(m),w=J(de),y=E(de,"DIV",{class:!0});var De=$(y);M.l(De),De.forEach(m),de.forEach(m),L=J(j),T=E(j,"SECTION",{class:!0});var ue=$(T);H=E(ue,"DIV",{class:!0});var se=$(H);V=G(se,"Render as markdown"),se.forEach(m),F=J(ue),K&&K.l(ue),ue.forEach(m),j.forEach(m),this.h()},h(){I(t,"class","text-lg text-gray-700"),I(r,"class","text-sm text-gray-500"),I(l,"class","flex flex-col gap-y-1"),I(d,"class","text-lg text-gray-700"),I(g,"class","text-sm text-gray-500"),I(y,"class","w-60"),I(c,"class","flex flex-col gap-y-1"),I(H,"class","text-lg text-gray-700"),I(T,"class","flex flex-col gap-y-1"),I(e,"class","flex flex-col gap-y-6")},m(z,j){N(z,e,j),p(e,l),p(l,t),p(t,n),p(l,o),p(l,r),p(r,i),p(l,a),k&&k.m(l,null),p(e,f),p(e,c),p(c,d),p(d,u),p(c,_),p(c,g),p(g,b),p(c,w),p(c,y),ee[C].m(y,null),p(e,L),p(e,T),p(T,H),p(H,V),p(T,F),K&&K.m(T,null),D=!0},p(z,j){z[3]!=null?k?(k.p(z,j),j[0]&8&&h(k,1)):(k=sn(z),k.c(),h(k,1),k.m(l,null)):k&&(le(),v(k,1,1,()=>{k=null}),ne());let U=C;C=X(z),C===U?ee[C].p(z,j):(le(),v(ee[U],1,1,()=>{ee[U]=null}),ne(),M=ee[C],M?M.p(z,j):(M=ee[C]=P[C](z),M.c()),h(M,1),M.m(y,null)),z[3]!=null&&z[4]!=null?K?(K.p(z,j),j[0]&24&&h(K,1)):(K=on(z),K.c(),h(K,1),K.m(T,null)):K&&(le(),v(K,1,1,()=>{K=null}),ne())},i(z){D||(h(k),h(M),h(K),D=!0)},o(z){v(k),v(M),v(K),D=!1},d(z){z&&m(e),k&&k.d(),ee[C].d(),K&&K.d()}}}function Ia(s){let e,l;return e=new je({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function sn(s){let e,l,t;function n(r){s[21](r)}let o={fields:s[5]};return s[3]!==void 0&&(o.checkedFields=s[3]),e=new bt({props:o}),Be.push(()=>Ue(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){R(e,r,i),t=!0},p(r,i){const a={};i[0]&32&&(a.fields=r[5]),!l&&i[0]&8&&(l=!0,a.checkedFields=r[3],Ye(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){A(e,r)}}}function Va(s){var t;let e,l;return e=new pt({props:{selected:(t=s[6].data)==null?void 0:t.preferred_embedding,$$slots:{default:[Ta]},$$scope:{ctx:s}}}),e.$on("change",s[16]),{c(){B(e.$$.fragment)},l(n){O(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var i;const r={};o[0]&64&&(r.selected=(i=n[6].data)==null?void 0:i.preferred_embedding),o[0]&2048|o[1]&2&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){A(e,n)}}}function Na(s){let e,l;return e=new wr({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function an(s){let e,l;return e=new at({props:{value:s[29].name}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&2048&&(o.value=t[29].name),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ta(s){let e,l,t,n;e=new at({props:{value:void 0,text:"None"}});let o=s[11].data||[],r=[];for(let a=0;a<o.length;a+=1)r[a]=an(rn(s,o,a));const i=a=>v(r[a],1,1,()=>{r[a]=null});return{c(){B(e.$$.fragment),l=Q();for(let a=0;a<r.length;a+=1)r[a].c();t=ie()},l(a){O(e.$$.fragment,a),l=J(a);for(let f=0;f<r.length;f+=1)r[f].l(a);t=ie()},m(a,f){R(e,a,f),N(a,l,f);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,f);N(a,t,f),n=!0},p(a,f){if(f[0]&2048){o=a[11].data||[];let c;for(c=0;c<o.length;c+=1){const d=rn(a,o,c);r[c]?(r[c].p(d,f),h(r[c],1)):(r[c]=an(d),r[c].c(),h(r[c],1),r[c].m(t.parentNode,t))}for(le(),c=o.length;c<r.length;c+=1)i(c);ne()}},i(a){if(!n){h(e.$$.fragment,a);for(let f=0;f<o.length;f+=1)h(r[f]);n=!0}},o(a){v(e.$$.fragment,a),r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)v(r[f]);n=!1},d(a){A(e,a),a&&m(l),ze(r,a),a&&m(t)}}}function on(s){let e,l,t;function n(r){s[22](r)}let o={fields:s[3]};return s[4]!==void 0&&(o.checkedFields=s[4]),e=new bt({props:o}),Be.push(()=>Ue(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){R(e,r,i),t=!0},p(r,i){const a={};i[0]&8&&(a.fields=r[3]),!l&&i[0]&16&&(l=!0,a.checkedFields=r[4],Ye(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){A(e,r)}}}function Ca(s){let e,l,t,n,o,r,i,a;t=new br({props:{items:[{title:"Fields",value:"fields"},{title:"Administration",value:"administration"}],item:s[7]}}),t.$on("select",s[20]);const f=[ya,Ea],c=[];function d(u,_){return u[7]==="fields"?0:u[7]==="administration"?1:-1}return~(r=d(s))&&(i=c[r]=f[r](s)),{c(){e=S("div"),l=S("div"),B(t.$$.fragment),n=Q(),o=S("div"),i&&i.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var _=$(e);l=E(_,"DIV",{class:!0});var g=$(l);O(t.$$.fragment,g),g.forEach(m),n=J(_),o=E(_,"DIV",{class:!0});var b=$(o);i&&i.l(b),b.forEach(m),_.forEach(m),this.h()},h(){I(l,"class","-ml-4 mr-4 w-96 grow-0"),I(o,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),I(e,"class","flex flex-row")},m(u,_){N(u,e,_),p(e,l),R(t,l,null),p(e,n),p(e,o),~r&&c[r].m(o,null),a=!0},p(u,_){const g={};_[0]&128&&(g.item=u[7]),t.$set(g);let b=r;r=d(u),r===b?~r&&c[r].p(u,_):(i&&(le(),v(c[b],1,1,()=>{c[b]=null}),ne()),~r?(i=c[r],i?i.p(u,_):(i=c[r]=f[r](u),i.c()),h(i,1),i.m(o,null)):i=null)},i(u){a||(h(t.$$.fragment,u),h(i),a=!0)},o(u){v(t.$$.fragment,u),v(i),a=!1},d(u){u&&m(e),A(t),~r&&c[r].d()}}}function Fa(s){let e,l,t,n,o,r;return e=new En({props:{label:"Changes",title:"Dataset settings"}}),t=new yn({props:{hasForm:!0,$$slots:{default:[Ca]},$$scope:{ctx:s}}}),o=new Dn({props:{primaryButtonText:"Save",secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",close),{c(){B(e.$$.fragment),l=Q(),B(t.$$.fragment),n=Q(),B(o.$$.fragment)},l(i){O(e.$$.fragment,i),l=J(i),O(t.$$.fragment,i),n=J(i),O(o.$$.fragment,i)},m(i,a){R(e,i,a),N(i,l,a),R(t,i,a),N(i,n,a),R(o,i,a),r=!0},p(i,a){const f={};a[0]&7166|a[1]&2&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){r||(h(e.$$.fragment,i),h(t.$$.fragment,i),h(o.$$.fragment,i),r=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),v(o.$$.fragment,i),r=!1},d(i){A(e,i),i&&m(l),A(t,i),i&&m(n),A(o,i)}}}function Ma(s){let e,l;return e=new Sn({props:{open:s[0],$$slots:{default:[Fa]},$$scope:{ctx:s}}}),e.$on("submit",s[17]),e.$on("close",s[25]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.open=t[0]),n[0]&7166|n[1]&2&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function za(s,e,l){let t,n,o,r,i,a=x,f=()=>(a(),a=Me(t,q=>l(6,i=q)),t),c,d,u;s.$$.on_destroy.push(()=>a());let{namespace:_}=e,{name:g}=e,{open:b=!1}=e,{schema:w}=e;const y=Fn();ge(s,y,q=>l(28,c=q));const C=$n();ge(s,C,q=>l(11,d=q));const M=_r();ge(s,M,q=>l(27,r=q));let L="fields",T=null,H=null,V=c.embedding;function F(q){V=q.target.value,V===""&&(V=void 0)}function D(){if(T==null)return;const q={ui:{media_paths:T.map(Y=>Y.path),markdown_paths:H==null?void 0:H.map(Y=>Y.path)},preferred_embedding:V};r.mutate([_,g,q],{onSuccess:()=>{l(0,b=!1)}})}let k="";const P=gr();ge(s,P,q=>l(12,u=q));const ee=q=>l(7,L=q.detail);function X(q){T=q,l(3,T),l(6,i),l(5,o),l(19,w)}function K(q){H=q,l(4,H),l(6,i),l(5,o),l(19,w)}function z(q){k=q,l(8,k)}const j=()=>u.mutate([_,g],{onSuccess:()=>pn("/")}),U=()=>l(0,b=!1);return s.$$set=q=>{"namespace"in q&&l(1,_=q.namespace),"name"in q&&l(2,g=q.name),"open"in q&&l(0,b=q.open),"schema"in q&&l(19,w=q.schema)},s.$$.update=()=>{var q,Y,de,me;if(s.$$.dirty[0]&6&&f(l(10,t=ot(_,g))),s.$$.dirty[0]&6&&l(9,n=Kr(_,g)),s.$$.dirty[0]&524288&&l(5,o=St(w).filter(re=>re.dtype==="string"&&!Ze(re.path,[pr])&&!tt(re,w))),s.$$.dirty[0]&104&&T==null){const re=(Y=(q=i.data)==null?void 0:q.ui)==null?void 0:Y.media_paths;re!=null&&l(3,T=o.filter(De=>re.some(ue=>Ze(De.path,ue))))}if(s.$$.dirty[0]&112&&H==null){const re=(me=(de=i.data)==null?void 0:de.ui)==null?void 0:me.markdown_paths;re!=null&&l(4,H=o.filter(De=>re.some(ue=>Ze(De.path,ue))))}},[b,_,g,T,H,o,i,L,k,n,t,d,u,y,C,M,F,D,P,w,ee,X,K,z,j,U]}class Pa extends $e{constructor(e){super(),ke(this,e,za,Ma,be,{namespace:1,name:2,open:0,schema:19},null,[-1,-1])}}function Ba(s){let e,l,t;function n(r){s[13](r)}let o={fields:s[6]};return s[1]!==void 0&&(o.checkedFields=s[1]),e=new bt({props:o}),Be.push(()=>Ue(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){R(e,r,i),t=!0},p(r,i){const a={};i&64&&(a.fields=r[6]),!l&&i&2&&(l=!0,a.checkedFields=r[1],Ye(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){A(e,r)}}}function Ra(s){let e,l;return e=new je({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function fn(s){let e,l,t,n,o,r,i;const a=[Oa,Aa],f=[];function c(d,u){return d[5]==null?0:1}return o=c(s),r=f[o]=a[o](s),{c(){e=S("section"),l=S("h4"),t=Z("Select enriched fields"),n=Q(),r.c(),this.h()},l(d){e=E(d,"SECTION",{});var u=$(e);l=E(u,"H4",{class:!0});var _=$(l);t=G(_,"Select enriched fields"),_.forEach(m),n=J(u),r.l(u),u.forEach(m),this.h()},h(){I(l,"class","svelte-1ge817j")},m(d,u){N(d,e,u),p(e,l),p(l,t),p(e,n),f[o].m(e,null),i=!0},p(d,u){let _=o;o=c(d),o===_?f[o].p(d,u):(le(),v(f[_],1,1,()=>{f[_]=null}),ne(),r=f[o],r?r.p(d,u):(r=f[o]=a[o](d),r.c()),h(r,1),r.m(e,null))},i(d){i||(h(r),i=!0)},o(d){v(r),i=!1},d(d){d&&m(e),f[o].d()}}}function Aa(s){let e,l,t;function n(r){s[14](r)}let o={fields:s[5]};return s[2]!==void 0&&(o.checkedFields=s[2]),e=new bt({props:o}),Be.push(()=>Ue(e,"checkedFields",n)),{c(){B(e.$$.fragment)},l(r){O(e.$$.fragment,r)},m(r,i){R(e,r,i),t=!0},p(r,i){const a={};i&32&&(a.fields=r[5]),!l&&i&4&&(l=!0,a.checkedFields=r[2],Ye(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){A(e,r)}}}function Oa(s){let e,l;return e=new je({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function cn(s){let e,l;return{c(){e=S("p"),l=Z("No fields selected. Please select at least one field to download."),this.h()},l(t){e=E(t,"P",{class:!0});var n=$(e);l=G(n,"No fields selected. Please select at least one field to download."),n.forEach(m),this.h()},h(){I(e,"class","text-gray-600")},m(t,n){N(t,e,n),p(e,l)},d(t){t&&m(e)}}}function Ha(s){let e,l;return e=new Cn({props:{value:JSON.stringify(s[7].data,null,2),readonly:!0,rows:30,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&128&&(o.value=JSON.stringify(t[7].data,null,2)),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function qa(s){let e,l;return e=new je({props:{paragraph:!0}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function La(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y;const C=[Ra,Ba],M=[];function L(k,P){return k[6]==null?0:1}o=L(s),r=M[o]=C[o](s);let T=(s[5]==null||s[5].length>0)&&fn(s),H=s[3].length===0&&cn();const V=[qa,Ha],F=[];function D(k,P){return k[7]&&k[7].isFetching?0:k[4]&&k[7]?1:-1}return~(b=D(s))&&(w=F[b]=V[b](s)),{c(){e=S("section"),l=S("h4"),t=Z("Select source fields"),n=Q(),r.c(),i=Q(),T&&T.c(),a=Q(),f=S("section"),c=S("h4"),d=Z("Download preview"),u=Q(),H&&H.c(),_=Q(),g=S("div"),w&&w.c(),this.h()},l(k){e=E(k,"SECTION",{});var P=$(e);l=E(P,"H4",{class:!0});var ee=$(l);t=G(ee,"Select source fields"),ee.forEach(m),n=J(P),r.l(P),P.forEach(m),i=J(k),T&&T.l(k),a=J(k),f=E(k,"SECTION",{});var X=$(f);c=E(X,"H4",{class:!0});var K=$(c);d=G(K,"Download preview"),K.forEach(m),u=J(X),H&&H.l(X),_=J(X),g=E(X,"DIV",{class:!0});var z=$(g);w&&w.l(z),z.forEach(m),X.forEach(m),this.h()},h(){I(l,"class","svelte-1ge817j"),I(c,"class","svelte-1ge817j"),I(g,"class","preview svelte-1ge817j")},m(k,P){N(k,e,P),p(e,l),p(l,t),p(e,n),M[o].m(e,null),N(k,i,P),T&&T.m(k,P),N(k,a,P),N(k,f,P),p(f,c),p(c,d),p(f,u),H&&H.m(f,null),p(f,_),p(f,g),~b&&F[b].m(g,null),y=!0},p(k,P){let ee=o;o=L(k),o===ee?M[o].p(k,P):(le(),v(M[ee],1,1,()=>{M[ee]=null}),ne(),r=M[o],r?r.p(k,P):(r=M[o]=C[o](k),r.c()),h(r,1),r.m(e,null)),k[5]==null||k[5].length>0?T?(T.p(k,P),P&32&&h(T,1)):(T=fn(k),T.c(),h(T,1),T.m(a.parentNode,a)):T&&(le(),v(T,1,1,()=>{T=null}),ne()),k[3].length===0?H||(H=cn(),H.c(),H.m(f,_)):H&&(H.d(1),H=null);let X=b;b=D(k),b===X?~b&&F[b].p(k,P):(w&&(le(),v(F[X],1,1,()=>{F[X]=null}),ne()),~b?(w=F[b],w?w.p(k,P):(w=F[b]=V[b](k),w.c()),h(w,1),w.m(g,null)):w=null)},i(k){y||(h(r),h(T),h(w),y=!0)},o(k){v(r),v(T),v(w),y=!1},d(k){k&&m(e),M[o].d(),k&&m(i),T&&T.d(k),k&&m(a),k&&m(f),H&&H.d(),~b&&F[b].d()}}}function ja(s){let e,l,t,n,o,r;return e=new En({props:{title:"Download data"}}),t=new yn({props:{hasForm:!0,$$slots:{default:[La]},$$scope:{ctx:s}}}),o=new Dn({props:{primaryButtonText:"Download",primaryButtonDisabled:s[3].length===0,secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",s[10]),{c(){B(e.$$.fragment),l=Q(),B(t.$$.fragment),n=Q(),B(o.$$.fragment)},l(i){O(e.$$.fragment,i),l=J(i),O(t.$$.fragment,i),n=J(i),O(o.$$.fragment,i)},m(i,a){R(e,i,a),N(i,l,a),R(t,i,a),N(i,n,a),R(o,i,a),r=!0},p(i,a){const f={};a&262398&&(f.$$scope={dirty:a,ctx:i}),t.$set(f);const c={};a&8&&(c.primaryButtonDisabled=i[3].length===0),o.$set(c)},i(i){r||(h(e.$$.fragment,i),h(t.$$.fragment,i),h(o.$$.fragment,i),r=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),v(o.$$.fragment,i),r=!1},d(i){A(e,i),i&&m(l),A(t,i),i&&m(n),A(o,i)}}}function Ua(s){let e,l;return e=new Sn({props:{size:"lg",open:s[0],$$slots:{default:[ja]},$$scope:{ctx:s}}}),e.$on("submit",s[9]),e.$on("close",s[15]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,[n]){const o={};n&1&&(o.open=t[0]),n&262398&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ya(s,e,l){let t,n,o,r,i,a,f=x,c=()=>(f(),f=Me(r,V=>l(7,a=V)),r);s.$$.on_destroy.push(()=>f());let{open:d=!1}=e,{schema:u}=e;const _=_t(),g=Re();ge(s,g,V=>l(12,i=V));let b=[],w=[];function y(V){if(V==null)return{sourceFields:null,enrichedFields:null};const D=St(V).filter(P=>["embedding"].indexOf(P.dtype)===-1).filter(P=>!tt(P,V)),k=rt(V).filter(P=>Dt(P)).filter(P=>!rt(P).some(ee=>ee.dtype==="embedding"));return{sourceFields:D,enrichedFields:k}}async function C(){const V=i.namespace,F=i.datasetName,D={combine_columns:!1,columns:o.map(ee=>ee.path)},k=`/api/v1/datasets/${V}/${F}/select_rows_download?url_safe_options=${encodeURIComponent(JSON.stringify(D))}`,P=document.createElement("a");P.download=`${V}_${F}.json`,P.href=k,document.body.appendChild(P),P.click(),P.remove()}function M(){l(0,d=!1),_("close")}function L(V){b=V,l(1,b)}function T(V){w=V,l(2,w)}const H=()=>l(0,d=!1);return s.$$set=V=>{"open"in V&&l(0,d=V.open),"schema"in V&&l(11,u=V.schema)},s.$$.update=()=>{s.$$.dirty&2048&&l(6,{sourceFields:t,enrichedFields:n}=y(u),t,(l(5,n),l(11,u))),s.$$.dirty&6&&l(3,o=[...b,...w]),s.$$.dirty&4104&&c(l(4,r=o.length>0?$r(i.namespace,i.datasetName,{columns:o.map(V=>V.path),limit:3,combine_columns:!1}):null))},[d,b,w,o,r,n,t,a,g,C,M,u,i,L,T,H]}class Qa extends $e{constructor(e){super(),ke(this,e,Ya,Ua,be,{open:0,schema:11})}}function Ja(s){let e,l;return e=new ms({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ka(s){let e,l;return e=new cs({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function un(s){let e,l,t,n,o,r;function i(d){s[23](d)}let a={schema:s[12].data,namespace:s[0],name:s[1]};s[4]!==void 0&&(a.open=s[4]),e=new Pa({props:a}),Be.push(()=>Ue(e,"open",i));function f(d){s[24](d)}let c={schema:s[12].data};return s[5]!==void 0&&(c.open=s[5]),n=new Qa({props:c}),Be.push(()=>Ue(n,"open",f)),{c(){B(e.$$.fragment),t=Q(),B(n.$$.fragment)},l(d){O(e.$$.fragment,d),t=J(d),O(n.$$.fragment,d)},m(d,u){R(e,d,u),N(d,t,u),R(n,d,u),r=!0},p(d,u){const _={};u&4096&&(_.schema=d[12].data),u&1&&(_.namespace=d[0]),u&2&&(_.name=d[1]),!l&&u&16&&(l=!0,_.open=d[4],Ye(()=>l=!1)),e.$set(_);const g={};u&4096&&(g.schema=d[12].data),!o&&u&32&&(o=!0,g.open=d[5],Ye(()=>o=!1)),n.$set(g)},i(d){r||(h(e.$$.fragment,d),h(n.$$.fragment,d),r=!0)},o(d){v(e.$$.fragment,d),v(n.$$.fragment,d),r=!1},d(d){A(e,d),d&&m(t),A(n,d)}}}function dn(s){let e,l;return e=new Vt({props:{open:!0,modalHeading:"Dataset config",primaryButtonText:"Ok",secondaryButtonText:"Cancel",$$slots:{default:[Wa]},$$scope:{ctx:s}}}),e.$on("click:button--secondary",s[25]),e.$on("close",s[26]),e.$on("submit",s[27]),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&268443648&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Za(s){let e,l;return e=new Cn({props:{value:`${s[13].data}`,readonly:!0,rows:15,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&8192&&(o.value=`${t[13].data}`),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Ga(s){let e,l;return e=new je({}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Wa(s){let e,l,t,n,o,r,i,a,f,c;const d=[Ga,Za],u=[];function _(g,b){var w,y;return(w=g[13])!=null&&w.isFetching?0:(y=g[13])!=null&&y.data?1:-1}return~(i=_(s))&&(a=u[i]=d[i](s)),{c(){e=S("div"),l=Z(`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),t=Q(),n=S("div"),o=Z("config.yml"),r=Q(),a&&a.c(),f=ie(),this.h()},l(g){e=E(g,"DIV",{class:!0});var b=$(e);l=G(b,`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),b.forEach(m),t=J(g),n=E(g,"DIV",{class:!0});var w=$(n);o=G(w,"config.yml"),w.forEach(m),r=J(g),a&&a.l(g),f=ie(),this.h()},h(){I(e,"class","mb-4 text-sm"),I(n,"class","font-mono text-xs")},m(g,b){N(g,e,b),p(e,l),N(g,t,b),N(g,n,b),p(n,o),N(g,r,b),~i&&u[i].m(g,b),N(g,f,b),c=!0},p(g,b){let w=i;i=_(g),i===w?~i&&u[i].p(g,b):(a&&(le(),v(u[w],1,1,()=>{u[w]=null}),ne()),~i?(a=u[i],a?a.p(g,b):(a=u[i]=d[i](g),a.c()),h(a,1),a.m(f.parentNode,f)):a=null)},i(g){c||(h(a),c=!0)},o(g){v(a),c=!1},d(g){g&&m(e),g&&m(t),g&&m(n),g&&m(r),~i&&u[i].d(g),g&&m(f)}}}function Xa(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,M;t=new va({});const L=[Ka,Ja],T=[];function H(D,k){return D[11]?1:0}r=H(s),i=T[r]=L[r](s),_=new bi({});let V=s[12].data&&un(s),F=s[2]&&dn(s);return{c(){e=S("div"),l=S("div"),B(t.$$.fragment),n=Q(),o=S("div"),i.c(),d=Q(),u=S("div"),B(_.$$.fragment),g=Q(),V&&V.c(),b=Q(),F&&F.c(),w=ie(),this.h()},l(D){e=E(D,"DIV",{class:!0});var k=$(e);l=E(k,"DIV",{class:!0});var P=$(l);O(t.$$.fragment,P),n=J(P),o=E(P,"DIV",{class:!0});var ee=$(o);i.l(ee),ee.forEach(m),P.forEach(m),d=J(k),u=E(k,"DIV",{class:!0});var X=$(u);O(_.$$.fragment,X),X.forEach(m),k.forEach(m),g=J(D),V&&V.l(D),b=J(D),F&&F.l(D),w=ie(),this.h()},h(){I(o,"class",a=ft(`absolute right-0 top-1/2 flex
                h-8 w-4 cursor-pointer items-center justify-center
                rounded border
                border-neutral-200 bg-neutral-100
                opacity-60 hover:bg-neutral-200
                hover:opacity-100
                ${s[11]?" translate-x-full":" translate-x-1/2"}`)+" svelte-1xlsh2v"),I(l,"class",c=ft(`schema-container relative h-full ${s[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"),I(u,"class","h-full w-2/3 flex-grow"),I(e,"class","flex h-full w-full")},m(D,k){N(D,e,k),p(e,l),R(t,l,null),p(l,n),p(l,o),T[r].m(o,null),p(e,d),p(e,u),R(_,u,null),N(D,g,k),V&&V.m(D,k),N(D,b,k),F&&F.m(D,k),N(D,w,k),y=!0,C||(M=[Ie(f=Ve.call(null,o,{text:s[11]?"Show Schema":"Hide Schema"})),Pe(o,"click",s[15]),Pe(o,"keypress",s[15])],C=!0)},p(D,k){let P=r;r=H(D),r!==P&&(le(),v(T[P],1,1,()=>{T[P]=null}),ne(),i=T[r],i||(i=T[r]=L[r](D),i.c()),h(i,1),i.m(o,null)),(!y||k&2048&&a!==(a=ft(`absolute right-0 top-1/2 flex
                h-8 w-4 cursor-pointer items-center justify-center
                rounded border
                border-neutral-200 bg-neutral-100
                opacity-60 hover:bg-neutral-200
                hover:opacity-100
                ${D[11]?" translate-x-full":" translate-x-1/2"}`)+" svelte-1xlsh2v"))&&I(o,"class",a),f&&Le(f.update)&&k&2048&&f.update.call(null,{text:D[11]?"Show Schema":"Hide Schema"}),(!y||k&2048&&c!==(c=ft(`schema-container relative h-full ${D[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1xlsh2v"))&&I(l,"class",c),D[12].data?V?(V.p(D,k),k&4096&&h(V,1)):(V=un(D),V.c(),h(V,1),V.m(b.parentNode,b)):V&&(le(),v(V,1,1,()=>{V=null}),ne()),D[2]?F?(F.p(D,k),k&4&&h(F,1)):(F=dn(D),F.c(),h(F,1),F.m(w.parentNode,w)):F&&(le(),v(F,1,1,()=>{F=null}),ne())},i(D){y||(h(t.$$.fragment,D),h(i),h(_.$$.fragment,D),h(V),h(F),y=!0)},o(D){v(t.$$.fragment,D),v(i),v(_.$$.fragment,D),v(V),v(F),y=!1},d(D){D&&m(e),A(t),T[r].d(),A(_),D&&m(g),V&&V.d(D),D&&m(b),F&&F.d(D),D&&m(w),C=!1,Qe(M)}}}function xa(s){let e,l,t=s[3].namespace+"",n,o,r=s[3].datasetName+"",i,a,f;return{c(){e=S("div"),l=S("a"),n=Z(t),o=Z("/"),i=Z(r),this.h()},l(c){e=E(c,"DIV",{class:!0});var d=$(e);l=E(d,"A",{class:!0,href:!0});var u=$(l);n=G(u,t),o=G(u,"/"),i=G(u,r),u.forEach(m),d.forEach(m),this.h()},h(){I(l,"class","font-semibold text-black"),I(l,"href",s[8]),I(e,"class","dataset-name svelte-1xlsh2v")},m(c,d){N(c,e,d),p(e,l),p(l,n),p(l,o),p(l,i),a||(f=Pe(l,"click",s[21]),a=!0)},p(c,d){d&8&&t!==(t=c[3].namespace+"")&&fe(n,t),d&8&&r!==(r=c[3].datasetName+"")&&fe(i,r),d&256&&I(l,"href",c[8])},d(c){c&&m(e),a=!1,f()}}}function eo(s){let e,l,t,n,o,r,i,a;return l=new Xe({props:{type:"outline",$$slots:{default:[xa]},$$scope:{ctx:s}}}),o=new it({}),{c(){e=S("div"),B(l.$$.fragment),t=Q(),n=S("button"),B(o.$$.fragment),this.h()},l(f){e=E(f,"DIV",{slot:!0,class:!0});var c=$(e);O(l.$$.fragment,c),t=J(c),n=E(c,"BUTTON",{});var d=$(n);O(o.$$.fragment,d),d.forEach(m),c.forEach(m),this.h()},h(){I(e,"slot","header-subtext"),I(e,"class","flex flex-row items-center")},m(f,c){N(f,e,c),R(l,e,null),p(e,t),p(e,n),R(o,n,null),r=!0,i||(a=[Pe(n,"click",s[22]),Ie(Ve.call(null,n,{text:"Dataset information"}))],i=!0)},p(f,c){const d={};c&268435720&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){r||(h(l.$$.fragment,f),h(o.$$.fragment,f),r=!0)},o(f){v(l.$$.fragment,f),v(o.$$.fragment,f),r=!1},d(f){f&&m(e),A(l),A(o),i=!1,Qe(a)}}}function to(s){let e,l,t;return l=new Mi({}),{c(){e=S("div"),B(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{slot:!0,class:!0});var o=$(e);O(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"slot","header-center"),I(e,"class","flex w-full items-center")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p:x,i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),A(l)}}}function mn(s){let e,l,t,n;return{c(){e=S("div"),l=Z("Copied!"),this.h()},l(o){e=E(o,"DIV",{class:!0});var r=$(e);l=G(r,"Copied!"),r.forEach(m),this.h()},h(){I(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(o,r){N(o,e,r),p(e,l),n=!0},i(o){n||(t&&t.end(1),n=!0)},o(o){t=Gn(e,Hr,{}),n=!1},d(o){o&&m(e),o&&t&&t.end()}}}function lo(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,M,L=s[6]&&mn();return i=new Ss({}),c=new gs({}),g=new rs({}),{c(){e=S("div"),l=S("div"),t=S("div"),n=S("div"),L&&L.c(),o=Q(),r=S("button"),B(i.$$.fragment),a=Q(),f=S("button"),B(c.$$.fragment),d=Q(),u=S("div"),_=S("button"),B(g.$$.fragment),this.h()},l(T){e=E(T,"DIV",{slot:!0});var H=$(e);l=E(H,"DIV",{class:!0});var V=$(l);t=E(V,"DIV",{class:!0});var F=$(t);n=E(F,"DIV",{class:!0});var D=$(n);L&&L.l(D),o=J(D),r=E(D,"BUTTON",{});var k=$(r);O(i.$$.fragment,k),k.forEach(m),D.forEach(m),a=J(F),f=E(F,"BUTTON",{});var P=$(f);O(c.$$.fragment,P),P.forEach(m),d=J(F),u=E(F,"DIV",{class:!0});var ee=$(u);_=E(ee,"BUTTON",{});var X=$(_);O(g.$$.fragment,X),X.forEach(m),ee.forEach(m),F.forEach(m),V.forEach(m),H.forEach(m),this.h()},h(){I(n,"class","relative"),_.disabled=b=!s[9],I(u,"class","mr-2"),Se(u,"opacity-40",!s[9]),I(t,"class","flex"),I(l,"class","flex h-full flex-col"),I(e,"slot","header-right")},m(T,H){N(T,e,H),p(e,l),p(l,t),p(t,n),L&&L.m(n,null),p(n,o),p(n,r),R(i,r,null),p(t,a),p(t,f),R(c,f,null),p(t,d),p(t,u),p(u,_),R(g,_,null),y=!0,C||(M=[Ie(Ve.call(null,r,{text:"Copy the URL"})),Pe(r,"click",s[18]),Ie(Ve.call(null,f,{text:"Download data"})),Pe(f,"click",s[19]),Ie(Ve.call(null,_,{text:"Dataset settings"})),Pe(_,"click",s[20]),Ie(w=Ve.call(null,u,{text:s[9]?"":"User does not have access to update settings of this dataset."}))],C=!0)},p(T,H){T[6]?L?H&64&&h(L,1):(L=mn(),L.c(),h(L,1),L.m(n,o)):L&&(le(),v(L,1,1,()=>{L=null}),ne()),(!y||H&512&&b!==(b=!T[9]))&&(_.disabled=b),w&&Le(w.update)&&H&512&&w.update.call(null,{text:T[9]?"":"User does not have access to update settings of this dataset."}),(!y||H&512)&&Se(u,"opacity-40",!T[9])},i(T){y||(h(L),h(i.$$.fragment,T),h(c.$$.fragment,T),h(g.$$.fragment,T),y=!0)},o(T){v(L),v(i.$$.fragment,T),v(c.$$.fragment,T),v(g.$$.fragment,T),y=!1},d(T){T&&m(e),L&&L.d(),A(i),A(c),A(g),C=!1,Qe(M)}}}function no(s){let e,l;return e=new Xn({props:{$$slots:{"header-right":[lo],"header-center":[to],"header-subtext":[eo],default:[Xa]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,[n]){const o={};n&268450687&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function ro(s,e,l){let t,n,o,r,i,a,f,c,d=x,u=()=>(d(),d=Me(n,Y=>l(12,c=Y)),n),_,g=x,b=()=>(g(),g=Me(i,Y=>l(13,_=Y)),i);s.$$.on_destroy.push(()=>d()),s.$$.on_destroy.push(()=>g());let{namespace:w}=e,{datasetName:y}=e;const C=Re();ge(s,C,Y=>l(3,f=Y));function M(){ut(C,f.schemaCollapsed=!f.schemaCollapsed,f)}let L=!1,T=!1;const H=yt();ge(s,H,Y=>l(17,a=Y));let V=!1,F=!1;const D=()=>navigator.clipboard.writeText(location.href).then(()=>{l(6,V=!0),setTimeout(()=>l(6,V=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),k=()=>l(5,T=!0),P=()=>l(4,L=!0),ee=()=>pn(r),X=()=>l(2,F=!0);function K(Y){L=Y,l(4,L)}function z(Y){T=Y,l(5,T)}const j=()=>l(2,F=!1),U=()=>l(2,F=!1),q=()=>l(2,F=!1);return s.$$set=Y=>{"namespace"in Y&&l(0,w=Y.namespace),"datasetName"in Y&&l(1,y=Y.datasetName)},s.$$.update=()=>{var Y;s.$$.dirty&8&&l(11,t=f.schemaCollapsed),s.$$.dirty&8&&u(l(10,n=Et(f.namespace,f.datasetName))),s.$$.dirty&131072&&l(9,o=(Y=a.data)==null?void 0:Y.access.dataset.update_settings),s.$$.dirty&3&&l(8,r=Zr(w,y)),s.$$.dirty&7&&b(l(7,i=F?kr(w,y,"yaml"):null))},[w,y,F,f,L,T,V,i,r,o,n,t,c,_,C,M,H,a,D,k,P,ee,X,K,z,j,U,q]}class so extends $e{constructor(e){super(),ke(this,e,ro,no,be,{namespace:0,datasetName:1})}}function io(s){let e;return{c(){e=Z("Page not found! Please specify a dataset.")},l(l){e=G(l,"Page not found! Please specify a dataset.")},m(l,t){N(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function ao(s){let e=s[2],l,t,n=hn(s);return{c(){n.c(),l=ie()},l(o){n.l(o),l=ie()},m(o,r){n.m(o,r),N(o,l,r),t=!0},p(o,r){r&4&&be(e,e=o[2])?(le(),v(n,1,1,x),ne(),n=hn(o),n.c(),h(n,1),n.m(l.parentNode,l)):n.p(o,r)},i(o){t||(h(n),t=!0)},o(o){v(n),t=!1},d(o){o&&m(l),n.d(o)}}}function hn(s){let e,l;return e=new so({props:{namespace:s[0],datasetName:s[1]}}),{c(){B(e.$$.fragment)},l(t){O(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.namespace=t[0]),n&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function oo(s){let e,l,t,n;const o=[ao,io],r=[];function i(a,f){return a[2]&&a[0]&&a[1]?0:1}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),N(a,t,f),n=!0},p(a,[f]){let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function fo(s,e,l){let t,n,o,r,i,a,f,c,d=x,u=()=>(d(),d=Me(f,X=>l(10,c=X)),f),_,g=x,b=()=>(g(),g=Me(t,X=>l(11,_=X)),t),w,y=x,C=()=>(y(),y=Me(a,X=>l(12,w=X)),a),M,L=x,T=()=>(L(),L=Me(r,X=>l(13,M=X)),r),H,V=x,F=()=>(V(),V=Me(o,X=>l(14,H=X)),o),D;s.$$.on_destroy.push(()=>d()),s.$$.on_destroy.push(()=>g()),s.$$.on_destroy.push(()=>y()),s.$$.on_destroy.push(()=>L()),s.$$.on_destroy.push(()=>V());let k,P;const ee=Gr();return ge(s,ee,X=>l(15,D=X)),s.$$.update=()=>{var X,K;if(s.$$.dirty&32771&&D.page==="datasets")if(D.identifier==""||D.identifier==null)l(0,k=void 0),l(1,P=void 0);else{const[z,j]=D.identifier.split("/");(k!=z||P!=j)&&(l(0,k=z),l(1,P=j))}if(s.$$.dirty&3&&b(l(2,t=k&&P?yr(k,P):null)),s.$$.dirty&7&&t!=null){const z=Cr(k,P);Wr("datasets",`${k}/${P}`,t,ee,j=>xr(j,z),j=>Xr(j,z))}if(s.$$.dirty&4&&t!=null&&Sr(t),s.$$.dirty&3&&l(8,n=k&&P?Dr(k,P):null),s.$$.dirty&256&&n!=null&&Er(n),s.$$.dirty&3&&F(l(6,o=k&&P?ot(k,P):null)),s.$$.dirty&16640&&n&&H!=null&&H.data&&n.setSettings(H.data),s.$$.dirty&3&&T(l(5,r=k&&P?Et(k,P):null)),s.$$.dirty&8448&&n&&M!=null&&M.data&&n.setSchema(M.data),s.$$.dirty&8192&&l(9,i=M!=null&&M.data?Ir("string",M.data):null),s.$$.dirty&515&&C(l(4,a=k&&P&&i?Vr(k,P,i.map(z=>z.path)):null)),s.$$.dirty&4352&&n&&w!=null&&w.data&&!w.isFetching&&n.setStats(w.data),s.$$.dirty&2051&&u(l(3,f=k&&P&&_?Nr(k,P,Tr(_)):null)),s.$$.dirty&1280&&n&&c!=null&&c.data&&n.setSelectRowsSchema(c),s.$$.dirty&3328&&n&&_&&(X=c==null?void 0:c.data)!=null&&X.schema){const z=qr(_.selectedColumns||{},((K=c.data)==null?void 0:K.schema)||null);n.setVisibleFields(z)}},[k,P,t,f,a,r,o,ee,n,i,c,_,w,M,H,D]}class yo extends $e{constructor(e){super(),ke(this,e,fo,oo,be,{})}}export{yo as component};
