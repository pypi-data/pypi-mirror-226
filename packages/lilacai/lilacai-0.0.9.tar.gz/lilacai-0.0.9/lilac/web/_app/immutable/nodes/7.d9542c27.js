import{S as ke,i as we,s as re,k as V,q as Y,a as A,y as P,l as j,m as D,r as Z,h as d,c as z,z as y,n as F,H as ae,b as R,J as v,A as C,u as le,g as u,v as W,d as _,f as X,B as T,o as Ie,w as ie,U as oe,V as fe,a1 as U,ab as ue,R as ce,e as me,K as Ve}from"../chunks/index.8c57c90c.js";import{g as je}from"../chunks/navigation.89284051.js";import{P as De}from"../chunks/Page.e3c4f184.js";import{c as Pe,b as ye,q as Ce}from"../chunks/signalQueries.0b4f9031.js";import{n as Te,g as Fe,T as qe}from"../chunks/datasetStore.40f12627.js";import{B as He,W as Re,X as Je,p as Ne,a7 as Oe}from"../chunks/HoverTooltip.13cf70d2.js";import{f as Ae,S as se,s as ze}from"../chunks/SvelteMarkdown.e407b063.js";import{J as Be}from"../chunks/JSONSchemaForm.de4f12c7.js";import{E as Me,h as Ue,i as Ke}from"../chunks/Commands.c07386dc.js";import{T as Le,a as _e,b as pe,R as We}from"../chunks/RowItemMetadata.aae06387.js";import{T as Se,S as Xe}from"../chunks/StringSpanHighlight.ae968ffc.js";function de(s){let t,n,e;return n=new Ae({props:{source:s[0].json_schema.description}}),{c(){t=V("div"),P(n.$$.fragment),this.h()},l(r){t=j(r,"DIV",{class:!0});var l=D(t);y(n.$$.fragment,l),l.forEach(d),this.h()},h(){F(t,"class","text text-base text-gray-600")},m(r,l){R(r,t,l),C(n,t,null),e=!0},p(r,l){const a={};l&1&&(a.source=r[0].json_schema.description),n.$set(a)},i(r){e||(u(n.$$.fragment,r),e=!0)},o(r){_(n.$$.fragment,r),e=!1},d(r){r&&d(t),T(n)}}}function Ge(s){let t;return{c(){t=Y("Compute")},l(n){t=Z(n,"Compute")},m(n,e){R(n,t,e)},d(n){n&&d(t)}}}function Qe(s){let t,n;return t=new Le({props:{$$slots:{content:[tt],default:[Ze]},$$scope:{ctx:s}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&8389594&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function Ye(s){let t,n;return t=new se({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:U,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function Ze(s){let t,n,e,r;return t=new _e({props:{label:"Preview"}}),e=new _e({props:{label:"Raw response"}}),{c(){P(t.$$.fragment),n=A(),P(e.$$.fragment)},l(l){y(t.$$.fragment,l),n=z(l),y(e.$$.fragment,l)},m(l,a){C(t,l,a),R(l,n,a),C(e,l,a),r=!0},p:U,i(l){r||(u(t.$$.fragment,l),u(e.$$.fragment,l),r=!0)},o(l){_(t.$$.fragment,l),_(e.$$.fragment,l),r=!1},d(l){T(t,l),l&&d(n),T(e,l)}}}function ge(s){let t,n;return t=new Xe({props:{text:s[1],row:s[6],spanPaths:s[3],valuePaths:s[7],embeddings:[]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&2&&(l.text=e[1]),r&64&&(l.row=e[6]),r&8&&(l.spanPaths=e[3]),r&128&&(l.valuePaths=e[7]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function $e(s){let t,n;return t=new We({props:{row:s[6],visibleFields:s[8]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&64&&(l.row=e[6]),r&256&&(l.visibleFields=e[8]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function he(s){let t,n,e;return{c(){t=V("div"),n=V("div"),e=Y(s[9]),this.h()},l(r){t=j(r,"DIV",{class:!0});var l=D(t);n=j(l,"DIV",{class:!0});var a=D(n);e=Z(a,s[9]),a.forEach(d),l.forEach(d),this.h()},h(){F(n,"class","text text-base"),F(t,"class","flex flex-row items-center")},m(r,l){R(r,t,l),v(t,n),v(n,e)},p(r,l){l&512&&le(e,r[9])},d(r){r&&d(t)}}}function xe(s){let t,n,e,r,l=s[7].length>0&&ge(s),a=s[8].length>0&&$e(s),f=s[9]!=null&&he(s);return{c(){t=V("div"),l&&l.c(),n=A(),a&&a.c(),e=A(),f&&f.c(),this.h()},l(o){t=j(o,"DIV",{class:!0});var i=D(t);l&&l.l(i),n=z(i),a&&a.l(i),e=z(i),f&&f.l(i),i.forEach(d),this.h()},h(){F(t,"class","mt-2")},m(o,i){R(o,t,i),l&&l.m(t,null),v(t,n),a&&a.m(t,null),v(t,e),f&&f.m(t,null),r=!0},p(o,i){o[7].length>0?l?(l.p(o,i),i&128&&u(l,1)):(l=ge(o),l.c(),u(l,1),l.m(t,n)):l&&(W(),_(l,1,1,()=>{l=null}),X()),o[8].length>0?a?(a.p(o,i),i&256&&u(a,1)):(a=$e(o),a.c(),u(a,1),a.m(t,e)):a&&(W(),_(a,1,1,()=>{a=null}),X()),o[9]!=null?f?f.p(o,i):(f=he(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i(o){r||(u(l),u(a),r=!0)},o(o){_(l),_(a),r=!1},d(o){o&&d(t),l&&l.d(),a&&a.d(),f&&f.d()}}}function et(s){let t,n;return t=new Se({props:{value:JSON.stringify(s[4].data.items[0],null,2),readonly:!0,rows:10,class:"mb-2 font-mono"}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&16&&(l.value=JSON.stringify(e[4].data.items[0],null,2)),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function tt(s){let t,n,e,r;return t=new pe({props:{$$slots:{default:[xe]},$$scope:{ctx:s}}}),e=new pe({props:{$$slots:{default:[et]},$$scope:{ctx:s}}}),{c(){P(t.$$.fragment),n=A(),P(e.$$.fragment)},l(l){y(t.$$.fragment,l),n=z(l),y(e.$$.fragment,l)},m(l,a){C(t,l,a),R(l,n,a),C(e,l,a),r=!0},p(l,a){const f={};a&8389578&&(f.$$scope={dirty:a,ctx:l}),t.$set(f);const o={};a&8388624&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){r||(u(t.$$.fragment,l),u(e.$$.fragment,l),r=!0)},o(l){_(t.$$.fragment,l),_(e.$$.fragment,l),r=!1},d(l){T(t,l),l&&d(n),T(e,l)}}}function be(s){var H;let t,n,e,r,l,a,f,o;function i(c){s[21](c)}function g(c){s[22](c)}let m={schema:s[0].json_schema,showDescription:!1,hiddenProperties:["/signal_name"],customComponents:s[16][(H=s[0])==null?void 0:H.name]};return s[2]!==void 0&&(m.value=s[2]),s[10]!==void 0&&(m.validationErrors=s[10]),l=new Be({props:m}),ie.push(()=>oe(l,"value",i)),ie.push(()=>oe(l,"validationErrors",g)),{c(){t=V("div"),n=V("h4"),e=Y("Signal options"),r=A(),P(l.$$.fragment)},l(c){t=j(c,"DIV",{});var $=D(t);n=j($,"H4",{});var k=D(n);e=Z(k,"Signal options"),k.forEach(d),r=z($),y(l.$$.fragment,$),$.forEach(d)},m(c,$){R(c,t,$),v(t,n),v(n,e),v(t,r),C(l,t,null),o=!0},p(c,$){var K;const k={};$&1&&(k.schema=c[0].json_schema),$&1&&(k.customComponents=c[16][(K=c[0])==null?void 0:K.name]),!a&&$&4&&(a=!0,k.value=c[2],fe(()=>a=!1)),!f&&$&1024&&(f=!0,k.validationErrors=c[10],fe(()=>f=!1)),l.$set(k)},i(c){o||(u(l.$$.fragment,c),o=!0)},o(c){_(l.$$.fragment,c),o=!1},d(c){c&&d(t),T(l)}}}function nt(s){let t,n,e,r=s[0].json_schema.title+"",l,a,f,o,i,g,m,H,c,$,k,K,q,S,I,G,B,b=s[0].json_schema.description&&de(s);m=new Se({props:{value:s[5],cols:50,placeholder:"Paste text to try the signal.",rows:6,class:"mb-2"}}),m.$on("input",s[14]),k=new He({props:{$$slots:{default:[Ge]},$$scope:{ctx:s}}}),k.$on("click",s[20]);const x=[Ye,Qe],J=[];function Q(p,E){var N,h;return(N=p[4])!=null&&N.isFetching?0:p[6]!=null&&p[1]!=null&&((h=p[4])==null?void 0:h.data)!=null?1:-1}~(S=Q(s))&&(I=J[S]=x[S](s));let w=s[11]&&be(s);return{c(){t=V("div"),n=V("div"),e=V("div"),l=Y(r),a=A(),b&&b.c(),f=A(),o=V("div"),i=V("div"),g=V("div"),P(m.$$.fragment),H=A(),c=V("div"),$=V("div"),P(k.$$.fragment),K=A(),q=V("div"),I&&I.c(),G=A(),w&&w.c(),this.h()},l(p){t=j(p,"DIV",{class:!0});var E=D(t);n=j(E,"DIV",{});var N=D(n);e=j(N,"DIV",{class:!0});var h=D(e);l=Z(h,r),h.forEach(d),a=z(N),b&&b.l(N),N.forEach(d),f=z(E),o=j(E,"DIV",{class:!0});var M=D(o);i=j(M,"DIV",{class:!0});var O=D(i);g=j(O,"DIV",{});var L=D(g);y(m.$$.fragment,L),H=z(L),c=j(L,"DIV",{class:!0});var ee=D(c);$=j(ee,"DIV",{class:!0});var te=D($);y(k.$$.fragment,te),te.forEach(d),ee.forEach(d),L.forEach(d),K=z(O),q=j(O,"DIV",{class:!0});var ne=D(q);I&&I.l(ne),ne.forEach(d),G=z(O),w&&w.l(O),O.forEach(d),M.forEach(d),E.forEach(d),this.h()},h(){F(e,"class","mb-4 flex flex-row items-center text-2xl font-semibold"),F($,"class","pt-4"),F(c,"class","flex flex-row justify-between"),F(q,"class","mb-8 mt-4 border-gray-200 pt-4"),ae(q,"border-t",s[1]!=null),F(i,"class","flex w-full flex-col gap-x-8"),F(o,"class","w-full"),F(t,"class","flex h-full w-full flex-col gap-y-8 px-10")},m(p,E){R(p,t,E),v(t,n),v(n,e),v(e,l),v(n,a),b&&b.m(n,null),v(t,f),v(t,o),v(o,i),v(i,g),C(m,g,null),v(g,H),v(g,c),v(c,$),C(k,$,null),v(i,K),v(i,q),~S&&J[S].m(q,null),v(i,G),w&&w.m(i,null),B=!0},p(p,[E]){(!B||E&1)&&r!==(r=p[0].json_schema.title+"")&&le(l,r),p[0].json_schema.description?b?(b.p(p,E),E&1&&u(b,1)):(b=de(p),b.c(),u(b,1),b.m(n,null)):b&&(W(),_(b,1,1,()=>{b=null}),X());const N={};E&32&&(N.value=p[5]),m.$set(N);const h={};E&8388608&&(h.$$scope={dirty:E,ctx:p}),k.$set(h);let M=S;S=Q(p),S===M?~S&&J[S].p(p,E):(I&&(W(),_(J[M],1,1,()=>{J[M]=null}),X()),~S?(I=J[S],I?I.p(p,E):(I=J[S]=x[S](p),I.c()),u(I,1),I.m(q,null)):I=null),(!B||E&2)&&ae(q,"border-t",p[1]!=null),p[11]?w?(w.p(p,E),E&2048&&u(w,1)):(w=be(p),w.c(),u(w,1),w.m(i,null)):w&&(W(),_(w,1,1,()=>{w=null}),X())},i(p){B||(u(b),u(m.$$.fragment,p),u(k.$$.fragment,p),u(I),u(w),B=!0)},o(p){_(b),_(m.$$.fragment,p),_(k.$$.fragment,p),_(I),_(w),B=!1},d(p){p&&d(t),b&&b.d(),T(m),T(k),~S&&J[S].d(),w&&w.d()}}}function lt(s,t,n){let e,r,l,a,f,o=U,i=()=>(o(),o=ue(l,h=>n(19,f=h)),l),g,m=U,H=()=>(m(),m=ue(r,h=>n(4,g=h)),r);s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>m());let{signalInfo:c}=t,{text:$=void 0}=t,k=($==null?void 0:$.trim())||"";Ie(()=>{$!=null&&I()});function K(h){n(5,k=h.target.value),n(1,q=void 0)}let q,S={};function I(){n(1,q=k)}let G,B,b,x,J,Q=[];const w={concept_score:{"/namespace":Me,"/concept_name":Ue,"/embedding":Ke}},p=()=>I();function E(h){S=h,n(2,S)}function N(h){Q=h,n(10,Q)}return s.$$set=h=>{"signalInfo"in h&&n(0,c=h.signalInfo),"text"in h&&n(17,$=h.text)},s.$$.update=()=>{var h,M;if(s.$$.dirty&131072&&$!=null&&(n(5,k=$.trim()),n(1,q=void 0)),s.$$.dirty&5&&n(18,e={...S,signal_name:c.name}),s.$$.dirty&262146&&H(n(13,r=q!=null?Pe({signal:e,inputs:[q]}):null)),s.$$.dirty&262144&&i(n(12,l=ye({signal:e}))),s.$$.dirty&524312&&(g==null?void 0:g.data)!=null&&((h=f.data)==null?void 0:h.fields)!=null){n(9,J=null);const O=g.data.items[0],L=Re(f.data.fields);n(6,G=Je(O,L));const ee=Te(L);n(3,b=ee.spanPaths),n(7,B=ee.valuePaths);const te=Ne(L);n(8,x=te.filter(ne=>!b.some(Ee=>Oe(ne.path,Ee)))),te.length===0&&n(9,J=O)}s.$$.dirty&1&&n(11,a=Object.keys(((M=c==null?void 0:c.json_schema)==null?void 0:M.properties)||{}).filter(O=>O!="signal_name").length>0)},[c,q,S,b,g,k,G,B,x,J,Q,a,l,r,K,I,w,$,e,f,p,E,N]}class rt extends ke{constructor(t){super(),we(this,t,lt,nt,re,{signalInfo:0,text:17})}}function st(s){let t=s[3],n,e,r=ve(s);return{c(){r.c(),n=me()},l(l){r.l(l),n=me()},m(l,a){r.m(l,a),R(l,n,a),e=!0},p(l,a){a&8&&re(t,t=l[3])?(W(),_(r,1,1,U),X(),r=ve(l),r.c(),u(r,1),r.m(n.parentNode,n)):r.p(l,a)},i(l){e||(u(r),e=!0)},o(l){_(r),e=!1},d(l){l&&d(n),r.d(l)}}}function at(s){let t,n=s[1].error+"",e;return{c(){t=V("p"),e=Y(n)},l(r){t=j(r,"P",{});var l=D(t);e=Z(l,n),l.forEach(d)},m(r,l){R(r,t,l),v(t,e)},p(r,l){l&2&&n!==(n=r[1].error+"")&&le(e,n)},i:U,o:U,d(r){r&&d(t)}}}function it(s){let t,n;return t=new se({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:U,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ve(s){let t,n;return t=new rt({props:{signalInfo:s[3]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&8&&(l.signalInfo=e[3]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ot(s){let t,n,e,r,l;const a=[it,at,st],f=[];function o(i,g){var m,H,c;return(m=i[1])!=null&&m.isFetching?0:(H=i[1])!=null&&H.isError?1:(c=i[1])!=null&&c.isSuccess&&i[3]?2:-1}return~(e=o(s))&&(r=f[e]=a[e](s)),{c(){t=V("div"),n=V("div"),r&&r.c(),this.h()},l(i){t=j(i,"DIV",{class:!0});var g=D(t);n=j(g,"DIV",{class:!0});var m=D(n);r&&r.l(m),m.forEach(d),g.forEach(d),this.h()},h(){F(n,"class","lilac-page flex w-full"),F(t,"class","flex h-full w-full overflow-x-hidden overflow-y-scroll")},m(i,g){R(i,t,g),v(t,n),~e&&f[e].m(n,null),l=!0},p(i,g){let m=e;e=o(i),e===m?~e&&f[e].p(i,g):(r&&(W(),_(f[m],1,1,()=>{f[m]=null}),X()),~e?(r=f[e],r?r.p(i,g):(r=f[e]=a[e](i),r.c()),u(r,1),r.m(n,null)):r=null)},i(i){l||(u(r),l=!0)},o(i){_(r),l=!1},d(i){i&&d(t),~e&&f[e].d()}}}function ft(s){let t,n;return t=new qe({props:{type:"blue",$$slots:{default:[ct]},$$scope:{ctx:s}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&261&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ut(s){let t,n;return t=new se({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:U,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ct(s){let t,n,e,r;return{c(){t=V("a"),n=Y(s[0]),this.h()},l(l){t=j(l,"A",{class:!0,href:!0});var a=D(t);n=Z(a,s[0]),a.forEach(d),this.h()},h(){F(t,"class","font-semibold text-black"),F(t,"href",s[2])},m(l,a){R(l,t,a),v(t,n),e||(r=Ve(t,"click",s[7]),e=!0)},p(l,a){a&1&&le(n,l[0]),a&4&&F(t,"href",l[2])},d(l){l&&d(t),e=!1,r()}}}function mt(s){let t,n,e,r;const l=[ut,ft],a=[];function f(o,i){return o[1].isFetching?0:1}return n=f(s),e=a[n]=l[n](s),{c(){t=V("div"),e.c(),this.h()},l(o){t=j(o,"DIV",{slot:!0});var i=D(t);e.l(i),i.forEach(d),this.h()},h(){F(t,"slot","header-subtext")},m(o,i){R(o,t,i),a[n].m(t,null),r=!0},p(o,i){let g=n;n=f(o),n===g?a[n].p(o,i):(W(),_(a[g],1,1,()=>{a[g]=null}),X(),e=a[n],e?e.p(o,i):(e=a[n]=l[n](o),e.c()),u(e,1),e.m(t,null))},i(o){r||(u(e),r=!0)},o(o){_(e),r=!1},d(o){o&&d(t),a[n].d()}}}function _t(s){let t,n;return t=new De({props:{$$slots:{"header-subtext":[mt],default:[ot]},$$scope:{ctx:s}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,[r]){const l={};r&271&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function pt(s,t,n){let e,r,l,a,f;const o=Fe();ce(s,o,m=>n(6,a=m));const i=Ce();ce(s,i,m=>n(1,l=m));const g=()=>je(r);return s.$$.update=()=>{var m;s.$$.dirty&65&&a.page==="signals"&&a.identifier!=null&&f!=a.identifier&&n(0,f=a.identifier),s.$$.dirty&3&&n(3,e=(m=l.data)==null?void 0:m.find(H=>H.name===f)),s.$$.dirty&1&&n(2,r=f!=null?ze(f):"")},[f,l,r,e,o,i,a,g]}class Vt extends ke{constructor(t){super(),we(this,t,pt,_t,re,{})}}export{Vt as component};
