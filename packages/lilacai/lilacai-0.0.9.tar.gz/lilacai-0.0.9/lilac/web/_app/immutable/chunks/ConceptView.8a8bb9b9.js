import{S as fe,i as ue,s as de,E as ie,_ as re,$ as se,m as D,h as d,n as S,a0 as be,b as N,J as h,O as Ae,a1 as K,D as ve,F as we,q,r as Z,u as te,G as At,k as y,a as Q,l as A,c as W,K as Be,L as Rt,M as Pt,N as Bt,v as le,d as V,f as ne,g as v,y as O,z as L,A as F,B as U,w as qe,U as Ze,V as je,a4 as Ie,C as Gt,a6 as Xe,H as Me,R as $e,o as Qt,ab as ze,e as ke,P as Wt,a7 as Ht,aa as xt}from"./index.8c57c90c.js";import{l as pe,B as Ge,U as Kt,W as Jt,X as Xt,L as Te,Y as Ce,R as Pe,Z as Nt,M as et,b as el,_ as tl,I as Se,A as ll,n as ye,$ as nl,m as rl,a as sl,a0 as al,a1 as il,h as Ot}from"./HoverTooltip.13cf70d2.js";import{a as Lt,b as ol,S as Ft}from"./signalQueries.0b4f9031.js";import{T as cl,S as fl,a as Ut,b as Yt}from"./StringSpanHighlight.ae968ffc.js";import{C as ul,a as dl}from"./ChevronUp.a74739dd.js";import{T as ml,S as qt,e as hl,I as Zt}from"./SvelteMarkdown.e407b063.js";import{g as jt}from"./settingsStore.ca891065.js";import{n as _l,G as gl,g as pl,C as bl,r as Ue}from"./datasetStore.40f12627.js";import{S as Oe,a as Re}from"./SelectItem.5cf70406.js";import{g as vl}from"./navigation.89284051.js";function tt(r){let e,l;return{c(){e=re("title"),l=q(r[1])},l(t){e=se(t,"title",{});var n=D(e);l=Z(n,r[1]),n.forEach(d)},m(t,n){N(t,e,n),h(e,l)},p(t,n){n&2&&te(l,t[1])},d(t){t&&d(e)}}}function wl(r){let e,l,t=r[1]&&tt(r),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:r[0]},{height:r[0]},r[2],r[3]],o={};for(let s=0;s<n.length;s+=1)o=ie(o,n[s]);return{c(){e=re("svg"),t&&t.c(),l=re("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=D(e);t&&t.l(a),l=se(a,"path",{d:!0}),D(l).forEach(d),a.forEach(d),this.h()},h(){S(l,"d","M10 6L10 8 22.59 8 6 24.59 7.41 26 24 9.41 24 22 26 22 26 6 10 6z"),be(e,o)},m(s,a){N(s,e,a),t&&t.m(e,null),h(e,l)},p(s,[a]){s[1]?t?t.p(s,a):(t=tt(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),be(e,o=Ae(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),t&&t.d()}}}function kl(r,e,l){let t,n;const o=["size","title"];let s=ve(e,o),{size:a=16}=e,{title:i=void 0}=e;return r.$$set=c=>{l(5,e=ie(ie({},e),we(c))),l(3,s=ve(e,o)),"size"in c&&l(0,a=c.size),"title"in c&&l(1,i=c.title)},r.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||i),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[a,i,n,s,t]}class $l extends fe{constructor(e){super(),ue(this,e,kl,wl,de,{size:0,title:1})}}function lt(r){let e,l;return{c(){e=re("title"),l=q(r[1])},l(t){e=se(t,"title",{});var n=D(e);l=Z(n,r[1]),n.forEach(d)},m(t,n){N(t,e,n),h(e,l)},p(t,n){n&2&&te(l,t[1])},d(t){t&&d(e)}}}function El(r){let e,l,t,n=r[1]&&lt(r),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:r[0]},{height:r[0]},r[2],r[3]],s={};for(let a=0;a<o.length;a+=1)s=ie(s,o[a]);return{c(){e=re("svg"),n&&n.c(),l=re("path"),t=re("path"),this.h()},l(a){e=se(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=D(e);n&&n.l(i),l=se(i,"path",{d:!0}),D(l).forEach(d),t=se(i,"path",{d:!0}),D(t).forEach(d),i.forEach(d),this.h()},h(){S(l,"d","M11,11V21H21V11Zm8,8H13V13h6Z"),S(t,"d","M30,13V11H26V8a2,2,0,0,0-2-2H21V2H19V6H13V2H11V6H8A2,2,0,0,0,6,8v3H2v2H6v6H2v2H6v3a2,2,0,0,0,2,2h3v4h2V26h6v4h2V26h3a2,2,0,0,0,2-2V21h4V19H26V13ZM24,24H8V8H24Z"),be(e,s)},m(a,i){N(a,e,i),n&&n.m(e,null),h(e,l),h(e,t)},p(a,[i]){a[1]?n?n.p(a,i):(n=lt(a),n.c(),n.m(e,l)):n&&(n.d(1),n=null),be(e,s=Ae(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:a[0]},i&1&&{height:a[0]},i&4&&a[2],i&8&&a[3]]))},i:K,o:K,d(a){a&&d(e),n&&n.d()}}}function Vl(r,e,l){let t,n;const o=["size","title"];let s=ve(e,o),{size:a=16}=e,{title:i=void 0}=e;return r.$$set=c=>{l(5,e=ie(ie({},e),we(c))),l(3,s=ve(e,o)),"size"in c&&l(0,a=c.size),"title"in c&&l(1,i=c.title)},r.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||i),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[a,i,n,s,t]}class nt extends fe{constructor(e){super(),ue(this,e,Vl,El,de,{size:0,title:1})}}function rt(r){let e,l;return{c(){e=re("title"),l=q(r[1])},l(t){e=se(t,"title",{});var n=D(e);l=Z(n,r[1]),n.forEach(d)},m(t,n){N(t,e,n),h(e,l)},p(t,n){n&2&&te(l,t[1])},d(t){t&&d(e)}}}function Dl(r){let e,l,t=r[1]&&rt(r),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:r[0]},{height:r[0]},r[2],r[3]],o={};for(let s=0;s<n.length;s+=1)o=ie(o,n[s]);return{c(){e=re("svg"),t&&t.c(),l=re("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=D(e);t&&t.l(a),l=se(a,"path",{d:!0}),D(l).forEach(d),a.forEach(d),this.h()},h(){S(l,"d","M16,2A14,14,0,1,0,30,16,14.0158,14.0158,0,0,0,16,2Zm0,26A12,12,0,0,1,16,4V16l8.4812,8.4814A11.9625,11.9625,0,0,1,16,28Z"),be(e,o)},m(s,a){N(s,e,a),t&&t.m(e,null),h(e,l)},p(s,[a]){s[1]?t?t.p(s,a):(t=rt(s),t.c(),t.m(e,l)):t&&(t.d(1),t=null),be(e,o=Ae(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:K,o:K,d(s){s&&d(e),t&&t.d()}}}function Il(r,e,l){let t,n;const o=["size","title"];let s=ve(e,o),{size:a=16}=e,{title:i=void 0}=e;return r.$$set=c=>{l(5,e=ie(ie({},e),we(c))),l(3,s=ve(e,o)),"size"in c&&l(0,a=c.size),"title"in c&&l(1,i=c.title)},r.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||i),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[a,i,n,s,t]}class Ln extends fe{constructor(e){super(),ue(this,e,Il,Dl,de,{size:0,title:1})}}function st(r){let e,l;return{c(){e=re("title"),l=q(r[1])},l(t){e=se(t,"title",{});var n=D(e);l=Z(n,r[1]),n.forEach(d)},m(t,n){N(t,e,n),h(e,l)},p(t,n){n&2&&te(l,t[1])},d(t){t&&d(e)}}}function Ml(r){let e,l,t,n=r[1]&&st(r),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:r[0]},{height:r[0]},r[2],r[3]],s={};for(let a=0;a<o.length;a+=1)s=ie(s,o[a]);return{c(){e=re("svg"),n&&n.c(),l=re("path"),t=re("path"),this.h()},l(a){e=se(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=D(e);n&&n.l(i),l=se(i,"path",{d:!0}),D(l).forEach(d),t=se(i,"path",{d:!0}),D(t).forEach(d),i.forEach(d),this.h()},h(){S(l,"d","M12 12H14V24H12zM18 12H20V24H18z"),S(t,"d","M4 6V8H6V28a2 2 0 002 2H24a2 2 0 002-2V8h2V6zM8 28V8H24V28zM12 2H20V4H12z"),be(e,s)},m(a,i){N(a,e,i),n&&n.m(e,null),h(e,l),h(e,t)},p(a,[i]){a[1]?n?n.p(a,i):(n=st(a),n.c(),n.m(e,l)):n&&(n.d(1),n=null),be(e,s=Ae(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:a[0]},i&1&&{height:a[0]},i&4&&a[2],i&8&&a[3]]))},i:K,o:K,d(a){a&&d(e),n&&n.d()}}}function zl(r,e,l){let t,n;const o=["size","title"];let s=ve(e,o),{size:a=16}=e,{title:i=void 0}=e;return r.$$set=c=>{l(5,e=ie(ie({},e),we(c))),l(3,s=ve(e,o)),"size"in c&&l(0,a=c.size),"title"in c&&l(1,i=c.title)},r.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||i),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[a,i,n,s,t]}class Tl extends fe{constructor(e){super(),ue(this,e,zl,Ml,de,{size:0,title:1})}}function at(r){let e,l;return{c(){e=re("title"),l=q(r[1])},l(t){e=se(t,"title",{});var n=D(e);l=Z(n,r[1]),n.forEach(d)},m(t,n){N(t,e,n),h(e,l)},p(t,n){n&2&&te(l,t[1])},d(t){t&&d(e)}}}function Cl(r){let e,l,t,n=r[1]&&at(r),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:r[0]},{height:r[0]},r[2],r[3]],s={};for(let a=0;a<o.length;a+=1)s=ie(s,o[a]);return{c(){e=re("svg"),n&&n.c(),l=re("path"),t=re("path"),this.h()},l(a){e=se(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=D(e);n&&n.l(i),l=se(i,"path",{d:!0}),D(l).forEach(d),t=se(i,"path",{d:!0}),D(t).forEach(d),i.forEach(d),this.h()},h(){S(l,"d","M5.24,22.51l1.43-1.42A14.06,14.06,0,0,1,3.07,16C5.1,10.93,10.7,7,16,7a12.38,12.38,0,0,1,4,.72l1.55-1.56A14.72,14.72,0,0,0,16,5,16.69,16.69,0,0,0,1.06,15.66a1,1,0,0,0,0,.68A16,16,0,0,0,5.24,22.51Z"),S(t,"d","M12 15.73a4 4 0 013.7-3.7l1.81-1.82a6 6 0 00-7.33 7.33zM30.94 15.66A16.4 16.4 0 0025.2 8.22L30 3.41 28.59 2 2 28.59 3.41 30l5.1-5.1A15.29 15.29 0 0016 27 16.69 16.69 0 0030.94 16.34 1 1 0 0030.94 15.66zM20 16a4 4 0 01-6 3.44L19.44 14A4 4 0 0120 16zm-4 9a13.05 13.05 0 01-6-1.58l2.54-2.54a6 6 0 008.35-8.35l2.87-2.87A14.54 14.54 0 0128.93 16C26.9 21.07 21.3 25 16 25z"),be(e,s)},m(a,i){N(a,e,i),n&&n.m(e,null),h(e,l),h(e,t)},p(a,[i]){a[1]?n?n.p(a,i):(n=at(a),n.c(),n.m(e,l)):n&&(n.d(1),n=null),be(e,s=Ae(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:a[0]},i&1&&{height:a[0]},i&4&&a[2],i&8&&a[3]]))},i:K,o:K,d(a){a&&d(e),n&&n.d()}}}function Sl(r,e,l){let t,n;const o=["size","title"];let s=ve(e,o),{size:a=16}=e,{title:i=void 0}=e;return r.$$set=c=>{l(5,e=ie(ie({},e),we(c))),l(3,s=ve(e,o)),"size"in c&&l(0,a=c.size),"title"in c&&l(1,i=c.title)},r.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||i),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[a,i,n,s,t]}class yl extends fe{constructor(e){super(),ue(this,e,Sl,Cl,de,{size:0,title:1})}}const Al=r=>({}),it=r=>({}),Rl=r=>({}),ot=r=>({});function Pl(r){let e,l;return e=new ul({}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Bl(r){let e,l;return e=new dl({}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function ct(r){let e,l;const t=r[2].below,n=At(t,r,r[1],it);return{c(){e=y("div"),n&&n.c(),this.h()},l(o){e=A(o,"DIV",{class:!0});var s=D(e);n&&n.l(s),s.forEach(d),this.h()},h(){S(e,"class","p-4")},m(o,s){N(o,e,s),n&&n.m(e,null),l=!0},p(o,s){n&&n.p&&(!l||s&2)&&Rt(n,t,o,o[1],l?Bt(t,o[1],s,Al):Pt(o[1]),it)},i(o){l||(v(n,o),l=!0)},o(o){V(n,o),l=!1},d(o){o&&d(e),n&&n.d(o)}}}function Hl(r){let e,l,t,n,o,s,a,i,c,f;const C=r[2].above,g=At(C,r,r[1],ot),_=[Bl,Pl],u=[];function m(z,I){return z[0]?0:1}o=m(r),s=u[o]=_[o](r);let k=r[0]&&ct(r);return{c(){e=y("div"),l=y("button"),t=y("div"),g&&g.c(),n=Q(),s.c(),a=Q(),k&&k.c(),this.h()},l(z){e=A(z,"DIV",{class:!0});var I=D(e);l=A(I,"BUTTON",{class:!0});var $=D(l);t=A($,"DIV",{class:!0});var E=D(t);g&&g.l(E),n=W(E),s.l(E),E.forEach(d),$.forEach(d),a=W(I),k&&k.l(I),I.forEach(d),this.h()},h(){S(t,"class","flex items-center justify-between"),S(l,"class","w-full p-4 text-left hover:bg-gray-200"),S(e,"class","rounded-xl border border-gray-200")},m(z,I){N(z,e,I),h(e,l),h(l,t),g&&g.m(t,null),h(t,n),u[o].m(t,null),h(e,a),k&&k.m(e,null),i=!0,c||(f=Be(l,"click",r[3]),c=!0)},p(z,[I]){g&&g.p&&(!i||I&2)&&Rt(g,C,z,z[1],i?Bt(C,z[1],I,Rl):Pt(z[1]),ot);let $=o;o=m(z),o!==$&&(le(),V(u[$],1,1,()=>{u[$]=null}),ne(),s=u[o],s||(s=u[o]=_[o](z),s.c()),v(s,1),s.m(t,null)),z[0]?k?(k.p(z,I),I&1&&v(k,1)):(k=ct(z),k.c(),v(k,1),k.m(e,null)):k&&(le(),V(k,1,1,()=>{k=null}),ne())},i(z){i||(v(g,z),v(s),v(k),i=!0)},o(z){V(g,z),V(s),V(k),i=!1},d(z){z&&d(e),g&&g.d(z),u[o].d(),k&&k.d(),c=!1,f()}}}function Nl(r,e,l){let{$$slots:t={},$$scope:n}=e,{expanded:o=!1}=e;const s=()=>l(0,o=!o);return r.$$set=a=>{"expanded"in a&&l(0,o=a.expanded),"$$scope"in a&&l(1,n=a.$$scope)},[o,n,t,s]}class Ye extends fe{constructor(e){super(),ue(this,e,Nl,Hl,de,{expanded:0})}}function ft(r,e,l){const t=r.slice();return t[6]=e[l],t}function ut(r){let e,l,t=r[6].text+"",n,o,s,a,i,c,f,C;a=new Tl({props:{size:16}});function g(){return r[5](r[6])}return{c(){e=y("div"),l=y("span"),n=q(t),o=Q(),s=y("button"),O(a.$$.fragment),i=Q(),this.h()},l(_){e=A(_,"DIV",{class:!0});var u=D(e);l=A(u,"SPAN",{class:!0});var m=D(l);n=Z(m,t),m.forEach(d),o=W(u),s=A(u,"BUTTON",{title:!0,class:!0});var k=D(s);L(a.$$.fragment,k),k.forEach(d),i=W(u),u.forEach(d),this.h()},h(){S(l,"class","shrink"),S(s,"title","Remove sample"),S(s,"class","shrink-0 opacity-50 hover:text-red-400 hover:opacity-100"),S(e,"class","flex w-full justify-between gap-x-2 border-b border-gray-200 p-2 hover:bg-gray-50")},m(_,u){N(_,e,u),h(e,l),h(l,n),h(e,o),h(e,s),F(a,s,null),h(e,i),c=!0,f||(C=Be(s,"click",g),f=!0)},p(_,u){r=_,(!c||u&1)&&t!==(t=r[6].text+"")&&te(n,t)},i(_){c||(v(a.$$.fragment,_),c=!0)},o(_){V(a.$$.fragment,_),c=!1},d(_){_&&d(e),U(a),f=!1,C()}}}function Ol(r){let e,l,t,n,o,s;function a(g){r[3](g)}let i={labelText:"Add example"};r[1]!==void 0&&(i.value=r[1]),l=new ml({props:i}),qe.push(()=>Ze(l,"value",a)),l.$on("keydown",r[4]);let c=[...r[0]].reverse(),f=[];for(let g=0;g<c.length;g+=1)f[g]=ut(ft(r,c,g));const C=g=>V(f[g],1,1,()=>{f[g]=null});return{c(){e=y("div"),O(l.$$.fragment),n=Q(),o=y("div");for(let g=0;g<f.length;g+=1)f[g].c();this.h()},l(g){e=A(g,"DIV",{class:!0});var _=D(e);L(l.$$.fragment,_),_.forEach(d),n=W(g),o=A(g,"DIV",{class:!0});var u=D(o);for(let m=0;m<f.length;m+=1)f[m].l(u);u.forEach(d),this.h()},h(){S(e,"class",""),S(o,"class","flex h-full w-full flex-col overflow-y-auto overflow-x-clip border border-gray-200")},m(g,_){N(g,e,_),F(l,e,null),N(g,n,_),N(g,o,_);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(o,null);s=!0},p(g,[_]){const u={};if(!t&&_&2&&(t=!0,u.value=g[1],je(()=>t=!1)),l.$set(u),_&5){c=[...g[0]].reverse();let m;for(m=0;m<c.length;m+=1){const k=ft(g,c,m);f[m]?(f[m].p(k,_),v(f[m],1)):(f[m]=ut(k),f[m].c(),v(f[m],1),f[m].m(o,null))}for(le(),m=c.length;m<f.length;m+=1)C(m);ne()}},i(g){if(!s){v(l.$$.fragment,g);for(let _=0;_<c.length;_+=1)v(f[_]);s=!0}},o(g){V(l.$$.fragment,g),f=f.filter(Boolean);for(let _=0;_<f.length;_+=1)V(f[_]);s=!1},d(g){g&&d(e),U(l),g&&d(n),g&&d(o),Ie(f,g)}}}function Ll(r,e,l){let{data:t}=e,n;const o=Gt();function s(c){n=c,l(1,n)}const a=c=>{c.key==="Enter"&&(o("add",n),l(1,n=""))},i=c=>o("remove",c.id);return r.$$set=c=>{"data"in c&&l(0,t=c.data)},[t,n,o,s,a,i]}class dt extends fe{constructor(e){super(),ue(this,e,Ll,Ol,de,{data:0})}}const He={not_good:"text-red-600",ok:"text-yellow-600",good:"text-green-600",very_good:"text-blue-600",great:"text-purple-600"},Ne={not_good:"Not good",ok:"OK",good:"Good",very_good:"Very good",great:"Great"};function Fl(r){let e,l,t,n,o,s=Ne[r[0].overall]+"",a,i,c,f,C,g,_,u=pe(r[0].f1)+"",m,k,z,I,$,E,p=pe(r[0].recall)+"",b,T,H,Y,B,M,w=pe(r[0].precision)+"",R,j,X,ae,oe,ce,J=pe(r[0].roc_auc)+"",ee;return{c(){e=y("table"),l=y("tr"),t=y("td"),n=q("Overall score"),o=y("td"),a=q(s),c=Q(),f=y("tr"),C=y("td"),g=q("F1"),_=y("td"),m=q(u),k=Q(),z=y("tr"),I=y("td"),$=q("Recall"),E=y("td"),b=q(p),T=Q(),H=y("tr"),Y=y("td"),B=q("Precision"),M=y("td"),R=q(w),j=Q(),X=y("tr"),ae=y("td"),oe=q("Area under ROC"),ce=y("td"),ee=q(J),this.h()},l(G){e=A(G,"TABLE",{class:!0});var P=D(e);l=A(P,"TR",{});var x=D(l);t=A(x,"TD",{class:!0});var he=D(t);n=Z(he,"Overall score"),he.forEach(d),o=A(x,"TD",{class:!0});var _e=D(o);a=Z(_e,s),_e.forEach(d),x.forEach(d),c=W(P),f=A(P,"TR",{});var me=D(f);C=A(me,"TD",{class:!0});var ge=D(C);g=Z(ge,"F1"),ge.forEach(d),_=A(me,"TD",{class:!0});var Ee=D(_);m=Z(Ee,u),Ee.forEach(d),me.forEach(d),k=W(P),z=A(P,"TR",{});var Ve=D(z);I=A(Ve,"TD",{class:!0});var De=D(I);$=Z(De,"Recall"),De.forEach(d),E=A(Ve,"TD",{class:!0});var Qe=D(E);b=Z(Qe,p),Qe.forEach(d),Ve.forEach(d),T=W(P),H=A(P,"TR",{});var Le=D(H);Y=A(Le,"TD",{class:!0});var We=D(Y);B=Z(We,"Precision"),We.forEach(d),M=A(Le,"TD",{class:!0});var xe=D(M);R=Z(xe,w),xe.forEach(d),Le.forEach(d),j=W(P),X=A(P,"TR",{});var Fe=D(X);ae=A(Fe,"TD",{class:!0});var Ke=D(ae);oe=Z(Ke,"Area under ROC"),Ke.forEach(d),ce=A(Fe,"TD",{class:!0});var Je=D(ce);ee=Z(Je,J),Je.forEach(d),Fe.forEach(d),P.forEach(d),this.h()},h(){S(t,"class","svelte-zc5pc5"),S(o,"class",i=Xe(He[r[0].overall])+" svelte-zc5pc5"),S(C,"class","svelte-zc5pc5"),S(_,"class","svelte-zc5pc5"),S(I,"class","svelte-zc5pc5"),S(E,"class","svelte-zc5pc5"),S(Y,"class","svelte-zc5pc5"),S(M,"class","svelte-zc5pc5"),S(ae,"class","svelte-zc5pc5"),S(ce,"class","svelte-zc5pc5"),S(e,"class","svelte-zc5pc5")},m(G,P){N(G,e,P),h(e,l),h(l,t),h(t,n),h(l,o),h(o,a),h(e,c),h(e,f),h(f,C),h(C,g),h(f,_),h(_,m),h(e,k),h(e,z),h(z,I),h(I,$),h(z,E),h(E,b),h(e,T),h(e,H),h(H,Y),h(Y,B),h(H,M),h(M,R),h(e,j),h(e,X),h(X,ae),h(ae,oe),h(X,ce),h(ce,ee)},p(G,[P]){P&1&&s!==(s=Ne[G[0].overall]+"")&&te(a,s),P&1&&i!==(i=Xe(He[G[0].overall])+" svelte-zc5pc5")&&S(o,"class",i),P&1&&u!==(u=pe(G[0].f1)+"")&&te(m,u),P&1&&p!==(p=pe(G[0].recall)+"")&&te(b,p),P&1&&w!==(w=pe(G[0].precision)+"")&&te(R,w),P&1&&J!==(J=pe(G[0].roc_auc)+"")&&te(ee,J)},i:K,o:K,d(G){G&&d(e)}}}function Ul(r,e,l){let{metrics:t}=e;return r.$$set=n=>{"metrics"in n&&l(0,t=n.metrics)},[t]}class mt extends fe{constructor(e){super(),ue(this,e,Ul,Fl,de,{metrics:0})}}function ht(r,e,l){const t=r.slice();return t[21]=e[l],t}function Yl(r){let e;return{c(){e=q("Compute")},l(l){e=Z(l,"Compute")},m(l,t){N(l,e,t)},d(l){l&&d(e)}}}function _t(r){let e,l;return e=new Re({props:{value:r[21].name}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.value=t[21].name),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function ql(r){var s;let e,l,t=((s=r[9])==null?void 0:s.data)||[],n=[];for(let a=0;a<t.length;a+=1)n[a]=_t(ht(r,t,a));const o=a=>V(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=ke()},l(a){for(let i=0;i<n.length;i+=1)n[i].l(a);e=ke()},m(a,i){for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(a,i);N(a,e,i),l=!0},p(a,i){var c;if(i&512){t=((c=a[9])==null?void 0:c.data)||[];let f;for(f=0;f<t.length;f+=1){const C=ht(a,t,f);n[f]?(n[f].p(C,i),v(n[f],1)):(n[f]=_t(C),n[f].c(),v(n[f],1),n[f].m(e.parentNode,e))}for(le(),f=t.length;f<n.length;f+=1)o(f);ne()}},i(a){if(!l){for(let i=0;i<t.length;i+=1)v(n[i]);l=!0}},o(a){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)V(n[i]);l=!1},d(a){Ie(n,a),a&&d(e)}}}function Zl(r){let e,l;return e=new fl({props:{text:r[0],row:r[4],spanPaths:r[6],valuePaths:r[5],embeddings:r[1]?[r[1]]:[]}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.text=t[0]),n&16&&(o.row=t[4]),n&64&&(o.spanPaths=t[6]),n&32&&(o.valuePaths=t[5]),n&2&&(o.embeddings=t[1]?[t[1]]:[]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function jl(r){let e,l;return e=new qt({}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:K,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Gl(r){let e,l,t,n,o,s,a,i,c,f,C,g,_,u,m,k;t=new cl({props:{value:r[3],cols:50,placeholder:"Paste text to try the concept.",rows:6,class:"mb-2"}}),t.$on("input",r[12]),a=new Ge({props:{$$slots:{default:[Yl]},$$scope:{ctx:r}}}),a.$on("click",r[18]);function z(b){r[19](b)}let I={labelText:"Embedding",$$slots:{default:[ql]},$$scope:{ctx:r}};r[1]!==void 0&&(I.selected=r[1]),f=new Oe({props:I}),qe.push(()=>Ze(f,"selected",z));const $=[jl,Zl],E=[];function p(b,T){var H;return b[7]&&((H=b[2])!=null&&H.isFetching)?0:b[4]!=null&&b[0]!=null?1:-1}return~(u=p(r))&&(m=E[u]=$[u](r)),{c(){e=y("div"),l=y("div"),O(t.$$.fragment),n=Q(),o=y("div"),s=y("div"),O(a.$$.fragment),i=Q(),c=y("div"),O(f.$$.fragment),g=Q(),_=y("div"),m&&m.c(),this.h()},l(b){e=A(b,"DIV",{class:!0});var T=D(e);l=A(T,"DIV",{});var H=D(l);L(t.$$.fragment,H),n=W(H),o=A(H,"DIV",{class:!0});var Y=D(o);s=A(Y,"DIV",{class:!0});var B=D(s);L(a.$$.fragment,B),B.forEach(d),i=W(Y),c=A(Y,"DIV",{class:!0});var M=D(c);L(f.$$.fragment,M),M.forEach(d),Y.forEach(d),H.forEach(d),g=W(T),_=A(T,"DIV",{class:!0});var w=D(_);m&&m.l(w),w.forEach(d),T.forEach(d),this.h()},h(){S(s,"class","pt-4"),S(c,"class","mb-2 w-32"),S(o,"class","flex flex-row justify-between"),S(_,"class","mt-4 border-gray-200"),Me(_,"border-t",r[0]!=null),S(e,"class","flex flex-col gap-x-8")},m(b,T){N(b,e,T),h(e,l),F(t,l,null),h(l,n),h(l,o),h(o,s),F(a,s,null),h(o,i),h(o,c),F(f,c,null),h(e,g),h(e,_),~u&&E[u].m(_,null),k=!0},p(b,[T]){const H={};T&8&&(H.value=b[3]),t.$set(H);const Y={};T&16777216&&(Y.$$scope={dirty:T,ctx:b}),a.$set(Y);const B={};T&16777728&&(B.$$scope={dirty:T,ctx:b}),!C&&T&2&&(C=!0,B.selected=b[1],je(()=>C=!1)),f.$set(B);let M=u;u=p(b),u===M?~u&&E[u].p(b,T):(m&&(le(),V(E[M],1,1,()=>{E[M]=null}),ne()),~u?(m=E[u],m?m.p(b,T):(m=E[u]=$[u](b),m.c()),v(m,1),m.m(_,null)):m=null),(!k||T&1)&&Me(_,"border-t",b[0]!=null)},i(b){k||(v(t.$$.fragment,b),v(a.$$.fragment,b),v(f.$$.fragment,b),v(m),k=!0)},o(b){V(t.$$.fragment,b),V(a.$$.fragment,b),V(f.$$.fragment,b),V(m),k=!1},d(b){b&&d(e),U(t),U(a),U(f),~u&&E[u].d()}}}function Ql(r,e,l){var w;let t,n,o,s,a=K,i=()=>(a(),a=ze(o,R=>l(2,s=R)),o),c,f=K,C=()=>(f(),f=ze(n,R=>l(17,c=R)),n),g,_;r.$$.on_destroy.push(()=>a()),r.$$.on_destroy.push(()=>f());let{concept:u}=e,{example:m}=e;const k=Lt();$e(r,k,R=>l(9,_=R));const z=jt();$e(r,z,R=>l(20,g=R));let I=(w=m.text)==null?void 0:w.trim();Qt(()=>{b()});function $(R){l(3,I=R.target.value),l(0,E=void 0)}let E,p=g.embedding;function b(){l(0,E=I)}let T,H,Y;const B=()=>b();function M(R){p=R,l(1,p)}return r.$$set=R=>{"concept"in R&&l(14,u=R.concept),"example"in R&&l(15,m=R.example)},r.$$.update=()=>{var R;if(r.$$.dirty&32768&&m.text&&(l(3,I=m.text.trim()),l(0,E=void 0)),r.$$.dirty&16386&&l(16,t={signal_name:"concept_score",concept_name:u.concept_name,namespace:u.namespace,embedding:p}),r.$$.dirty&65536&&C(l(8,n=t.embedding?ol({signal:t}):void 0)),r.$$.dirty&16387&&i(l(7,o=p!=null&&E!=null?Kt(u.namespace,u.concept_name,p,{examples:[{text:E}]}):null)),r.$$.dirty&131078&&(s==null?void 0:s.data)!=null&&p!=null&&((R=c==null?void 0:c.data)==null?void 0:R.fields)!=null){const j=Jt(c.data.fields);l(4,T=Xt(s.data[0],j));const X=_l(j);l(6,Y=X.spanPaths),l(5,H=X.valuePaths)}},[E,p,s,I,T,H,Y,o,n,_,k,z,$,b,u,m,t,c,B,M]}class Wl extends fe{constructor(e){super(),ue(this,e,Ql,Gl,de,{concept:14,example:15})}}function xl(r,e,l,t,n,o){const s={...r};if(e==null||l==null)return s;const a=[...e,...l],i=new Set,c=[];for(const u of a){const m=Te.value(Ce(u,[Pe]),"string");if(m==null||i.has(m))continue;i.add(m);const k=Ce(u,n);if(k==null)continue;const z=Te.value(k,"string");if(z==null)continue;const I=`${t.namespace}/${t.concept_name}`,$=Ce(k,[`${I}/${o}`]);if($==null)continue;const E=Ce(k,[`${I}/labels`]),p=[];if(E!=null)for(const b of E){const T=Te.value(b,"string_span");T!=null&&p.push(T)}for(const b of $){const T=Te.value(b,"string_span");if(T==null||!p.every(M=>M.start>T.end||M.end<T.start))continue;const Y=Ce(b,["score"]);if(Y==null)continue;const B=Te.value(Y,"float32");B!=null&&c.push({text:z,span:T,score:B})}}function f(u){return{text:gl(u.text,u.span.start,u.span.end),score:u.score}}c.sort((u,m)=>m.score-u.score);const C=c[0],g=c.slice().reverse().find(u=>u!=C);c.sort((u,m)=>Math.abs(u.score-.5)-Math.abs(m.score-.5));const _=c.find(u=>u!=C&&u!=g);return C!=null&&s.positive==null&&(s.positive=f(C)),_!=null&&s.neutral==null&&(s.neutral=f(_)),g!=null&&s.negative==null&&(s.negative=f(g)),s}function gt(r,e,l){const t=r.slice();return t[20]=e[l],t}function Kl(r){const e=r.slice(),l=tn(e[20].score);e[23]=l;const t=ln(e[20].score);return e[24]=t,e}function Jl(r){let e,l,t,n,o,s,a,i,c,f=r[20].text+"",C,g,_,u=r[24]+"",m,k,z=pe(r[20].score,2)+"",I,$,E,p,b,T;n=new Ut({});function H(){return r[17](r[20])}a=new Yt({});function Y(){return r[18](r[20])}return{c(){e=y("div"),l=y("div"),t=y("button"),O(n.$$.fragment),o=Q(),s=y("button"),O(a.$$.fragment),i=Q(),c=y("div"),C=q(f),g=Q(),_=y("div"),m=q(u),k=Q(),I=q(z),$=Q(),this.h()},l(B){e=A(B,"DIV",{class:!0});var M=D(e);l=A(M,"DIV",{class:!0});var w=D(l);t=A(w,"BUTTON",{class:!0});var R=D(t);L(n.$$.fragment,R),R.forEach(d),o=W(w),s=A(w,"BUTTON",{class:!0});var j=D(s);L(a.$$.fragment,j),j.forEach(d),w.forEach(d),i=W(M),c=A(M,"DIV",{class:!0});var X=D(c);C=Z(X,f),X.forEach(d),g=W(M),_=A(M,"DIV",{class:!0});var ae=D(_);m=Z(ae,u),k=W(ae),I=Z(ae,z),ae.forEach(d),$=W(M),M.forEach(d),this.h()},h(){S(t,"class","p-2 hover:bg-gray-200"),Me(t,"text-blue-500",r[20].label===!0),S(s,"class","p-2 hover:bg-gray-200"),Me(s,"text-red-500",r[20].label===!1),S(l,"class","mr-2 flex flex-shrink-0 gap-x-1"),S(c,"class","flex-grow"),S(_,"class","w-40 flex-shrink-0 text-right"),S(e,"class",E=`flex flex-grow items-center rounded-md border border-gray-300 p-4 pl-2 ${r[23]}`)},m(B,M){N(B,e,M),h(e,l),h(l,t),F(n,t,null),h(l,o),h(l,s),F(a,s,null),h(e,i),h(e,c),h(c,C),h(e,g),h(e,_),h(_,m),h(_,k),h(_,I),h(e,$),p=!0,b||(T=[Be(t,"click",H),Be(s,"click",Y)],b=!0)},p(B,M){r=B,(!p||M&1)&&Me(t,"text-blue-500",r[20].label===!0),(!p||M&1)&&Me(s,"text-red-500",r[20].label===!1),(!p||M&1)&&f!==(f=r[20].text+"")&&te(C,f),(!p||M&1)&&u!==(u=r[24]+"")&&te(m,u),(!p||M&1)&&z!==(z=pe(r[20].score,2)+"")&&te(I,z),(!p||M&1&&E!==(E=`flex flex-grow items-center rounded-md border border-gray-300 p-4 pl-2 ${r[23]}`))&&S(e,"class",E)},i(B){p||(v(n.$$.fragment,B),v(a.$$.fragment,B),p=!0)},o(B){V(n.$$.fragment,B),V(a.$$.fragment,B),p=!1},d(B){B&&d(e),U(n),U(a),b=!1,Wt(T)}}}function Xl(r){let e,l;return e=new qt({props:{paragraph:!0,lines:2}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:K,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function pt(r){let e,l,t,n;const o=[Xl,Jl],s=[];function a(c,f){return c[20]==null?0:1}function i(c,f){return f===1?Kl(c):c}return e=a(r),l=s[e]=o[e](i(r,e)),{c(){l.c(),t=ke()},l(c){l.l(c),t=ke()},m(c,f){s[e].m(c,f),N(c,t,f),n=!0},p(c,f){let C=e;e=a(c),e===C?s[e].p(i(c,e),f):(le(),V(s[C],1,1,()=>{s[C]=null}),ne(),l=s[e],l?l.p(i(c,e),f):(l=s[e]=o[e](i(c,e)),l.c()),v(l,1),l.m(t.parentNode,t))},i(c){n||(v(l),n=!0)},o(c){V(l),n=!1},d(c){s[e].d(c),c&&d(t)}}}function en(r){let e,l,t=r[0],n=[];for(let s=0;s<t.length;s+=1)n[s]=pt(gt(r,t,s));const o=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){e=y("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=A(s,"DIV",{class:!0});var a=D(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(d),this.h()},h(){S(e,"class","flex flex-col gap-y-4")},m(s,a){N(s,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[a]){if(a&17){t=s[0];let i;for(i=0;i<t.length;i+=1){const c=gt(s,t,i);n[i]?(n[i].p(c,a),v(n[i],1)):(n[i]=pt(c),n[i].c(),v(n[i],1),n[i].m(e,null))}for(le(),i=t.length;i<n.length;i+=1)o(i);ne()}},i(s){if(!l){for(let a=0;a<t.length;a+=1)v(n[a]);l=!0}},o(s){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)V(n[a]);l=!1},d(s){s&&d(e),Ie(n,s)}}}const bt=100;function tn(r){return r<.2?"bg-red-500/10":r<.8?"bg-yellow-500/10":"bg-blue-500/10"}function ln(r){return r<.2?"Likely not in concept":r<.8?"Uncertain":"Likely in concept"}function nn(r,e,l){let t,n,o,s,a,i,c,f,C=K,g=()=>(C(),C=ze(a,M=>l(15,f=M)),a),_,u=K,m=()=>(u(),u=ze(n,M=>l(16,_=M)),n);r.$$.on_destroy.push(()=>C()),r.$$.on_destroy.push(()=>u());let{dataset:k}=e,{concept:z}=e,{fieldPath:I}=e,{schema:$}=e,{embedding:E}=e;const p=Nt();$e(r,p,M=>l(19,c=M));let b={},T={};function H(M,w){if(M==null)return;const R={text:M.text,label:w},j=Object.keys(T).find(X=>T[X]===M);l(10,b={...T}),c.mutate([z.namespace,z.concept_name,{insert:[R]}],{onSuccess:()=>l(10,b={...b,[j]:void 0})})}const Y=M=>H(M,!0),B=M=>H(M,!1);return r.$$set=M=>{"dataset"in M&&l(5,k=M.dataset),"concept"in M&&l(6,z=M.concept),"fieldPath"in M&&l(7,I=M.fieldPath),"schema"in M&&l(8,$=M.schema),"embedding"in M&&l(9,E=M.embedding)},r.$$.update=()=>{var M,w;r.$$.dirty&704&&l(14,t={path:I,type:"concept",concept_namespace:z.namespace,concept_name:z.concept_name,embedding:E}),r.$$.dirty&16800&&m(l(2,n=et(k.namespace,k.name,{columns:[Pe,I],limit:bt,combine_columns:!0,searches:[t]},$))),r.$$.dirty&576&&l(13,o={signal_name:"concept_score",namespace:z.namespace,concept_name:z.concept_name,embedding:E}),r.$$.dirty&64&&l(12,s={signal_name:"concept_labels",namespace:z.namespace,concept_name:z.concept_name}),r.$$.dirty&12704&&g(l(1,a=et(k.namespace,k.name,{columns:[Pe,I,{path:I,signal_udf:o},{path:I,signal_udf:s}],limit:bt,combine_columns:!0,sort_by:[Pe]},$))),r.$$.dirty&100032&&l(11,T=xl(b,_.isFetching||(M=_.data)==null?void 0:M.rows,f.isFetching||(w=f.data)==null?void 0:w.rows,z,I,E)),r.$$.dirty&2048&&l(0,i=[T.positive,T.neutral,T.negative])},[i,a,n,p,H,k,z,I,$,E,b,T,s,o,t,f,_,Y,B]}class rn extends fe{constructor(e){super(),ue(this,e,nn,en,de,{dataset:5,concept:6,fieldPath:7,schema:8,embedding:9})}}function vt(r,e,l){const t=r.slice();return t[23]=e[l],t}function wt(r,e,l){const t=r.slice();return t[26]=e[l],t}function kt(r,e,l){const t=r.slice();return t[7]=e[l],t}function sn(r){let e,l;return e=new Oe({props:{labelText:"Dataset",selected:r[10],$$slots:{default:[cn]},$$scope:{ctx:r}}}),e.$on("change",r[14]),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n[0]&1024&&(o.selected=t[10]),n[0]&64|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function an(r){let e,l;return e=new Zt({props:{kind:"error",title:"Error",subtitle:r[6].error.message,hideCloseButton:!0}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n[0]&64&&(o.subtitle=t[6].error.message),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function on(r){let e,l;return e=new Ft({}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:K,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function $t(r){let e,l;return e=new Re({props:{value:`${r[7].namespace}/${r[7].dataset_name}`}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n[0]&64&&(o.value=`${t[7].namespace}/${t[7].dataset_name}`),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function cn(r){let e,l,t,n;e=new Re({props:{value:"",text:"none"}});let o=r[6].data,s=[];for(let i=0;i<o.length;i+=1)s[i]=$t(kt(r,o,i));const a=i=>V(s[i],1,1,()=>{s[i]=null});return{c(){O(e.$$.fragment),l=Q();for(let i=0;i<s.length;i+=1)s[i].c();t=ke()},l(i){L(e.$$.fragment,i),l=W(i);for(let c=0;c<s.length;c+=1)s[c].l(i);t=ke()},m(i,c){F(e,i,c),N(i,l,c);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(i,c);N(i,t,c),n=!0},p(i,c){if(c[0]&64){o=i[6].data;let f;for(f=0;f<o.length;f+=1){const C=kt(i,o,f);s[f]?(s[f].p(C,c),v(s[f],1)):(s[f]=$t(C),s[f].c(),v(s[f],1),s[f].m(t.parentNode,t))}for(le(),f=o.length;f<s.length;f+=1)a(f);ne()}},i(i){if(!n){v(e.$$.fragment,i);for(let c=0;c<o.length;c+=1)v(s[c]);n=!0}},o(i){V(e.$$.fragment,i),s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)V(s[c]);n=!1},d(i){U(e,i),i&&d(l),Ie(s,i),i&&d(t)}}}function fn(r){let e,l;return e=new Oe({props:{labelText:"Field with embeddings",selected:r[8],$$slots:{default:[mn]},$$scope:{ctx:r}}}),e.$on("change",r[15]),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n[0]&256&&(o.selected=t[8]),n[0]&16|n[1]&1&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function un(r){let e,l;return e=new Zt({props:{kind:"error",title:"Error",subtitle:r[5].error.message,hideCloseButton:!0}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n[0]&32&&(o.subtitle=t[5].error.message),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function dn(r){let e,l;return e=new Ft({}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:K,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Et(r){let e,l;return e=new Re({props:{value:ye(r[26].path)}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n[0]&16&&(o.value=ye(t[26].path)),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function mn(r){let e,l,t=r[4],n=[];for(let s=0;s<t.length;s+=1)n[s]=Et(wt(r,t,s));const o=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ke()},l(s){for(let a=0;a<n.length;a+=1)n[a].l(s);e=ke()},m(s,a){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,a);N(s,e,a),l=!0},p(s,a){if(a[0]&16){t=s[4];let i;for(i=0;i<t.length;i+=1){const c=wt(s,t,i);n[i]?(n[i].p(c,a),v(n[i],1)):(n[i]=Et(c),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(le(),i=t.length;i<n.length;i+=1)o(i);ne()}},i(s){if(!l){for(let a=0;a<t.length;a+=1)v(n[a]);l=!0}},o(s){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)V(n[a]);l=!1},d(s){Ie(n,s),s&&d(e)}}}function Vt(r){let e,l,t;function n(s){r[21](s)}let o={labelText:"Embedding",$$slots:{default:[hn]},$$scope:{ctx:r}};return r[3]!==void 0&&(o.selected=r[3]),e=new Oe({props:o}),qe.push(()=>Ze(e,"selected",n)),{c(){O(e.$$.fragment)},l(s){L(e.$$.fragment,s)},m(s,a){F(e,s,a),t=!0},p(s,a){const i={};a[0]&512|a[1]&1&&(i.$$scope={dirty:a,ctx:s}),!l&&a[0]&8&&(l=!0,i.selected=s[3],je(()=>l=!1)),e.$set(i)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Dt(r){let e,l;return e=new Re({props:{value:r[23]}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=t[23]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function hn(r){let e,l,t=r[9],n=[];for(let s=0;s<t.length;s+=1)n[s]=Dt(vt(r,t,s));const o=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ke()},l(s){for(let a=0;a<n.length;a+=1)n[a].l(s);e=ke()},m(s,a){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,a);N(s,e,a),l=!0},p(s,a){if(a[0]&512){t=s[9];let i;for(i=0;i<t.length;i+=1){const c=vt(s,t,i);n[i]?(n[i].p(c,a),v(n[i],1)):(n[i]=Dt(c),n[i].c(),v(n[i],1),n[i].m(e.parentNode,e))}for(le(),i=t.length;i<n.length;i+=1)o(i);ne()}},i(s){if(!l){for(let a=0;a<t.length;a+=1)v(n[a]);l=!0}},o(s){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)V(n[a]);l=!1},d(s){Ie(n,s),s&&d(e)}}}function It(r){let e,l;return e=new Ge({props:{class:"dataset-link top-7 h-8",icon:$l,iconDescription:"Open dataset and apply concept."}}),e.$on("click",r[16]),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:K,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Mt(r){let e,l,t;return l=new rn({props:{concept:r[0],dataset:r[7],fieldPath:r[2],schema:r[1],embedding:r[3]}}),{c(){e=y("div"),O(l.$$.fragment)},l(n){e=A(n,"DIV",{});var o=D(e);L(l.$$.fragment,o),o.forEach(d)},m(n,o){N(n,e,o),F(l,e,null),t=!0},p(n,o){const s={};o[0]&1&&(s.concept=n[0]),o[0]&128&&(s.dataset=n[7]),o[0]&4&&(s.fieldPath=n[2]),o[0]&2&&(s.schema=n[1]),o[0]&8&&(s.embedding=n[3]),l.$set(s)},i(n){t||(v(l.$$.fragment,n),t=!0)},o(n){V(l.$$.fragment,n),t=!1},d(n){n&&d(e),U(l)}}}function _n(r){let e,l,t,n,o,s,a,i,c,f,C;const g=[on,an,sn],_=[];function u(p,b){return p[6].isLoading?0:p[6].isError?1:p[6].data.length>0?2:-1}~(t=u(r))&&(n=_[t]=g[t](r));const m=[dn,un,fn],k=[];function z(p,b){return p[5].isLoading?0:p[5].isError?1:p[4].length>0?2:-1}~(s=z(r))&&(a=k[s]=m[s](r));let I=r[9].length>0&&Vt(r),$=r[8]!=null&&r[3]!=null&&It(r),E=r[7]!=null&&r[2]!=null&&r[1]!=null&&r[3]!=null&&Mt(r);return{c(){e=y("div"),l=y("div"),n&&n.c(),o=Q(),a&&a.c(),i=Q(),I&&I.c(),c=Q(),$&&$.c(),f=Q(),E&&E.c(),this.h()},l(p){e=A(p,"DIV",{class:!0});var b=D(e);l=A(b,"DIV",{class:!0});var T=D(l);n&&n.l(T),o=W(T),a&&a.l(T),i=W(T),I&&I.l(T),c=W(T),$&&$.l(T),T.forEach(d),f=W(b),E&&E.l(b),b.forEach(d),this.h()},h(){S(l,"class","flex flex-row gap-x-2"),S(e,"class","flex flex-col gap-y-4")},m(p,b){N(p,e,b),h(e,l),~t&&_[t].m(l,null),h(l,o),~s&&k[s].m(l,null),h(l,i),I&&I.m(l,null),h(l,c),$&&$.m(l,null),h(e,f),E&&E.m(e,null),C=!0},p(p,b){let T=t;t=u(p),t===T?~t&&_[t].p(p,b):(n&&(le(),V(_[T],1,1,()=>{_[T]=null}),ne()),~t?(n=_[t],n?n.p(p,b):(n=_[t]=g[t](p),n.c()),v(n,1),n.m(l,o)):n=null);let H=s;s=z(p),s===H?~s&&k[s].p(p,b):(a&&(le(),V(k[H],1,1,()=>{k[H]=null}),ne()),~s?(a=k[s],a?a.p(p,b):(a=k[s]=m[s](p),a.c()),v(a,1),a.m(l,i)):a=null),p[9].length>0?I?(I.p(p,b),b[0]&512&&v(I,1)):(I=Vt(p),I.c(),v(I,1),I.m(l,c)):I&&(le(),V(I,1,1,()=>{I=null}),ne()),p[8]!=null&&p[3]!=null?$?($.p(p,b),b[0]&264&&v($,1)):($=It(p),$.c(),v($,1),$.m(l,null)):$&&(le(),V($,1,1,()=>{$=null}),ne()),p[7]!=null&&p[2]!=null&&p[1]!=null&&p[3]!=null?E?(E.p(p,b),b[0]&142&&v(E,1)):(E=Mt(p),E.c(),v(E,1),E.m(e,null)):E&&(le(),V(E,1,1,()=>{E=null}),ne())},i(p){C||(v(n),v(a),v(I),v($),v(E),C=!0)},o(p){V(n),V(a),V(I),V($),V(E),C=!1},d(p){p&&d(e),~t&&_[t].d(),~s&&k[s].d(),I&&I.d(),$&&$.d(),E&&E.d()}}}function gn(r,e,l){let t,n,o,s,a,i,c,f,C,g,_=K,u=()=>(_(),_=ze(o,w=>l(5,g=w)),o),m,k;r.$$.on_destroy.push(()=>_());let{concept:z}=e;const I=jt();$e(r,I,w=>l(20,k=w));let $,E,p,b;const T=el();$e(r,T,w=>l(6,m=w));function H(w){const R=w.target.value;if(R==="")l(7,$=null);else{const[j,X]=R.split("/");l(7,$={namespace:j,name:X})}}function Y(w){const R=w.target.value;l(2,p=rl(R))}function B(){if(a==null||b==null||$==null)return;bl(t,$.namespace,$.name).addSearch({path:[a],type:"concept",concept_namespace:z.namespace,concept_name:z.concept_name,embedding:b}),vl(hl($.namespace,$.name))}function M(w){b=w,l(3,b),l(17,f),l(2,p),l(1,E),l(4,c),l(5,g),l(19,i)}return r.$$set=w=>{"concept"in w&&l(0,z=w.concept)},r.$$.update=()=>{if(r.$$.dirty[0]&1048576&&l(18,n=[k.embedding,"gte-small","gte-base","openai","sbert"]),r.$$.dirty[0]&192&&m.data&&m.data.length>0&&$===void 0&&l(7,$={namespace:m.data[0].namespace,name:m.data[0].dataset_name}),r.$$.dirty[0]&128&&u(l(11,o=tl($==null?void 0:$.namespace,$==null?void 0:$.name))),r.$$.dirty[0]&128&&l(10,s=$?`${$.namespace}/${$.name}`:""),r.$$.dirty[0]&32&&l(1,E=g.data),r.$$.dirty[0]&2&&l(19,i=E?Se(E).filter(w=>!ll(w,E)&&w.dtype!=null):[]),r.$$.dirty[0]&524288&&l(4,c=i.filter(w=>Se(w).some(R=>R.signal!=null&&Se(R).some(j=>j.dtype==="embedding")))),r.$$.dirty[0]&20&&p!=null){const w=ye(p);c.some(j=>ye(j.path)===w)||l(2,p=void 0)}r.$$.dirty[0]&20&&c.length>0&&p==null&&l(2,p=c[0].path),r.$$.dirty[0]&4&&l(8,a=p?ye(p):void 0),r.$$.dirty[0]&6&&l(17,f=p&&E?Se(nl(E,p)).filter(w=>w.signal!=null&&Se(w).some(R=>R.dtype==="embedding")):[]),r.$$.dirty[0]&393216&&l(9,C=f.map(w=>w.signal.signal_name).sort((w,R)=>{let j=n.indexOf(w),X=n.indexOf(R);return j===-1&&(j=n.length),X===-1&&(X=n.length),j-X})),r.$$.dirty[0]&131080&&b!=null&&(f.some(R=>R.path.at(-1)===b)||l(3,b=void 0))},t=pl(),[z,E,p,b,c,g,m,$,a,C,s,o,I,T,H,Y,B,f,n,i,k,M]}class pn extends fe{constructor(e){super(),ue(this,e,gn,_n,de,{concept:0},null,[-1,-1])}}function zt(r,e,l){const t=r.slice();t[23]=e[l];const n=t[3][t[23].name];t[24]=n;const o=t[9].isLoading&&t[9].variables&&t[9].variables[2]==t[23].name;return t[25]=o,t}function Tt(r){let e,l,t,n,o;return l=new yl({props:{class:"ml-2"}}),{c(){e=y("div"),O(l.$$.fragment)},l(s){e=A(s,"DIV",{});var a=D(e);L(l.$$.fragment,a),a.forEach(d)},m(s,a){N(s,e,a),F(l,e,null),t=!0,n||(o=Ht(Ot.call(null,e,{text:"Your concepts are only visible to you when logged in with Google."})),n=!0)},i(s){t||(v(l.$$.fragment,s),t=!0)},o(s){V(l.$$.fragment,s),t=!1},d(s){s&&d(e),U(l),n=!1,o()}}}function Ct(r){let e,l=r[0].description+"",t;return{c(){e=y("div"),t=q(l),this.h()},l(n){e=A(n,"DIV",{class:!0});var o=D(e);t=Z(o,l),o.forEach(d),this.h()},h(){S(e,"class","text text-base text-gray-600")},m(n,o){N(n,e,o),h(e,t)},p(n,o){o&1&&l!==(l=n[0].description+"")&&te(t,l)},d(n){n&&d(e)}}}function bn(r){let e,l;return{c(){e=y("div"),l=q("Try it"),this.h()},l(t){e=A(t,"DIV",{slot:!0,class:!0});var n=D(e);l=Z(n,"Try it"),n.forEach(d),this.h()},h(){S(e,"slot","above"),S(e,"class","text-md font-semibold")},m(t,n){N(t,e,n),h(e,l)},p:K,d(t){t&&d(e)}}}function vn(r){let e,l;return e=new Wl({props:{example:r[4],concept:r[0],slot:"below"}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n&16&&(o.example=t[4]),n&1&&(o.concept=t[0]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function St(r){let e,l;return e=new Ye({props:{expanded:!0,$$slots:{below:[Dn],above:[wn]},$$scope:{ctx:r}}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n&268436237&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function wn(r){let e,l;return{c(){e=y("div"),l=q("Metrics"),this.h()},l(t){e=A(t,"DIV",{slot:!0,class:!0});var n=D(e);l=Z(n,"Metrics"),n.forEach(d),this.h()},h(){S(e,"slot","above"),S(e,"class","text-md font-semibold")},m(t,n){N(t,e,n),h(e,l)},p:K,d(t){t&&d(e)}}}function kn(r){let e,l;function t(){return r[17](r[23])}return e=new Ge({props:{icon:r[25]?Ue:nt,class:"w-28 text-3xl",$$slots:{default:[Vn]},$$scope:{ctx:r}}}),e.$on("click",t),{c(){O(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,o){F(e,n,o),l=!0},p(n,o){r=n;const s={};o&768&&(s.icon=r[25]?Ue:nt),o&268435456&&(s.$$scope={dirty:o,ctx:r}),e.$set(s)},i(n){l||(v(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){U(e,n)}}}function $n(r){let e,l=Ne[r[24].metrics.overall]+"",t,n,o,s,a;return{c(){e=y("div"),t=q(l),this.h()},l(i){e=A(i,"DIV",{class:!0});var c=D(e);t=Z(c,l),c.forEach(d),this.h()},h(){S(e,"class",n="concept-score-pill cursor-default text-2xl font-light "+He[r[24].metrics.overall])},m(i,c){N(i,e,c),h(e,t),s||(a=Ht(o=Ot.call(null,e,{component:mt,props:{metrics:r[24].metrics}})),s=!0)},p(i,c){r=i,c&264&&l!==(l=Ne[r[24].metrics.overall]+"")&&te(t,l),c&264&&n!==(n="concept-score-pill cursor-default text-2xl font-light "+He[r[24].metrics.overall])&&S(e,"class",n),o&&xt(o.update)&&c&264&&o.update.call(null,{component:mt,props:{metrics:r[24].metrics}})},i:K,o:K,d(i){i&&d(e),s=!1,a()}}}function En(r){let e,l;return e=new Ue({}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p:K,i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function Vn(r){let e;return{c(){e=q("Compute")},l(l){e=Z(l,"Compute")},m(l,t){N(l,e,t)},d(l){l&&d(e)}}}function yt(r){let e,l,t=r[23].name+"",n,o,s,a,i,c;const f=[En,$n,kn],C=[];function g(_,u){return _[2].isLoading?0:_[24]&&_[24].metrics?1:2}return s=g(r),a=C[s]=f[s](r),{c(){e=y("div"),l=y("div"),n=q(t),o=Q(),a.c(),i=Q(),this.h()},l(_){e=A(_,"DIV",{class:!0});var u=D(e);l=A(u,"DIV",{class:!0});var m=D(l);n=Z(m,t),m.forEach(d),o=W(u),a.l(u),i=W(u),u.forEach(d),this.h()},h(){S(l,"class","text-gray-500"),S(e,"class","flex w-36 flex-col items-center gap-y-2 rounded-md border border-b-0 border-gray-200 p-4 shadow-md")},m(_,u){N(_,e,u),h(e,l),h(l,n),h(e,o),C[s].m(e,null),h(e,i),c=!0},p(_,u){(!c||u&256)&&t!==(t=_[23].name+"")&&te(n,t);let m=s;s=g(_),s===m?C[s].p(_,u):(le(),V(C[m],1,1,()=>{C[m]=null}),ne(),a=C[s],a?a.p(_,u):(a=C[s]=f[s](_),a.c()),v(a,1),a.m(e,i))},i(_){c||(v(a),c=!0)},o(_){V(a),c=!1},d(_){_&&d(e),C[s].d()}}}function Dn(r){let e,l,t=r[8].data,n=[];for(let s=0;s<t.length;s+=1)n[s]=yt(zt(r,t,s));const o=s=>V(n[s],1,1,()=>{n[s]=null});return{c(){e=y("div");for(let s=0;s<n.length;s+=1)n[s].c();this.h()},l(s){e=A(s,"DIV",{slot:!0,class:!0});var a=D(e);for(let i=0;i<n.length;i+=1)n[i].l(a);a.forEach(d),this.h()},h(){S(e,"slot","below"),S(e,"class","model-metrics flex gap-x-4")},m(s,a){N(s,e,a);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,a){if(a&781){t=s[8].data;let i;for(i=0;i<t.length;i+=1){const c=zt(s,t,i);n[i]?(n[i].p(c,a),v(n[i],1)):(n[i]=yt(c),n[i].c(),v(n[i],1),n[i].m(e,null))}for(le(),i=t.length;i<n.length;i+=1)o(i);ne()}},i(s){if(!l){for(let a=0;a<t.length;a+=1)v(n[a]);l=!0}},o(s){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)V(n[a]);l=!1},d(s){s&&d(e),Ie(n,s)}}}function In(r){let e,l;return{c(){e=y("div"),l=q("Collect labels"),this.h()},l(t){e=A(t,"DIV",{slot:!0,class:!0});var n=D(e);l=Z(n,"Collect labels"),n.forEach(d),this.h()},h(){S(e,"slot","above"),S(e,"class","text-md font-semibold")},m(t,n){N(t,e,n),h(e,l)},p:K,d(t){t&&d(e)}}}function Mn(r){let e,l;return e=new pn({props:{slot:"below",concept:r[0]}}),{c(){O(e.$$.fragment)},l(t){L(e.$$.fragment,t)},m(t,n){F(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.concept=t[0]),e.$set(o)},i(t){l||(v(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){U(e,t)}}}function zn(r){let e,l,t,n=r[0].concept_name+"",o,s,a,i,c,f,C,g,_,u,m,k,z,I,$=r[1].length+"",E,p,b,T,H,Y,B,M,w,R=r[5].length+"",j,X,ae,oe,ce,J=r[7]==r[0].namespace&&Tt(),ee=r[0].description&&Ct(r);c=new Ye({props:{expanded:!0,$$slots:{below:[vn],above:[bn]},$$scope:{ctx:r}}});let G=r[8].data&&St(r);return g=new Ye({props:{$$slots:{below:[Mn],above:[In]},$$scope:{ctx:r}}}),z=new Ut({}),T=new dt({props:{data:r[1]}}),T.$on("remove",r[18]),T.$on("add",r[19]),M=new Yt({}),oe=new dt({props:{data:r[5]}}),oe.$on("remove",r[20]),oe.$on("add",r[21]),{c(){e=y("div"),l=y("div"),t=y("div"),o=q(n),s=Q(),J&&J.c(),a=Q(),ee&&ee.c(),i=Q(),O(c.$$.fragment),f=Q(),G&&G.c(),C=Q(),O(g.$$.fragment),_=Q(),u=y("div"),m=y("div"),k=y("span"),O(z.$$.fragment),I=q(" In concept ("),E=q($),p=q(" examples)"),b=Q(),O(T.$$.fragment),H=Q(),Y=y("div"),B=y("span"),O(M.$$.fragment),w=q("Not in concept ("),j=q(R),X=q(" examples)"),ae=Q(),O(oe.$$.fragment),this.h()},l(P){e=A(P,"DIV",{class:!0});var x=D(e);l=A(x,"DIV",{});var he=D(l);t=A(he,"DIV",{class:!0});var _e=D(t);o=Z(_e,n),s=W(_e),J&&J.l(_e),_e.forEach(d),a=W(he),ee&&ee.l(he),he.forEach(d),i=W(x),L(c.$$.fragment,x),f=W(x),G&&G.l(x),C=W(x),L(g.$$.fragment,x),_=W(x),u=A(x,"DIV",{class:!0});var me=D(u);m=A(me,"DIV",{class:!0});var ge=D(m);k=A(ge,"SPAN",{class:!0});var Ee=D(k);L(z.$$.fragment,Ee),I=Z(Ee," In concept ("),E=Z(Ee,$),p=Z(Ee," examples)"),Ee.forEach(d),b=W(ge),L(T.$$.fragment,ge),ge.forEach(d),H=W(me),Y=A(me,"DIV",{class:!0});var Ve=D(Y);B=A(Ve,"SPAN",{class:!0});var De=D(B);L(M.$$.fragment,De),w=Z(De,"Not in concept ("),j=Z(De,R),X=Z(De," examples)"),De.forEach(d),ae=W(Ve),L(oe.$$.fragment,Ve),Ve.forEach(d),me.forEach(d),x.forEach(d),this.h()},h(){S(t,"class","flex flex-row items-center text-2xl font-semibold"),S(k,"class","flex items-center gap-x-2 text-lg"),S(m,"class","flex w-0 flex-grow flex-col gap-y-4"),S(B,"class","flex items-center gap-x-2 text-lg"),S(Y,"class","flex w-0 flex-grow flex-col gap-y-4"),S(u,"class","flex gap-x-4"),S(e,"class","flex h-full w-full flex-col gap-y-8 px-10")},m(P,x){N(P,e,x),h(e,l),h(l,t),h(t,o),h(t,s),J&&J.m(t,null),h(l,a),ee&&ee.m(l,null),h(e,i),F(c,e,null),h(e,f),G&&G.m(e,null),h(e,C),F(g,e,null),h(e,_),h(e,u),h(u,m),h(m,k),F(z,k,null),h(k,I),h(k,E),h(k,p),h(m,b),F(T,m,null),h(u,H),h(u,Y),h(Y,B),F(M,B,null),h(B,w),h(B,j),h(B,X),h(Y,ae),F(oe,Y,null),ce=!0},p(P,[x]){(!ce||x&1)&&n!==(n=P[0].concept_name+"")&&te(o,n),P[7]==P[0].namespace?J?x&129&&v(J,1):(J=Tt(),J.c(),v(J,1),J.m(t,null)):J&&(le(),V(J,1,1,()=>{J=null}),ne()),P[0].description?ee?ee.p(P,x):(ee=Ct(P),ee.c(),ee.m(l,null)):ee&&(ee.d(1),ee=null);const he={};x&268435473&&(he.$$scope={dirty:x,ctx:P}),c.$set(he),P[8].data?G?(G.p(P,x),x&256&&v(G,1)):(G=St(P),G.c(),v(G,1),G.m(e,C)):G&&(le(),V(G,1,1,()=>{G=null}),ne());const _e={};x&268435457&&(_e.$$scope={dirty:x,ctx:P}),g.$set(_e),(!ce||x&2)&&$!==($=P[1].length+"")&&te(E,$);const me={};x&2&&(me.data=P[1]),T.$set(me),(!ce||x&32)&&R!==(R=P[5].length+"")&&te(j,R);const ge={};x&32&&(ge.data=P[5]),oe.$set(ge)},i(P){ce||(v(J),v(c.$$.fragment,P),v(G),v(g.$$.fragment,P),v(z.$$.fragment,P),v(T.$$.fragment,P),v(M.$$.fragment,P),v(oe.$$.fragment,P),ce=!0)},o(P){V(J),V(c.$$.fragment,P),V(G),V(g.$$.fragment,P),V(z.$$.fragment,P),V(T.$$.fragment,P),V(M.$$.fragment,P),V(oe.$$.fragment,P),ce=!1},d(P){P&&d(e),J&&J.d(),ee&&ee.d(),U(c),G&&G.d(),U(g),U(z),U(T),U(M),U(oe)}}}function Tn(r,e,l){let t,n,o,s,a,i,c,f=K,C=()=>(f(),f=ze(n,w=>l(2,c=w)),n),g,_,u;r.$$.on_destroy.push(()=>f());let{concept:m}=e;const k=sl();$e(r,k,w=>l(16,g=w));const z=Nt();$e(r,z,w=>l(22,i=w));const I=Lt();$e(r,I,w=>l(8,_=w));let $={};const E=al();$e(r,E,w=>l(9,u=w));function p(w){!m.namespace||!m.concept_name||i.mutate([m.namespace,m.concept_name,{remove:[w]}])}function b(w,R){!m.namespace||!m.concept_name||i.mutate([m.namespace,m.concept_name,{insert:[{text:w,label:R}]}])}const T=w=>u.mutate([m.namespace,m.concept_name,w.name]),H=w=>p(w.detail),Y=w=>b(w.detail,!0),B=w=>p(w.detail),M=w=>b(w.detail,!1);return r.$$set=w=>{"concept"in w&&l(0,m=w.concept)},r.$$.update=()=>{var w,R;if(r.$$.dirty&65536&&l(7,t=(R=(w=g.data)==null?void 0:w.user)==null?void 0:R.id),r.$$.dirty&1&&C(l(6,n=il(m.namespace,m.concept_name))),r.$$.dirty&4&&c.data){l(3,$={});for(const j of c.data)l(3,$[j.embedding_name]=j,$)}r.$$.dirty&1&&l(1,o=Object.values(m.data).filter(j=>j.label==!0)),r.$$.dirty&1&&l(5,s=Object.values(m.data).filter(j=>j.label==!1)),r.$$.dirty&2&&l(4,a=o[Math.floor(Math.random()*o.length)])},[m,o,c,$,a,s,n,t,_,u,k,z,I,E,p,b,g,T,H,Y,B,M]}class Fn extends fe{constructor(e){super(),ue(this,e,Tn,zn,de,{concept:0})}}export{Fn as C,Ln as I,Tl as T,nt as a};
