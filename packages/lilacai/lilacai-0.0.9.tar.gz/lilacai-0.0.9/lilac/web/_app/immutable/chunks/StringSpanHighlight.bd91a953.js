import{S as te,i as le,s as ie,E as z,k as H,a as j,l as B,m as w,c as U,h,I as Re,H as C,n as V,b as P,J as S,al as De,K as D,g as T,v as Z,d as L,f as x,O as ce,P as Ie,D as q,ah as kt,F as $,G as St,L as wt,M as Et,N as yt,q as I,r as M,u as Y,y as ne,z as ae,A as se,B as oe,Q as J,w as Tt,_ as G,$ as K,a0 as re,a1 as F,a7 as ve,W as Ct,a2 as mt,a3 as Oe,C as Vt,X as _t,Y as Pt,p as ee,ae as Nt,an as Ht,a4 as Bt,R as Ye,ai as Lt,e as we,ab as At,aa as Fe}from"./index.8c57c90c.js";import{W as It}from"./SelectItem.5cf70406.js";import{Y as je,T as Mt,H as Ue,I as zt,Z as Rt,n as Dt}from"./Commands.89e81796.js";import{h as bt,aa as Be,m as gt,u as vt,X as Ot,L as ke,n as Se,Y as Yt,t as Ft,B as pt}from"./HoverTooltip.4ac2e59a.js";import{g as jt}from"./JSONSchemaForm.838d29ec.js";const Ut=i=>({}),Xe=i=>({});function We(i){let e,t,l,a;const f=i[20].labelText,r=St(f,i,i[19],Xe),n=r||Xt(i);let o=i[5]&&qe(i);return{c(){e=H("div"),t=H("label"),n&&n.c(),l=j(),o&&o.c(),this.h()},l(s){e=B(s,"DIV",{});var u=w(e);t=B(u,"LABEL",{for:!0});var c=w(t);n&&n.l(c),c.forEach(h),l=U(u),o&&o.l(u),u.forEach(h),this.h()},h(){V(t,"for",i[14]),C(t,"bx--label",!0),C(t,"bx--visually-hidden",i[11]),C(t,"bx--label--disabled",i[7]),C(e,"bx--text-area__label-wrapper",!0)},m(s,u){P(s,e,u),S(e,t),n&&n.m(t,null),S(e,l),o&&o.m(e,null),a=!0},p(s,u){r?r.p&&(!a||u[0]&524288)&&wt(r,f,s,s[19],a?yt(f,s[19],u,Ut):Et(s[19]),Xe):n&&n.p&&(!a||u[0]&1024)&&n.p(s,a?u:[-1,-1]),(!a||u[0]&16384)&&V(t,"for",s[14]),(!a||u[0]&2048)&&C(t,"bx--visually-hidden",s[11]),(!a||u[0]&128)&&C(t,"bx--label--disabled",s[7]),s[5]?o?o.p(s,u):(o=qe(s),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(s){a||(T(n,s),a=!0)},o(s){L(n,s),a=!1},d(s){s&&h(e),n&&n.d(s),o&&o.d()}}}function Xt(i){let e;return{c(){e=I(i[10])},l(t){e=M(t,i[10])},m(t,l){P(t,e,l)},p(t,l){l[0]&1024&&Y(e,t[10])},d(t){t&&h(e)}}}function qe(i){let e,t=i[0].length+"",l,a,f;return{c(){e=H("div"),l=I(t),a=I("/"),f=I(i[5]),this.h()},l(r){e=B(r,"DIV",{});var n=w(e);l=M(n,t),a=M(n,"/"),f=M(n,i[5]),n.forEach(h),this.h()},h(){C(e,"bx--label",!0),C(e,"bx--label--disabled",i[7])},m(r,n){P(r,e,n),S(e,l),S(e,a),S(e,f)},p(r,n){n[0]&1&&t!==(t=r[0].length+"")&&Y(l,t),n[0]&32&&Y(f,r[5]),n[0]&128&&C(e,"bx--label--disabled",r[7])},d(r){r&&h(e)}}}function Ge(i){let e,t;return e=new It({props:{class:"bx--text-area__invalid-icon"}}),{c(){ne(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Ke(i){let e,t;return{c(){e=H("div"),t=I(i[9]),this.h()},l(l){e=B(l,"DIV",{});var a=w(e);t=M(a,i[9]),a.forEach(h),this.h()},h(){C(e,"bx--form__helper-text",!0),C(e,"bx--form__helper-text--disabled",i[7])},m(l,a){P(l,e,a),S(e,t)},p(l,a){a[0]&512&&Y(t,l[9]),a[0]&128&&C(e,"bx--form__helper-text--disabled",l[7])},d(l){l&&h(e)}}}function Je(i){let e,t;return{c(){e=H("div"),t=I(i[13]),this.h()},l(l){e=B(l,"DIV",{id:!0});var a=w(e);t=M(a,i[13]),a.forEach(h),this.h()},h(){V(e,"id",i[16]),C(e,"bx--form-requirement",!0)},m(l,a){P(l,e,a),S(e,t)},p(l,a){a[0]&8192&&Y(t,l[13]),a[0]&65536&&V(e,"id",l[16])},d(l){l&&h(e)}}}function Wt(i){let e,t,l,a,f,r,n,o,s,u,c,m,b,k,g=(i[10]||i[17].labelText)&&!i[11]&&We(i),v=i[12]&&Ge(),y=[{"aria-invalid":r=i[12]||void 0},{"aria-describedby":n=i[12]?i[16]:void 0},{disabled:i[7]},{id:i[14]},{name:i[15]},{cols:i[3]},{rows:i[4]},{placeholder:i[2]},{readOnly:i[8]},{maxlength:o=i[5]??void 0},i[18]],A={};for(let _=0;_<y.length;_+=1)A=z(A,y[_]);let E=!i[12]&&i[9]&&Ke(i),N=i[12]&&Je(i);return{c(){e=H("div"),g&&g.c(),t=j(),l=H("div"),v&&v.c(),a=j(),f=H("textarea"),u=j(),E&&E.c(),c=j(),N&&N.c(),this.h()},l(_){e=B(_,"DIV",{});var p=w(e);g&&g.l(p),t=U(p),l=B(p,"DIV",{"data-invalid":!0});var O=w(l);v&&v.l(O),a=U(O),f=B(O,"TEXTAREA",{"aria-invalid":!0,"aria-describedby":!0,id:!0,name:!0,cols:!0,rows:!0,placeholder:!0,maxlength:!0}),w(f).forEach(h),O.forEach(h),u=U(p),E&&E.l(p),c=U(p),N&&N.l(p),p.forEach(h),this.h()},h(){Re(f,A),C(f,"bx--text-area",!0),C(f,"bx--text-area--light",i[6]),C(f,"bx--text-area--invalid",i[12]),V(l,"data-invalid",s=i[12]||void 0),C(l,"bx--text-area__wrapper",!0),C(e,"bx--form-item",!0)},m(_,p){P(_,e,p),g&&g.m(e,null),S(e,t),S(e,l),v&&v.m(l,null),S(l,a),S(l,f),f.autofocus&&f.focus(),i[32](f),De(f,i[0]),S(e,u),E&&E.m(e,null),S(e,c),N&&N.m(e,null),m=!0,b||(k=[D(f,"input",i[33]),D(f,"change",i[25]),D(f,"input",i[26]),D(f,"keydown",i[27]),D(f,"keyup",i[28]),D(f,"focus",i[29]),D(f,"blur",i[30]),D(f,"paste",i[31]),D(e,"click",i[21]),D(e,"mouseover",i[22]),D(e,"mouseenter",i[23]),D(e,"mouseleave",i[24])],b=!0)},p(_,p){(_[10]||_[17].labelText)&&!_[11]?g?(g.p(_,p),p[0]&134144&&T(g,1)):(g=We(_),g.c(),T(g,1),g.m(e,t)):g&&(Z(),L(g,1,1,()=>{g=null}),x()),_[12]?v?p[0]&4096&&T(v,1):(v=Ge(),v.c(),T(v,1),v.m(l,a)):v&&(Z(),L(v,1,1,()=>{v=null}),x()),Re(f,A=ce(y,[(!m||p[0]&4096&&r!==(r=_[12]||void 0))&&{"aria-invalid":r},(!m||p[0]&69632&&n!==(n=_[12]?_[16]:void 0))&&{"aria-describedby":n},(!m||p[0]&128)&&{disabled:_[7]},(!m||p[0]&16384)&&{id:_[14]},(!m||p[0]&32768)&&{name:_[15]},(!m||p[0]&8)&&{cols:_[3]},(!m||p[0]&16)&&{rows:_[4]},(!m||p[0]&4)&&{placeholder:_[2]},(!m||p[0]&256)&&{readOnly:_[8]},(!m||p[0]&32&&o!==(o=_[5]??void 0))&&{maxlength:o},p[0]&262144&&_[18]])),p[0]&1&&De(f,_[0]),C(f,"bx--text-area",!0),C(f,"bx--text-area--light",_[6]),C(f,"bx--text-area--invalid",_[12]),(!m||p[0]&4096&&s!==(s=_[12]||void 0))&&V(l,"data-invalid",s),!_[12]&&_[9]?E?E.p(_,p):(E=Ke(_),E.c(),E.m(e,c)):E&&(E.d(1),E=null),_[12]?N?N.p(_,p):(N=Je(_),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i(_){m||(T(g),T(v),m=!0)},o(_){L(g),L(v),m=!1},d(_){_&&h(e),g&&g.d(),v&&v.d(),i[32](null),E&&E.d(),N&&N.d(),b=!1,Ie(k)}}}function qt(i,e,t){let l;const a=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let f=q(e,a),{$$slots:r={},$$scope:n}=e;const o=kt(r);let{value:s=""}=e,{placeholder:u=""}=e,{cols:c=50}=e,{rows:m=4}=e,{maxCount:b=void 0}=e,{light:k=!1}=e,{disabled:g=!1}=e,{readonly:v=!1}=e,{helperText:y=""}=e,{labelText:A=""}=e,{hideLabel:E=!1}=e,{invalid:N=!1}=e,{invalidText:_=""}=e,{id:p="ccs-"+Math.random().toString(36)}=e,{name:O=void 0}=e,{ref:X=null}=e;function W(d){J.call(this,i,d)}function fe(d){J.call(this,i,d)}function ue(d){J.call(this,i,d)}function de(d){J.call(this,i,d)}function Q(d){J.call(this,i,d)}function pe(d){J.call(this,i,d)}function he(d){J.call(this,i,d)}function Ee(d){J.call(this,i,d)}function ye(d){J.call(this,i,d)}function Te(d){J.call(this,i,d)}function Ce(d){J.call(this,i,d)}function Ve(d){Tt[d?"unshift":"push"](()=>{X=d,t(1,X)})}function Pe(){s=this.value,t(0,s)}return i.$$set=d=>{e=z(z({},e),$(d)),t(18,f=q(e,a)),"value"in d&&t(0,s=d.value),"placeholder"in d&&t(2,u=d.placeholder),"cols"in d&&t(3,c=d.cols),"rows"in d&&t(4,m=d.rows),"maxCount"in d&&t(5,b=d.maxCount),"light"in d&&t(6,k=d.light),"disabled"in d&&t(7,g=d.disabled),"readonly"in d&&t(8,v=d.readonly),"helperText"in d&&t(9,y=d.helperText),"labelText"in d&&t(10,A=d.labelText),"hideLabel"in d&&t(11,E=d.hideLabel),"invalid"in d&&t(12,N=d.invalid),"invalidText"in d&&t(13,_=d.invalidText),"id"in d&&t(14,p=d.id),"name"in d&&t(15,O=d.name),"ref"in d&&t(1,X=d.ref),"$$scope"in d&&t(19,n=d.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&16384&&t(16,l=`error-${p}`)},[s,X,u,c,m,b,k,g,v,y,A,E,N,_,p,O,l,o,f,n,r,W,fe,ue,de,Q,pe,he,Ee,ye,Te,Ce,Ve,Pe]}class Gt extends te{constructor(e){super(),le(this,e,qt,Wt,ie,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Dl=Gt;function Qe(i){let e,t;return{c(){e=G("title"),t=I(i[1])},l(l){e=K(l,"title",{});var a=w(e);t=M(a,i[1]),a.forEach(h)},m(l,a){P(l,e,a),S(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function Kt(i){let e,t,l=i[1]&&Qe(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let r=0;r<a.length;r+=1)f=z(f,a[r]);return{c(){e=G("svg"),l&&l.c(),t=G("path"),this.h()},l(r){e=K(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=K(n,"path",{d:!0}),w(t).forEach(h),n.forEach(h),this.h()},h(){V(t,"d","M24.59 16.59L17 24.17 17 4 15 4 15 24.17 7.41 16.59 6 18 16 28 26 18 24.59 16.59z"),re(e,f)},m(r,n){P(r,e,n),l&&l.m(e,null),S(e,t)},p(r,[n]){r[1]?l?l.p(r,n):(l=Qe(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),re(e,f=ce(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:r[0]},n&1&&{height:r[0]},n&4&&r[2],n&8&&r[3]]))},i:F,o:F,d(r){r&&h(e),l&&l.d()}}}function Jt(i,e,t){let l,a;const f=["size","title"];let r=q(e,f),{size:n=16}=e,{title:o=void 0}=e;return i.$$set=s=>{t(5,e=z(z({},e),$(s))),t(3,r=q(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,o=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||o),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=$(e),[n,o,a,r,l]}class Qt extends te{constructor(e){super(),le(this,e,Jt,Kt,ie,{size:0,title:1})}}function Ze(i){let e,t;return{c(){e=G("title"),t=I(i[1])},l(l){e=K(l,"title",{});var a=w(e);t=M(a,i[1]),a.forEach(h)},m(l,a){P(l,e,a),S(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function Zt(i){let e,t,l=i[1]&&Ze(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let r=0;r<a.length;r+=1)f=z(f,a[r]);return{c(){e=G("svg"),l&&l.c(),t=G("path"),this.h()},l(r){e=K(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=K(n,"path",{d:!0}),w(t).forEach(h),n.forEach(h),this.h()},h(){V(t,"d","M16 4L6 14 7.41 15.41 15 7.83 15 28 17 28 17 7.83 24.59 15.41 26 14 16 4z"),re(e,f)},m(r,n){P(r,e,n),l&&l.m(e,null),S(e,t)},p(r,[n]){r[1]?l?l.p(r,n):(l=Ze(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),re(e,f=ce(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:r[0]},n&1&&{height:r[0]},n&4&&r[2],n&8&&r[3]]))},i:F,o:F,d(r){r&&h(e),l&&l.d()}}}function xt(i,e,t){let l,a;const f=["size","title"];let r=q(e,f),{size:n=16}=e,{title:o=void 0}=e;return i.$$set=s=>{t(5,e=z(z({},e),$(s))),t(3,r=q(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,o=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||o),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=$(e),[n,o,a,r,l]}class $t extends te{constructor(e){super(),le(this,e,xt,Zt,ie,{size:0,title:1})}}function xe(i){let e,t;return{c(){e=G("title"),t=I(i[1])},l(l){e=K(l,"title",{});var a=w(e);t=M(a,i[1]),a.forEach(h)},m(l,a){P(l,e,a),S(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function el(i){let e,t,l=i[1]&&xe(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let r=0;r<a.length;r+=1)f=z(f,a[r]);return{c(){e=G("svg"),l&&l.c(),t=G("path"),this.h()},l(r){e=K(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=K(n,"path",{d:!0}),w(t).forEach(h),n.forEach(h),this.h()},h(){V(t,"d","M2 2H7V16H2zM23 2H9V16.8027l3.0422 4.5635.8453 5.9165A2.0094 2.0094 0 0014.8672 29H15a3.0033 3.0033 0 003-3V20h8a4.0045 4.0045 0 004-4V9A7.0078 7.0078 0 0023 2z"),re(e,f)},m(r,n){P(r,e,n),l&&l.m(e,null),S(e,t)},p(r,[n]){r[1]?l?l.p(r,n):(l=xe(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),re(e,f=ce(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:r[0]},n&1&&{height:r[0]},n&4&&r[2],n&8&&r[3]]))},i:F,o:F,d(r){r&&h(e),l&&l.d()}}}function tl(i,e,t){let l,a;const f=["size","title"];let r=q(e,f),{size:n=16}=e,{title:o=void 0}=e;return i.$$set=s=>{t(5,e=z(z({},e),$(s))),t(3,r=q(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,o=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||o),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=$(e),[n,o,a,r,l]}class ll extends te{constructor(e){super(),le(this,e,tl,el,ie,{size:0,title:1})}}function $e(i){let e,t;return{c(){e=G("title"),t=I(i[1])},l(l){e=K(l,"title",{});var a=w(e);t=M(a,i[1]),a.forEach(h)},m(l,a){P(l,e,a),S(e,t)},p(l,a){a&2&&Y(t,l[1])},d(l){l&&h(e)}}}function il(i){let e,t,l=i[1]&&$e(i),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],f={};for(let r=0;r<a.length;r+=1)f=z(f,a[r]);return{c(){e=G("svg"),l&&l.c(),t=G("path"),this.h()},l(r){e=K(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var n=w(e);l&&l.l(n),t=K(n,"path",{d:!0}),w(t).forEach(h),n.forEach(h),this.h()},h(){V(t,"d","M2 16H7V30H2zM23 30H9V15.1973l3.0422-4.5635.8453-5.9165A2.0094 2.0094 0 0114.8672 3H15a3.0033 3.0033 0 013 3v6h8a4.0045 4.0045 0 014 4v7A7.0078 7.0078 0 0123 30z"),re(e,f)},m(r,n){P(r,e,n),l&&l.m(e,null),S(e,t)},p(r,[n]){r[1]?l?l.p(r,n):(l=$e(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),re(e,f=ce(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},n&1&&{width:r[0]},n&1&&{height:r[0]},n&4&&r[2],n&8&&r[3]]))},i:F,o:F,d(r){r&&h(e),l&&l.d()}}}function nl(i,e,t){let l,a;const f=["size","title"];let r=q(e,f),{size:n=16}=e,{title:o=void 0}=e;return i.$$set=s=>{t(5,e=z(z({},e),$(s))),t(3,r=q(e,f)),"size"in s&&t(0,n=s.size),"title"in s&&t(1,o=s.title)},i.$$.update=()=>{t(4,l=e["aria-label"]||e["aria-labelledby"]||o),t(2,a={"aria-hidden":l?void 0:!0,role:l?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=$(e),[n,o,a,r,l]}class al extends te{constructor(e){super(),le(this,e,nl,il,ie,{size:0,title:1})}}function sl(i,e){const t=l=>i&&!i.contains(l.target)&&!l.defaultPrevented&&e();return document.addEventListener("click",t,!0),{destroy(){document.removeEventListener("click",t,!0)}}}function ol(i){let e=(i[1]?"":i[0])+"",t;return{c(){t=I(e)},l(l){t=M(l,e)},m(l,a){P(l,t,a)},p(l,a){a&3&&e!==(e=(l[1]?"":l[0])+"")&&Y(t,e)},d(l){l&&h(t)}}}function rl(i){let e,t,l,a,f;const r=[i[2],{type:"purple"},{icon:je}];let n={$$slots:{default:[ol]},$$scope:{ctx:i}};for(let o=0;o<r.length;o+=1)n=z(n,r[o]);return t=new Mt({props:n}),{c(){e=H("div"),ne(t.$$.fragment),this.h()},l(o){e=B(o,"DIV",{class:!0});var s=w(e);ae(t.$$.fragment,s),s.forEach(h),this.h()},h(){V(e,"class","embedding-badge truncate"),C(e,"embedding-badge-nolabel",i[1])},m(o,s){P(o,e,s),se(t,e,null),l=!0,a||(f=ve(bt.call(null,e,{text:"Embedding index"})),a=!0)},p(o,[s]){const u=s&4?ce(r,[s&4&&Ct(o[2]),r[1],s&0&&{icon:je}]):{};s&11&&(u.$$scope={dirty:s,ctx:o}),t.$set(u),(!l||s&2)&&C(e,"embedding-badge-nolabel",o[1])},i(o){l||(T(t.$$.fragment,o),l=!0)},o(o){L(t.$$.fragment,o),l=!1},d(o){o&&h(e),oe(t),a=!1,f()}}}function fl(i,e,t){const l=["embedding","hideEmbeddingName"];let a=q(e,l),{embedding:f}=e,{hideEmbeddingName:r=!1}=e;return i.$$set=n=>{e=z(z({},e),$(n)),t(2,a=q(e,l)),"embedding"in n&&t(0,f=n.embedding),"hideEmbeddingName"in n&&t(1,r=n.hideEmbeddingName)},[f,r,a]}class ul extends te{constructor(e){super(),le(this,e,fl,rl,ie,{embedding:0,hideEmbeddingName:1})}}function et(i,e,t){const l=i.slice();return l[11]=e[t],l}function tt(i){let e,t,l=i[0].conceptNamespace+"",a,f,r=i[0].conceptName+"",n,o,s,u,c,m,b,k,g,v,y;return c=new al({}),k=new ll({}),{c(){e=H("div"),t=H("div"),a=I(l),f=I(" / "),n=I(r),o=j(),s=H("div"),u=H("button"),ne(c.$$.fragment),m=j(),b=H("button"),ne(k.$$.fragment),this.h()},l(A){e=B(A,"DIV",{class:!0});var E=w(e);t=B(E,"DIV",{class:!0});var N=w(t);a=M(N,l),f=M(N," / "),n=M(N,r),N.forEach(h),o=U(E),s=B(E,"DIV",{class:!0});var _=w(s);u=B(_,"BUTTON",{class:!0});var p=w(u);ae(c.$$.fragment,p),p.forEach(h),m=U(_),b=B(_,"BUTTON",{class:!0});var O=w(b);ae(k.$$.fragment,O),O.forEach(h),_.forEach(h),E.forEach(h),this.h()},h(){V(t,"class","flex-grow"),V(u,"class","p-1"),V(b,"class","p-1"),V(s,"class","shrink-0"),V(e,"class","flex flex-row items-center justify-between gap-x-4 p-2")},m(A,E){P(A,e,E),S(e,t),S(t,a),S(t,f),S(t,n),S(e,o),S(e,s),S(s,u),se(c,u,null),S(s,m),S(s,b),se(k,b,null),g=!0,v||(y=[D(u,"click",i[7]),D(b,"click",i[8])],v=!0)},p(A,E){(!g||E&1)&&l!==(l=A[0].conceptNamespace+"")&&Y(a,l),(!g||E&1)&&r!==(r=A[0].conceptName+"")&&Y(n,r)},i(A){g||(T(c.$$.fragment,A),T(k.$$.fragment,A),g=!0)},o(A){L(c.$$.fragment,A),L(k.$$.fragment,A),g=!1},d(A){A&&h(e),oe(c),oe(k),v=!1,Ie(y)}}}function lt(i){let e,t=[],l=new Map,a,f=i[2];const r=n=>n[11];for(let n=0;n<f.length;n+=1){let o=et(i,f,n),s=r(o);l.set(s,t[n]=it(s,o))}return{c(){e=H("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=B(n,"DIV",{class:!0});var o=w(e);for(let s=0;s<t.length;s+=1)t[s].l(o);o.forEach(h),this.h()},h(){V(e,"class","more-button flex flex-col")},m(n,o){P(n,e,o);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);a=!0},p(n,o){o&29&&(f=n[2],Z(),t=_t(t,o,r,1,n,f,l,e,Pt,it,null,et),x())},i(n){if(!a){for(let o=0;o<f.length;o+=1)T(t[o]);a=!0}},o(n){for(let o=0;o<t.length;o+=1)L(t[o]);a=!1},d(n){n&&h(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function it(i,e){let t,l,a,f,r,n,o,s,u;r=new ul({props:{class:"hover:cursor-pointer",embedding:e[11]}});function c(){return e[9](e[11])}return{key:i,first:null,c(){t=H("button"),l=H("div"),a=I("Find similar"),f=j(),ne(r.$$.fragment),n=j(),this.h()},l(m){t=B(m,"BUTTON",{class:!0});var b=w(t);l=B(b,"DIV",{});var k=w(l);a=M(k,"Find similar"),k.forEach(h),f=U(b),ae(r.$$.fragment,b),n=U(b),b.forEach(h),this.h()},h(){V(t,"class","flex w-full items-center justify-between"),this.first=t},m(m,b){P(m,t,b),S(t,l),S(l,a),S(t,f),se(r,t,null),S(t,n),o=!0,s||(u=D(t,"click",c),s=!0)},p(m,b){e=m;const k={};b&4&&(k.embedding=e[11]),r.$set(k)},i(m){o||(T(r.$$.fragment,m),o=!0)},o(m){L(r.$$.fragment,m),o=!1},d(m){m&&h(t),oe(r),s=!1,u()}}}function dl(i){let e,t,l,a,f,r,n,o=i[0].conceptName!=null&&i[0].conceptNamespace!=null&&tt(i),s=i[3]!=null&&lt(i);return{c(){e=H("div"),o&&o.c(),t=j(),s&&s.c(),this.h()},l(u){e=B(u,"DIV",{style:!0,class:!0});var c=w(e);o&&o.l(c),t=U(c),s&&s.l(c),c.forEach(h),this.h()},h(){V(e,"style",l=i[1]!=null?`left: ${i[1].x}px; top: ${i[1].y}px`:""),V(e,"class","absolute z-10 inline-flex -translate-x-1/2 translate-y-6 flex-col divide-y divide-gray-200 rounded border border-gray-200 bg-white shadow")},m(u,c){P(u,e,c),o&&o.m(e,null),S(e,t),s&&s.m(e,null),f=!0,r||(n=ve(sl.call(null,e,i[10])),r=!0)},p(u,[c]){u[0].conceptName!=null&&u[0].conceptNamespace!=null?o?(o.p(u,c),c&1&&T(o,1)):(o=tt(u),o.c(),T(o,1),o.m(e,t)):o&&(Z(),L(o,1,1,()=>{o=null}),x()),u[3]!=null?s?(s.p(u,c),c&8&&T(s,1)):(s=lt(u),s.c(),T(s,1),s.m(e,null)):s&&(Z(),L(s,1,1,()=>{s=null}),x()),(!f||c&2&&l!==(l=u[1]!=null?`left: ${u[1].x}px; top: ${u[1].y}px`:""))&&V(e,"style",l)},i(u){f||(T(o),T(s),mt(()=>{f&&(a||(a=Oe(e,Ue,{duration:60},!0)),a.run(1))}),f=!0)},o(u){L(o),L(s),a||(a=Oe(e,Ue,{duration:60},!1)),a.run(0),f=!1},d(u){u&&h(e),o&&o.d(),s&&s.d(),u&&a&&a.end(),r=!1,n()}}}function cl(i,e,t){let{details:l}=e,{clickPosition:a}=e,{embeddings:f}=e,{addConceptLabel:r}=e,{findSimilar:n}=e;const o=Vt();function s(k){if(!l.conceptName||!l.conceptNamespace)throw Error("Label could not be added, no active concept.");r(l.conceptNamespace,l.conceptName,l.text,k),o("click")}const u=()=>s(!0),c=()=>s(!1),m=k=>{n&&n(k,l.text),o("click")},b=()=>o("close");return i.$$set=k=>{"details"in k&&t(0,l=k.details),"clickPosition"in k&&t(1,a=k.clickPosition),"embeddings"in k&&t(2,f=k.embeddings),"addConceptLabel"in k&&t(6,r=k.addConceptLabel),"findSimilar"in k&&t(3,n=k.findSimilar)},[l,a,f,n,o,s,r,u,c,m,b]}class hl extends te{constructor(e){super(),le(this,e,cl,dl,ie,{details:0,clickPosition:1,embeddings:2,addConceptLabel:6,findSimilar:3})}}function ml(i,e){let t,l=e;i.addEventListener("click",r=>a(r));function a(r){l.disabled||(t=new hl({props:{details:l.details(),clickPosition:{x:r.clientX,y:r.clientY},embeddings:l.embeddings,addConceptLabel:l.addConceptLabel,findSimilar:l.findSimilar},target:document.body}),t.$on("close",f),t.$on("click",f))}function f(){t==null||t.$destroy(),t=void 0}return{update(r){l=r,t==null||t.$set({details:l.details()})},destroy(){f()}}}const He=.5,nt=.3,_l=.8,at="#3366cc";function Le(i){return`rgba(180,215,255,${i})`}function Ae(i){let e=0;if(i>He){const t=(i-He)/(1-He);e=nt+t*(_l-nt)}return Le(e)}function st(i,e,t){const l=i.slice();return l[7]=e[t],l}function ot(i,e){let t,l,a=e[7].info.name+"",f,r,n,o,s=rt(e[7])+"",u,c;return{key:i,first:null,c(){t=H("div"),l=H("div"),f=I(a),r=j(),n=H("div"),o=H("span"),u=I(s),c=j(),this.h()},l(m){t=B(m,"DIV",{class:!0});var b=w(t);l=B(b,"DIV",{class:!0});var k=w(l);f=M(k,a),k.forEach(h),r=U(b),n=B(b,"DIV",{class:!0});var g=w(n);o=B(g,"SPAN",{class:!0});var v=w(o);u=M(v,s),v.forEach(h),g.forEach(h),c=U(b),b.forEach(h),this.h()},h(){V(l,"class","named-value-name table-cell max-w-xs truncate pr-2 svelte-1689hje"),V(o,"class","px-1"),C(o,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Be(e[7].info.dtype)),ee(o,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?Ae(e[7].value):""),V(n,"class","table-cell rounded text-right"),V(t,"class","table-row"),this.first=t},m(m,b){P(m,t,b),S(t,l),S(l,f),S(t,r),S(t,n),S(n,o),S(o,u),S(t,c)},p(m,b){e=m,b&1&&a!==(a=e[7].info.name+"")&&Y(f,a),b&1&&s!==(s=rt(e[7])+"")&&Y(u,s),b&1&&C(o,"font-bold",e[7].info.type==="keyword"||e[7].info.type==="metadata"&&!Be(e[7].info.dtype)),b&1&&ee(o,"background-color",(e[7].info.type==="concept_score"||e[7].info.type==="semantic_similarity")&&typeof e[7].value=="number"?Ae(e[7].value):"")},d(m){m&&h(t)}}}function bl(i){let e,t,l=[],a=new Map,f,r=`${i[4]}px`,n=`${Math.min(i[1],i[3]-i[2]-20)}px`,o=i[0];const s=u=>u[7];for(let u=0;u<o.length;u+=1){let c=st(i,o,u),m=s(c);a.set(m,l[u]=ot(m,c))}return{c(){e=H("div"),t=H("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=B(u,"DIV",{role:!0,class:!0});var c=w(e);t=B(c,"DIV",{class:!0});var m=w(t);for(let b=0;b<l.length;b+=1)l[b].l(m);m.forEach(h),c.forEach(h),this.h()},h(){V(t,"class","table border-spacing-y-2"),V(e,"role","tooltip"),V(e,"class","absolute max-w-fit -translate-y-full break-words border border-gray-300 bg-white px-2 shadow-md"),mt(()=>i[6].call(e)),C(e,"hidden",i[0].length===0),ee(e,"top",r),ee(e,"left",n)},m(u,c){P(u,e,c),S(e,t);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(t,null);f=Nt(e,i[6].bind(e))},p(u,[c]){c&1&&(o=u[0],l=_t(l,c,s,1,u,o,a,t,Ht,ot,null,st)),c&1&&C(e,"hidden",u[0].length===0),c&6&&n!==(n=`${Math.min(u[1],u[3]-u[2]-20)}px`)&&ee(e,"left",n)},i:F,o:F,d(u){u&&h(e);for(let c=0;c<l.length;c+=1)l[c].d();f()}}}function rt(i){return typeof i.value=="number"?i.value.toFixed(3):i.info.dtype==="string_span"?"true":i.value}function gl(i,e,t){let{namedValues:l}=e,{x:a}=e,{y:f}=e;const r=window.innerWidth;let n=0;const o=f-1;function s(){n=this.clientWidth,t(2,n)}return i.$$set=u=>{"namedValues"in u&&t(0,l=u.namedValues),"x"in u&&t(1,a=u.x),"y"in u&&t(5,f=u.y)},[l,a,n,r,o,f,s]}class vl extends te{constructor(e){super(),le(this,e,gl,bl,ie,{namedValues:0,x:1,y:5})}}function pl(i,e){let t,l=e;const a=()=>r();l.isHovered&&f();function f(){const n=l.namedValues.filter(m=>Array.from(l.spansHovered).some(b=>{const k=gt(b);return vt(m.specificPath.slice(0,k.length),k)}));l.itemScrollContainer!=null&&l.itemScrollContainer.addEventListener("scroll",a);const o=i.getBoundingClientRect(),s=window.getComputedStyle(i),u=parseInt(s.getPropertyValue("line-height")),c=o.height>u?o.x+i.offsetLeft||i.clientLeft:o.x;t=new vl({props:{namedValues:n,x:c,y:o.top},target:document.body})}function r(){t==null||t.$destroy(),t=void 0,l.itemScrollContainer!=null&&l.itemScrollContainer.removeEventListener("scroll",a)}return{update(n){l=n,l.isHovered?f():r()},destroy(){r()}}}const kl=500,ge=100;function Sl(i,e,t){const l=[],a=new Set;for(const f of i){let r=!1;const n=[];for(const y of f.paths)a.has(y)||(n.push(y),a.add(y));const o=[],s=[];let u=-1/0;for(const[y,A]of Object.entries(f.originalSpans)){const E=e[y],N=gt(y);if(!(E==null||E.length===0))for(const _ of A)for(const p of E){const O=p.path.slice(N.length),X=Ot(_,O);if(X==null)continue;const W=ke.value(X);if(W==null)continue;if(p.dtype==="float32"){const Q=ke.value(X);Q!=null&&(u=Math.max(u,Q))}const fe=Se(ke.path(_)),ue=!n.includes(fe),de={value:W,info:p,specificPath:ke.path(X)};ue||o.push(de),s.push(de),p.type==="concept_score"||p.type==="semantic_similarity"?W>.5&&(r=!0):r=!0}}const c=s.some(y=>y.info.type==="label"),m=s.some(y=>y.info.type==="leaf_span"),b=s.some(y=>y.info.type==="keyword"),k=s.some(y=>y.info.type==="metadata"&&!Be(y.info.dtype)),g=f.paths.some(y=>t.has(y)),v=g&&n.length>0&&Array.from(t).some(y=>n.includes(y));l.push({backgroundColor:Ae(u),isBlackBolded:b||k||m,isHighlightBolded:c,isShownSnippet:r,snippetScore:u,namedValues:o,paths:f.paths,text:f.text,snippetText:f.text,originalSpans:f.originalSpans,isHovered:g,isFirstHover:v})}return l}function wl(i,e){var r,n,o;if(i=i.map(s=>{if(s.isShownSnippet&&s.text.length>ge){const u={...s,text:s.text.slice(0,ge),snippetText:s.snippetText.slice(0,ge)},c={...s,text:s.text.slice(ge),snippetText:s.snippetText.slice(ge),isShownSnippet:!1,namedValues:[]};return[u,c]}else return[s]}).flat(),e)return{snippetSpans:i.map(s=>({renderSpan:s,isShown:!0})),someSnippetsHidden:!1};const t=[];let l=0;for(const s of i)s.isShownSnippet&&(l+=s.text.length);const a=i.filter(s=>!s.isShownSnippet).sort((s,u)=>u.snippetScore-s.snippetScore);for(const s of a)if(s.isShownSnippet=!0,l+=s.text.length,l>kl)break;let f=!1;for(const[s,u]of i.entries())if(u.isShownSnippet)t.push({renderSpan:u,isShown:!0});else{const c=((r=i[s+1])==null?void 0:r.isShownSnippet)===!0,m=((n=i[s-1])==null?void 0:n.isShownSnippet)===!0,b=((o=t[t.length-1])==null?void 0:o.isShown)===!0;t.push({renderSpan:u,isShown:!1,isEllipsis:(c||m)&&b,hasNewline:u.text.includes(`
`)}),f=!0}return{snippetSpans:t,someSnippetsHidden:f}}function ft(i,e,t){const l=i.slice();l[33]=e[t];const a=l[33].renderSpan;return l[34]=a,l}function El(i){let e,t,l,a,f,r=i[33].hasNewline&&ut();return{c(){e=H("span"),t=I("..."),r&&r.c(),l=we(),this.h()},l(n){e=B(n,"SPAN",{class:!0});var o=w(e);t=M(o,"..."),o.forEach(h),r&&r.l(n),l=we(),this.h()},h(){V(e,"class","highlight-span text-sm leading-5 svelte-8ox5pu")},m(n,o){P(n,e,o),S(e,t),r&&r.m(n,o),P(n,l,o),a||(f=ve(bt.call(null,e,{text:`Some text was hidden to improve readability. 
Click "Show all" to show the entire document.`})),a=!0)},p(n,o){n[33].hasNewline?r||(r=ut(),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},i:F,o:F,d(n){n&&h(e),r&&r.d(n),n&&h(l),a=!1,f()}}}function yl(i){let e,t,l,a,f,r,n,o;const s=[Cl,Tl],u=[];function c(g,v){return g[1]?0:1}t=c(i),l=u[t]=s[t](i);function m(){return i[26](i[34])}function b(){return i[27](i[34])}function k(){return i[28](i[34])}return{c(){e=H("span"),l.c(),this.h()},l(g){e=B(g,"SPAN",{class:!0});var v=w(e);l.l(v),v.forEach(h),this.h()},h(){V(e,"class","hover:cursor-poiner highlight-span break-words text-sm leading-5 svelte-8ox5pu"),C(e,"hover:cursor-pointer",i[0].length>0),C(e,"font-bold",i[34].isBlackBolded),C(e,"font-medium",i[34].isHighlightBolded&&!i[34].isBlackBolded),ee(e,"color",i[34].isHighlightBolded&&!i[34].isBlackBolded?at:""),ee(e,"background-color",i[34].isHovered?Le(ht):i[34].backgroundColor)},m(g,v){P(g,e,v),u[t].m(e,null),r=!0,n||(o=[ve(a=pl.call(null,e,{namedValues:i[34].namedValues,isHovered:i[34].isFirstHover,spansHovered:i[5],itemScrollContainer:i[9]})),ve(f=ml.call(null,e,{details:m,findSimilar:i[4]!=null?i[16]:null,embeddings:i[2],addConceptLabel:i[14],disabled:i[34].paths.length===0||i[2].length===0})),D(e,"mouseenter",b),D(e,"mouseleave",k)],n=!0)},p(g,v){i=g;let y=t;t=c(i),t===y?u[t].p(i,v):(Z(),L(u[y],1,1,()=>{u[y]=null}),x(),l=u[t],l?l.p(i,v):(l=u[t]=s[t](i),l.c()),T(l,1),l.m(e,null)),a&&Fe(a.update)&&v[0]&800&&a.update.call(null,{namedValues:i[34].namedValues,isHovered:i[34].isFirstHover,spansHovered:i[5],itemScrollContainer:i[9]}),f&&Fe(f.update)&&v[0]&276&&f.update.call(null,{details:m,findSimilar:i[4]!=null?i[16]:null,embeddings:i[2],addConceptLabel:i[14],disabled:i[34].paths.length===0||i[2].length===0}),(!r||v[0]&1)&&C(e,"hover:cursor-pointer",i[0].length>0),(!r||v[0]&256)&&C(e,"font-bold",i[34].isBlackBolded),(!r||v[0]&256)&&C(e,"font-medium",i[34].isHighlightBolded&&!i[34].isBlackBolded),v[0]&256&&ee(e,"color",i[34].isHighlightBolded&&!i[34].isBlackBolded?at:""),v[0]&256&&ee(e,"background-color",i[34].isHovered?Le(ht):i[34].backgroundColor)},i(g){r||(T(l),r=!0)},o(g){L(l),r=!1},d(g){g&&h(e),u[t].d(),n=!1,Ie(o)}}}function ut(i){let e,t;return{c(){e=H("span"),t=H("br")},l(l){e=B(l,"SPAN",{});var a=w(e);t=B(a,"BR",{}),a.forEach(h)},m(l,a){P(l,e,a),S(e,t)},d(l){l&&h(e)}}}function Tl(i){let e=i[34].snippetText+"",t;return{c(){t=I(e)},l(l){t=M(l,e)},m(l,a){P(l,t,a)},p(l,a){a[0]&256&&e!==(e=l[34].snippetText+"")&&Y(t,e)},i:F,o:F,d(l){l&&h(t)}}}function Cl(i){let e,t;return e=new jt({props:{source:i[34].snippetText}}),{c(){ne(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},p(l,a){const f={};a[0]&256&&(f.source=l[34].snippetText),e.$set(f)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function dt(i){let e,t,l,a;const f=[yl,El],r=[];function n(o,s){return o[33].isShown?0:o[33].isEllipsis?1:-1}return~(e=n(i))&&(t=r[e]=f[e](i)),{c(){t&&t.c(),l=we()},l(o){t&&t.l(o),l=we()},m(o,s){~e&&r[e].m(o,s),P(o,l,s),a=!0},p(o,s){let u=e;e=n(o),e===u?~e&&r[e].p(o,s):(t&&(Z(),L(r[u],1,1,()=>{r[u]=null}),x()),~e?(t=r[e],t?t.p(o,s):(t=r[e]=f[e](o),t.c()),T(t,1),t.m(l.parentNode,l)):t=null)},i(o){a||(T(t),a=!0)},o(o){L(t),a=!1},d(o){~e&&r[e].d(o),o&&h(l)}}}function ct(i){let e,t,l,a,f;const r=[Pl,Vl],n=[];function o(s,u){return s[6]?1:0}return l=o(i),a=n[l]=r[l](i),{c(){e=H("div"),t=H("div"),a.c(),this.h()},l(s){e=B(s,"DIV",{class:!0});var u=w(e);t=B(u,"DIV",{class:!0});var c=w(t);a.l(c),c.forEach(h),u.forEach(h),this.h()},h(){V(t,"class","w-30 mt-2 rounded border border-neutral-300 text-center"),V(e,"class","flex flex-row justify-center")},m(s,u){P(s,e,u),S(e,t),n[l].m(t,null),f=!0},p(s,u){let c=l;l=o(s),l===c?n[l].p(s,u):(Z(),L(n[c],1,1,()=>{n[c]=null}),x(),a=n[l],a?a.p(s,u):(a=n[l]=r[l](s),a.c()),T(a,1),a.m(t,null))},i(s){f||(T(a),f=!0)},o(s){L(a),f=!1},d(s){s&&h(e),n[l].d()}}}function Vl(i){let e,t;return e=new pt({props:{size:"small",class:"w-full",kind:"ghost",icon:$t,$$slots:{default:[Nl]},$$scope:{ctx:i}}}),e.$on("click",i[30]),{c(){ne(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},p(l,a){const f={};a[1]&64&&(f.$$scope={dirty:a,ctx:l}),e.$set(f)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Pl(i){let e,t;return e=new pt({props:{size:"small",class:"w-full",kind:"ghost",icon:Qt,$$slots:{default:[Hl]},$$scope:{ctx:i}}}),e.$on("click",i[29]),{c(){ne(e.$$.fragment)},l(l){ae(e.$$.fragment,l)},m(l,a){se(e,l,a),t=!0},p(l,a){const f={};a[1]&64&&(f.$$scope={dirty:a,ctx:l}),e.$set(f)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){L(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Nl(i){let e;return{c(){e=I("Hide excess")},l(t){e=M(t,"Hide excess")},m(t,l){P(t,e,l)},d(t){t&&h(e)}}}function Hl(i){let e;return{c(){e=I("Show all")},l(t){e=M(t,"Show all")},m(t,l){P(t,e,l)},d(t){t&&h(e)}}}function Bl(i){let e,t,l,a=i[8],f=[];for(let o=0;o<a.length;o+=1)f[o]=dt(ft(i,a,o));const r=o=>L(f[o],1,1,()=>{f[o]=null});let n=(i[7]||i[6])&&ct(i);return{c(){e=H("div");for(let o=0;o<f.length;o+=1)f[o].c();t=j(),n&&n.c(),this.h()},l(o){e=B(o,"DIV",{class:!0});var s=w(e);for(let u=0;u<f.length;u+=1)f[u].l(s);t=U(s),n&&n.l(s),s.forEach(h),this.h()},h(){V(e,"class","relative overflow-x-hidden text-ellipsis whitespace-break-spaces py-4")},m(o,s){P(o,e,s);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(e,null);S(e,t),n&&n.m(e,null),l=!0},p(o,s){if(s[0]&89911){a=o[8];let u;for(u=0;u<a.length;u+=1){const c=ft(o,a,u);f[u]?(f[u].p(c,s),T(f[u],1)):(f[u]=dt(c),f[u].c(),T(f[u],1),f[u].m(e,t))}for(Z(),u=a.length;u<f.length;u+=1)r(u);x()}o[7]||o[6]?n?(n.p(o,s),s[0]&192&&T(n,1)):(n=ct(o),n.c(),T(n,1),n.m(e,null)):n&&(Z(),L(n,1,1,()=>{n=null}),x())},i(o){if(!l){for(let s=0;s<a.length;s+=1)T(f[s]);T(n),l=!0}},o(o){f=f.filter(Boolean);for(let s=0;s<f.length;s+=1)L(f[s]);L(n),l=!1},d(o){o&&h(e),Bt(f,o),n&&n.d()}}}const ht=.9;function Ll(i,e,t){let l,a,f,r,n,o,s=F,u=()=>(s(),s=At(E,d=>t(25,o=d)),E),c,m;i.$$.on_destroy.push(()=>s());let{text:b}=e,{row:k}=e,{spanPaths:g}=e,{valuePaths:v}=e,{markdown:y=!1}=e,{embeddings:A}=e,{datasetViewStore:E=void 0}=e;u();let{datasetStore:N=void 0}=e,_={},p=new Set;const O=d=>{d.paths.forEach(R=>p.add(R)),t(5,p)},X=d=>{d.paths.forEach(R=>p.delete(R)),t(5,p)};let W={};const fe=d=>{const me={conceptName:null,conceptNamespace:null,text:f.filter(_e=>_e.paths.some(Ne=>((d==null?void 0:d.paths)||[]).some(be=>vt(be,Ne)))).map(_e=>_e.text).join("")};for(const _e of Object.keys(d.originalSpans)){const Ne=(_[_e]||[]).filter(be=>be.type==="concept_score");for(const be of Ne){const ze=be.signal;me.conceptName=ze.concept_name,me.conceptNamespace=ze.namespace;break}}return me},ue=Yt();Ye(i,ue,d=>t(32,c=d));const de=(d,R,Me,me)=>{if(!R||!d)throw Error("Label could not be added, no active concept.");c.mutate([d,R,{insert:[{text:Me,label:me}]}])};let Q=!1,pe=Lt(zt);Ye(i,pe,d=>t(9,m=d));let he;const Ee=(d,R)=>{E==null||he==null||E.addSearch({path:[Se(he)],query:{type:"semantic",search:R,embedding:d}})},ye=d=>fe(d),Te=d=>O(d),Ce=d=>X(d),Ve=()=>t(6,Q=!0),Pe=()=>t(6,Q=!1);return i.$$set=d=>{"text"in d&&t(17,b=d.text),"row"in d&&t(18,k=d.row),"spanPaths"in d&&t(0,g=d.spanPaths),"valuePaths"in d&&t(19,v=d.valuePaths),"markdown"in d&&t(1,y=d.markdown),"embeddings"in d&&t(2,A=d.embeddings),"datasetViewStore"in d&&u(t(3,E=d.datasetViewStore)),"datasetStore"in d&&t(4,N=d.datasetStore)},i.$$.update=()=>{if(i.$$.dirty[0]&262145&&t(24,l=Object.fromEntries(g.map(d=>[Se(d),Ft(k,d)]))),i.$$.dirty[0]&1572864){t(20,_={});for(const d of v){const R=Se(d.spanPath);_[R]==null&&t(20,_[R]=[],_),_[R].push(d)}}if(i.$$.dirty[0]&16908288&&t(23,a=Rt(b,l)),i.$$.dirty[0]&9437216&&t(22,f=Sl(a,_,p)),i.$$.dirty[0]&10485760){t(21,W={});for(const d of a)for(const R of d.paths)t(21,W[R]=W[R]||[],W),W[R].push(d)}i.$$.dirty[0]&4194368&&t(8,{snippetSpans:r,someSnippetsHidden:n}=wl(f,Q),r,(t(7,n),t(22,f),t(6,Q),t(23,a),t(20,_),t(5,p),t(17,b),t(24,l),t(19,v),t(0,g),t(18,k))),i.$$.dirty[0]&33554448&&o!=null&&N!=null&&(he=Dt(o,N))},[g,y,A,E,N,p,Q,n,r,m,O,X,fe,ue,de,pe,Ee,b,k,v,_,W,f,a,l,o,ye,Te,Ce,Ve,Pe]}class Ol extends te{constructor(e){super(),le(this,e,Ll,Bl,ie,{text:17,row:18,spanPaths:0,valuePaths:19,markdown:1,embeddings:2,datasetViewStore:3,datasetStore:4},null,[-1,-1])}}export{ul as E,Ol as S,Dl as T,al as a,ll as b};
