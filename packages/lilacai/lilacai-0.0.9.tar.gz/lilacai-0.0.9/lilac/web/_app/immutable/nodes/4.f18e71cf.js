import{S as $e,i as ke,s as be,E as pe,_ as ve,$ as we,m as $,h as m,n as I,a0 as Te,b as D,J as p,O as qe,a1 as X,D as Ie,F as Ve,q as G,r as Z,u as fe,e as ie,C as pt,o as On,Z as Hn,k as S,l as E,p as it,w as Pe,y as R,z as q,A,W as Ln,g as h,d as v,B,Q as ut,G as jn,a as Y,c as Q,K as Re,ad as Un,L as Yn,M as Qn,N as Jn,a7 as Fe,aa as Le,R as ge,v as le,f as ne,P as We,a4 as ze,ab as Ce,a2 as bt,ae as Kn,X as gn,Y as pn,H as Se,T as Gn,U as Ue,V as Ye,af as Zn,a8 as dt,a3 as mt,x as et,a6 as ct,ag as Wn}from"../chunks/index.8c57c90c.js";import{g as bn}from"../chunks/navigation.d91680f0.js";import{C as Ct,O as Xn,a as nt,P as xn}from"../chunks/Page.b5e24f8b.js";import{T as Xe,i as er,j as Ae,t as Ge,C as Ze,k as Qe,l as St,m as tr,S as lr,n as vn,o as wn,p as nr,q as rr,r as sr,u as ir,I as ar,v as Ft,w as or,b as fr,x as cr,y as ur,z as $n,A as kn,s as ht,D as tt,B as yn,M as Sn,E as En,F as Dn,G as dr,e as mr,H as hr,g as _r,J as gr,K as pr,L as br,N as vr,O as wr,P as $r}from"../chunks/Commands.834420cd.js";import{h as Me,l as Ee,m as Et,n as ye,p as Dt,k as kr,r as ot,t as yr,L as Sr,u as Ke,v as Er,w as It,x as Dr,B as rt,y as In,c as Ir,a as Vt,z as Vr,A as lt,C as _t,D as gt,E as $t,F as Nr,G as Tr,P as kt,H as st,V as Cr,I as Fr,J as Mr,U as Vn,K as zr,M as Pr,N as Rr,O as Ar,R as Br}from"../chunks/HoverTooltip.624267ce.js";import{w as qr}from"../chunks/index.3d04a9ea.js";import{C as Or,S as je,n as Hr,I as Nn,b as Lr,f as jr,d as Ur}from"../chunks/JSONSchemaForm.3d114726.js";import{C as Yr,a as yt,I as Mt,T as Qr}from"../chunks/ConceptView.4db06d3b.js";import{E as Tn,S as Jr,T as Cn}from"../chunks/StringSpanHighlight.6316571d.js";import{S as vt,a as ft}from"../chunks/SelectItem.5cf70406.js";import{M as Nt,C as Kr}from"../chunks/ChevronUp.5525b820.js";import{R as Gr,S as Zr,T as Wr,a as zt,b as Pt}from"../chunks/RowItemMetadata.0fa5daa3.js";import{a as Fn,S as Xr}from"../chunks/signalQueries.ff82c0be.js";import{g as Mn}from"../chunks/settingsStore.ca891065.js";import{C as xr}from"../chunks/ComboBox.292d4bc8.js";import{S as es}from"../chunks/Settings.e965354c.js";function Rt(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ts(s){let e,l,t=s[1]&&Rt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Rt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function ls(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class ns extends $e{constructor(e){super(),ke(this,e,ls,ts,be,{size:0,title:1})}}function At(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function rs(s){let e,l,t=s[1]&&At(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M10 16L20 6 21.4 7.4 12.8 16 21.4 24.6 20 26z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=At(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function ss(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class is extends $e{constructor(e){super(),ke(this,e,ss,rs,be,{size:0,title:1})}}function Bt(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function as(s){let e,l,t=s[1]&&Bt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Bt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function os(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class fs extends $e{constructor(e){super(),ke(this,e,os,as,be,{size:0,title:1})}}function qt(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function cs(s){let e,l,t=s[1]&&qt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=qt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function us(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class ds extends $e{constructor(e){super(),ke(this,e,us,cs,be,{size:0,title:1})}}function Ot(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ms(s){let e,l,t,n=s[1]&&Ot(s),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],r={};for(let i=0;i<o.length;i+=1)r=pe(r,o[i]);return{c(){e=ve("svg"),n&&n.c(),l=ve("path"),t=ve("path"),this.h()},l(i){e=we(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=$(e);n&&n.l(a),l=we(a,"path",{d:!0}),$(l).forEach(m),t=we(a,"path",{d:!0}),$(t).forEach(m),a.forEach(m),this.h()},h(){I(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),I(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Te(e,r)},m(i,a){D(i,e,a),n&&n.m(e,null),p(e,l),p(e,t)},p(i,[a]){i[1]?n?n.p(i,a):(n=Ot(i),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Te(e,r=qe(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:i[0]},a&1&&{height:i[0]},a&4&&i[2],a&8&&i[3]]))},i:X,o:X,d(i){i&&m(e),n&&n.d()}}}function hs(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class at extends $e{constructor(e){super(),ke(this,e,hs,ms,be,{size:0,title:1})}}function Ht(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function _s(s){let e,l,t=s[1]&&Ht(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Ht(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function gs(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class zn extends $e{constructor(e){super(),ke(this,e,gs,_s,be,{size:0,title:1})}}function Lt(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ps(s){let e,l,t=s[1]&&Lt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Lt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function bs(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class vs extends $e{constructor(e){super(),ke(this,e,bs,ps,be,{size:0,title:1})}}function jt(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ws(s){let e,l,t=s[1]&&jt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=jt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function $s(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class Pn extends $e{constructor(e){super(),ke(this,e,$s,ws,be,{size:0,title:1})}}function Ut(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ks(s){let e,l,t=s[1]&&Ut(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Ut(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function ys(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class Rn extends $e{constructor(e){super(),ke(this,e,ys,ks,be,{size:0,title:1})}}function Yt(s){let e,l;return{c(){e=ve("title"),l=G(s[1])},l(t){e=we(t,"title",{});var n=$(e);l=Z(n,s[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function Ss(s){let e,l,t=s[1]&&Yt(s),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:s[0]},{height:s[0]},s[2],s[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var i=$(e);t&&t.l(i),l=we(i,"path",{d:!0}),$(l).forEach(m),i.forEach(m),this.h()},h(){I(l,"d","M30 19.415L28.586 18 25 21.587 21.414 18 20 19.415 23.586 23 20 26.586 21.414 28 25 24.414 28.586 28 30 26.586 26.414 23 30 19.415zM10 18H16V20H10zM2 6H16V8H2zM6 12H16V14H6z"),Te(e,o)},m(r,i){D(r,e,i),t&&t.m(e,null),p(e,l)},p(r,[i]){r[1]?t?t.p(r,i):(t=Yt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Te(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},i&1&&{width:r[0]},i&1&&{height:r[0]},i&4&&r[2],i&8&&r[3]]))},i:X,o:X,d(r){r&&m(e),t&&t.d()}}}function Es(s,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:i=16}=e,{title:a=void 0}=e;return s.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,i=f.size),"title"in f&&l(1,a=f.title)},s.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[i,a,n,r,t]}class Ds extends $e{constructor(e){super(),ke(this,e,Es,Ss,be,{size:0,title:1})}}function Qt(s){let e;return{c(){e=S("div"),this.h()},l(l){e=E(l,"DIV",{id:!0,style:!0}),$(e).forEach(m),this.h()},h(){I(e,"id","svelte-infinite-scroll"),it(e,"width","0")},m(l,t){D(l,e,t),s[11](e)},p:X,d(l){l&&m(e),s[11](null)}}}function Is(s){let e,l=!s[1]&&!s[0]&&Qt(s);return{c(){l&&l.c(),e=ie()},l(t){l&&l.l(t),e=ie()},m(t,n){l&&l.m(t,n),D(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=Qt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:X,o:X,d(t){l&&l.d(t),t&&m(e)}}}function Vs(s,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:o=null}=e,{hasMore:r=!0}=e,{reverse:i=!1}=e,{window:a=!1}=e;const f=pt();let c=!1,d,u,_,g;const b=C=>{if(!r)return;const T=C.target;w(T,i,n)<=t?(!c&&r&&(f("loadMore"),l(8,u=T.scrollHeight),l(9,_=T.scrollTop)),l(7,c=!0)):l(7,c=!1)},w=(C,T,J)=>{const z=C.documentElement?C.documentElement:C;return T?J?z.scrollLeft:z.scrollTop:J?z.scrollWidth-z.clientWidth-z.scrollLeft:z.scrollHeight-z.clientHeight-z.scrollTop};On(()=>{a?l(10,g=document):o?l(10,g=o):l(10,g=d.parentNode)}),Hn(()=>{g&&(g.removeEventListener("scroll",b),g.removeEventListener("resize",b))});function y(C){Pe[C?"unshift":"push"](()=>{d=C,l(2,d)})}return s.$$set=C=>{"threshold"in C&&l(3,t=C.threshold),"horizontal"in C&&l(4,n=C.horizontal),"elementScroll"in C&&l(0,o=C.elementScroll),"hasMore"in C&&l(5,r=C.hasMore),"reverse"in C&&l(6,i=C.reverse),"window"in C&&l(1,a=C.window)},s.$$.update=()=>{s.$$.dirty&1088&&g&&(i&&l(10,g.scrollTop=g.scrollHeight,g),g.addEventListener("scroll",b),g.addEventListener("resize",b)),s.$$.dirty&1984&&c&&i&&l(10,g.scrollTop=g.scrollHeight-u+_,g)},[o,a,d,t,n,r,i,c,u,_,g,y]}class Ns extends $e{constructor(e){super(),ke(this,e,Vs,Is,be,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function Ts(s){let e,l,t,n,o,r,i,a;t=new er({});const f=s[3].default,c=jn(f,s,s[6],null);return{c(){e=S("div"),l=S("button"),R(t.$$.fragment),n=Y(),o=S("span"),c&&c.c(),this.h()},l(d){e=E(d,"DIV",{class:!0});var u=$(e);l=E(u,"BUTTON",{class:!0});var _=$(l);q(t.$$.fragment,_),_.forEach(m),n=Q(u),o=E(u,"SPAN",{class:!0});var g=$(o);c&&c.l(g),g.forEach(m),u.forEach(m),this.h()},h(){I(l,"class","p-0 opacity-50 hover:opacity-100"),I(o,"class","truncate"),I(e,"class","removable-tag flex items-center gap-x-1")},m(d,u){D(d,e,u),p(e,l),A(t,l,null),p(e,n),p(e,o),c&&c.m(o,null),r=!0,i||(a=Re(l,"click",Un(s[4])),i=!0)},p(d,u){c&&c.p&&(!r||u&64)&&Yn(c,f,d,d[6],r?Jn(f,d[6],u,null):Qn(d[6]),null)},i(d){r||(h(t.$$.fragment,d),h(c,d),r=!0)},o(d){v(t.$$.fragment,d),v(c,d),r=!1},d(d){d&&m(e),B(t),c&&c.d(d),i=!1,a()}}}function Cs(s){let e,l;const t=[{type:s[0]},s[2]];let n={$$slots:{default:[Ts]},$$scope:{ctx:s}};for(let o=0;o<t.length;o+=1)n=pe(n,t[o]);return e=new Xe({props:n}),e.$on("click",s[5]),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,r){A(e,o,r),l=!0},p(o,[r]){const i=r&5?qe(t,[r&1&&{type:o[0]},r&4&&Ln(o[2])]):{};r&64&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){v(e.$$.fragment,o),l=!1},d(o){B(e,o)}}}function Fs(s,e,l){const t=["type"];let n=Ie(e,t),{$$slots:o={},$$scope:r}=e;const i=pt();let{type:a}=e;const f=()=>i("remove");function c(d){ut.call(this,s,d)}return s.$$set=d=>{e=pe(pe({},e),Ve(d)),l(2,n=Ie(e,t)),"type"in d&&l(0,a=d.type),"$$scope"in d&&l(6,r=d.$$scope)},[a,i,n,o,f,c,r]}class Tt extends $e{constructor(e){super(),ke(this,e,Fs,Cs,be,{type:0})}}function Ms(s){let e,l=(s[2]?"":s[5])+"",t,n,o=s[0][s[1].op]+"",r,i,a;return{c(){e=S("span"),t=G(l),n=Y(),r=G(o),i=Y(),a=G(s[4]),this.h()},l(f){e=E(f,"SPAN",{class:!0});var c=$(e);t=Z(c,l),c.forEach(m),n=Q(f),r=Z(f,o),i=Q(f),a=Z(f,s[4]),this.h()},h(){I(e,"class","font-mono")},m(f,c){D(f,e,c),p(e,t),D(f,n,c),D(f,r,c),D(f,i,c),D(f,a,c)},p(f,c){c&36&&l!==(l=(f[2]?"":f[5])+"")&&fe(t,l),c&2&&o!==(o=f[0][f[1].op]+"")&&fe(r,o),c&16&&fe(a,f[4])},d(f){f&&m(e),f&&m(n),f&&m(r),f&&m(i),f&&m(a)}}}function zs(s){let e,l,t,n,o,r;return l=new Tt({props:{interactive:!0,type:"magenta",$$slots:{default:[Ms]},$$scope:{ctx:s}}}),l.$on("click",s[9]),l.$on("remove",s[10]),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","filter-pill items-center")},m(i,a){D(i,e,a),A(l,e,null),n=!0,o||(r=Fe(t=Me.call(null,e,{text:s[6]})),o=!0)},p(i,[a]){const f={};a&2102&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Le(t.update)&&a&64&&t.update.call(null,{text:i[6]})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),B(l),o=!1,r()}}}function Ps(s,e,l){let t,n,o,r,i;const a={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists"};let{filter:f}=e,{hidePath:c=!1}=e;const d=Ae();ge(s,d,g=>l(7,i=g));const u=()=>Ge({command:Ze.EditFilter,namespace:i.namespace,datasetName:i.datasetName,path:n}),_=()=>d.removeFilter(f);return s.$$set=g=>{"filter"in g&&l(1,f=g.filter),"hidePath"in g&&l(2,c=g.hidePath)},s.$$.update=()=>{s.$$.dirty&2&&l(4,t=Ee(f.value||"false")),s.$$.dirty&2&&l(3,n=Et(f.path)),s.$$.dirty&18&&l(6,o=`${ye(f.path)} ${a[f.op]} ${t}`),s.$$.dirty&8&&l(5,r=n.at(-1))},[a,f,c,n,t,r,o,i,d,u,_]}class An extends $e{constructor(e){super(),ke(this,e,Ps,zs,be,{FILTER_SHORTHANDS:0,filter:1,hidePath:2})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function Jt(s){let e,l=s[0].query.concept_namespace+"",t,n,o=s[0].query.concept_name+"",r;return{c(){e=S("div"),t=G(l),n=G(" / "),r=G(o),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);t=Z(a,l),n=Z(a," / "),r=Z(a,o),a.forEach(m),this.h()},h(){I(e,"class","mb-2 w-full text-center text-xs")},m(i,a){D(i,e,a),p(e,t),p(e,n),p(e,r)},p(i,a){a&1&&l!==(l=i[0].query.concept_namespace+"")&&fe(t,l),a&1&&o!==(o=i[0].query.concept_name+"")&&fe(r,o)},d(i){i&&m(e)}}}function Rs(s){let e=ye(s[0].path)+"",l,t,n=s[0].query.type+"",o;return{c(){l=G(e),t=G(": "),o=G(n)},l(r){l=Z(r,e),t=Z(r,": "),o=Z(r,n)},m(r,i){D(r,l,i),D(r,t,i),D(r,o,i)},p(r,i){i&1&&e!==(e=ye(r[0].path)+"")&&fe(l,e),i&1&&n!==(n=r[0].query.type+"")&&fe(o,n)},d(r){r&&m(l),r&&m(t),r&&m(o)}}}function Kt(s){let e,l,t;return l=new Tn({props:{embedding:s[0].query.embedding}}),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);q(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","ml-2")},m(n,o){D(n,e,o),A(l,e,null),t=!0},p(n,o){const r={};o&1&&(r.embedding=n[0].query.embedding),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function Gt(s){let e,l;return{c(){e=S("div"),l=G(s[2]),this.h()},l(t){e=E(t,"DIV",{class:!0});var n=$(e);l=Z(n,s[2]),n.forEach(m),this.h()},h(){I(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&4&&fe(l,t[2])},d(t){t&&m(e)}}}function As(s){let e,l,t,n,o,r,i,a,f=s[0].query.type==="concept"&&Jt(s);n=new Xe({props:{type:s[1],$$slots:{default:[Rs]},$$scope:{ctx:s}}});let c=(s[0].query.type==="semantic"||s[0].query.type==="concept")&&Kt(s),d=s[2]&&Gt(s);return{c(){f&&f.c(),e=Y(),l=S("div"),t=S("div"),R(n.$$.fragment),o=Y(),c&&c.c(),r=Y(),d&&d.c(),i=ie(),this.h()},l(u){f&&f.l(u),e=Q(u),l=E(u,"DIV",{class:!0});var _=$(l);t=E(_,"DIV",{class:!0});var g=$(t);q(n.$$.fragment,g),g.forEach(m),o=Q(_),c&&c.l(_),_.forEach(m),r=Q(u),d&&d.l(u),i=ie(),this.h()},h(){I(t,"class","whitespace-nowrap"),I(l,"class","flex items-center justify-items-center")},m(u,_){f&&f.m(u,_),D(u,e,_),D(u,l,_),p(l,t),A(n,t,null),p(l,o),c&&c.m(l,null),D(u,r,_),d&&d.m(u,_),D(u,i,_),a=!0},p(u,[_]){u[0].query.type==="concept"?f?f.p(u,_):(f=Jt(u),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const g={};_&2&&(g.type=u[1]),_&9&&(g.$$scope={dirty:_,ctx:u}),n.$set(g),u[0].query.type==="semantic"||u[0].query.type==="concept"?c?(c.p(u,_),_&1&&h(c,1)):(c=Kt(u),c.c(),h(c,1),c.m(l,null)):c&&(le(),v(c,1,1,()=>{c=null}),ne()),u[2]?d?d.p(u,_):(d=Gt(u),d.c(),d.m(i.parentNode,i)):d&&(d.d(1),d=null)},i(u){a||(h(n.$$.fragment,u),h(c),a=!0)},o(u){v(n.$$.fragment,u),v(c),a=!1},d(u){f&&f.d(u),u&&m(e),u&&m(l),B(n),c&&c.d(),u&&m(r),d&&d.d(u),u&&m(i)}}}function Bs(s,e,l){let t,{search:n}=e,{tagType:o="outline"}=e;return s.$$set=r=>{"search"in r&&l(0,n=r.search),"tagType"in r&&l(1,o=r.tagType)},s.$$.update=()=>{s.$$.dirty&1&&l(2,t=n.query.type==="concept"?"":n.query.search)},[n,o,t]}class Zt extends $e{constructor(e){super(),ke(this,e,Bs,As,be,{search:0,tagType:1})}}function qs(s){let e,l=ye(s[0].path)+"",t,n,o,r;return{c(){e=S("span"),t=G(l),n=G(' has "'),o=G(s[2]),r=G('"'),this.h()},l(i){e=E(i,"SPAN",{class:!0});var a=$(e);t=Z(a,l),a.forEach(m),n=Z(i,' has "'),o=Z(i,s[2]),r=Z(i,'"'),this.h()},h(){I(e,"class","font-mono")},m(i,a){D(i,e,a),p(e,t),D(i,n,a),D(i,o,a),D(i,r,a)},p(i,a){a&1&&l!==(l=ye(i[0].path)+"")&&fe(t,l),a&4&&fe(o,i[2])},d(i){i&&m(e),i&&m(n),i&&m(o),i&&m(r)}}}function Os(s){let e,l,t,n,o,r;return l=new Tt({props:{title:"query",interactive:!0,type:s[1],$$slots:{default:[qs]},$$scope:{ctx:s}}}),l.$on("click",s[6]),l.$on("remove",s[7]),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","search-pill items-center text-left")},m(i,a){D(i,e,a),A(l,e,null),n=!0,o||(r=Fe(t=Me.call(null,e,{component:Zt,props:{search:s[0],tagType:s[1]}})),o=!0)},p(i,[a]){const f={};a&2&&(f.type=i[1]),a&517&&(f.$$scope={dirty:a,ctx:i}),l.$set(f),t&&Le(t.update)&&a&3&&t.update.call(null,{component:Zt,props:{search:i[0],tagType:i[1]}})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),B(l),o=!1,r()}}}function Hs(s,e,l){let t,n,o,{search:r}=e;const i={keyword:"outline",semantic:"teal",concept:"green"},a=Ae(),f=Qe();ge(s,f,u=>l(3,o=u));function c(u){ut.call(this,s,u)}const d=()=>{var u;return a.removeSearch(r,((u=o.selectRowsSchema)==null?void 0:u.data)||null)};return s.$$set=u=>{"search"in u&&l(0,r=u.search)},s.$$.update=()=>{s.$$.dirty&1&&l(2,t=r.query.type==="concept"?r.query.concept_name:r.query.search),s.$$.dirty&1&&l(1,n=r.query.type!=null?i[r.query.type]:"outline")},[r,n,t,o,a,f,c,d]}class Bn extends $e{constructor(e){super(),ke(this,e,Hs,Os,be,{search:0})}}function Wt(s,e,l){const t=s.slice();return t[26]=e[l][0],t[27]=e[l][1],t}function Xt(s,e,l){const t=s.slice();return t[30]=e[l],t}function xt(s,e,l){const t=s.slice();return t[33]=e[l],t}function el(s,e,l){const t=s.slice();return t[36]=e[l],t}function tl(s,e,l){const t=s.slice();return t[39]=e[l],t}function Ls(s){let e,l,t,n=s[13],o=[];for(let a=0;a<n.length;a+=1)o[a]=rl(el(s,n,a));const r=a=>v(o[a],1,1,()=>{o[a]=null});let i=s[8]!=null&&s[8].length>0&&sl(s);return{c(){e=S("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),i&&i.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=Q(f),i&&i.l(f),f.forEach(m),this.h()},h(){I(e,"class","flex w-full flex-row gap-x-4")},m(a,f){D(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);p(e,l),i&&i.m(e,null),t=!0},p(a,f){if(f[0]&57352){n=a[13];let c;for(c=0;c<n.length;c+=1){const d=el(a,n,c);o[c]?(o[c].p(d,f),h(o[c],1)):(o[c]=rl(d),o[c].c(),h(o[c],1),o[c].m(e,l))}for(le(),c=n.length;c<o.length;c+=1)r(c);ne()}a[8]!=null&&a[8].length>0?i?(i.p(a,f),f[0]&256&&h(i,1)):(i=sl(a),i.c(),h(i,1),i.m(e,null)):i&&(le(),v(i,1,1,()=>{i=null}),ne())},i(a){if(!t){for(let f=0;f<n.length;f+=1)h(o[f]);h(i),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)v(o[f]);v(i),t=!1},d(a){a&&m(e),ze(o,a),i&&i.d()}}}function ll(s){let e,l,t=s[14][s[36]]+"",n,o,r,i,a,f=s[3][s[36]],c=[];for(let u=0;u<f.length;u+=1)c[u]=nl(tl(s,f,u));const d=u=>v(c[u],1,1,()=>{c[u]=null});return{c(){e=S("div"),l=S("div"),n=G(t),o=Y(),r=S("div");for(let u=0;u<c.length;u+=1)c[u].c();i=Y(),this.h()},l(u){e=E(u,"DIV",{class:!0});var _=$(e);l=E(_,"DIV",{class:!0});var g=$(l);n=Z(g,t),g.forEach(m),o=Q(_),r=E(_,"DIV",{class:!0});var b=$(r);for(let w=0;w<c.length;w+=1)c[w].l(b);b.forEach(m),i=Q(_),_.forEach(m),this.h()},h(){I(l,"class","text-xs font-light"),I(r,"class","flex flex-row gap-x-1"),I(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(u,_){D(u,e,_),p(e,l),p(l,n),p(e,o),p(e,r);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(r,null);p(e,i),a=!0},p(u,_){if(_[0]&40968){f=u[3][u[36]];let g;for(g=0;g<f.length;g+=1){const b=tl(u,f,g);c[g]?(c[g].p(b,_),h(c[g],1)):(c[g]=nl(b),c[g].c(),h(c[g],1),c[g].m(r,null))}for(le(),g=f.length;g<c.length;g+=1)d(g);ne()}},i(u){if(!a){for(let _=0;_<f.length;_+=1)h(c[_]);a=!0}},o(u){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)v(c[_]);a=!1},d(u){u&&m(e),ze(c,u)}}}function nl(s){let e,l;function t(){return s[23](s[39])}return e=new Bn({props:{search:s[39]}}),e.$on("click",t),{c(){R(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){A(e,n,o),l=!0},p(n,o){s=n;const r={};o[0]&8&&(r.search=s[39]),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function rl(s){let e,l,t=s[3][s[36]]&&ll(s);return{c(){t&&t.c(),e=ie()},l(n){t&&t.l(n),e=ie()},m(n,o){t&&t.m(n,o),D(n,e,o),l=!0},p(n,o){n[3][n[36]]?t?(t.p(n,o),o[0]&8&&h(t,1)):(t=ll(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(le(),v(t,1,1,()=>{t=null}),ne())},i(n){l||(h(t),l=!0)},o(n){v(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function sl(s){let e,l,t,n,o,r,i=s[8],a=[];for(let c=0;c<i.length;c+=1)a[c]=il(xt(s,i,c));const f=c=>v(a[c],1,1,()=>{a[c]=null});return{c(){e=S("div"),l=S("div"),t=G("Filters"),n=Y(),o=S("div");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=E(c,"DIV",{class:!0});var d=$(e);l=E(d,"DIV",{class:!0});var u=$(l);t=Z(u,"Filters"),u.forEach(m),n=Q(d),o=E(d,"DIV",{class:!0});var _=$(o);for(let g=0;g<a.length;g+=1)a[g].l(_);_.forEach(m),d.forEach(m),this.h()},h(){I(l,"class","text-xs font-light"),I(o,"class","flex flex-row gap-x-1"),I(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(c,d){D(c,e,d),p(e,l),p(l,t),p(e,n),p(e,o);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,null);r=!0},p(c,d){if(d[0]&256){i=c[8];let u;for(u=0;u<i.length;u+=1){const _=xt(c,i,u);a[u]?(a[u].p(_,d),h(a[u],1)):(a[u]=il(_),a[u].c(),h(a[u],1),a[u].m(o,null))}for(le(),u=i.length;u<a.length;u+=1)f(u);ne()}},i(c){if(!r){for(let d=0;d<i.length;d+=1)h(a[d]);r=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)v(a[d]);r=!1},d(c){c&&m(e),ze(a,c)}}}function il(s){let e,l;return e=new An({props:{filter:s[33]}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&256&&(o.filter=t[33]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function al(s){let e=Ee(s[0])+"",l,t,n=Ee(s[1].dataset_manifest.num_items)+"",o,r;return{c(){l=G(e),t=G(" of "),o=G(n),r=G(" rows")},l(i){l=Z(i,e),t=Z(i," of "),o=Z(i,n),r=Z(i," rows")},m(i,a){D(i,l,a),D(i,t,a),D(i,o,a),D(i,r,a)},p(i,a){a[0]&1&&e!==(e=Ee(i[0])+"")&&fe(l,e),a[0]&2&&n!==(n=Ee(i[1].dataset_manifest.num_items)+"")&&fe(o,n)},d(i){i&&m(l),i&&m(t),i&&m(o),i&&m(r)}}}function ol(s){let e,l;return e=new ft({props:{value:s[30].path!=null?ye(s[30].path):void 0,text:s[30].text,disabled:s[30].disabled}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.value=t[30].path!=null?ye(t[30].path):void 0),n[0]&128&&(o.text=t[30].text),n[0]&128&&(o.disabled=t[30].disabled),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function js(s){let e,l,t=s[27],n=[];for(let r=0;r<t.length;r+=1)n[r]=ol(Xt(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Y()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=Q(r)},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);D(r,e,i),l=!0},p(r,i){if(i[0]&128){t=r[27];let a;for(a=0;a<t.length;a+=1){const f=Xt(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=ol(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function fl(s){let e,l;return e=new lr({props:{label:s[26],$$slots:{default:[js]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.label=t[26]),n[0]&128|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Us(s){let e,l,t=Object.entries(s[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=fl(Wt(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);D(r,e,i),l=!0},p(r,i){if(i[0]&128){t=Object.entries(r[7]);let a;for(a=0;a<t.length;a+=1){const f=Wt(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=fl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function cl(s){let e,l,t,n,o,r;return l=new Or({}),{c(){e=S("button"),R(l.$$.fragment),this.h()},l(i){e=E(i,"BUTTON",{});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){e.disabled=t=s[4]==null},m(i,a){D(i,e,a),A(l,e,null),n=!0,o||(r=[Fe(Me.call(null,e,{text:"Clear sort"})),Re(e,"click",s[18])],o=!0)},p(i,a){(!n||a[0]&16&&t!==(t=i[4]==null))&&(e.disabled=t)},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),B(l),o=!1,We(r)}}}function Ys(s){let e,l;return e=new Rn({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Qs(s){let e,l;return e=new Pn({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Js(s){let e,l;return e=new Ds({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ul(s){let e,l;return e=new Nt({props:{open:!0,modalHeading:"Concept",passiveModal:!0,size:"lg",$$slots:{default:[Ws]},$$scope:{ctx:s}}}),e.$on("close",s[24]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&1024|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ks(s){let e,l;return e=new Yr({props:{concept:s[10].data}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&1024&&(o.concept=t[10].data),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Gs(s){let e,l=s[10].error.message+"",t;return{c(){e=S("p"),t=G(l)},l(n){e=E(n,"P",{});var o=$(e);t=Z(o,l),o.forEach(m)},m(n,o){D(n,e,o),p(e,t)},p(n,o){o[0]&1024&&l!==(l=n[10].error.message+"")&&fe(t,l)},i:X,o:X,d(n){n&&m(e)}}}function Zs(s){let e,l;return e=new je({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ws(s){let e,l,t,n;const o=[Zs,Gs,Ks],r=[];function i(a,f){var c,d,u;return(c=a[10])!=null&&c.isLoading?0:(d=a[10])!=null&&d.isError?1:(u=a[10])!=null&&u.isSuccess?2:-1}return~(e=i(s))&&(l=r[e]=o[e](s)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),D(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?~e&&r[e].p(a,f):(l&&(le(),v(r[c],1,1,()=>{r[c]=null}),ne()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function Xs(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,T,J,z,j,V=s[13].length>0&&Ls(s),M=s[0]&&s[1]&&al(s);c=new vt({props:{noLabel:!0,size:"sm",class:"w-80",selected:s[5],$$slots:{default:[Us]},$$scope:{ctx:s}}}),c.$on("update",s[16]);let N=s[6]!=null&&cl(s);const k=[Js,Qs,Ys],P=[];function ee(K,F){var L,H,O;return((L=K[4])==null?void 0:L.order)==null?0:((H=K[4])==null?void 0:H.order)==="ASC"?1:((O=K[4])==null?void 0:O.order)==="DESC"?2:-1}~(g=ee(s))&&(b=P[g]=k[g](s));let x=s[2]&&ul(s);return{c(){e=S("div"),V&&V.c(),l=Y(),t=S("div"),n=S("div"),M&&M.c(),o=Y(),r=S("div"),i=S("div"),a=G("Sort by"),f=Y(),R(c.$$.fragment),d=Y(),N&&N.c(),u=Y(),_=S("button"),b&&b.c(),C=Y(),x&&x.c(),T=ie(),this.h()},l(K){e=E(K,"DIV",{class:!0});var F=$(e);V&&V.l(F),l=Q(F),t=E(F,"DIV",{class:!0});var L=$(t);n=E(L,"DIV",{class:!0});var H=$(n);M&&M.l(H),H.forEach(m),o=Q(L),r=E(L,"DIV",{class:!0});var O=$(r);i=E(O,"DIV",{class:!0});var U=$(i);a=Z(U,"Sort by"),U.forEach(m),f=Q(O),q(c.$$.fragment,O),d=Q(O),N&&N.l(O),u=Q(O),_=E(O,"BUTTON",{});var de=$(_);b&&b.l(de),de.forEach(m),O.forEach(m),L.forEach(m),F.forEach(m),C=Q(K),x&&x.l(K),T=ie(),this.h()},h(){I(n,"class","py-1"),I(i,"class","mr-1"),_.disabled=w=s[4]==null,I(r,"class","sort-container flex flex-row items-center gap-x-1"),I(t,"class","flex w-full flex-row items-center justify-between"),I(e,"class","mx-5 my-2 flex flex-col gap-y-2")},m(K,F){var L;D(K,e,F),V&&V.m(e,null),p(e,l),p(e,t),p(t,n),M&&M.m(n,null),p(t,o),p(t,r),p(r,i),p(i,a),p(r,f),A(c,r,null),p(r,d),N&&N.m(r,null),p(r,u),p(r,_),~g&&P[g].m(_,null),D(K,C,F),x&&x.m(K,F),D(K,T,F),J=!0,z||(j=[Fe(y=Me.call(null,_,{text:((L=s[4])==null?void 0:L.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Re(_,"click",s[17])],z=!0)},p(K,F){var O;K[13].length>0&&V.p(K,F),K[0]&&K[1]?M?M.p(K,F):(M=al(K),M.c(),M.m(n,null)):M&&(M.d(1),M=null);const L={};F[0]&32&&(L.selected=K[5]),F[0]&128|F[1]&2048&&(L.$$scope={dirty:F,ctx:K}),c.$set(L),K[6]!=null?N?(N.p(K,F),F[0]&64&&h(N,1)):(N=cl(K),N.c(),h(N,1),N.m(r,u)):N&&(le(),v(N,1,1,()=>{N=null}),ne());let H=g;g=ee(K),g!==H&&(b&&(le(),v(P[H],1,1,()=>{P[H]=null}),ne()),~g?(b=P[g],b||(b=P[g]=k[g](K),b.c()),h(b,1),b.m(_,null)):b=null),(!J||F[0]&16&&w!==(w=K[4]==null))&&(_.disabled=w),y&&Le(y.update)&&F[0]&16&&y.update.call(null,{text:((O=K[4])==null?void 0:O.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."}),K[2]?x?(x.p(K,F),F[0]&4&&h(x,1)):(x=ul(K),x.c(),h(x,1),x.m(T.parentNode,T)):x&&(le(),v(x,1,1,()=>{x=null}),ne())},i(K){J||(h(V),h(c.$$.fragment,K),h(N),h(b),h(x),J=!0)},o(K){v(V),v(c.$$.fragment,K),v(N),v(b),v(x),J=!1},d(K){K&&m(e),V&&V.d(),M&&M.d(),B(c),N&&N.d(),~g&&P[g].d(),K&&m(C),x&&x.d(K),K&&m(T),z=!1,We(j)}}}function xs(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g=X,b=()=>(g(),g=Ce(t,F=>l(10,_=F)),t);s.$$.on_destroy.push(()=>g());let{totalNumRows:w}=e,{manifest:y}=e,C=Ae();ge(s,C,F=>l(22,u=F));let T=Qe();ge(s,T,F=>l(21,d=F));let J=null;const z=["keyword","semantic","concept"],j={keyword:"Keyword",semantic:"Semantic",concept:"Concepts"};let V={};function M(F){if(F.query.type==="concept"){const L=F.query;l(2,J={namespace:L.concept_namespace,name:L.concept_name})}}let N={};const k=F=>{const L=F.detail;L!==i&&C.setSortBy(L===""?null:Et(L))},P=()=>{r!=null&&C.setSortBy(r.path),C.setSortOrder((r==null?void 0:r.order)==="ASC"?"DESC":"ASC")},ee=()=>{C.clearSorts()},x=F=>M(F),K=()=>l(2,J=null);return s.$$set=F=>{"totalNumRows"in F&&l(0,w=F.totalNumRows),"manifest"in F&&l(1,y=F.manifest)},s.$$.update=()=>{var F,L,H,O;if(s.$$.dirty[0]&4&&b(l(9,t=J?kr(J.namespace,J.name):void 0)),s.$$.dirty[0]&4194304&&l(20,n=St(u)),s.$$.dirty[0]&4194304&&l(8,o=u.query.filters),s.$$.dirty[0]&1048584){l(3,V={});for(const U of n)U.query.type&&(U.query.type in V||l(3,V[U.query.type]=[],V),V[U.query.type].push(U))}if(s.$$.dirty[0]&2097152&&l(4,r=tr(d)),s.$$.dirty[0]&2097152)for(const U of((L=(F=d.selectRowsSchema)==null?void 0:F.data)==null?void 0:L.search_results)||[])N[ye(U.result_path)]=U;s.$$.dirty[0]&16&&l(5,i=r!=null&&r.path?ye(r.path):""),s.$$.dirty[0]&4194304&&l(6,a=u.query.sort_by),s.$$.dirty[0]&2097248&&l(19,f=((O=(H=d.selectRowsSchema)==null?void 0:H.data)==null?void 0:O.schema)!=null?[{path:[""],text:"None",disabled:a==null&&i!==""},...Dt(d.selectRowsSchema.data.schema).filter(U=>U.dtype!="embedding"&&U.dtype!="string_span").map(U=>({path:U.path,text:ye(U.path.slice(1)),disabled:!1}))]:[]),s.$$.dirty[0]&524288&&l(7,c=f.reduce((U,de)=>{const he=de.path[0];return(U[he]=U[he]||[]).push(de),U},{}))},[w,y,J,V,r,i,a,c,o,t,_,C,T,z,j,M,k,P,ee,f,n,d,u,x,K]}class ei extends $e{constructor(e){super(),ke(this,e,xs,Xs,be,{totalNumRows:0,manifest:1},null,[-1,-1])}}function dl(s,e,l){var r,i,a;const t=s.slice();t[14]=e[l],t[18]=l;const n=t[3].length>1?`[${t[18]}]`:"";t[15]=n;const o=((a=(i=(r=t[7].data)==null?void 0:r.ui)==null?void 0:i.markdown_paths)==null?void 0:a.find(f=>Ke(f,t[0])))!=null;return t[16]=o,t}function ml(s){let e,l,t,n=s[0].join(".")+s[15]+"",o,r,i,a,f,c;return a=new Jr({props:{text:Ee(s[14]),row:s[1],markdown:s[16],spanPaths:s[5].spanPaths,valuePaths:s[5].valuePaths,datasetViewStore:s[8],datasetStore:s[2],embeddings:s[6]}}),{c(){e=S("div"),l=S("div"),t=S("div"),o=G(n),r=Y(),i=S("div"),R(a.$$.fragment),f=Y(),this.h()},l(d){e=E(d,"DIV",{class:!0});var u=$(e);l=E(u,"DIV",{class:!0});var _=$(l);t=E(_,"DIV",{class:!0});var g=$(t);o=Z(g,n),g.forEach(m),r=Q(_),i=E(_,"DIV",{class:!0});var b=$(i);q(a.$$.fragment,b),b.forEach(m),_.forEach(m),f=Q(u),u.forEach(m),this.h()},h(){I(t,"class","sticky top-0 z-10 w-full self-start border-t border-neutral-200 bg-neutral-100 px-2 py-2 pb-2 font-mono font-medium text-neutral-500"),I(i,"class","mx-4 font-normal"),I(l,"class","flex w-full flex-col"),I(e,"class","flex flex-row")},m(d,u){D(d,e,u),p(e,l),p(l,t),p(t,o),p(l,r),p(l,i),A(a,i,null),p(e,f),c=!0},p(d,u){(!c||u&9)&&n!==(n=d[0].join(".")+d[15]+"")&&fe(o,n);const _={};u&8&&(_.text=Ee(d[14])),u&2&&(_.row=d[1]),u&129&&(_.markdown=d[16]),u&32&&(_.spanPaths=d[5].spanPaths),u&32&&(_.valuePaths=d[5].valuePaths),u&4&&(_.datasetStore=d[2]),u&64&&(_.embeddings=d[6]),a.$set(_)},i(d){c||(h(a.$$.fragment,d),c=!0)},o(d){v(a.$$.fragment,d),c=!1},d(d){d&&m(e),B(a)}}}function ti(s){let e,l,t=s[3],n=[];for(let r=0;r<t.length;r+=1)n[r]=ml(dl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);D(r,e,i),l=!0},p(r,[i]){if(i&495){t=r[3];let a;for(a=0;a<t.length;a+=1){const f=dl(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=ml(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function li(s,e,l){let t,n,o,r,i,a,f,c,d,u=X,_=()=>(u(),u=Ce(i,T=>l(7,d=T)),i);s.$$.on_destroy.push(()=>u());let{path:g}=e,{row:b}=e,{field:w}=e;const y=Ae();ge(s,y,T=>l(13,f=T));const C=Qe();return ge(s,C,T=>l(2,c=T)),s.$$set=T=>{"path"in T&&l(0,g=T.path),"row"in T&&l(1,b=T.row),"field"in T&&l(10,w=T.field)},s.$$.update=()=>{s.$$.dirty&4&&l(11,t=c.visibleFields||[]),s.$$.dirty&8196&&l(12,n=vn(f,c)),s.$$.dirty&4100&&l(6,o=wn(c,n)),s.$$.dirty&3072&&l(5,r=nr(w,t)),s.$$.dirty&8192&&_(l(4,i=ot(f.namespace,f.datasetName))),s.$$.dirty&3&&l(3,a=yr(b,g).map(T=>Sr.value(T)).filter(Hr))},[g,b,c,a,i,r,o,d,y,C,w,t,n,f]}class ni extends $e{constructor(e){super(),ke(this,e,li,ti,be,{path:0,row:1,field:10})}}function hl(s,e,l){const t=s.slice();return t[8]=e[l],t[10]=l,t}function _l(s){let e,l=[],t=new Map,n,o,r=s[1];const i=a=>ye(a[8].path);for(let a=0;a<r.length;a+=1){let f=hl(s,r,a),c=i(f);t.set(c,l[a]=gl(c,f))}return{c(){e=S("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<l.length;c+=1)l[c].l(f);f.forEach(m),this.h()},h(){I(e,"class","w-2/3 overflow-hidden"),bt(()=>s[7].call(e))},m(a,f){D(a,e,f);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=Kn(e,s[7].bind(e)),o=!0},p(a,f){f&3&&(r=a[1],le(),l=gn(l,f,i,1,a,r,t,e,pn,gl,null,hl),ne())},i(a){if(!o){for(let f=0;f<r.length;f+=1)h(l[f]);o=!0}},o(a){for(let f=0;f<l.length;f+=1)v(l[f]);o=!1},d(a){a&&m(e);for(let f=0;f<l.length;f+=1)l[f].d();n()}}}function gl(s,e){let l,t,n,o;return t=new ni({props:{row:e[0],path:e[8].path,field:e[8]}}),{key:s,first:null,c(){l=S("div"),R(t.$$.fragment),n=Y(),this.h()},l(r){l=E(r,"DIV",{class:!0});var i=$(l);q(t.$$.fragment,i),n=Q(i),i.forEach(m),this.h()},h(){I(l,"class","border-gray-100"),Se(l,"border-b",e[10]<e[1].length-1),this.first=l},m(r,i){D(r,l,i),A(t,l,null),p(l,n),o=!0},p(r,i){e=r;const a={};i&1&&(a.row=e[0]),i&2&&(a.path=e[8].path),i&2&&(a.field=e[8]),t.$set(a),(!o||i&2)&&Se(l,"border-b",e[10]<e[1].length-1)},i(r){o||(h(t.$$.fragment,r),o=!0)},o(r){v(t.$$.fragment,r),o=!1},d(r){r&&m(l),B(t)}}}function ri(s){let e,l,t,n,o,r,i,a,f,c=s[1].length>0&&_l(s);return i=new Gr({props:{row:s[0],visibleFields:s[2],selectRowsSchema:s[4]}}),{c(){e=S("div"),l=S("div"),c&&c.c(),t=Y(),n=S("div"),o=S("div"),r=S("div"),R(i.$$.fragment),this.h()},l(d){e=E(d,"DIV",{class:!0});var u=$(e);l=E(u,"DIV",{class:!0});var _=$(l);c&&c.l(_),t=Q(_),n=E(_,"DIV",{class:!0});var g=$(n);o=E(g,"DIV",{class:!0});var b=$(o);r=E(b,"DIV",{style:!0,class:!0});var w=$(r);q(i.$$.fragment,w),w.forEach(m),b.forEach(m),g.forEach(m),_.forEach(m),u.forEach(m),this.h()},h(){I(r,"style",a=`max-height: ${Math.max(pl,s[3])}px`),I(r,"class","overflow-y-auto"),I(o,"class","sticky top-0 self-start"),I(n,"class","flex h-full w-1/3 bg-neutral-100"),I(l,"class","flex h-full w-full flex-row"),I(e,"class","rounded border-x border-b border-neutral-200 shadow-md")},m(d,u){D(d,e,u),p(e,l),c&&c.m(l,null),p(l,t),p(l,n),p(n,o),p(o,r),A(i,r,null),f=!0},p(d,[u]){d[1].length>0?c?(c.p(d,u),u&2&&h(c,1)):(c=_l(d),c.c(),h(c,1),c.m(l,t)):c&&(le(),v(c,1,1,()=>{c=null}),ne());const _={};u&1&&(_.row=d[0]),u&4&&(_.visibleFields=d[2]),u&16&&(_.selectRowsSchema=d[4]),i.$set(_),(!f||u&8&&a!==(a=`max-height: ${Math.max(pl,d[3])}px`))&&I(r,"style",a)},i(d){f||(h(c),h(i.$$.fragment,d),f=!0)},o(d){v(c),v(i.$$.fragment,d),f=!1},d(d){d&&m(e),c&&c.d(),B(i)}}}const pl=320;function si(s,e,l){let t,n,{row:o}=e,{mediaFields:r}=e,{visibleFields:i}=e;const a=Qe();ge(s,a,d=>l(6,n=d));let f=0;function c(){f=this.clientHeight,l(3,f)}return s.$$set=d=>{"row"in d&&l(0,o=d.row),"mediaFields"in d&&l(1,r=d.mediaFields),"visibleFields"in d&&l(2,i=d.visibleFields)},s.$$.update=()=>{var d;s.$$.dirty&64&&l(4,t=(d=n.selectRowsSchema)==null?void 0:d.data)},[o,r,i,f,t,a,n,c]}class ii extends $e{constructor(e){super(),ke(this,e,si,ri,be,{row:0,mediaFields:1,visibleFields:2})}}function bl(s,e,l){const t=s.slice();return t[23]=e[l],t}function ai(s){let e,l;return{c(){e=S("div"),l=G("No results."),this.h()},l(t){e=E(t,"DIV",{class:!0});var n=$(e);l=Z(n,"No results."),n.forEach(m),this.h()},h(){I(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){D(t,e,n),p(e,l)},p:X,i:X,o:X,d(t){t&&m(e)}}}function oi(s){let e,l;return{c(){e=S("div"),l=G("Select fields to display"),this.h()},l(t){e=E(t,"DIV",{class:!0});var n=$(e);l=Z(n,"Select fields to display"),n.forEach(m),this.h()},h(){I(e,"class","mt-12 w-full text-center text-gray-600")},m(t,n){D(t,e,n),p(e,l)},p:X,i:X,o:X,d(t){t&&m(e)}}}function fi(s){let e,l;return e=new je({props:{paragraph:!0,lines:3}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ci(s){var t,n;let e,l;return e=new Nn({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=s[2].error.body)==null?void 0:t.detail)||((n=s[2])==null?void 0:n.error.message)}}),{c(){R(e.$$.fragment)},l(o){q(e.$$.fragment,o)},m(o,r){A(e,o,r),l=!0},p(o,r){var a,f;const i={};r&4&&(i.subtitle=((a=o[2].error.body)==null?void 0:a.detail)||((f=o[2])==null?void 0:f.error.message)),e.$set(i)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){v(e.$$.fragment,o),l=!1},d(o){B(e,o)}}}function ui(s){var t;let e,l;return e=new Nn({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=s[4].error.body)==null?void 0:t.detail)||s[4].error.message}}),{c(){R(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){A(e,n,o),l=!0},p(n,o){var i;const r={};o&16&&(r.subtitle=((i=n[4].error.body)==null?void 0:i.detail)||n[4].error.message),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function vl(s){let e,l,t,n=s[6],o=[];for(let a=0;a<n.length;a+=1)o[a]=wl(bl(s,n,a));const r=a=>v(o[a],1,1,()=>{o[a]=null});let i=s[6].length>0&&$l(s);return{c(){e=S("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),i&&i.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=Q(f),i&&i.l(f),f.forEach(m),this.h()},h(){I(e,"class","flex h-full w-full flex-col gap-y-10 overflow-y-scroll px-5 pb-32")},m(a,f){D(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);p(e,l),i&&i.m(e,null),s[21](e),t=!0},p(a,f){if(f&98){n=a[6];let c;for(c=0;c<n.length;c+=1){const d=bl(a,n,c);o[c]?(o[c].p(d,f),h(o[c],1)):(o[c]=wl(d),o[c].c(),h(o[c],1),o[c].m(e,l))}for(le(),c=n.length;c<o.length;c+=1)r(c);ne()}a[6].length>0?i?(i.p(a,f),f&64&&h(i,1)):(i=$l(a),i.c(),h(i,1),i.m(e,null)):i&&(le(),v(i,1,1,()=>{i=null}),ne())},i(a){if(!t){for(let f=0;f<n.length;f+=1)h(o[f]);h(i),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)v(o[f]);v(i),t=!1},d(a){a&&m(e),ze(o,a),i&&i.d(),s[21](null)}}}function wl(s){let e,l;return e=new ii({props:{visibleFields:s[1],row:s[23],mediaFields:s[5]}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&2&&(o.visibleFields=t[1]),n&64&&(o.row=t[23]),n&32&&(o.mediaFields=t[5]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function $l(s){let e,l;return e=new Ns({props:{threshold:100}}),e.$on("loadMore",s[20]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function di(s){let e,l,t,n,o,r,i;e=new ei({props:{totalNumRows:s[7],manifest:s[12].data}});const a=[ui,ci,fi,oi,ai],f=[];function c(u,_){var g,b,w,y;return u[4].isError?0:(g=u[2])!=null&&g.isError?1:(b=u[4])!=null&&b.isFetching||u[13].isFetching||(w=u[2])!=null&&w.isFetching||u[3].isFetching?2:u[1].length===0?3:(y=u[4])!=null&&y.isSuccess&&u[6]&&u[6].length===0?4:-1}~(t=c(s))&&(n=f[t]=a[t](s));let d=s[6]&&s[1].length>0&&s[13].isSuccess&&s[5]!=null&&vl(s);return{c(){R(e.$$.fragment),l=Y(),n&&n.c(),o=Y(),d&&d.c(),r=ie()},l(u){q(e.$$.fragment,u),l=Q(u),n&&n.l(u),o=Q(u),d&&d.l(u),r=ie()},m(u,_){A(e,u,_),D(u,l,_),~t&&f[t].m(u,_),D(u,o,_),d&&d.m(u,_),D(u,r,_),i=!0},p(u,[_]){const g={};_&128&&(g.totalNumRows=u[7]),_&4096&&(g.manifest=u[12].data),e.$set(g);let b=t;t=c(u),t===b?~t&&f[t].p(u,_):(n&&(le(),v(f[b],1,1,()=>{f[b]=null}),ne()),~t?(n=f[t],n?n.p(u,_):(n=f[t]=a[t](u),n.c()),h(n,1),n.m(o.parentNode,o)):n=null),u[6]&&u[1].length>0&&u[13].isSuccess&&u[5]!=null?d?(d.p(u,_),_&8290&&h(d,1)):(d=vl(u),d.c(),h(d,1),d.m(r.parentNode,r)):d&&(le(),v(d,1,1,()=>{d=null}),ne())},i(u){i||(h(e.$$.fragment,u),h(n),h(d),i=!0)},o(u){v(e.$$.fragment,u),v(n),v(d),i=!1},d(u){B(e,u),u&&m(l),~t&&f[t].d(u),u&&m(o),d&&d.d(u),u&&m(r)}}}function mi(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g,b=X,w=()=>(b(),b=Ce(r,O=>l(3,g=O)),r),y,C,T=X,J=()=>(T(),T=Ce(a,O=>l(4,C=O)),a),z,j,V=X,M=()=>(V(),V=Ce(t,O=>l(12,j=O)),t),N,k=X,P=()=>(k(),k=Ce(n,O=>l(13,N=O)),n);s.$$.on_destroy.push(()=>b()),s.$$.on_destroy.push(()=>T()),s.$$.on_destroy.push(()=>V()),s.$$.on_destroy.push(()=>k());const ee=Ae();ge(s,ee,O=>l(19,z=O));const x=Qe();ge(s,x,O=>l(18,y=O));let K=null;const F=qr(K),L=()=>C==null?void 0:C.fetchNextPage();function H(O){Pe[O?"unshift":"push"](()=>{K=O,l(0,K)})}return s.$$.update=()=>{var O,U,de,he;s.$$.dirty&524288&&M(l(11,t=Er(z.namespace,z.datasetName))),s.$$.dirty&524288&&P(l(10,n=It(z.namespace,z.datasetName))),s.$$.dirty&524288&&l(17,o=rr(z)),s.$$.dirty&524288&&w(l(9,r=ot(z.namespace,z.datasetName))),s.$$.dirty&262144&&l(2,i=y.selectRowsSchema),s.$$.dirty&655364&&J(l(8,a=Dr(z.namespace,z.datasetName,o||{},i!=null&&i.isSuccess?i.data.schema:void 0))),s.$$.dirty&16&&l(7,f=(O=C.data)==null?void 0:O.pages[0].total_num_rows),s.$$.dirty&16&&l(6,c=(U=C.data)==null?void 0:U.pages.flatMap(re=>re.rows)),s.$$.dirty&262144&&l(1,d=(y.visibleFields||[]).sort((re,De)=>ye(re.path)>ye(De.path)?1:-1)),s.$$.dirty&6&&l(16,u=((de=i==null?void 0:i.data)==null?void 0:de.schema)!=null?sr((he=i==null?void 0:i.data)==null?void 0:he.schema,d):null),s.$$.dirty&65544&&l(5,_=g.data?ir(u,g.data):[]),s.$$.dirty&1&&F.set(K)},Gn(ar,F),[K,d,i,g,C,_,c,f,a,r,n,t,j,N,ee,x,u,o,y,z,L,H]}class hi extends $e{constructor(e){super(),ke(this,e,mi,di,be,{})}}function kl(s,e,l){const t=s.slice();return t[45]=e[l],t}function yl(s,e,l){const t=s.slice();return t[48]=e[l],t}function Sl(s){const e=s[5].find(function(...t){return s[37](s[51],...t)});s[52]=e}function _i(s){let e,l,t=s[52].text+"",n,o,r=s[52].description&&El(s);return{c(){e=S("div"),l=S("div"),n=G(t),o=Y(),r&&r.c(),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);l=E(a,"DIV",{});var f=$(l);n=Z(f,t),f.forEach(m),o=Q(a),r&&r.l(a),a.forEach(m),this.h()},h(){I(e,"class","flex justify-between gap-x-4")},m(i,a){D(i,e,a),p(e,l),p(l,n),p(e,o),r&&r.m(e,null)},p(i,a){a[0]&32|a[1]&1048576&&t!==(t=i[52].text+"")&&fe(n,t),i[52].description?r?r.p(i,a):(r=El(i),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:X,o:X,d(i){i&&m(e),r&&r.d()}}}function gi(s){let e,l,t,n,o,r,i;return l=new Xe({props:{$$slots:{default:[wi]},$$scope:{ctx:s}}}),{c(){e=S("div"),R(l.$$.fragment),t=Y(),n=S("div"),o=G(`Semantic search:
                    `),r=G(s[0]),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);q(l.$$.fragment,f),t=Q(f),n=E(f,"DIV",{class:!0});var c=$(n);o=Z(c,`Semantic search:
                    `),r=Z(c,s[0]),c.forEach(m),f.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){D(a,e,f),A(l,e,null),p(e,t),p(e,n),p(n,o),p(n,r),i=!0},p(a,f){const c={};f[1]&4194304&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!i||f[0]&1)&&fe(r,a[0])},i(a){i||(h(l.$$.fragment,a),i=!0)},o(a){v(l.$$.fragment,a),i=!1},d(a){a&&m(e),B(l)}}}function pi(s){let e,l,t,n,o,r,i;return l=new Xe({props:{$$slots:{default:[$i]},$$scope:{ctx:s}}}),{c(){e=S("div"),R(l.$$.fragment),t=Y(),n=S("div"),o=G(`Keyword search:
                    `),r=G(s[0]),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);q(l.$$.fragment,f),t=Q(f),n=E(f,"DIV",{class:!0});var c=$(n);o=Z(c,`Keyword search:
                    `),r=Z(c,s[0]),c.forEach(m),f.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){D(a,e,f),A(l,e,null),p(e,t),p(e,n),p(n,o),p(n,r),i=!0},p(a,f){const c={};f[1]&4194304&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!i||f[0]&1)&&fe(r,a[0])},i(a){i||(h(l.$$.fragment,a),i=!0)},o(a){v(l.$$.fragment,a),i=!1},d(a){a&&m(e),B(l)}}}function bi(s){let e,l,t,n,o,r=s[0]!=""?":":"",i,a,f,c;return l=new Xe({props:{$$slots:{default:[ki]},$$scope:{ctx:s}}}),{c(){e=S("div"),R(l.$$.fragment),t=Y(),n=S("div"),o=G("New concept"),i=G(r),a=Y(),f=G(s[0]),this.h()},l(d){e=E(d,"DIV",{class:!0});var u=$(e);q(l.$$.fragment,u),t=Q(u),n=E(u,"DIV",{class:!0});var _=$(n);o=Z(_,"New concept"),i=Z(_,r),a=Q(_),f=Z(_,s[0]),_.forEach(m),u.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-concept flex flex-row items-center justify-items-center")},m(d,u){D(d,e,u),A(l,e,null),p(e,t),p(e,n),p(n,o),p(n,i),p(n,a),p(n,f),c=!0},p(d,u){const _={};u[1]&4194304&&(_.$$scope={dirty:u,ctx:d}),l.$set(_),(!c||u[0]&1)&&r!==(r=d[0]!=""?":":"")&&fe(i,r),(!c||u[0]&1)&&fe(f,d[0])},i(d){c||(h(l.$$.fragment,d),c=!0)},o(d){v(l.$$.fragment,d),c=!1},d(d){d&&m(e),B(l)}}}function vi(s){let e;return{c(){e=S("div")},l(l){e=E(l,"DIV",{}),$(e).forEach(m)},m(l,t){D(l,e,t)},p:X,i:X,o:X,d(l){l&&m(e)}}}function El(s){let e,l=s[52].description+"",t;return{c(){e=S("div"),t=G(l),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);t=Z(o,l),o.forEach(m),this.h()},h(){I(e,"class","truncate text-xs text-gray-500")},m(n,o){D(n,e,o),p(e,t)},p(n,o){o[0]&32|o[1]&1048576&&l!==(l=n[52].description+"")&&fe(t,l)},d(n){n&&m(e)}}}function wi(s){let e,l;return e=new zn({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function $i(s){let e,l;return e=new zn({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ki(s){let e,l;return e=new ns({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function yi(s){Sl(s);let e,l,t,n;const o=[vi,bi,pi,gi,_i],r=[];function i(a,f){return a[52]==null?0:a[52].id==="new-concept"?1:a[52].id==="keyword-search"?2:a[52].id==="semantic-search"?3:4}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),D(a,t,f),n=!0},p(a,f){Sl(a);let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function Dl(s){let e,l;return e=new ft({props:{value:ye(s[48]),text:ye(s[48])}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=ye(t[48])),n[0]&512&&(o.text=ye(t[48])),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Si(s){let e,l,t=s[9],n=[];for(let r=0;r<t.length;r+=1)n[r]=Dl(yl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);D(r,e,i),l=!0},p(r,i){if(i[0]&512){t=r[9];let a;for(a=0;a<t.length;a+=1){const f=yl(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=Dl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Il(s){let e,l;return e=new vt({props:{size:"xl",class:"field-select w-48",selected:s[2]?ye(s[2]):"",disabled:s[9].length===0,warn:s[9].length===0,$$slots:{default:[Si]},$$scope:{ctx:s}}}),e.$on("change",s[21]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&4&&(o.selected=t[2]?ye(t[2]):""),n[0]&512&&(o.disabled=t[9].length===0),n[0]&512&&(o.warn=t[9].length===0),n[0]&512|n[1]&4194304&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Vl(s){let e,l;return e=new ft({props:{value:s[45].name,text:s[45].name}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&16&&(o.value=t[45].name),n[0]&16&&(o.text=t[45].name),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ei(s){let e,l,t=s[4].data||[],n=[];for(let r=0;r<t.length;r+=1)n[r]=Vl(kl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);D(r,e,i),l=!0},p(r,i){if(i[0]&16){t=r[4].data||[];let a;for(a=0;a<t.length;a+=1){const f=kl(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=Vl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Di(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g=s[9],b,w,y,C,T,J,z;t=new rt({props:{disabled:s[3]||s[8],iconDescription:"Compute embedding index. This may be expensive.",icon:s[3]?Ct:s[8]?Ft:yt}}),t.$on("click",s[36]);function j(N){s[39](N)}let V={size:"xl",items:s[5],shouldFilterItem:Ii,placeholder:s[7],$$slots:{default:[yi,({item:N})=>({51:N}),({item:N})=>[0,N?1048576:0]]},$$scope:{ctx:s}};s[0]!==void 0&&(V.value=s[0]),c=new xr({props:V}),s[38](c),Pe.push(()=>Ue(c,"value",j)),c.$on("select",s[20]);let M=Il(s);return C=new vt({props:{size:"xl",selected:s[1]||"",name:s[1]||"",$$slots:{default:[Ei]},$$scope:{ctx:s}}}),C.$on("change",s[18]),{c(){e=S("div"),l=S("div"),R(t.$$.fragment),n=Y(),o=S("div"),r=S("div"),i=S("div"),a=S("div"),f=S("div"),R(c.$$.fragment),u=Y(),_=S("div"),M.c(),b=Y(),w=S("div"),y=S("div"),R(C.$$.fragment),this.h()},l(N){e=E(N,"DIV",{class:!0});var k=$(e);l=E(k,"DIV",{class:!0});var P=$(l);q(t.$$.fragment,P),P.forEach(m),n=Q(k),o=E(k,"DIV",{class:!0});var ee=$(o);r=E(ee,"DIV",{class:!0});var x=$(r);i=E(x,"DIV",{class:!0});var K=$(i);a=E(K,"DIV",{class:!0});var F=$(a);f=E(F,"DIV",{class:!0});var L=$(f);q(c.$$.fragment,L),L.forEach(m),F.forEach(m),K.forEach(m),x.forEach(m),ee.forEach(m),u=Q(k),_=E(k,"DIV",{class:!0});var H=$(_);M.l(H),H.forEach(m),b=Q(k),w=E(k,"DIV",{class:!0});var O=$(w);y=E(O,"DIV",{class:!0});var U=$(y);q(C.$$.fragment,U),U.forEach(m),O.forEach(m),k.forEach(m),this.h()},h(){I(l,"class","compute-embedding mr-1"),Se(l,"compute-embedding-indexing",s[8]),I(f,"class","flex-grow"),I(a,"class","flex w-full flex-row items-start justify-items-start"),I(i,"class","flex flex-row"),I(r,"class","w-full"),I(o,"class","search-container flex w-full flex-grow flex-row"),I(_,"class","mx-1"),I(y,"class","w-32"),I(w,"class","embedding-select mr-8 flex flex-row"),I(e,"class","border-1 flex w-full flex-row items-center px-4")},m(N,k){D(N,e,k),p(e,l),A(t,l,null),p(e,n),p(e,o),p(o,r),p(r,i),p(i,a),p(a,f),A(c,f,null),p(e,u),p(e,_),M.m(_,null),p(e,b),p(e,w),p(w,y),A(C,y,null),T=!0,J||(z=[Fe(Me.call(null,_,{text:"Select the field to search over."})),Fe(Me.call(null,y,{text:"Select the embedding to use."}))],J=!0)},p(N,k){const P={};k[0]&264&&(P.disabled=N[3]||N[8]),k[0]&264&&(P.icon=N[3]?Ct:N[8]?Ft:yt),t.$set(P),(!T||k[0]&256)&&Se(l,"compute-embedding-indexing",N[8]);const ee={};k[0]&32&&(ee.items=N[5]),k[0]&128&&(ee.placeholder=N[7]),k[0]&33|k[1]&5242880&&(ee.$$scope={dirty:k,ctx:N}),!d&&k[0]&1&&(d=!0,ee.value=N[0],Ye(()=>d=!1)),c.$set(ee),k[0]&512&&be(g,g=N[9])?(le(),v(M,1,1,X),ne(),M=Il(N),M.c(),h(M,1),M.m(_,null)):M.p(N,k);const x={};k[0]&2&&(x.selected=N[1]||""),k[0]&2&&(x.name=N[1]||""),k[0]&16|k[1]&4194304&&(x.$$scope={dirty:k,ctx:N}),C.$set(x)},i(N){T||(h(t.$$.fragment,N),h(c.$$.fragment,N),h(M),h(C.$$.fragment,N),T=!0)},o(N){v(t.$$.fragment,N),v(c.$$.fragment,N),v(M),v(C.$$.fragment,N),T=!1},d(N){N&&m(e),B(t),s[38](null),B(c),M.d(N),B(C),J=!1,We(z)}}}const Ii=(s,e)=>s.text.toLowerCase().includes(e.toLowerCase())||s.id==="new-concept";function Vi(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,T,J,z,j,V,M,N=X,k=()=>(N(),N=Ce(t,oe=>l(34,M=oe)),t),P;s.$$.on_destroy.push(()=>N());const ee=Ae();ge(s,ee,oe=>l(33,V=oe));const x=Qe();ge(s,x,oe=>l(32,z=oe));const K=Mn();ge(s,K,oe=>l(35,P=oe));const F=In();ge(s,F,oe=>l(42,C=oe));const L=Fn();ge(s,L,oe=>l(4,j=oe));const H=(oe,Ne)=>`${ye(oe||"")}_${Ne}`;let O={};const U=Ir();ge(s,U,oe=>l(31,J=oe));const de=Vt();ge(s,de,oe=>l(30,T=oe));let he=[],re="",De;const ue=oe=>{l(1,f=oe.target.value),ee.setSearchEmbedding(oe.target.value)},se=()=>{f!=null&&(l(22,O[H(r,f)]=!0,O),C.mutate([n,o,{leaf_path:Et(r||[]),signal:{signal_name:f}}]))};let ae;const me=(oe,Ne)=>{r==null||f==null||(ee.addSearch({path:[ye(r)],query:{type:"concept",concept_namespace:oe,concept_name:Ne,embedding:f}}),ae.clear())},W=oe=>{if(!(r==null||f==null)){if(oe.detail.selectedId==="new-concept"){re===De.id&&l(0,re="");const Ne=re.split("/",2);let He="",Be="";Ne.length===2?[He,Be]=Ne:[Be]=Ne,Ge({command:Ze.CreateConcept,namespace:He,conceptName:Be,dataset:{namespace:n,name:o},path:r,onCreate:xe=>me(xe.detail.namespace,xe.detail.name)}),ae.clear();return}else if(oe.detail.selectedId==="keyword-search"){if(re=="")return;ee.addSearch({path:[ye(r)],query:{type:"keyword",search:re}}),ae.clear();return}else if(oe.detail.selectedId=="semantic-search"){if(re=="")return;ee.addSearch({path:[ye(r)],query:{type:"semantic",search:re,embedding:f}}),ae.clear();return}me(oe.detail.selectedId.namespace,oe.detail.selectedId.name)}},te=oe=>{ee.setSearchPath(oe.target.value)},ce=()=>{se()},Oe=(oe,Ne)=>Ne.id===oe.id;function Je(oe){Pe[oe?"unshift":"push"](()=>{ae=oe,l(6,ae)})}function _e(oe){re=oe,l(0,re)}return s.$$.update=()=>{var oe,Ne;s.$$.dirty[1]&4&&k(l(10,t=ot(V.namespace,V.datasetName))),s.$$.dirty[1]&4&&(n=V.namespace),s.$$.dirty[1]&4&&(o=V.datasetName),s.$$.dirty[1]&6&&l(2,r=vn(V,z)),s.$$.dirty[0]&4|s.$$.dirty[1]&4&&l(24,i=St(V,r)),s.$$.dirty[1]&2&&l(9,a=(z.visibleFields||[]).filter(He=>He.dtype==="string").map(He=>ye(He.path))),s.$$.dirty[0]&20|s.$$.dirty[1]&30&&l(1,f=or(P,M.data,V,z,r,(j.data||[]).map(He=>He.name))),s.$$.dirty[0]&4|s.$$.dirty[1]&2&&l(29,c=wn(z,r)),s.$$.dirty[0]&536870914&&l(3,d=c!=null&&!!c.includes(f||"")),s.$$.dirty[0]&4194318&&l(8,u=!d&&O[H(r,f)]),s.$$.dirty[0]&8&&l(7,_=d?"Search by concept or keyword.":'Search by keyword. Click "compute embedding" to search by concept.'),s.$$.dirty[0]&1073741824&&l(28,g=(Ne=(oe=T.data)==null?void 0:oe.user)==null?void 0:Ne.id),s.$$.dirty[0]&268435456|s.$$.dirty[1]&1&&l(25,b=fr(J.data||[],g)),s.$$.dirty[0]&9&&l(23,De={id:"new-concept",text:re,disabled:!d}),s.$$.dirty[0]&1&&l(27,w={id:"keyword-search",text:re}),s.$$.dirty[0]&9&&l(26,y={id:"semantic-search",text:re,disabled:!d}),s.$$.dirty[0]&1333788683|s.$$.dirty[1]&1&&l(5,he=J!=null&&J.data?[De,...re!=""?[w]:[],...re!=""&&f?[y]:[],...b.flatMap(He=>He.concepts.map(Be=>({id:{namespace:Be.namespace,name:Be.name},text:cr(Be.namespace,Be.name,T.data),description:Be.description,disabled:!d||i.some(xe=>xe.query.type==="concept"&&xe.query.concept_namespace===Be.namespace&&xe.query.concept_name===Be.name)})))]:[])},[re,f,r,d,j,he,ae,_,u,a,t,ee,x,K,F,L,U,de,ue,se,W,te,O,De,i,b,y,w,g,c,T,J,z,V,M,P,ce,Oe,Je,_e]}class Ni extends $e{constructor(e){super(),ke(this,e,Vi,Di,be,{},null,[-1,-1])}}function Ti(s){let e,l;return e=new rt({props:{$$slots:{default:[Fi]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ci(s){let e,l;return{c(){e=S("span"),l=G("Invalid query"),this.h()},l(t){e=E(t,"SPAN",{class:!0});var n=$(e);l=Z(n,"Invalid query"),n.forEach(m),this.h()},h(){I(e,"class","text-red-500")},m(t,n){D(t,e,n),p(e,l)},p:X,i:X,o:X,d(t){t&&m(e)}}}function Fi(s){let e;return{c(){e=G("Apply")},l(l){e=Z(l,"Apply")},m(l,t){D(l,e,t)},d(l){l&&m(e)}}}function Mi(s){let e,l,t,n,o,r,i,a,f,c,d;const u=[Ci,Ti],_=[];function g(b,w){return b[0]?b[3]?1:-1:0}return~(r=g(s))&&(i=_[r]=u[r](s)),{c(){e=S("pre"),l=G(""),t=G(s[2]),n=G(`
`),o=Y(),i&&i.c(),a=ie(),this.h()},l(b){e=E(b,"PRE",{class:!0,contenteditable:!0});var w=$(e);l=Z(w,""),t=Z(w,s[2]),n=Z(w,`
`),w.forEach(m),o=Q(b),i&&i.l(b),a=ie(),this.h()},h(){I(e,"class","whitespace-pre bg-gray-50 p-4 font-mono"),I(e,"contenteditable",""),s[1]===void 0&&bt(()=>s[8].call(e)),Se(e,"outline-red-500",!s[0])},m(b,w){D(b,e,w),p(e,l),p(e,t),p(e,n),s[1]!==void 0&&(e.innerText=s[1]),D(b,o,w),~r&&_[r].m(b,w),D(b,a,w),f=!0,c||(d=Re(e,"input",s[8]),c=!0)},p(b,[w]){(!f||w&4)&&Zn(t,b[2]),w&2&&b[1]!==e.innerText&&(e.innerText=b[1]),(!f||w&1)&&Se(e,"outline-red-500",!b[0]);let y=r;r=g(b),r===y?~r&&_[r].p(b,w):(i&&(le(),v(_[y],1,1,()=>{_[y]=null}),ne()),~r?(i=_[r],i?i.p(b,w):(i=_[r]=u[r](b),i.c()),h(i,1),i.m(a.parentNode,a)):i=null)},i(b){f||(h(i),f=!0)},o(b){v(i),f=!1},d(b){b&&m(e),b&&m(o),~r&&_[r].d(b),b&&m(a),c=!1,d()}}}function zi(s,e,l){let t,n,o,r,i;const a=Ae();ge(s,a,u=>l(7,i=u));let f=!0;function c(){dt(a,i.query=JSON.parse(o),i)}function d(){o=this.innerText,l(1,o),l(2,n),l(6,t),l(7,i)}return s.$$.update=()=>{if(s.$$.dirty&128&&l(6,t=i.query),s.$$.dirty&64&&l(2,n=t?JSON.stringify(t,null,2):""),s.$$.dirty&4&&l(1,o=n),s.$$.dirty&2)try{JSON.parse(o),l(0,f=!0)}catch{l(0,f=!1)}s.$$.dirty&67&&l(3,r=f&&!ur(JSON.parse(o),t))},[f,o,n,r,a,c,t,i,d]}class Pi extends $e{constructor(e){super(),ke(this,e,zi,Mi,be,{})}}function Nl(s){let e,l;return e=new Xn({props:{light:!0,flipped:!0,$$slots:{default:[Ri]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&1073742079&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Tl(s){let e,l;return e=new nt({props:{text:"Sort by"}}),e.$on("click",s[20]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Cl(s){let e,l;return e=new nt({props:{text:"Filter"}}),e.$on("click",s[21]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Fl(s){let e,l,t,n,o,r;return l=new nt({props:{disabled:!s[7],text:"Compute embedding"}}),l.$on("click",s[22]),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(i,a){D(i,e,a),A(l,e,null),n=!0,o||(r=Fe(t=Me.call(null,e,{text:s[7]?"":"User does not have access to compute embeddings over this dataset."})),o=!0)},p(i,a){const f={};a&128&&(f.disabled=!i[7]),l.$set(f),t&&Le(t.update)&&a&128&&t.update.call(null,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),B(l),o=!1,r()}}}function Ml(s){let e,l;return e=new nt({props:{text:"Preview signal"}}),e.$on("click",s[23]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function zl(s){let e,l,t,n,o,r;return l=new nt({props:{text:"Compute signal",disabled:!s[7]}}),l.$on("click",s[24]),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(i,a){D(i,e,a),A(l,e,null),n=!0,o||(r=Fe(t=Me.call(null,e,{text:s[7]?"":"User does not have access to compute signals over this dataset."})),o=!0)},p(i,a){const f={};a&128&&(f.disabled=!i[7]),l.$set(f),t&&Le(t.update)&&a&128&&t.update.call(null,{text:i[7]?"":"User does not have access to compute signals over this dataset."})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),B(l),o=!1,r()}}}function Pl(s){let e,l,t,n,o,r;return l=new nt({props:{disabled:!s[6],text:"Delete signal"}}),l.$on("click",s[25]),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);q(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(i,a){D(i,e,a),A(l,e,null),n=!0,o||(r=Fe(t=Me.call(null,e,{text:s[6]?"":"User does not have access to delete signals for this dataset."})),o=!0)},p(i,a){const f={};a&64&&(f.disabled=!i[6]),l.$set(f),t&&Le(t.update)&&a&64&&t.update.call(null,{text:i[6]?"":"User does not have access to delete signals for this dataset."})},i(i){n||(h(l.$$.fragment,i),n=!0)},o(i){v(l.$$.fragment,i),n=!1},d(i){i&&m(e),B(l),o=!1,r()}}}function Ri(s){let e=gt(s[0]),l,t=$t(s[0]),n,o,r,i,a,f,c=e&&Tl(s),d=t&&Cl(s),u=!s[2]&&Fl(s),_=!s[2]&&Ml(s),g=!s[2]&&zl(s),b=s[1]&&Pl(s);return{c(){c&&c.c(),l=Y(),d&&d.c(),n=Y(),u&&u.c(),o=Y(),_&&_.c(),r=Y(),g&&g.c(),i=Y(),b&&b.c(),a=ie()},l(w){c&&c.l(w),l=Q(w),d&&d.l(w),n=Q(w),u&&u.l(w),o=Q(w),_&&_.l(w),r=Q(w),g&&g.l(w),i=Q(w),b&&b.l(w),a=ie()},m(w,y){c&&c.m(w,y),D(w,l,y),d&&d.m(w,y),D(w,n,y),u&&u.m(w,y),D(w,o,y),_&&_.m(w,y),D(w,r,y),g&&g.m(w,y),D(w,i,y),b&&b.m(w,y),D(w,a,y),f=!0},p(w,y){y&1&&(e=gt(w[0])),e?c?(c.p(w,y),y&1&&h(c,1)):(c=Tl(w),c.c(),h(c,1),c.m(l.parentNode,l)):c&&(le(),v(c,1,1,()=>{c=null}),ne()),y&1&&(t=$t(w[0])),t?d?(d.p(w,y),y&1&&h(d,1)):(d=Cl(w),d.c(),h(d,1),d.m(n.parentNode,n)):d&&(le(),v(d,1,1,()=>{d=null}),ne()),w[2]?u&&(le(),v(u,1,1,()=>{u=null}),ne()):u?(u.p(w,y),y&4&&h(u,1)):(u=Fl(w),u.c(),h(u,1),u.m(o.parentNode,o)),w[2]?_&&(le(),v(_,1,1,()=>{_=null}),ne()):_?(_.p(w,y),y&4&&h(_,1)):(_=Ml(w),_.c(),h(_,1),_.m(r.parentNode,r)),w[2]?g&&(le(),v(g,1,1,()=>{g=null}),ne()):g?(g.p(w,y),y&4&&h(g,1)):(g=zl(w),g.c(),h(g,1),g.m(i.parentNode,i)),w[1]?b?(b.p(w,y),y&2&&h(b,1)):(b=Pl(w),b.c(),h(b,1),b.m(a.parentNode,a)):b&&(le(),v(b,1,1,()=>{b=null}),ne())},i(w){f||(h(c),h(d),h(u),h(_),h(g),h(b),f=!0)},o(w){v(c),v(d),v(u),v(_),v(g),v(b),f=!1},d(w){c&&c.d(w),w&&m(l),d&&d.d(w),w&&m(n),u&&u.d(w),w&&m(o),_&&_.d(w),w&&m(r),g&&g.d(w),w&&m(i),b&&b.d(w),w&&m(a)}}}function Ai(s){let e,l,t,n=ye(s[0].path)+"",o,r,i,a,f;return{c(){e=S("p"),l=G("Confirm deleting "),t=S("code"),o=G(n),r=G(" ?"),i=Y(),a=S("p"),f=G("This is a permanent action and cannot be undone."),this.h()},l(c){e=E(c,"P",{class:!0});var d=$(e);l=Z(d,"Confirm deleting "),t=E(d,"CODE",{});var u=$(t);o=Z(u,n),u.forEach(m),r=Z(d," ?"),d.forEach(m),i=Q(c),a=E(c,"P",{class:!0});var _=$(a);f=Z(_,"This is a permanent action and cannot be undone."),_.forEach(m),this.h()},h(){I(e,"class","!text-lg"),I(a,"class","mt-2")},m(c,d){D(c,e,d),p(e,l),p(e,t),p(t,o),p(e,r),D(c,i,d),D(c,a,d),p(a,f)},p(c,d){d&1&&n!==(n=ye(c[0].path)+"")&&fe(o,n)},d(c){c&&m(e),c&&m(i),c&&m(a)}}}function Bi(s){let e,l,t,n,o=s[8]&&Nl(s);function r(a){s[26](a)}let i={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:s[9].isLoading?Mt:void 0,secondaryButtonText:"Cancel",$$slots:{default:[Ai]},$$scope:{ctx:s}};return s[3]!==void 0&&(i.open=s[3]),l=new Nt({props:i}),Pe.push(()=>Ue(l,"open",r)),l.$on("click:button--secondary",s[27]),l.$on("open",s[28]),l.$on("close",s[29]),l.$on("submit",s[14]),{c(){o&&o.c(),e=Y(),R(l.$$.fragment)},l(a){o&&o.l(a),e=Q(a),q(l.$$.fragment,a)},m(a,f){o&&o.m(a,f),D(a,e,f),A(l,a,f),n=!0},p(a,[f]){a[8]?o?(o.p(a,f),f&256&&h(o,1)):(o=Nl(a),o.c(),h(o,1),o.m(e.parentNode,e)):o&&(le(),v(o,1,1,()=>{o=null}),ne());const c={};f&512&&(c.primaryButtonIcon=a[9].isLoading?Mt:void 0),f&1073741825&&(c.$$scope={dirty:f,ctx:a}),!t&&f&8&&(t=!0,c.open=a[3],Ye(()=>t=!1)),l.$set(c)},i(a){n||(h(o),h(l.$$.fragment,a),n=!0)},o(a){v(o),v(l.$$.fragment,a),n=!1},d(a){o&&o.d(a),a&&m(e),B(l,a)}}}function qi(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g,{field:b}=e,{schema:w}=e,y=!1;const C=Ae();ge(s,C,H=>l(19,g=H));const T=Qe();ge(s,T,H=>l(18,_=H));const J=Vr();ge(s,J,H=>l(9,d=H));const z=Vt();ge(s,z,H=>l(17,u=H));function j(){d.mutate([t,n,{signal_path:b.path}],{onSuccess:()=>{l(3,y=!1),C.deleteSignal(b.path)}})}const V=()=>C.addSortBy(b.path),M=()=>Ge({command:Ze.EditFilter,namespace:t,datasetName:n,path:b.path}),N=()=>Ge({command:Ze.ComputeEmbedding,namespace:t,datasetName:n,path:b==null?void 0:b.path}),k=()=>Ge({command:Ze.PreviewConcept,namespace:t,datasetName:n,path:b==null?void 0:b.path}),P=()=>Ge({command:Ze.ComputeSignal,namespace:t,datasetName:n,path:b==null?void 0:b.path}),ee=()=>l(3,y=!0);function x(H){y=H,l(3,y)}const K=()=>l(3,y=!1);function F(H){ut.call(this,s,H)}function L(H){ut.call(this,s,H)}return s.$$set=H=>{"field"in H&&l(0,b=H.field),"schema"in H&&l(15,w=H.schema)},s.$$.update=()=>{var H,O,U;s.$$.dirty&524288&&l(5,t=g.namespace),s.$$.dirty&524288&&l(4,n=g.datasetName),s.$$.dirty&32769&&l(2,o=lt(b,w)),s.$$.dirty&1&&l(1,r=_t(b)),s.$$.dirty&262145&&l(16,i=$n(((H=_.selectRowsSchema)==null?void 0:H.data)||null,b.path)),s.$$.dirty&65543&&l(8,a=(gt(b)||$t(b)||!o||r)&&!i),s.$$.dirty&131072&&l(7,f=(O=u.data)==null?void 0:O.access.dataset.compute_signals),s.$$.dirty&131072&&l(6,c=(U=u.data)==null?void 0:U.access.dataset.delete_signals)},[b,r,o,y,n,t,c,f,a,d,C,T,J,z,j,w,i,u,_,g,V,M,N,k,P,ee,x,K,F,L]}class Oi extends $e{constructor(e){super(),ke(this,e,qi,Bi,be,{field:0,schema:15})}}function Rl(s,e,l){const t=s.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const o=`${t[8]/t[1]*100}%`;t[10]=o;const r=Ee(t[8]);return t[11]=r,t}function Al(s){let e,l,t=s[9]+"",n,o,r,i,a,f=s[11]+"",c,d,u,_,g;function b(){return s[6](s[7])}return{c(){e=S("button"),l=S("div"),n=G(t),r=Y(),i=S("div"),a=S("div"),c=G(f),u=Y(),this.h()},l(w){e=E(w,"BUTTON",{class:!0});var y=$(e);l=E(y,"DIV",{title:!0,class:!0});var C=$(l);n=Z(C,t),C.forEach(m),r=Q(y),i=E(y,"DIV",{class:!0});var T=$(i);a=E(T,"DIV",{title:!0,class:!0});var J=$(a);c=Z(J,f),J.forEach(m),T.forEach(m),u=Q(y),y.forEach(m),this.h()},h(){I(l,"title",o=s[9]),I(l,"class","w-48 flex-none truncate px-2"),I(a,"title",d=s[11]),I(a,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),it(a,"width",s[10]),I(i,"class","w-36 border-l border-gray-300 pl-2"),I(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(w,y){D(w,e,y),p(e,l),p(l,n),p(e,r),p(e,i),p(i,a),p(a,c),p(e,u),_||(g=Re(e,"click",b),_=!0)},p(w,y){s=w,y&1&&t!==(t=s[9]+"")&&fe(n,t),y&1&&o!==(o=s[9])&&I(l,"title",o),y&1&&f!==(f=s[11]+"")&&fe(c,f),y&1&&d!==(d=s[11])&&I(a,"title",d),y&3&&it(a,"width",s[10])},d(w){w&&m(e),_=!1,g()}}}function Hi(s){let e,l=s[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=Al(Rl(s,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){I(e,"class","histogram")},m(n,o){D(n,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(n,[o]){if(o&15){l=n[0];let r;for(r=0;r<l.length;r+=1){const i=Rl(n,l,r);t[r]?t[r].p(i,o):(t[r]=Al(i),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},i:X,o:X,d(n){n&&m(e),ze(t,n)}}}function Li(s,e,l){let t,{field:n}=e,{counts:o}=e,{bins:r}=e;function i(c){if(c==null)return Ee(c);if(r==null||n.bins!=null)return Ee(c);const[d,u]=r[c.toString()];return d==null?`< ${Ee(u)}`:u==null?`≥ ${Ee(d)}`:`${Ee(d)} .. ${Ee(u)}`}const a=pt(),f=c=>a("row-click",{value:c});return s.$$set=c=>{"field"in c&&l(4,n=c.field),"counts"in c&&l(0,o=c.counts),"bins"in c&&l(5,r=c.bins)},s.$$.update=()=>{s.$$.dirty&1&&l(1,t=Math.max(...o.map(([c,d])=>d)))},[o,t,i,a,n,r,f]}class ji extends $e{constructor(e){super(),ke(this,e,Li,Hi,be,{field:4,counts:0,bins:5})}}function Ui(s){let e,l,t,n,o,r,i,a,f,c,d,u=Ee(s[4].total_count)+"",_,g,b,w,y,C,T,J,z,j,V,M,N=Ee(s[4].approx_count_distinct)+"",k,P,ee,x,K,F;r=new at({props:{class:"inline"}}),C=new at({props:{class:"inline"}});let L=s[4].avg_text_length&&Bl(s),H=s[4].min_val&&s[4].max_val&&ql(s);return{c(){e=S("table"),l=S("tbody"),t=S("tr"),n=S("td"),o=S("span"),R(r.$$.fragment),i=Y(),a=S("span"),f=G("Total count"),c=Y(),d=S("td"),_=G(u),g=Y(),b=S("tr"),w=S("td"),y=S("span"),R(C.$$.fragment),T=Y(),J=S("span"),z=G("Unique values"),j=Y(),V=S("td"),M=G("~"),k=G(N),P=Y(),L&&L.c(),ee=Y(),H&&H.c(),this.h()},l(O){e=E(O,"TABLE",{class:!0});var U=$(e);l=E(U,"TBODY",{});var de=$(l);t=E(de,"TR",{});var he=$(t);n=E(he,"TD",{class:!0});var re=$(n);o=E(re,"SPAN",{});var De=$(o);q(r.$$.fragment,De),De.forEach(m),i=Q(re),a=E(re,"SPAN",{});var ue=$(a);f=Z(ue,"Total count"),ue.forEach(m),re.forEach(m),c=Q(he),d=E(he,"TD",{class:!0});var se=$(d);_=Z(se,u),se.forEach(m),he.forEach(m),g=Q(de),b=E(de,"TR",{});var ae=$(b);w=E(ae,"TD",{class:!0});var me=$(w);y=E(me,"SPAN",{});var W=$(y);q(C.$$.fragment,W),W.forEach(m),T=Q(me),J=E(me,"SPAN",{});var te=$(J);z=Z(te,"Unique values"),te.forEach(m),me.forEach(m),j=Q(ae),V=E(ae,"TD",{class:!0});var ce=$(V);M=Z(ce,"~"),k=Z(ce,N),ce.forEach(m),ae.forEach(m),P=Q(de),L&&L.l(de),ee=Q(de),H&&H.l(de),de.forEach(m),U.forEach(m),this.h()},h(){I(n,"class","svelte-1tctrjz"),I(d,"class","svelte-1tctrjz"),I(w,"class","svelte-1tctrjz"),I(V,"class","svelte-1tctrjz"),I(e,"class","stats-table w-full svelte-1tctrjz")},m(O,U){D(O,e,U),p(e,l),p(l,t),p(t,n),p(n,o),A(r,o,null),p(n,i),p(n,a),p(a,f),p(t,c),p(t,d),p(d,_),p(l,g),p(l,b),p(b,w),p(w,y),A(C,y,null),p(w,T),p(w,J),p(J,z),p(b,j),p(b,V),p(V,M),p(V,k),p(l,P),L&&L.m(l,null),p(l,ee),H&&H.m(l,null),x=!0,K||(F=[Fe(Me.call(null,o,{text:"Total number of rows where the value is defined."})),Fe(Me.call(null,y,{text:"An approximation of the total number of unique values."}))],K=!0)},p(O,U){(!x||U&16)&&u!==(u=Ee(O[4].total_count)+"")&&fe(_,u),(!x||U&16)&&N!==(N=Ee(O[4].approx_count_distinct)+"")&&fe(k,N),O[4].avg_text_length?L?(L.p(O,U),U&16&&h(L,1)):(L=Bl(O),L.c(),h(L,1),L.m(l,ee)):L&&(le(),v(L,1,1,()=>{L=null}),ne()),O[4].min_val&&O[4].max_val?H?(H.p(O,U),U&16&&h(H,1)):(H=ql(O),H.c(),h(H,1),H.m(l,null)):H&&(le(),v(H,1,1,()=>{H=null}),ne())},i(O){x||(h(r.$$.fragment,O),h(C.$$.fragment,O),h(L),h(H),x=!0)},o(O){v(r.$$.fragment,O),v(C.$$.fragment,O),v(L),v(H),x=!1},d(O){O&&m(e),B(r),B(C),L&&L.d(),H&&H.d(),K=!1,We(F)}}}function Yi(s){let e,l;return e=new je({props:{paragraph:!0,width:"50%"}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Qi(s){let e,l,t=s[2].error.message+"",n;return{c(){e=S("p"),l=G("Error: "),n=G(t)},l(o){e=E(o,"P",{});var r=$(e);l=Z(r,"Error: "),n=Z(r,t),r.forEach(m)},m(o,r){D(o,e,r),p(e,l),p(e,n)},p(o,r){r&4&&t!==(t=o[2].error.message+"")&&fe(n,t)},i:X,o:X,d(o){o&&m(e)}}}function Bl(s){let e,l,t,n,o,r,i,a,f,c=Ee(s[4].avg_text_length)+"",d,u,_,g;return n=new at({props:{class:"inline"}}),{c(){e=S("tr"),l=S("td"),t=S("span"),R(n.$$.fragment),o=Y(),r=S("span"),i=G("Average text length"),a=Y(),f=S("td"),d=G(c),this.h()},l(b){e=E(b,"TR",{});var w=$(e);l=E(w,"TD",{class:!0});var y=$(l);t=E(y,"SPAN",{});var C=$(t);q(n.$$.fragment,C),C.forEach(m),o=Q(y),r=E(y,"SPAN",{});var T=$(r);i=Z(T,"Average text length"),T.forEach(m),y.forEach(m),a=Q(w),f=E(w,"TD",{class:!0});var J=$(f);d=Z(J,c),J.forEach(m),w.forEach(m),this.h()},h(){I(l,"class","svelte-1tctrjz"),I(f,"class","svelte-1tctrjz")},m(b,w){D(b,e,w),p(e,l),p(l,t),A(n,t,null),p(l,o),p(l,r),p(r,i),p(e,a),p(e,f),p(f,d),u=!0,_||(g=Fe(Me.call(null,t,{text:"The average length of the text in characters."})),_=!0)},p(b,w){(!u||w&16)&&c!==(c=Ee(b[4].avg_text_length)+"")&&fe(d,c)},i(b){u||(h(n.$$.fragment,b),u=!0)},o(b){v(n.$$.fragment,b),u=!1},d(b){b&&m(e),B(n),_=!1,g()}}}function ql(s){let e,l,t,n,o,r,i,a,f,c=Ee(s[4].min_val)+"",d,u,_=Ee(s[4].max_val)+"",g,b,w,y;return n=new at({props:{class:"inline"}}),{c(){e=S("tr"),l=S("td"),t=S("span"),R(n.$$.fragment),o=Y(),r=S("span"),i=G("Range"),a=Y(),f=S("td"),d=G(c),u=G(" .. "),g=G(_),this.h()},l(C){e=E(C,"TR",{});var T=$(e);l=E(T,"TD",{class:!0});var J=$(l);t=E(J,"SPAN",{});var z=$(t);q(n.$$.fragment,z),z.forEach(m),o=Q(J),r=E(J,"SPAN",{});var j=$(r);i=Z(j,"Range"),j.forEach(m),J.forEach(m),a=Q(T),f=E(T,"TD",{class:!0});var V=$(f);d=Z(V,c),u=Z(V," .. "),g=Z(V,_),V.forEach(m),T.forEach(m),this.h()},h(){I(l,"class","svelte-1tctrjz"),I(f,"class","svelte-1tctrjz")},m(C,T){D(C,e,T),p(e,l),p(l,t),A(n,t,null),p(l,o),p(l,r),p(r,i),p(e,a),p(e,f),p(f,d),p(f,u),p(f,g),b=!0,w||(y=Fe(Me.call(null,t,{text:"The minimum and maximum value across the dataset"})),w=!0)},p(C,T){(!b||T&16)&&c!==(c=Ee(C[4].min_val)+"")&&fe(d,c),(!b||T&16)&&_!==(_=Ee(C[4].max_val)+"")&&fe(g,_)},i(C){b||(h(n.$$.fragment,C),b=!0)},o(C){v(n.$$.fragment,C),b=!1},d(C){C&&m(e),B(n),w=!1,y()}}}function Ji(s){let e,l,t;return l=new ji({props:{counts:s[5],bins:s[3],field:s[0]}}),l.$on("row-click",s[11]),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);q(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","mt-4")},m(n,o){D(n,e,o),A(l,e,null),t=!0},p(n,o){const r={};o&32&&(r.counts=n[5]),o&8&&(r.bins=n[3]),o&1&&(r.field=n[0]),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function Ki(s){let e,l;return e=new je({props:{paragraph:!0,width:"50%"}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Gi(s){let e,l,t=s[1].error.message+"",n;return{c(){e=S("p"),l=G("Error: "),n=G(t)},l(o){e=E(o,"P",{});var r=$(e);l=Z(r,"Error: "),n=Z(r,t),r.forEach(m)},m(o,r){D(o,e,r),p(e,l),p(e,n)},p(o,r){r&2&&t!==(t=o[1].error.message+"")&&fe(n,t)},i:X,o:X,d(o){o&&m(e)}}}function Zi(s){let e,l,t,n,o,r,i;const a=[Qi,Yi,Ui],f=[];function c(g,b){return g[2].error?0:g[4]==null?1:2}l=c(s),t=f[l]=a[l](s);const d=[Gi,Ki,Ji],u=[];function _(g,b){return g[1].error?0:g[5]==null?1:g[5].length>0?2:-1}return~(o=_(s))&&(r=u[o]=d[o](s)),{c(){e=S("div"),t.c(),n=Y(),r&&r.c(),this.h()},l(g){e=E(g,"DIV",{class:!0});var b=$(e);t.l(b),n=Q(b),r&&r.l(b),b.forEach(m),this.h()},h(){I(e,"class","p-4")},m(g,b){D(g,e,b),f[l].m(e,null),p(e,n),~o&&u[o].m(e,null),i=!0},p(g,[b]){let w=l;l=c(g),l===w?f[l].p(g,b):(le(),v(f[w],1,1,()=>{f[w]=null}),ne(),t=f[l],t?t.p(g,b):(t=f[l]=a[l](g),t.c()),h(t,1),t.m(e,n));let y=o;o=_(g),o===y?~o&&u[o].p(g,b):(r&&(le(),v(u[y],1,1,()=>{u[y]=null}),ne()),~o?(r=u[o],r?r.p(g,b):(r=u[o]=d[o](g),r.c()),h(r,1),r.m(e,null)):r=null)},i(g){i||(h(t),h(r),i=!0)},o(g){v(t),v(r),i=!1},d(g){g&&m(e),f[l].d(),~o&&u[o].d()}}}function Wi(s,e,l){let t,n,o,r,i,a=X,f=()=>(a(),a=Ce(n,T=>l(1,i=T)),n),c,d=X,u=()=>(d(),d=Ce(t,T=>l(2,c=T)),t),_;s.$$.on_destroy.push(()=>a()),s.$$.on_destroy.push(()=>d());let{field:g}=e;const b=Ae();ge(s,b,T=>l(10,_=T));let w=null;function y(T){if(T==null)return;if(w!=null){const[z,j]=w[T.toString()];if(z!=null){const V={path:g.path,op:"greater_equal",value:z};b.addFilter(V)}if(j!=null){const V={path:g.path,op:"less",value:j};b.addFilter(V)}return}const J={path:g.path,op:"equals",value:T};b.addFilter(J)}const C=T=>y(T.detail.value);return s.$$set=T=>{"field"in T&&l(0,g=T.field)},s.$$.update=()=>{var T;if(s.$$.dirty&1025&&u(l(7,t=Nr(_.namespace,_.datasetName,{leaf_path:g.path}))),s.$$.dirty&1025&&f(l(6,n=Tr(_.namespace,_.datasetName,{leaf_path:g.path,filters:_.query.filters}))),s.$$.dirty&2&&l(5,o=i.data!=null?i.data.counts:null),s.$$.dirty&4&&l(4,r=c.data!=null?c.data:null),s.$$.dirty&2)if(((T=i.data)==null?void 0:T.bins)!=null){l(3,w={});for(const[J,z,j]of Object.values(i.data.bins))l(3,w[J]=[z,j],w)}else l(3,w=null)},[g,i,c,w,r,o,n,t,b,y,_,C]}class Xi extends $e{constructor(e){super(),ke(this,e,Wi,Zi,be,{field:0})}}function Ol(s,e,l){const t=s.slice();return t[38]=e[l],t}function Hl(s,e,l){const t=s.slice();return t[41]=e[l],t}function Ll(s,e,l){const t=s.slice();return t[44]=e[l],t}function jl(s,e,l){const t=s.slice();return t[47]=e[l],t}function xi(s){let e,l="{}",t;return{c(){e=S("span"),t=G(l),this.h()},l(n){e=E(n,"SPAN",{class:!0});var o=$(e);t=Z(o,l),o.forEach(m),this.h()},h(){I(e,"class","font-mono")},m(n,o){D(n,e,o),p(e,t)},p:X,i:X,o:X,d(n){n&&m(e)}}}function ea(s){let e,l,t,n;var o=tt[s[1].repeated_field.dtype];function r(i){return{props:{title:i[1].dtype}}}return o&&(l=et(o,r(s))),{c(){e=S("div"),l&&R(l.$$.fragment),t=G("[]"),this.h()},l(i){e=E(i,"DIV",{class:!0});var a=$(e);l&&q(l.$$.fragment,a),t=Z(a,"[]"),a.forEach(m),this.h()},h(){I(e,"class","flex")},m(i,a){D(i,e,a),l&&A(l,e,null),p(e,t),n=!0},p(i,a){const f={};if(a[0]&2&&(f.title=i[1].dtype),a[0]&2&&o!==(o=tt[i[1].repeated_field.dtype])){if(l){le();const c=l;v(c.$$.fragment,1,0,()=>{B(c,1)}),ne()}o?(l=et(o,r(i)),R(l.$$.fragment),h(l.$$.fragment,1),A(l,e,t)):l=null}else o&&l.$set(f)},i(i){n||(l&&h(l.$$.fragment,i),n=!0)},o(i){l&&v(l.$$.fragment,i),n=!1},d(i){i&&m(e),l&&B(l)}}}function ta(s){let e,l,t;var n=tt[s[1].dtype];function o(r){return{props:{title:r[1].dtype}}}return n&&(e=et(n,o(s))),{c(){e&&R(e.$$.fragment),l=ie()},l(r){e&&q(e.$$.fragment,r),l=ie()},m(r,i){e&&A(e,r,i),D(r,l,i),t=!0},p(r,i){const a={};if(i[0]&2&&(a.title=r[1].dtype),i[0]&2&&n!==(n=tt[r[1].dtype])){if(e){le();const f=e;v(f.$$.fragment,1,0,()=>{B(f,1)}),ne()}n?(e=et(n,o(r)),R(e.$$.fragment),h(e.$$.fragment,1),A(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&h(e.$$.fragment,r),t=!0)},o(r){e&&v(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&B(e,r)}}}function Ul(s){let e,l;return e=new Tt({props:{interactive:!0,type:"green",$$slots:{default:[ra]},$$scope:{ctx:s}}}),e.$on("click",s[32]),e.$on("remove",s[33]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&16384|n[1]&524288&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function la(s){let e,l;return e=new Rn({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function na(s){let e,l;return e=new Pn({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ra(s){let e,l,t,n,o,r,i,a;const f=[na,la],c=[];function d(u,_){return u[14]=="ASC"?0:1}return r=d(s),i=c[r]=f[r](s),{c(){e=S("div"),l=S("div"),t=G("Sorted"),n=Y(),o=S("span"),i.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var _=$(e);l=E(_,"DIV",{class:!0});var g=$(l);t=Z(g,"Sorted"),g.forEach(m),n=Q(_),o=E(_,"SPAN",{});var b=$(o);i.l(b),b.forEach(m),_.forEach(m),this.h()},h(){I(l,"class","mr-1"),I(e,"class","flex flex-row")},m(u,_){D(u,e,_),p(e,l),p(l,t),p(e,n),p(e,o),c[r].m(o,null),a=!0},p(u,_){let g=r;r=d(u),r!==g&&(le(),v(c[g],1,1,()=>{c[g]=null}),ne(),i=c[r],i||(i=c[r]=f[r](u),i.c()),h(i,1),i.m(o,null))},i(u){a||(h(i),a=!0)},o(u){v(i),a=!1},d(u){u&&m(e),c[r].d()}}}function Yl(s){let e,l,t=s[7],n=[];for(let r=0;r<t.length;r+=1)n[r]=Ql(jl(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);D(r,e,i),l=!0},p(r,i){if(i[0]&128){t=r[7];let a;for(a=0;a<t.length;a+=1){const f=jl(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=Ql(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Ql(s){let e,l;return e=new An({props:{filter:s[47],hidePath:!0}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.filter=t[47]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Jl(s){let e,l;return e=new Bn({props:{search:s[44]}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&4096&&(o.search=t[44]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Kl(s){var t;let e,l;return e=new Tn({props:{embedding:(t=s[41].signal)==null?void 0:t.signal_name}}),{c(){R(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){A(e,n,o),l=!0},p(n,o){var i;const r={};o[0]&65536&&(r.embedding=(i=n[41].signal)==null?void 0:i.signal_name),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function Gl(s){let e,l,t,n,o,r,i;return l=new Xe({props:{type:"cyan",icon:yt}}),l.$on("click",s[34]),n=new Zr({props:{isPreview:!0}}),n.$on("click",s[35]),{c(){e=S("div"),R(l.$$.fragment),t=Y(),R(n.$$.fragment),this.h()},l(a){e=E(a,"DIV",{class:!0});var f=$(e);q(l.$$.fragment,f),f.forEach(m),t=Q(a),q(n.$$.fragment,a),this.h()},h(){I(e,"class","compute-signal-preview pointer-events-auto")},m(a,f){D(a,e,f),A(l,e,null),D(a,t,f),A(n,a,f),o=!0,r||(i=Fe(Me.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),r=!0)},p:X,i(a){o||(h(l.$$.fragment,a),h(n.$$.fragment,a),o=!0)},o(a){v(l.$$.fragment,a),v(n.$$.fragment,a),o=!1},d(a){a&&m(e),B(l),a&&m(t),B(n,a),r=!1,i()}}}function Zl(s){let e,l,t,n,o,r,i;return t=new Kr({}),{c(){e=S("button"),l=S("div"),R(t.$$.fragment),this.h()},l(a){e=E(a,"BUTTON",{});var f=$(e);l=E(f,"DIV",{class:!0});var c=$(l);q(t.$$.fragment,c),c.forEach(m),f.forEach(m),this.h()},h(){I(l,"class","transition"),Se(l,"rotate-180",s[20]),Se(e,"bg-slate-300",s[20])},m(a,f){D(a,e,f),p(e,l),A(t,l,null),o=!0,r||(i=[Fe(n=Me.call(null,e,{text:s[20]?"Close statistics":"See statistics"})),Re(e,"click",s[36])],r=!0)},p(a,f){(!o||f[0]&1048576)&&Se(l,"rotate-180",a[20]),n&&Le(n.update)&&f[0]&1048576&&n.update.call(null,{text:a[20]?"Close statistics":"See statistics"}),(!o||f[0]&1048576)&&Se(e,"bg-slate-300",a[20])},i(a){o||(h(t.$$.fragment,a),o=!0)},o(a){v(t.$$.fragment,a),o=!1},d(a){a&&m(e),B(t),r=!1,We(i)}}}function Wl(s){let e,l,t,n;return l=new Xi({props:{field:s[1]}}),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(o){e=E(o,"DIV",{class:!0});var r=$(e);q(l.$$.fragment,r),r.forEach(m),this.h()},h(){I(e,"class","px-2")},m(o,r){D(o,e,r),A(l,e,null),n=!0},p(o,r){const i={};r[0]&2&&(i.field=o[1]),l.$set(i)},i(o){n||(h(l.$$.fragment,o),o&&bt(()=>{n&&(t||(t=mt(e,ht,{},!0)),t.run(1))}),n=!0)},o(o){v(l.$$.fragment,o),o&&(t||(t=mt(e,ht,{},!1)),t.run(0)),n=!1},d(o){o&&m(e),B(l),o&&t&&t.end()}}}function Xl(s){let e,l,t=s[18],n=[];for(let r=0;r<t.length;r+=1)n[r]=xl(Ol(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);D(r,e,i),l=!0},p(r,i){if(i[0]&262415){t=r[18];let a;for(a=0;a<t.length;a+=1){const f=Ol(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=xl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function xl(s){let e,l;return e=new qn({props:{schema:s[0],field:s[38],indent:s[3]+1,sourceField:s[8]&&lt(s[38],s[0])?s[1]:s[2]}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&262144&&(o.field=t[38]),n[0]&8&&(o.indent=t[3]+1),n[0]&262407&&(o.sourceField=t[8]&&lt(t[38],t[0])?t[1]:t[2]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function sa(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,T,J,z,j,V,M,N,k,P,ee;n=new kn({props:{labelText:"Show",hideLabel:!0,checked:s[17]}}),n.$on("change",s[30]);const x=[ta,ea,xi],K=[];function F(W,te){return W[1].dtype?0:W[1].repeated_field&&W[1].repeated_field.dtype?1:2}i=F(s),a=K[i]=x[i](s);let L=s[15]&&Ul(s),H=s[13]&&Yl(s),O=s[12],U=[];for(let W=0;W<O.length;W+=1)U[W]=Jl(Ll(s,O,W));const de=W=>v(U[W],1,1,()=>{U[W]=null});let he=s[16],re=[];for(let W=0;W<he.length;W+=1)re[W]=Kl(Hl(s,he,W));const De=W=>v(re[W],1,1,()=>{re[W]=null});let ue=s[4]&&s[21]&&Gl(s),se=s[10]&&Zl(s);z=new Oi({props:{field:s[1],schema:s[0]}});let ae=s[20]&&Wl(s),me=s[18].length&&Xl(s);return{c(){e=S("div"),l=S("div"),t=S("div"),R(n.$$.fragment),o=Y(),r=S("div"),a.c(),c=Y(),d=S("button"),u=G(s[19]),g=Y(),L&&L.c(),b=Y(),H&&H.c(),w=Y();for(let W=0;W<U.length;W+=1)U[W].c();y=Y();for(let W=0;W<re.length;W+=1)re[W].c();C=Y(),ue&&ue.c(),T=Y(),se&&se.c(),J=Y(),R(z.$$.fragment),j=Y(),ae&&ae.c(),V=Y(),M=S("div"),me&&me.c(),this.h()},l(W){e=E(W,"DIV",{class:!0});var te=$(e);l=E(te,"DIV",{class:!0});var ce=$(l);t=E(ce,"DIV",{});var Oe=$(t);q(n.$$.fragment,Oe),Oe.forEach(m),o=Q(ce),r=E(ce,"DIV",{class:!0});var Je=$(r);a.l(Je),Je.forEach(m),c=Q(ce),d=E(ce,"BUTTON",{class:!0});var _e=$(d);u=Z(_e,s[19]),_e.forEach(m),g=Q(ce),L&&L.l(ce),b=Q(ce),H&&H.l(ce),w=Q(ce);for(let Ne=0;Ne<U.length;Ne+=1)U[Ne].l(ce);y=Q(ce);for(let Ne=0;Ne<re.length;Ne+=1)re[Ne].l(ce);C=Q(ce),ue&&ue.l(ce),T=Q(ce),se&&se.l(ce),J=Q(ce),q(z.$$.fragment,ce),ce.forEach(m),j=Q(te),ae&&ae.l(te),V=Q(te),M=E(te,"DIV",{});var oe=$(M);me&&me.l(oe),oe.forEach(m),te.forEach(m),this.h()},h(){it(t,"margin-left",s[3]*1.5+"rem"),I(r,"class","rounded-md bg-blue-200 p-0.5"),Se(r,"bg-blue-200",s[5]),I(d,"class","ml-2 grow cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),d.disabled=_=!s[10],Se(d,"cursor-default",!s[10]),I(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),Se(l,"bg-blue-50",s[5]),Se(l,"bg-emerald-100",s[4]),Se(l,"hover:bg-blue-100",s[5]),I(e,"class","border-gray-300"),Se(e,"border-b",!s[5])},m(W,te){D(W,e,te),p(e,l),p(l,t),A(n,t,null),p(l,o),p(l,r),K[i].m(r,null),p(l,c),p(l,d),p(d,u),p(l,g),L&&L.m(l,null),p(l,b),H&&H.m(l,null),p(l,w);for(let ce=0;ce<U.length;ce+=1)U[ce]&&U[ce].m(l,null);p(l,y);for(let ce=0;ce<re.length;ce+=1)re[ce]&&re[ce].m(l,null);p(l,C),ue&&ue.m(l,null),p(l,T),se&&se.m(l,null),p(l,J),A(z,l,null),p(e,j),ae&&ae.m(e,null),p(e,V),p(e,M),me&&me.m(M,null),k=!0,P||(ee=[Fe(f=Me.call(null,r,{text:s[11]})),Re(d,"click",s[31])],P=!0)},p(W,te){const ce={};te[0]&131072&&(ce.checked=W[17]),n.$set(ce),te[0]&8&&it(t,"margin-left",W[3]*1.5+"rem");let Oe=i;if(i=F(W),i===Oe?K[i].p(W,te):(le(),v(K[Oe],1,1,()=>{K[Oe]=null}),ne(),a=K[i],a?a.p(W,te):(a=K[i]=x[i](W),a.c()),h(a,1),a.m(r,null)),f&&Le(f.update)&&te[0]&2048&&f.update.call(null,{text:W[11]}),(!k||te[0]&32)&&Se(r,"bg-blue-200",W[5]),(!k||te[0]&524288)&&fe(u,W[19]),(!k||te[0]&1024&&_!==(_=!W[10]))&&(d.disabled=_),(!k||te[0]&1024)&&Se(d,"cursor-default",!W[10]),W[15]?L?(L.p(W,te),te[0]&32768&&h(L,1)):(L=Ul(W),L.c(),h(L,1),L.m(l,b)):L&&(le(),v(L,1,1,()=>{L=null}),ne()),W[13]?H?(H.p(W,te),te[0]&8192&&h(H,1)):(H=Yl(W),H.c(),h(H,1),H.m(l,w)):H&&(le(),v(H,1,1,()=>{H=null}),ne()),te[0]&4096){O=W[12];let _e;for(_e=0;_e<O.length;_e+=1){const oe=Ll(W,O,_e);U[_e]?(U[_e].p(oe,te),h(U[_e],1)):(U[_e]=Jl(oe),U[_e].c(),h(U[_e],1),U[_e].m(l,y))}for(le(),_e=O.length;_e<U.length;_e+=1)de(_e);ne()}if(te[0]&65536){he=W[16];let _e;for(_e=0;_e<he.length;_e+=1){const oe=Hl(W,he,_e);re[_e]?(re[_e].p(oe,te),h(re[_e],1)):(re[_e]=Kl(oe),re[_e].c(),h(re[_e],1),re[_e].m(l,C))}for(le(),_e=he.length;_e<re.length;_e+=1)De(_e);ne()}W[4]&&W[21]?ue?(ue.p(W,te),te[0]&2097168&&h(ue,1)):(ue=Gl(W),ue.c(),h(ue,1),ue.m(l,T)):ue&&(le(),v(ue,1,1,()=>{ue=null}),ne()),W[10]?se?(se.p(W,te),te[0]&1024&&h(se,1)):(se=Zl(W),se.c(),h(se,1),se.m(l,J)):se&&(le(),v(se,1,1,()=>{se=null}),ne());const Je={};te[0]&2&&(Je.field=W[1]),te[0]&1&&(Je.schema=W[0]),z.$set(Je),(!k||te[0]&32)&&Se(l,"bg-blue-50",W[5]),(!k||te[0]&16)&&Se(l,"bg-emerald-100",W[4]),(!k||te[0]&32)&&Se(l,"hover:bg-blue-100",W[5]),W[20]?ae?(ae.p(W,te),te[0]&1048576&&h(ae,1)):(ae=Wl(W),ae.c(),h(ae,1),ae.m(e,V)):ae&&(le(),v(ae,1,1,()=>{ae=null}),ne()),W[18].length?me?(me.p(W,te),te[0]&262144&&h(me,1)):(me=Xl(W),me.c(),h(me,1),me.m(M,null)):me&&(le(),v(me,1,1,()=>{me=null}),ne()),(!k||te[0]&32)&&Se(e,"border-b",!W[5])},i(W){if(!k){h(n.$$.fragment,W),h(a),h(L),h(H);for(let te=0;te<O.length;te+=1)h(U[te]);for(let te=0;te<he.length;te+=1)h(re[te]);h(ue),h(se),h(z.$$.fragment,W),h(ae),h(me),W&&bt(()=>{k&&(N||(N=mt(M,ht,{},!0)),N.run(1))}),k=!0}},o(W){v(n.$$.fragment,W),v(a),v(L),v(H),U=U.filter(Boolean);for(let te=0;te<U.length;te+=1)v(U[te]);re=re.filter(Boolean);for(let te=0;te<re.length;te+=1)v(re[te]);v(ue),v(se),v(z.$$.fragment,W),v(ae),v(me),W&&(N||(N=mt(M,ht,{},!1)),N.run(0)),k=!1},d(W){W&&m(e),B(n),K[i].d(),L&&L.d(),H&&H.d(),ze(U,W),ze(re,W),ue&&ue.d(),se&&se.d(),B(z),ae&&ae.d(),me&&me.d(),W&&N&&N.end(),P=!1,We(ee)}}}function ia(s,e,l){let t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,T,J,z,j,V,M,N,{schema:k}=e,{field:P}=e,{sourceField:ee=void 0}=e,{indent:x=0}=e;const K=In();ge(s,K,se=>l(22,N=se));const F=Ae();ge(s,F,se=>l(9,V=se));const L=Qe();ge(s,L,se=>l(29,M=se));function H(se){return se!=null&&se.repeated_field?H(se.repeated_field):se!=null&&se.fields?[...Object.values(se.fields).filter(ae=>ae.path.at(-1)!==Cr)].flatMap(ae=>{const me=H(ae);return me.some(W=>_t(W))?me:[ae]}).filter(ae=>{var me,W,te,ce;return!(ae.dtype==="embedding"||ae.signal!=null&&st(ae).some(Oe=>Oe.dtype==="embedding")||((me=ae.signal)==null?void 0:me.signal_name)==="sentences"||((W=ae.signal)==null?void 0:W.signal_name)==="substring_search"||((te=ae.signal)==null?void 0:te.signal_name)==="semantic_similarity"||((ce=ae.signal)==null?void 0:ce.signal_name)==="concept_labels")}):[]}const O=()=>{d?F.removeSelectedColumn(r):F.addSelectedColumn(r)},U=()=>{j&&(i?F.removeExpandedColumn(r):F.addExpandedColumn(r))},de=()=>g==="ASC"?dt(F,V.query.sort_order="DESC",V):dt(F,V.query.sort_order="ASC",V),he=()=>F.removeSortBy(r),re=()=>P.signal&&y&&ee&&N.mutate([V.namespace,V.datasetName,{leaf_path:ee.path,signal:P.signal}]),De=()=>{var se;return P.signal&&y&&Ge({command:Ze.EditPreviewConcept,namespace:V.namespace,datasetName:V.datasetName,path:ee==null?void 0:ee.path,signalName:(se=P.signal)==null?void 0:se.signal_name,value:P.signal})},ue=()=>{i?F.removeExpandedColumn(r):F.addExpandedColumn(r)};return s.$$set=se=>{"schema"in se&&l(0,k=se.schema),"field"in se&&l(1,P=se.field),"sourceField"in se&&l(2,ee=se.sourceField),"indent"in se&&l(3,x=se.indent)},s.$$.update=()=>{var se,ae,me,W;s.$$.dirty[0]&3&&l(5,t=lt(P,k)),s.$$.dirty[0]&2&&l(21,n=_t(P)),s.$$.dirty[0]&32&&l(8,o=!t),s.$$.dirty[0]&2&&l(6,r=P.path),s.$$.dirty[0]&576&&l(20,i=V.expandedColumns[ye(r)]||!1),s.$$.dirty[0]&64&&l(28,a=r.at(-1)===kt),s.$$.dirty[0]&268435520&&l(19,f=a?r.at(-2):r.at(-1)),s.$$.dirty[0]&2&&l(18,c=H(P)),s.$$.dirty[0]&536870976&&l(17,d=(se=M.visibleFields)==null?void 0:se.some(te=>Ke(te.path,r))),s.$$.dirty[0]&258&&l(16,u=o?st(P).filter(te=>te.signal!=null&&st(te).some(ce=>ce.dtype==="embedding")):[]),s.$$.dirty[0]&576&&l(15,_=(ae=V.query.sort_by)==null?void 0:ae.some(te=>Ke(te,r))),s.$$.dirty[0]&512&&l(14,g=V.query.sort_order),s.$$.dirty[0]&576&&l(7,b=((me=V.query.filters)==null?void 0:me.filter(te=>Ke(te.path,r)))||[]),s.$$.dirty[0]&128&&l(13,w=b.length>0),s.$$.dirty[0]&536870976&&l(4,y=$n(((W=M.selectRowsSchema)==null?void 0:W.data)||null,r)),s.$$.dirty[0]&576&&l(12,C=St(V,r)),s.$$.dirty[0]&32&&l(26,T=t?". Generated by a signal":""),s.$$.dirty[0]&2&&l(27,J=P.dtype??(P.repeated_field&&P.repeated_field.dtype?`${P.repeated_field.dtype}[]`:"object")),s.$$.dirty[0]&201326592&&l(11,z=`${J}${T}`),s.$$.dirty[0]&18&&l(10,j=gt(P)&&!y)},[k,P,ee,x,y,t,r,b,o,V,j,z,C,w,g,_,u,d,c,f,i,n,N,K,F,L,T,J,a,M,O,U,de,he,re,De,ue]}class qn extends $e{constructor(e){super(),ke(this,e,ia,sa,be,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function en(s,e,l){const t=s.slice();return t[3]=e[l],t}function aa(s){let e,l,t,n;return e=new zt({props:{label:"Schema",class:"w-1/3"}}),t=new zt({props:{label:"Query",class:"w-1/3"}}),{c(){R(e.$$.fragment),l=Y(),R(t.$$.fragment)},l(o){q(e.$$.fragment,o),l=Q(o),q(t.$$.fragment,o)},m(o,r){A(e,o,r),D(o,l,r),A(t,o,r),n=!0},p:X,i(o){n||(h(e.$$.fragment,o),h(t.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),v(t.$$.fragment,o),n=!1},d(o){B(e,o),o&&m(l),B(t,o)}}}function oa(s){let e=[],l=new Map,t,n,o=Object.keys(s[0].data.schema.fields);const r=i=>i[3];for(let i=0;i<o.length;i+=1){let a=en(s,o,i),f=r(a);l.set(f,e[i]=tn(f,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();t=ie()},l(i){for(let a=0;a<e.length;a+=1)e[a].l(i);t=ie()},m(i,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(i,a);D(i,t,a),n=!0},p(i,a){a&1&&(o=Object.keys(i[0].data.schema.fields),le(),e=gn(e,a,r,1,i,o,l,t.parentNode,pn,tn,t,en),ne())},i(i){if(!n){for(let a=0;a<o.length;a+=1)h(e[a]);n=!0}},o(i){for(let a=0;a<e.length;a+=1)v(e[a]);n=!1},d(i){for(let a=0;a<e.length;a+=1)e[a].d(i);i&&m(t)}}}function fa(s){let e,l;return e=new je({props:{paragraph:!0,lines:3}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function tn(s,e){let l,t,n;return t=new qn({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:s,first:null,c(){l=ie(),R(t.$$.fragment),this.h()},l(o){l=ie(),q(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,r){D(o,l,r),A(t,o,r),n=!0},p(o,r){e=o;const i={};r&1&&(i.schema=e[0].data.schema),r&1&&(i.field=e[0].data.schema.fields[e[3]]),t.$set(i)},i(o){n||(h(t.$$.fragment,o),n=!0)},o(o){v(t.$$.fragment,o),n=!1},d(o){o&&m(l),B(t,o)}}}function ca(s){let e,l,t,n;const o=[fa,oa],r=[];function i(a,f){var c,d;return(c=a[0])!=null&&c.isLoading?0:(d=a[0])!=null&&d.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(e=i(s))&&(l=r[e]=o[e](s)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),D(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?~e&&r[e].p(a,f):(l&&(le(),v(r[c],1,1,()=>{r[c]=null}),ne()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function ua(s){let e,l;return e=new Pi({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function da(s){let e,l,t,n,o;return l=new Pt({props:{$$slots:{default:[ca]},$$scope:{ctx:s}}}),n=new Pt({props:{$$slots:{default:[ua]},$$scope:{ctx:s}}}),{c(){e=S("div"),R(l.$$.fragment),t=Y(),R(n.$$.fragment),this.h()},l(r){e=E(r,"DIV",{class:!0,slot:!0});var i=$(e);q(l.$$.fragment,i),t=Q(i),q(n.$$.fragment,i),i.forEach(m),this.h()},h(){I(e,"class","h-full overflow-y-auto"),I(e,"slot","content")},m(r,i){D(r,e,i),A(l,e,null),p(e,t),A(n,e,null),o=!0},p(r,i){const a={};i&65&&(a.$$scope={dirty:i,ctx:r}),l.$set(a);const f={};i&64&&(f.$$scope={dirty:i,ctx:r}),n.$set(f)},i(r){o||(h(l.$$.fragment,r),h(n.$$.fragment,r),o=!0)},o(r){v(l.$$.fragment,r),v(n.$$.fragment,r),o=!1},d(r){r&&m(e),B(l),B(n)}}}function ma(s){let e,l,t;return l=new Wr({props:{class:"overflow-hidden border-b border-gray-200",$$slots:{content:[da],default:[aa]},$$scope:{ctx:s}}}),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{class:!0});var o=$(e);q(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","schema flex h-full flex-col pt-4")},m(n,o){D(n,e,o),A(l,e,null),t=!0},p(n,[o]){const r={};o&65&&(r.$$scope={dirty:o,ctx:n}),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function ha(s,e,l){let t,n;const o=Qe();return ge(s,o,r=>l(2,n=r)),s.$$.update=()=>{s.$$.dirty&4&&l(0,t=n.selectRowsSchema)},[t,o,n]}class _a extends $e{constructor(e){super(),ke(this,e,ha,ma,be,{})}}function ln(s,e,l){const t=s.slice();return t[5]=e[l],t}function ga(s){let e,l="{}",t;return{c(){e=S("span"),t=G(l),this.h()},l(n){e=E(n,"SPAN",{class:!0});var o=$(e);t=Z(o,l),o.forEach(m),this.h()},h(){I(e,"class","font-mono")},m(n,o){D(n,e,o),p(e,t)},p:X,i:X,o:X,d(n){n&&m(e)}}}function pa(s){let e,l,t;var n=tt[s[5].dtype];function o(r){return{props:{title:r[5].dtype}}}return n&&(e=et(n,o(s))),{c(){e&&R(e.$$.fragment),l=ie()},l(r){e&&q(e.$$.fragment,r),l=ie()},m(r,i){e&&A(e,r,i),D(r,l,i),t=!0},p(r,i){const a={};if(i&2&&(a.title=r[5].dtype),i&2&&n!==(n=tt[r[5].dtype])){if(e){le();const f=e;v(f.$$.fragment,1,0,()=>{B(f,1)}),ne()}n?(e=et(n,o(r)),R(e.$$.fragment),h(e.$$.fragment,1),A(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&h(e.$$.fragment,r),t=!0)},o(r){e&&v(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&B(e,r)}}}function nn(s){let e;return{c(){e=G("[]")},l(l){e=Z(l,"[]")},m(l,t){D(l,e,t)},d(l){l&&m(e)}}}function rn(s){let e,l,t,n,o,r,i,a,f,c=s[5].path.indexOf(kt)>=0,d,u,_=ye(s[5].path)+"",g,b,w;function y(...V){return s[3](s[5],...V)}function C(...V){return s[4](s[5],...V)}t=new kn({props:{labelText:"Download",hideLabel:!0,checked:s[0].find(y)!=null}}),t.$on("change",C);const T=[pa,ga],J=[];function z(V,M){return V[5].dtype?0:1}i=z(s),a=J[i]=T[i](s);let j=c&&nn();return{c(){e=S("div"),l=S("div"),R(t.$$.fragment),n=Y(),o=S("div"),r=S("div"),a.c(),f=Y(),j&&j.c(),d=Y(),u=S("div"),g=G(_),b=Y(),this.h()},l(V){e=E(V,"DIV",{class:!0});var M=$(e);l=E(M,"DIV",{class:!0});var N=$(l);q(t.$$.fragment,N),N.forEach(m),n=Q(M),o=E(M,"DIV",{class:!0});var k=$(o);r=E(k,"DIV",{class:!0});var P=$(r);a.l(P),f=Q(P),j&&j.l(P),P.forEach(m),k.forEach(m),d=Q(M),u=E(M,"DIV",{class:!0});var ee=$(u);g=Z(ee,_),ee.forEach(m),b=Q(M),M.forEach(m),this.h()},h(){I(l,"class","mr-2"),I(r,"class","inline-flex items-center rounded-md bg-blue-200 p-0.5"),I(o,"class","flex w-10"),I(u,"class","flex-grow"),I(e,"class","flex items-center")},m(V,M){D(V,e,M),p(e,l),A(t,l,null),p(e,n),p(e,o),p(o,r),J[i].m(r,null),p(r,f),j&&j.m(r,null),p(e,d),p(e,u),p(u,g),p(e,b),w=!0},p(V,M){s=V;const N={};M&3&&(N.checked=s[0].find(y)!=null),t.$set(N);let k=i;i=z(s),i===k?J[i].p(s,M):(le(),v(J[k],1,1,()=>{J[k]=null}),ne(),a=J[i],a?a.p(s,M):(a=J[i]=T[i](s),a.c()),h(a,1),a.m(r,f)),M&2&&(c=s[5].path.indexOf(kt)>=0),c?j||(j=nn(),j.c(),j.m(r,null)):j&&(j.d(1),j=null),(!w||M&2)&&_!==(_=ye(s[5].path)+"")&&fe(g,_)},i(V){w||(h(t.$$.fragment,V),h(a),w=!0)},o(V){v(t.$$.fragment,V),v(a),w=!1},d(V){V&&m(e),B(t),J[i].d(),j&&j.d()}}}function ba(s){let e,l,t=s[1],n=[];for(let r=0;r<t.length;r+=1)n[r]=rn(ln(s,t,r));const o=r=>v(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=ie()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);D(r,e,i),l=!0},p(r,[i]){if(i&7){t=r[1];let a;for(a=0;a<t.length;a+=1){const f=ln(r,t,a);n[a]?(n[a].p(f,i),h(n[a],1)):(n[a]=rn(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)h(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)v(n[i]);l=!1},d(r){ze(n,r),r&&m(e)}}}function va(s,e,l){let{fields:t}=e,{checkedFields:n}=e;function o(a,f){f.target.checked?(n.push(a),l(0,n)):l(0,n=n.filter(d=>d!==a))}const r=(a,f)=>Ke(f.path,a.path),i=(a,f)=>o(a,f);return s.$$set=a=>{"fields"in a&&l(1,t=a.fields),"checkedFields"in a&&l(0,n=a.checkedFields)},[n,t,o,r,i]}class wt extends $e{constructor(e){super(),ke(this,e,va,ba,be,{fields:1,checkedFields:0})}}function sn(s,e,l){const t=s.slice();return t[29]=e[l],t}function wa(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,T,J,z,j,V,M,N,k,P,ee;function x(F){s[23](F)}let K={invalid:s[8]!=s[9]};return s[8]!==void 0&&(K.value=s[8]),T=new jr({props:K}),Pe.push(()=>Ue(T,"value",x)),M=new Qr({}),{c(){e=S("div"),l=S("section"),t=S("div"),n=G("Delete this dataset"),o=Y(),r=S("div"),i=S("p"),a=G("This action cannot be undone."),f=Y(),c=S("p"),d=G(`This will permanently delete the
                  `),u=S("span"),_=G(s[9]),g=G(` dataset and all its files. Please type
                  `),b=S("span"),w=G(s[9]),y=G(" to confirm."),C=Y(),R(T.$$.fragment),z=Y(),j=S("button"),V=G(`I understand, delete this dataset
                `),R(M.$$.fragment),this.h()},l(F){e=E(F,"DIV",{class:!0});var L=$(e);l=E(L,"SECTION",{class:!0});var H=$(l);t=E(H,"DIV",{class:!0});var O=$(t);n=Z(O,"Delete this dataset"),O.forEach(m),o=Q(H),r=E(H,"DIV",{class:!0});var U=$(r);i=E(U,"P",{class:!0});var de=$(i);a=Z(de,"This action cannot be undone."),de.forEach(m),f=Q(U),c=E(U,"P",{});var he=$(c);d=Z(he,`This will permanently delete the
                  `),u=E(he,"SPAN",{class:!0});var re=$(u);_=Z(re,s[9]),re.forEach(m),g=Z(he,` dataset and all its files. Please type
                  `),b=E(he,"SPAN",{class:!0});var De=$(b);w=Z(De,s[9]),De.forEach(m),y=Z(he," to confirm."),he.forEach(m),U.forEach(m),C=Q(H),q(T.$$.fragment,H),z=Q(H),j=E(H,"BUTTON",{class:!0});var ue=$(j);V=Z(ue,`I understand, delete this dataset
                `),q(M.$$.fragment,ue),ue.forEach(m),H.forEach(m),L.forEach(m),this.h()},h(){I(t,"class","text-lg text-gray-700"),I(i,"class","mb-2"),I(u,"class","font-bold"),I(b,"class","font-bold"),I(r,"class","mb-4 text-sm text-gray-500"),I(j,"class","flex cursor-pointer flex-row justify-between p-4 text-left hover:bg-gray-200"),j.disabled=N=s[8]!=s[9],Se(j,"cursor-not-allowed",s[8]!=s[9]),I(l,"class","flex flex-col gap-y-1"),I(e,"class","flex flex-col gap-y-6")},m(F,L){D(F,e,L),p(e,l),p(l,t),p(t,n),p(l,o),p(l,r),p(r,i),p(i,a),p(r,f),p(r,c),p(c,d),p(c,u),p(u,_),p(c,g),p(c,b),p(b,w),p(c,y),p(l,C),A(T,l,null),p(l,z),p(l,j),p(j,V),A(M,j,null),k=!0,P||(ee=Re(j,"click",s[24]),P=!0)},p(F,L){(!k||L[0]&512)&&fe(_,F[9]),(!k||L[0]&512)&&fe(w,F[9]);const H={};L[0]&768&&(H.invalid=F[8]!=F[9]),!J&&L[0]&256&&(J=!0,H.value=F[8],Ye(()=>J=!1)),T.$set(H),(!k||L[0]&768&&N!==(N=F[8]!=F[9]))&&(j.disabled=N),(!k||L[0]&768)&&Se(j,"cursor-not-allowed",F[8]!=F[9])},i(F){k||(h(T.$$.fragment,F),h(M.$$.fragment,F),k=!0)},o(F){v(T.$$.fragment,F),v(M.$$.fragment,F),k=!1},d(F){F&&m(e),B(T),B(M),P=!1,ee()}}}function $a(s){let e,l,t,n;const o=[ya,ka],r=[];function i(a,f){return a[6].isFetching?0:1}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),D(a,t,f),n=!0},p(a,f){let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function ka(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,T,J,z,j,V,M,N,k=s[3]!=null&&an(s);const P=[Ea,Sa],ee=[];function x(F,L){return F[11].isFetching?0:1}C=x(s),T=ee[C]=P[C](s);let K=s[3]!=null&&s[4]!=null&&fn(s);return{c(){e=S("div"),l=S("section"),t=S("div"),n=G("Media fields"),o=Y(),r=S("div"),i=G("These fields will be presented differently from the rest of the metadata fields."),a=Y(),k&&k.c(),f=Y(),c=S("section"),d=S("div"),u=G("Preferred embedding"),_=Y(),g=S("div"),b=G("This embedding will be used by default when indexing and querying the data."),w=Y(),y=S("div"),T.c(),J=Y(),z=S("section"),j=S("div"),V=G("Render as markdown"),M=Y(),K&&K.c(),this.h()},l(F){e=E(F,"DIV",{class:!0});var L=$(e);l=E(L,"SECTION",{class:!0});var H=$(l);t=E(H,"DIV",{class:!0});var O=$(t);n=Z(O,"Media fields"),O.forEach(m),o=Q(H),r=E(H,"DIV",{class:!0});var U=$(r);i=Z(U,"These fields will be presented differently from the rest of the metadata fields."),U.forEach(m),a=Q(H),k&&k.l(H),H.forEach(m),f=Q(L),c=E(L,"SECTION",{class:!0});var de=$(c);d=E(de,"DIV",{class:!0});var he=$(d);u=Z(he,"Preferred embedding"),he.forEach(m),_=Q(de),g=E(de,"DIV",{class:!0});var re=$(g);b=Z(re,"This embedding will be used by default when indexing and querying the data."),re.forEach(m),w=Q(de),y=E(de,"DIV",{class:!0});var De=$(y);T.l(De),De.forEach(m),de.forEach(m),J=Q(L),z=E(L,"SECTION",{class:!0});var ue=$(z);j=E(ue,"DIV",{class:!0});var se=$(j);V=Z(se,"Render as markdown"),se.forEach(m),M=Q(ue),K&&K.l(ue),ue.forEach(m),L.forEach(m),this.h()},h(){I(t,"class","text-lg text-gray-700"),I(r,"class","text-sm text-gray-500"),I(l,"class","flex flex-col gap-y-1"),I(d,"class","text-lg text-gray-700"),I(g,"class","text-sm text-gray-500"),I(y,"class","w-60"),I(c,"class","flex flex-col gap-y-1"),I(j,"class","text-lg text-gray-700"),I(z,"class","flex flex-col gap-y-1"),I(e,"class","flex flex-col gap-y-6")},m(F,L){D(F,e,L),p(e,l),p(l,t),p(t,n),p(l,o),p(l,r),p(r,i),p(l,a),k&&k.m(l,null),p(e,f),p(e,c),p(c,d),p(d,u),p(c,_),p(c,g),p(g,b),p(c,w),p(c,y),ee[C].m(y,null),p(e,J),p(e,z),p(z,j),p(j,V),p(z,M),K&&K.m(z,null),N=!0},p(F,L){F[3]!=null?k?(k.p(F,L),L[0]&8&&h(k,1)):(k=an(F),k.c(),h(k,1),k.m(l,null)):k&&(le(),v(k,1,1,()=>{k=null}),ne());let H=C;C=x(F),C===H?ee[C].p(F,L):(le(),v(ee[H],1,1,()=>{ee[H]=null}),ne(),T=ee[C],T?T.p(F,L):(T=ee[C]=P[C](F),T.c()),h(T,1),T.m(y,null)),F[3]!=null&&F[4]!=null?K?(K.p(F,L),L[0]&24&&h(K,1)):(K=fn(F),K.c(),h(K,1),K.m(z,null)):K&&(le(),v(K,1,1,()=>{K=null}),ne())},i(F){N||(h(k),h(T),h(K),N=!0)},o(F){v(k),v(T),v(K),N=!1},d(F){F&&m(e),k&&k.d(),ee[C].d(),K&&K.d()}}}function ya(s){let e,l;return e=new je({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function an(s){let e,l,t;function n(r){s[21](r)}let o={fields:s[5]};return s[3]!==void 0&&(o.checkedFields=s[3]),e=new wt({props:o}),Pe.push(()=>Ue(e,"checkedFields",n)),{c(){R(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){A(e,r,i),t=!0},p(r,i){const a={};i[0]&32&&(a.fields=r[5]),!l&&i[0]&8&&(l=!0,a.checkedFields=r[3],Ye(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Sa(s){var t;let e,l;return e=new vt({props:{selected:(t=s[6].data)==null?void 0:t.preferred_embedding,$$slots:{default:[Da]},$$scope:{ctx:s}}}),e.$on("change",s[16]),{c(){R(e.$$.fragment)},l(n){q(e.$$.fragment,n)},m(n,o){A(e,n,o),l=!0},p(n,o){var i;const r={};o[0]&64&&(r.selected=(i=n[6].data)==null?void 0:i.preferred_embedding),o[0]&2048|o[1]&2&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){v(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function Ea(s){let e,l;return e=new Xr({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function on(s){let e,l;return e=new ft({props:{value:s[29].name}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&2048&&(o.value=t[29].name),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Da(s){let e,l,t,n;e=new ft({props:{value:void 0,text:"None"}});let o=s[11].data||[],r=[];for(let a=0;a<o.length;a+=1)r[a]=on(sn(s,o,a));const i=a=>v(r[a],1,1,()=>{r[a]=null});return{c(){R(e.$$.fragment),l=Y();for(let a=0;a<r.length;a+=1)r[a].c();t=ie()},l(a){q(e.$$.fragment,a),l=Q(a);for(let f=0;f<r.length;f+=1)r[f].l(a);t=ie()},m(a,f){A(e,a,f),D(a,l,f);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,f);D(a,t,f),n=!0},p(a,f){if(f[0]&2048){o=a[11].data||[];let c;for(c=0;c<o.length;c+=1){const d=sn(a,o,c);r[c]?(r[c].p(d,f),h(r[c],1)):(r[c]=on(d),r[c].c(),h(r[c],1),r[c].m(t.parentNode,t))}for(le(),c=o.length;c<r.length;c+=1)i(c);ne()}},i(a){if(!n){h(e.$$.fragment,a);for(let f=0;f<o.length;f+=1)h(r[f]);n=!0}},o(a){v(e.$$.fragment,a),r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)v(r[f]);n=!1},d(a){B(e,a),a&&m(l),ze(r,a),a&&m(t)}}}function fn(s){let e,l,t;function n(r){s[22](r)}let o={fields:s[3]};return s[4]!==void 0&&(o.checkedFields=s[4]),e=new wt({props:o}),Pe.push(()=>Ue(e,"checkedFields",n)),{c(){R(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){A(e,r,i),t=!0},p(r,i){const a={};i[0]&8&&(a.fields=r[3]),!l&&i[0]&16&&(l=!0,a.checkedFields=r[4],Ye(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Ia(s){let e,l,t,n,o,r,i,a;t=new dr({props:{items:[{title:"Fields",value:"fields"},{title:"Administration",value:"administration"}],item:s[7]}}),t.$on("select",s[20]);const f=[$a,wa],c=[];function d(u,_){return u[7]==="fields"?0:u[7]==="administration"?1:-1}return~(r=d(s))&&(i=c[r]=f[r](s)),{c(){e=S("div"),l=S("div"),R(t.$$.fragment),n=Y(),o=S("div"),i&&i.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var _=$(e);l=E(_,"DIV",{class:!0});var g=$(l);q(t.$$.fragment,g),g.forEach(m),n=Q(_),o=E(_,"DIV",{class:!0});var b=$(o);i&&i.l(b),b.forEach(m),_.forEach(m),this.h()},h(){I(l,"class","-ml-4 mr-4 w-96 grow-0"),I(o,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),I(e,"class","flex flex-row")},m(u,_){D(u,e,_),p(e,l),A(t,l,null),p(e,n),p(e,o),~r&&c[r].m(o,null),a=!0},p(u,_){const g={};_[0]&128&&(g.item=u[7]),t.$set(g);let b=r;r=d(u),r===b?~r&&c[r].p(u,_):(i&&(le(),v(c[b],1,1,()=>{c[b]=null}),ne()),~r?(i=c[r],i?i.p(u,_):(i=c[r]=f[r](u),i.c()),h(i,1),i.m(o,null)):i=null)},i(u){a||(h(t.$$.fragment,u),h(i),a=!0)},o(u){v(t.$$.fragment,u),v(i),a=!1},d(u){u&&m(e),B(t),~r&&c[r].d()}}}function Va(s){let e,l,t,n,o,r;return e=new Sn({props:{label:"Changes",title:"Dataset settings"}}),t=new En({props:{hasForm:!0,$$slots:{default:[Ia]},$$scope:{ctx:s}}}),o=new Dn({props:{primaryButtonText:"Save",secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",close),{c(){R(e.$$.fragment),l=Y(),R(t.$$.fragment),n=Y(),R(o.$$.fragment)},l(i){q(e.$$.fragment,i),l=Q(i),q(t.$$.fragment,i),n=Q(i),q(o.$$.fragment,i)},m(i,a){A(e,i,a),D(i,l,a),A(t,i,a),D(i,n,a),A(o,i,a),r=!0},p(i,a){const f={};a[0]&7166|a[1]&2&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){r||(h(e.$$.fragment,i),h(t.$$.fragment,i),h(o.$$.fragment,i),r=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),v(o.$$.fragment,i),r=!1},d(i){B(e,i),i&&m(l),B(t,i),i&&m(n),B(o,i)}}}function Na(s){let e,l;return e=new yn({props:{open:s[0],$$slots:{default:[Va]},$$scope:{ctx:s}}}),e.$on("submit",s[17]),e.$on("close",s[25]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.open=t[0]),n[0]&7166|n[1]&2&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ta(s,e,l){let t,n,o,r,i,a=X,f=()=>(a(),a=Ce(t,O=>l(6,i=O)),t),c,d,u;s.$$.on_destroy.push(()=>a());let{namespace:_}=e,{name:g}=e,{open:b=!1}=e,{schema:w}=e;const y=Mn();ge(s,y,O=>l(28,c=O));const C=Fn();ge(s,C,O=>l(11,d=O));const T=Fr();ge(s,T,O=>l(27,r=O));let J="fields",z=null,j=null,V=c.embedding;function M(O){V=O.target.value,V===""&&(V=void 0)}function N(){if(z==null)return;const O={ui:{media_paths:z.map(U=>U.path),markdown_paths:j==null?void 0:j.map(U=>U.path)},preferred_embedding:V};r.mutate([_,g,O],{onSuccess:()=>{l(0,b=!1)}})}let k="";const P=Mr();ge(s,P,O=>l(12,u=O));const ee=O=>l(7,J=O.detail);function x(O){z=O,l(3,z),l(6,i),l(5,o),l(19,w)}function K(O){j=O,l(4,j),l(6,i),l(5,o),l(19,w)}function F(O){k=O,l(8,k)}const L=()=>u.mutate([_,g],{onSuccess:()=>bn("/")}),H=()=>l(0,b=!1);return s.$$set=O=>{"namespace"in O&&l(1,_=O.namespace),"name"in O&&l(2,g=O.name),"open"in O&&l(0,b=O.open),"schema"in O&&l(19,w=O.schema)},s.$$.update=()=>{var O,U,de,he;if(s.$$.dirty[0]&6&&f(l(10,t=ot(_,g))),s.$$.dirty[0]&6&&l(9,n=Lr(_,g)),s.$$.dirty[0]&524288&&l(5,o=Dt(w).filter(re=>re.dtype==="string"&&!Ke(re.path,[Vn])&&!lt(re,w))),s.$$.dirty[0]&104&&z==null){const re=(U=(O=i.data)==null?void 0:O.ui)==null?void 0:U.media_paths;re!=null&&l(3,z=o.filter(De=>re.some(ue=>Ke(De.path,ue))))}if(s.$$.dirty[0]&112&&j==null){const re=(he=(de=i.data)==null?void 0:de.ui)==null?void 0:he.markdown_paths;re!=null&&l(4,j=o.filter(De=>re.some(ue=>Ke(De.path,ue))))}},[b,_,g,z,j,o,i,J,k,n,t,d,u,y,C,T,M,N,P,w,ee,x,K,F,L,H]}class Ca extends $e{constructor(e){super(),ke(this,e,Ta,Na,be,{namespace:1,name:2,open:0,schema:19},null,[-1,-1])}}function Fa(s){let e,l,t;function n(r){s[13](r)}let o={fields:s[6]};return s[1]!==void 0&&(o.checkedFields=s[1]),e=new wt({props:o}),Pe.push(()=>Ue(e,"checkedFields",n)),{c(){R(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){A(e,r,i),t=!0},p(r,i){const a={};i&64&&(a.fields=r[6]),!l&&i&2&&(l=!0,a.checkedFields=r[1],Ye(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Ma(s){let e,l;return e=new je({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function cn(s){let e,l,t,n,o,r,i;const a=[Pa,za],f=[];function c(d,u){return d[5]==null?0:1}return o=c(s),r=f[o]=a[o](s),{c(){e=S("section"),l=S("h4"),t=G("Select enriched fields"),n=Y(),r.c(),this.h()},l(d){e=E(d,"SECTION",{});var u=$(e);l=E(u,"H4",{class:!0});var _=$(l);t=Z(_,"Select enriched fields"),_.forEach(m),n=Q(u),r.l(u),u.forEach(m),this.h()},h(){I(l,"class","svelte-1ge817j")},m(d,u){D(d,e,u),p(e,l),p(l,t),p(e,n),f[o].m(e,null),i=!0},p(d,u){let _=o;o=c(d),o===_?f[o].p(d,u):(le(),v(f[_],1,1,()=>{f[_]=null}),ne(),r=f[o],r?r.p(d,u):(r=f[o]=a[o](d),r.c()),h(r,1),r.m(e,null))},i(d){i||(h(r),i=!0)},o(d){v(r),i=!1},d(d){d&&m(e),f[o].d()}}}function za(s){let e,l,t;function n(r){s[14](r)}let o={fields:s[5]};return s[2]!==void 0&&(o.checkedFields=s[2]),e=new wt({props:o}),Pe.push(()=>Ue(e,"checkedFields",n)),{c(){R(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,i){A(e,r,i),t=!0},p(r,i){const a={};i&32&&(a.fields=r[5]),!l&&i&4&&(l=!0,a.checkedFields=r[2],Ye(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Pa(s){let e,l;return e=new je({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function un(s){let e,l;return{c(){e=S("p"),l=G("No fields selected. Please select at least one field to download."),this.h()},l(t){e=E(t,"P",{class:!0});var n=$(e);l=Z(n,"No fields selected. Please select at least one field to download."),n.forEach(m),this.h()},h(){I(e,"class","text-gray-600")},m(t,n){D(t,e,n),p(e,l)},d(t){t&&m(e)}}}function Ra(s){let e,l;return e=new Cn({props:{value:JSON.stringify(s[7].data,null,2),readonly:!0,rows:30,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&128&&(o.value=JSON.stringify(t[7].data,null,2)),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Aa(s){let e,l;return e=new je({props:{paragraph:!0}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ba(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y;const C=[Ma,Fa],T=[];function J(k,P){return k[6]==null?0:1}o=J(s),r=T[o]=C[o](s);let z=(s[5]==null||s[5].length>0)&&cn(s),j=s[3].length===0&&un();const V=[Aa,Ra],M=[];function N(k,P){return k[7]&&k[7].isFetching?0:k[4]&&k[7]?1:-1}return~(b=N(s))&&(w=M[b]=V[b](s)),{c(){e=S("section"),l=S("h4"),t=G("Select source fields"),n=Y(),r.c(),i=Y(),z&&z.c(),a=Y(),f=S("section"),c=S("h4"),d=G("Download preview"),u=Y(),j&&j.c(),_=Y(),g=S("div"),w&&w.c(),this.h()},l(k){e=E(k,"SECTION",{});var P=$(e);l=E(P,"H4",{class:!0});var ee=$(l);t=Z(ee,"Select source fields"),ee.forEach(m),n=Q(P),r.l(P),P.forEach(m),i=Q(k),z&&z.l(k),a=Q(k),f=E(k,"SECTION",{});var x=$(f);c=E(x,"H4",{class:!0});var K=$(c);d=Z(K,"Download preview"),K.forEach(m),u=Q(x),j&&j.l(x),_=Q(x),g=E(x,"DIV",{class:!0});var F=$(g);w&&w.l(F),F.forEach(m),x.forEach(m),this.h()},h(){I(l,"class","svelte-1ge817j"),I(c,"class","svelte-1ge817j"),I(g,"class","preview svelte-1ge817j")},m(k,P){D(k,e,P),p(e,l),p(l,t),p(e,n),T[o].m(e,null),D(k,i,P),z&&z.m(k,P),D(k,a,P),D(k,f,P),p(f,c),p(c,d),p(f,u),j&&j.m(f,null),p(f,_),p(f,g),~b&&M[b].m(g,null),y=!0},p(k,P){let ee=o;o=J(k),o===ee?T[o].p(k,P):(le(),v(T[ee],1,1,()=>{T[ee]=null}),ne(),r=T[o],r?r.p(k,P):(r=T[o]=C[o](k),r.c()),h(r,1),r.m(e,null)),k[5]==null||k[5].length>0?z?(z.p(k,P),P&32&&h(z,1)):(z=cn(k),z.c(),h(z,1),z.m(a.parentNode,a)):z&&(le(),v(z,1,1,()=>{z=null}),ne()),k[3].length===0?j||(j=un(),j.c(),j.m(f,_)):j&&(j.d(1),j=null);let x=b;b=N(k),b===x?~b&&M[b].p(k,P):(w&&(le(),v(M[x],1,1,()=>{M[x]=null}),ne()),~b?(w=M[b],w?w.p(k,P):(w=M[b]=V[b](k),w.c()),h(w,1),w.m(g,null)):w=null)},i(k){y||(h(r),h(z),h(w),y=!0)},o(k){v(r),v(z),v(w),y=!1},d(k){k&&m(e),T[o].d(),k&&m(i),z&&z.d(k),k&&m(a),k&&m(f),j&&j.d(),~b&&M[b].d()}}}function qa(s){let e,l,t,n,o,r;return e=new Sn({props:{title:"Download data"}}),t=new En({props:{hasForm:!0,$$slots:{default:[Ba]},$$scope:{ctx:s}}}),o=new Dn({props:{primaryButtonText:"Download",primaryButtonDisabled:s[3].length===0,secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",s[10]),{c(){R(e.$$.fragment),l=Y(),R(t.$$.fragment),n=Y(),R(o.$$.fragment)},l(i){q(e.$$.fragment,i),l=Q(i),q(t.$$.fragment,i),n=Q(i),q(o.$$.fragment,i)},m(i,a){A(e,i,a),D(i,l,a),A(t,i,a),D(i,n,a),A(o,i,a),r=!0},p(i,a){const f={};a&262398&&(f.$$scope={dirty:a,ctx:i}),t.$set(f);const c={};a&8&&(c.primaryButtonDisabled=i[3].length===0),o.$set(c)},i(i){r||(h(e.$$.fragment,i),h(t.$$.fragment,i),h(o.$$.fragment,i),r=!0)},o(i){v(e.$$.fragment,i),v(t.$$.fragment,i),v(o.$$.fragment,i),r=!1},d(i){B(e,i),i&&m(l),B(t,i),i&&m(n),B(o,i)}}}function Oa(s){let e,l;return e=new yn({props:{size:"lg",open:s[0],$$slots:{default:[qa]},$$scope:{ctx:s}}}),e.$on("submit",s[9]),e.$on("close",s[15]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,[n]){const o={};n&1&&(o.open=t[0]),n&262398&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ha(s,e,l){let t,n,o,r,i,a,f=X,c=()=>(f(),f=Ce(r,V=>l(7,a=V)),r);s.$$.on_destroy.push(()=>f());let{open:d=!1}=e,{schema:u}=e;const _=pt(),g=Ae();ge(s,g,V=>l(12,i=V));let b=[],w=[];function y(V){if(V==null)return{sourceFields:null,enrichedFields:null};const N=Dt(V).filter(P=>["embedding"].indexOf(P.dtype)===-1).filter(P=>!lt(P,V)&&P.path.at(-1)!==Vn),k=st(V).filter(P=>_t(P)).filter(P=>!st(P).some(ee=>ee.dtype==="embedding"));return{sourceFields:N,enrichedFields:k}}async function C(){const V=i.namespace,M=i.datasetName,N={combine_columns:!1,columns:o.map(ee=>ee.path)},k=`/api/v1/datasets/${V}/${M}/select_rows_download?url_safe_options=${encodeURIComponent(JSON.stringify(N))}`,P=document.createElement("a");P.download=`${V}_${M}.json`,P.href=k,document.body.appendChild(P),P.click(),P.remove()}function T(){l(0,d=!1),_("close")}function J(V){b=V,l(1,b)}function z(V){w=V,l(2,w)}const j=()=>l(0,d=!1);return s.$$set=V=>{"open"in V&&l(0,d=V.open),"schema"in V&&l(11,u=V.schema)},s.$$.update=()=>{s.$$.dirty&2048&&l(6,{sourceFields:t,enrichedFields:n}=y(u),t,(l(5,n),l(11,u))),s.$$.dirty&6&&l(3,o=[...b,...w]),s.$$.dirty&4104&&c(l(4,r=o.length>0?zr(i.namespace,i.datasetName,{columns:o.map(V=>V.path),limit:3,combine_columns:!1}):null))},[d,b,w,o,r,n,t,a,g,C,T,u,i,J,z,j]}class La extends $e{constructor(e){super(),ke(this,e,Ha,Oa,be,{open:0,schema:11})}}function ja(s){let e,l;return e=new fs({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ua(s){let e,l;return e=new is({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function dn(s){let e,l,t,n,o,r;function i(d){s[23](d)}let a={schema:s[12].data,namespace:s[0],name:s[1]};s[4]!==void 0&&(a.open=s[4]),e=new Ca({props:a}),Pe.push(()=>Ue(e,"open",i));function f(d){s[24](d)}let c={schema:s[12].data};return s[5]!==void 0&&(c.open=s[5]),n=new La({props:c}),Pe.push(()=>Ue(n,"open",f)),{c(){R(e.$$.fragment),t=Y(),R(n.$$.fragment)},l(d){q(e.$$.fragment,d),t=Q(d),q(n.$$.fragment,d)},m(d,u){A(e,d,u),D(d,t,u),A(n,d,u),r=!0},p(d,u){const _={};u&4096&&(_.schema=d[12].data),u&1&&(_.namespace=d[0]),u&2&&(_.name=d[1]),!l&&u&16&&(l=!0,_.open=d[4],Ye(()=>l=!1)),e.$set(_);const g={};u&4096&&(g.schema=d[12].data),!o&&u&32&&(o=!0,g.open=d[5],Ye(()=>o=!1)),n.$set(g)},i(d){r||(h(e.$$.fragment,d),h(n.$$.fragment,d),r=!0)},o(d){v(e.$$.fragment,d),v(n.$$.fragment,d),r=!1},d(d){B(e,d),d&&m(t),B(n,d)}}}function mn(s){let e,l;return e=new Nt({props:{open:!0,modalHeading:"Dataset config",primaryButtonText:"Ok",secondaryButtonText:"Cancel",$$slots:{default:[Ja]},$$scope:{ctx:s}}}),e.$on("click:button--secondary",s[25]),e.$on("close",s[26]),e.$on("submit",s[27]),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&268443648&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ya(s){let e,l;return e=new Cn({props:{value:`${s[13].data}`,readonly:!0,rows:15,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&8192&&(o.value=`${t[13].data}`),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Qa(s){let e,l;return e=new je({}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p:X,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ja(s){let e,l,t,n,o,r,i,a,f,c;const d=[Qa,Ya],u=[];function _(g,b){var w,y;return(w=g[13])!=null&&w.isFetching?0:(y=g[13])!=null&&y.data?1:-1}return~(i=_(s))&&(a=u[i]=d[i](s)),{c(){e=S("div"),l=G(`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),t=Y(),n=S("div"),o=G("config.yml"),r=Y(),a&&a.c(),f=ie(),this.h()},l(g){e=E(g,"DIV",{class:!0});var b=$(e);l=Z(b,`This dataset configuration represents the transformations that created the dataset,
        including signals, embeddings, and user settings. This can be used with lilac.load to
        generate the dataset with the same view as presented.`),b.forEach(m),t=Q(g),n=E(g,"DIV",{class:!0});var w=$(n);o=Z(w,"config.yml"),w.forEach(m),r=Q(g),a&&a.l(g),f=ie(),this.h()},h(){I(e,"class","mb-4 text-sm"),I(n,"class","font-mono text-xs")},m(g,b){D(g,e,b),p(e,l),D(g,t,b),D(g,n,b),p(n,o),D(g,r,b),~i&&u[i].m(g,b),D(g,f,b),c=!0},p(g,b){let w=i;i=_(g),i===w?~i&&u[i].p(g,b):(a&&(le(),v(u[w],1,1,()=>{u[w]=null}),ne()),~i?(a=u[i],a?a.p(g,b):(a=u[i]=d[i](g),a.c()),h(a,1),a.m(f.parentNode,f)):a=null)},i(g){c||(h(a),c=!0)},o(g){v(a),c=!1},d(g){g&&m(e),g&&m(t),g&&m(n),g&&m(r),~i&&u[i].d(g),g&&m(f)}}}function Ka(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w,y,C,T;t=new _a({});const J=[Ua,ja],z=[];function j(N,k){return N[11]?1:0}r=j(s),i=z[r]=J[r](s),_=new hi({});let V=s[12].data&&dn(s),M=s[2]&&mn(s);return{c(){e=S("div"),l=S("div"),R(t.$$.fragment),n=Y(),o=S("div"),i.c(),d=Y(),u=S("div"),R(_.$$.fragment),g=Y(),V&&V.c(),b=Y(),M&&M.c(),w=ie(),this.h()},l(N){e=E(N,"DIV",{class:!0});var k=$(e);l=E(k,"DIV",{class:!0});var P=$(l);q(t.$$.fragment,P),n=Q(P),o=E(P,"DIV",{class:!0});var ee=$(o);i.l(ee),ee.forEach(m),P.forEach(m),d=Q(k),u=E(k,"DIV",{class:!0});var x=$(u);q(_.$$.fragment,x),x.forEach(m),k.forEach(m),g=Q(N),V&&V.l(N),b=Q(N),M&&M.l(N),w=ie(),this.h()},h(){I(o,"class",a=ct(`absolute right-0 top-1/2 flex
                h-8 w-4 cursor-pointer items-center justify-center
                rounded border
                border-neutral-200 bg-neutral-100
                opacity-60 hover:bg-neutral-200
                hover:opacity-100
                ${s[11]?" translate-x-full":" translate-x-1/2"}`)+" svelte-1nu5kbu"),I(l,"class",c=ct(`schema-container relative h-full ${s[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1nu5kbu"),I(u,"class","h-full w-2/3 flex-grow"),I(e,"class","flex h-full w-full")},m(N,k){D(N,e,k),p(e,l),A(t,l,null),p(l,n),p(l,o),z[r].m(o,null),p(e,d),p(e,u),A(_,u,null),D(N,g,k),V&&V.m(N,k),D(N,b,k),M&&M.m(N,k),D(N,w,k),y=!0,C||(T=[Fe(f=Me.call(null,o,{text:s[11]?"Show Schema":"Hide Schema"})),Re(o,"click",s[15]),Re(o,"keypress",s[15])],C=!0)},p(N,k){let P=r;r=j(N),r!==P&&(le(),v(z[P],1,1,()=>{z[P]=null}),ne(),i=z[r],i||(i=z[r]=J[r](N),i.c()),h(i,1),i.m(o,null)),(!y||k&2048&&a!==(a=ct(`absolute right-0 top-1/2 flex
                h-8 w-4 cursor-pointer items-center justify-center
                rounded border
                border-neutral-200 bg-neutral-100
                opacity-60 hover:bg-neutral-200
                hover:opacity-100
                ${N[11]?" translate-x-full":" translate-x-1/2"}`)+" svelte-1nu5kbu"))&&I(o,"class",a),f&&Le(f.update)&&k&2048&&f.update.call(null,{text:N[11]?"Show Schema":"Hide Schema"}),(!y||k&2048&&c!==(c=ct(`schema-container relative h-full ${N[11]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1nu5kbu"))&&I(l,"class",c),N[12].data?V?(V.p(N,k),k&4096&&h(V,1)):(V=dn(N),V.c(),h(V,1),V.m(b.parentNode,b)):V&&(le(),v(V,1,1,()=>{V=null}),ne()),N[2]?M?(M.p(N,k),k&4&&h(M,1)):(M=mn(N),M.c(),h(M,1),M.m(w.parentNode,w)):M&&(le(),v(M,1,1,()=>{M=null}),ne())},i(N){y||(h(t.$$.fragment,N),h(i),h(_.$$.fragment,N),h(V),h(M),y=!0)},o(N){v(t.$$.fragment,N),v(i),v(_.$$.fragment,N),v(V),v(M),y=!1},d(N){N&&m(e),B(t),z[r].d(),B(_),N&&m(g),V&&V.d(N),N&&m(b),M&&M.d(N),N&&m(w),C=!1,We(T)}}}function Ga(s){let e,l=s[3].namespace+"",t,n,o=s[3].datasetName+"",r,i,a;return{c(){e=S("a"),t=G(l),n=G("/"),r=G(o),this.h()},l(f){e=E(f,"A",{class:!0,href:!0});var c=$(e);t=Z(c,l),n=Z(c,"/"),r=Z(c,o),c.forEach(m),this.h()},h(){I(e,"class","font-semibold text-black"),I(e,"href",s[8])},m(f,c){D(f,e,c),p(e,t),p(e,n),p(e,r),i||(a=Re(e,"click",s[21]),i=!0)},p(f,c){c&8&&l!==(l=f[3].namespace+"")&&fe(t,l),c&8&&o!==(o=f[3].datasetName+"")&&fe(r,o),c&256&&I(e,"href",f[8])},d(f){f&&m(e),i=!1,a()}}}function Za(s){let e,l,t,n,o,r,i,a;return l=new Xe({props:{type:"outline",$$slots:{default:[Ga]},$$scope:{ctx:s}}}),o=new at({}),{c(){e=S("div"),R(l.$$.fragment),t=Y(),n=S("button"),R(o.$$.fragment),this.h()},l(f){e=E(f,"DIV",{slot:!0,class:!0});var c=$(e);q(l.$$.fragment,c),t=Q(c),n=E(c,"BUTTON",{});var d=$(n);q(o.$$.fragment,d),d.forEach(m),c.forEach(m),this.h()},h(){I(e,"slot","header-subtext"),I(e,"class","flex flex-row items-center")},m(f,c){D(f,e,c),A(l,e,null),p(e,t),p(e,n),A(o,n,null),r=!0,i||(a=Re(n,"click",s[22]),i=!0)},p(f,c){const d={};c&268435720&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){r||(h(l.$$.fragment,f),h(o.$$.fragment,f),r=!0)},o(f){v(l.$$.fragment,f),v(o.$$.fragment,f),r=!1},d(f){f&&m(e),B(l),B(o),i=!1,a()}}}function Wa(s){let e,l,t;return l=new Ni({}),{c(){e=S("div"),R(l.$$.fragment),this.h()},l(n){e=E(n,"DIV",{slot:!0,class:!0});var o=$(e);q(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"slot","header-center"),I(e,"class","flex w-full items-center")},m(n,o){D(n,e,o),A(l,e,null),t=!0},p:X,i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){v(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function hn(s){let e,l,t,n;return{c(){e=S("div"),l=G("Copied!"),this.h()},l(o){e=E(o,"DIV",{class:!0});var r=$(e);l=Z(r,"Copied!"),r.forEach(m),this.h()},h(){I(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(o,r){D(o,e,r),p(e,l),n=!0},i(o){n||(t&&t.end(1),n=!0)},o(o){t=Wn(e,hr,{}),n=!1},d(o){o&&m(e),o&&t&&t.end()}}}function Xa(s){let e,l,t,n,o,r,i,a,f,c,d,u,_,g,b,w=s[6]&&hn();return r=new rt({props:{size:"field",kind:"ghost",icon:vs,iconDescription:"Copy the URL"}}),r.$on("click",s[18]),a=new rt({props:{size:"field",kind:"ghost",icon:ds,iconDescription:"Download data"}}),a.$on("click",s[19]),d=new rt({props:{disabled:!s[9],size:"field",kind:"ghost",icon:es,iconDescription:"Dataset settings"}}),d.$on("click",s[20]),{c(){e=S("div"),l=S("div"),t=S("div"),n=S("div"),w&&w.c(),o=Y(),R(r.$$.fragment),i=Y(),R(a.$$.fragment),f=Y(),c=S("div"),R(d.$$.fragment),this.h()},l(y){e=E(y,"DIV",{slot:!0});var C=$(e);l=E(C,"DIV",{class:!0});var T=$(l);t=E(T,"DIV",{class:!0});var J=$(t);n=E(J,"DIV",{class:!0});var z=$(n);w&&w.l(z),o=Q(z),q(r.$$.fragment,z),z.forEach(m),i=Q(J),q(a.$$.fragment,J),f=Q(J),c=E(J,"DIV",{});var j=$(c);q(d.$$.fragment,j),j.forEach(m),J.forEach(m),T.forEach(m),C.forEach(m),this.h()},h(){I(n,"class","relative"),Se(c,"opacity-40",!s[9]),I(t,"class","flex"),I(l,"class","flex h-full flex-col"),I(e,"slot","header-right")},m(y,C){D(y,e,C),p(e,l),p(l,t),p(t,n),w&&w.m(n,null),p(n,o),A(r,n,null),p(t,i),A(a,t,null),p(t,f),p(t,c),A(d,c,null),_=!0,g||(b=Fe(u=Me.call(null,c,{text:s[9]?"":"User does not have access to update settings of this dataset."})),g=!0)},p(y,C){y[6]?w?C&64&&h(w,1):(w=hn(),w.c(),h(w,1),w.m(n,o)):w&&(le(),v(w,1,1,()=>{w=null}),ne());const T={};C&512&&(T.disabled=!y[9]),d.$set(T),u&&Le(u.update)&&C&512&&u.update.call(null,{text:y[9]?"":"User does not have access to update settings of this dataset."}),(!_||C&512)&&Se(c,"opacity-40",!y[9])},i(y){_||(h(w),h(r.$$.fragment,y),h(a.$$.fragment,y),h(d.$$.fragment,y),_=!0)},o(y){v(w),v(r.$$.fragment,y),v(a.$$.fragment,y),v(d.$$.fragment,y),_=!1},d(y){y&&m(e),w&&w.d(),B(r),B(a),B(d),g=!1,b()}}}function xa(s){let e,l,t,n;return e=new xn({props:{$$slots:{"header-right":[Xa],"header-center":[Wa],"header-subtext":[Za],default:[Ka]},$$scope:{ctx:s}}}),t=new mr({}),{c(){R(e.$$.fragment),l=Y(),R(t.$$.fragment)},l(o){q(e.$$.fragment,o),l=Q(o),q(t.$$.fragment,o)},m(o,r){A(e,o,r),D(o,l,r),A(t,o,r),n=!0},p(o,[r]){const i={};r&268450687&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(h(e.$$.fragment,o),h(t.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),v(t.$$.fragment,o),n=!1},d(o){B(e,o),o&&m(l),B(t,o)}}}function eo(s,e,l){let t,n,o,r,i,a,f,c,d=X,u=()=>(d(),d=Ce(n,U=>l(12,c=U)),n),_,g=X,b=()=>(g(),g=Ce(i,U=>l(13,_=U)),i);s.$$.on_destroy.push(()=>d()),s.$$.on_destroy.push(()=>g());let{namespace:w}=e,{datasetName:y}=e;const C=Ae();ge(s,C,U=>l(3,f=U));function T(){dt(C,f.schemaCollapsed=!f.schemaCollapsed,f)}let J=!1,z=!1;const j=Vt();ge(s,j,U=>l(17,a=U));let V=!1,M=!1;const N=()=>navigator.clipboard.writeText(location.href).then(()=>{l(6,V=!0),setTimeout(()=>l(6,V=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),k=()=>l(5,z=!0),P=()=>l(4,J=!0),ee=()=>bn(r),x=()=>l(2,M=!0);function K(U){J=U,l(4,J)}function F(U){z=U,l(5,z)}const L=()=>l(2,M=!1),H=()=>l(2,M=!1),O=()=>l(2,M=!1);return s.$$set=U=>{"namespace"in U&&l(0,w=U.namespace),"datasetName"in U&&l(1,y=U.datasetName)},s.$$.update=()=>{var U;s.$$.dirty&8&&l(11,t=f.schemaCollapsed),s.$$.dirty&8&&u(l(10,n=It(f.namespace,f.datasetName))),s.$$.dirty&131072&&l(9,o=(U=a.data)==null?void 0:U.access.dataset.update_settings),s.$$.dirty&3&&l(8,r=Ur(w,y)),s.$$.dirty&7&&b(l(7,i=M?Pr(w,y,"yaml"):null))},[w,y,M,f,J,z,V,i,r,o,n,t,c,_,C,T,j,a,N,k,P,ee,x,K,F,L,H,O]}class to extends $e{constructor(e){super(),ke(this,e,eo,xa,be,{namespace:0,datasetName:1})}}function lo(s){let e;return{c(){e=G("Page not found! Please specify a dataset.")},l(l){e=Z(l,"Page not found! Please specify a dataset.")},m(l,t){D(l,e,t)},p:X,i:X,o:X,d(l){l&&m(e)}}}function no(s){let e=s[2],l,t,n=_n(s);return{c(){n.c(),l=ie()},l(o){n.l(o),l=ie()},m(o,r){n.m(o,r),D(o,l,r),t=!0},p(o,r){r&4&&be(e,e=o[2])?(le(),v(n,1,1,X),ne(),n=_n(o),n.c(),h(n,1),n.m(l.parentNode,l)):n.p(o,r)},i(o){t||(h(n),t=!0)},o(o){v(n),t=!1},d(o){o&&m(l),n.d(o)}}}function _n(s){let e,l;return e=new to({props:{namespace:s[0],datasetName:s[1]}}),{c(){R(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,n){A(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.namespace=t[0]),n&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ro(s){let e,l,t,n;const o=[no,lo],r=[];function i(a,f){return a[2]&&a[0]&&a[1]?0:1}return e=i(s),l=r[e]=o[e](s),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),D(a,t,f),n=!0},p(a,[f]){let c=e;e=i(a),e===c?r[e].p(a,f):(le(),v(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){v(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function so(s,e,l){let t,n,o,r,i,a,f,c,d=X,u=()=>(d(),d=Ce(f,x=>l(10,c=x)),f),_,g=X,b=()=>(g(),g=Ce(t,x=>l(11,_=x)),t),w,y=X,C=()=>(y(),y=Ce(a,x=>l(12,w=x)),a),T,J=X,z=()=>(J(),J=Ce(r,x=>l(13,T=x)),r),j,V=X,M=()=>(V(),V=Ce(o,x=>l(14,j=x)),o),N;s.$$.on_destroy.push(()=>d()),s.$$.on_destroy.push(()=>g()),s.$$.on_destroy.push(()=>y()),s.$$.on_destroy.push(()=>J()),s.$$.on_destroy.push(()=>V());let k,P;const ee=_r();return ge(s,ee,x=>l(15,N=x)),s.$$.update=()=>{var x,K;if(s.$$.dirty&32771&&N.page==="datasets")if(N.identifier==""||N.identifier==null)l(0,k=void 0),l(1,P=void 0);else{const[F,L]=N.identifier.split("/");(k!=F||P!=L)&&(l(0,k=F),l(1,P=L))}if(s.$$.dirty&3&&b(l(2,t=k&&P?vr(ee,k,P):null)),s.$$.dirty&4&&t!=null&&gr(t),s.$$.dirty&3&&l(8,n=k&&P?wr(k,P):null),s.$$.dirty&256&&n!=null&&pr(n),s.$$.dirty&3&&M(l(6,o=k&&P?ot(k,P):null)),s.$$.dirty&16640&&n&&j!=null&&j.data&&n.setSettings(j.data),s.$$.dirty&3&&z(l(5,r=k&&P?It(k,P):null)),s.$$.dirty&8448&&n&&T!=null&&T.data&&n.setSchema(T.data),s.$$.dirty&8192&&l(9,i=T!=null&&T.data?Rr("string",T.data):null),s.$$.dirty&515&&C(l(4,a=k&&P&&i?Ar(k,P,i.map(F=>F.path)):null)),s.$$.dirty&4352&&n&&w!=null&&w.data&&!w.isFetching&&n.setStats(w.data),s.$$.dirty&2051&&u(l(3,f=k&&P&&_?Br(k,P,$r(_)):null)),s.$$.dirty&1280&&n&&c!=null&&c.data&&n.setSelectRowsSchema(c),s.$$.dirty&3328&&n&&_&&(x=c==null?void 0:c.data)!=null&&x.schema){const F=br(_.selectedColumns||{},((K=c.data)==null?void 0:K.schema)||null);n.setVisibleFields(F)}},[k,P,t,f,a,r,o,ee,n,i,c,_,w,T,j,N]}class yo extends $e{constructor(e){super(),ke(this,e,so,ro,be,{})}}export{yo as component};
