import{S as we,i as $e,s as pe,E as ge,_ as be,$ as ve,m as k,h as m,n as N,a0 as Ve,b as D,J as p,O as Be,a1 as x,D as Ee,F as Ie,q as K,r as G,u as oe,e as ie,C as bt,o as tr,Z as lr,k as I,l as V,p as Ze,w as Re,y as A,z as H,A as B,W as nr,g as h,d as g,B as q,Q as ht,G as rr,a as Y,c as Q,K as Ae,ad as ir,L as sr,M as ar,N as or,a7 as Te,aa as Le,R as _e,v as te,f as le,P as Xe,a4 as Fe,ab as ze,a2 as ct,ae as fr,X as Dt,Y as It,H as ke,T as cr,U as Ye,V as Qe,af as ur,a8 as tt,a3 as lt,x as nt,a6 as mt,ag as dr}from"../chunks/index.8c57c90c.js";import{g as Pn}from"../chunks/navigation.225614ad.js";import{C as qt,O as mr,a as at,P as hr}from"../chunks/Page.30b83185.js";import{T as xe,i as _r,j as Pe,t as Ke,C as Ge,k as je,l as Vt,m as gr,S as pr,n as Rn,o as An,p as br,q as vr,r as wr,u as $r,I as kr,v as Ot,w as Sr,b as yr,x as Er,y as Dr,z as Nt,A as Ct,s as rt,D as it,B as Bn,M as qn,E as On,F as Hn,G as Ir,e as Vr,H as Nr,g as Cr,J as Tr,K as Fr,L as Mr,N as zr,O as Pr,P as Rr}from"../chunks/Commands.89e81796.js";import{h as Me,l as ye,m as Tt,n as Se,p as Ft,k as Ar,r as ut,t as Br,L as qr,u as Oe,v as Or,w as Mt,x as Hr,B as ot,y as Ln,c as Lr,a as zt,z as jr,A as We,C as st,D as _t,E as yt,F as Ur,G as Yr,P as gt,H as ft,V as jn,I as Qr,J as Jr,K as Kr,U as Un,M as Gr,N as Zr,O as Wr,R as Xr}from"../chunks/HoverTooltip.4ac2e59a.js";import{w as xr}from"../chunks/index.3d04a9ea.js";import{C as ei,S as Ue,n as ti,a as li,e as ni,d as ri}from"../chunks/JSONSchemaForm.838d29ec.js";import{C as ii,a as Et,I as Ht,T as si}from"../chunks/ConceptView.f1f12254.js";import{E as Yn,S as ai,T as oi}from"../chunks/StringSpanHighlight.bd91a953.js";import{S as vt,a as dt}from"../chunks/SelectItem.5cf70406.js";import{M as Qn,C as fi}from"../chunks/ChevronUp.b2381984.js";import{R as ci,S as Jn,T as ui,a as kt,b as St}from"../chunks/RowItemMetadata.c4d2af0e.js";import{I as Kn}from"../chunks/InlineNotification.836d5916.js";import{a as Gn,S as di}from"../chunks/signalQueries.999352f7.js";import{g as Zn}from"../chunks/settingsStore.ca891065.js";import{C as mi}from"../chunks/ComboBox.8a319b05.js";import{S as hi}from"../chunks/Settings.e965354c.js";function Lt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function _i(i){let e,l,t=i[1]&&Lt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Lt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function gi(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class pi extends we{constructor(e){super(),$e(this,e,gi,_i,pe,{size:0,title:1})}}function jt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function bi(i){let e,l,t=i[1]&&jt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M24 12L16 22 8 12z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=jt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function vi(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class wi extends we{constructor(e){super(),$e(this,e,vi,bi,pe,{size:0,title:1})}}function Ut(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function $i(i){let e,l,t=i[1]&&Ut(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M10 16L20 6 21.4 7.4 12.8 16 21.4 24.6 20 26z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Ut(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function ki(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class Si extends we{constructor(e){super(),$e(this,e,ki,$i,pe,{size:0,title:1})}}function Yt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function yi(i){let e,l,t=i[1]&&Yt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Yt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Ei(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class Di extends we{constructor(e){super(),$e(this,e,Ei,yi,pe,{size:0,title:1})}}function Qt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function Ii(i){let e,l,t=i[1]&&Qt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Qt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Vi(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class Ni extends we{constructor(e){super(),$e(this,e,Vi,Ii,pe,{size:0,title:1})}}function Jt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function Ci(i){let e,l,t,n=i[1]&&Jt(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],r={};for(let s=0;s<o.length;s+=1)r=ge(r,o[s]);return{c(){e=be("svg"),n&&n.c(),l=be("path"),t=be("path"),this.h()},l(s){e=ve(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=k(e);n&&n.l(a),l=ve(a,"path",{d:!0}),k(l).forEach(m),t=ve(a,"path",{d:!0}),k(t).forEach(m),a.forEach(m),this.h()},h(){N(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),N(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Ve(e,r)},m(s,a){D(s,e,a),n&&n.m(e,null),p(e,l),p(e,t)},p(s,[a]){s[1]?n?n.p(s,a):(n=Jt(s),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Ve(e,r=Be(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:x,o:x,d(s){s&&m(e),n&&n.d()}}}function Ti(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class pt extends we{constructor(e){super(),$e(this,e,Ti,Ci,pe,{size:0,title:1})}}function Kt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function Fi(i){let e,l,t=i[1]&&Kt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Kt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Mi(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class Wn extends we{constructor(e){super(),$e(this,e,Mi,Fi,pe,{size:0,title:1})}}function Gt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function zi(i){let e,l,t=i[1]&&Gt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Gt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Pi(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class Ri extends we{constructor(e){super(),$e(this,e,Pi,zi,pe,{size:0,title:1})}}function Zt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function Ai(i){let e,l,t=i[1]&&Zt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Zt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Bi(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class Pt extends we{constructor(e){super(),$e(this,e,Bi,Ai,pe,{size:0,title:1})}}function Wt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function qi(i){let e,l,t=i[1]&&Wt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Wt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Oi(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class Rt extends we{constructor(e){super(),$e(this,e,Oi,qi,pe,{size:0,title:1})}}function Xt(i){let e,l;return{c(){e=be("title"),l=K(i[1])},l(t){e=ve(t,"title",{});var n=k(e);l=G(n,i[1]),n.forEach(m)},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&2&&oe(l,t[1])},d(t){t&&m(e)}}}function Hi(i){let e,l,t=i[1]&&Xt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=ge(o,n[r]);return{c(){e=be("svg"),t&&t.c(),l=be("path"),this.h()},l(r){e=ve(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=k(e);t&&t.l(s),l=ve(s,"path",{d:!0}),k(l).forEach(m),s.forEach(m),this.h()},h(){N(l,"d","M30 19.415L28.586 18 25 21.587 21.414 18 20 19.415 23.586 23 20 26.586 21.414 28 25 24.414 28.586 28 30 26.586 26.414 23 30 19.415zM10 18H16V20H10zM2 6H16V8H2zM6 12H16V14H6z"),Ve(e,o)},m(r,s){D(r,e,s),t&&t.m(e,null),p(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Xt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ve(e,o=Be(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:x,o:x,d(r){r&&m(e),t&&t.d()}}}function Li(i,e,l){let t,n;const o=["size","title"];let r=Ee(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=ge(ge({},e),Ie(f))),l(3,r=Ee(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ie(e),[s,a,n,r,t]}class ji extends we{constructor(e){super(),$e(this,e,Li,Hi,pe,{size:0,title:1})}}function xt(i){let e;return{c(){e=I("div"),this.h()},l(l){e=V(l,"DIV",{id:!0,style:!0}),k(e).forEach(m),this.h()},h(){N(e,"id","svelte-infinite-scroll"),Ze(e,"width","0")},m(l,t){D(l,e,t),i[11](e)},p:x,d(l){l&&m(e),i[11](null)}}}function Ui(i){let e,l=!i[1]&&!i[0]&&xt(i);return{c(){l&&l.c(),e=ie()},l(t){l&&l.l(t),e=ie()},m(t,n){l&&l.m(t,n),D(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=xt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:x,o:x,d(t){l&&l.d(t),t&&m(e)}}}function Yi(i,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:o=null}=e,{hasMore:r=!0}=e,{reverse:s=!1}=e,{window:a=!1}=e;const f=bt();let c=!1,d,u,_,b;const v=T=>{if(!r)return;const y=T.target;w(y,s,n)<=t?(!c&&r&&(f("loadMore"),l(8,u=y.scrollHeight),l(9,_=y.scrollTop)),l(7,c=!0)):l(7,c=!1)},w=(T,y,O)=>{const F=T.documentElement?T.documentElement:T;return y?O?F.scrollLeft:F.scrollTop:O?F.scrollWidth-F.clientWidth-F.scrollLeft:F.scrollHeight-F.clientHeight-F.scrollTop};tr(()=>{a?l(10,b=document):o?l(10,b=o):l(10,b=d.parentNode)}),lr(()=>{b&&(b.removeEventListener("scroll",v),b.removeEventListener("resize",v))});function E(T){Re[T?"unshift":"push"](()=>{d=T,l(2,d)})}return i.$$set=T=>{"threshold"in T&&l(3,t=T.threshold),"horizontal"in T&&l(4,n=T.horizontal),"elementScroll"in T&&l(0,o=T.elementScroll),"hasMore"in T&&l(5,r=T.hasMore),"reverse"in T&&l(6,s=T.reverse),"window"in T&&l(1,a=T.window)},i.$$.update=()=>{i.$$.dirty&1088&&b&&(s&&l(10,b.scrollTop=b.scrollHeight,b),b.addEventListener("scroll",v),b.addEventListener("resize",v)),i.$$.dirty&1984&&c&&s&&l(10,b.scrollTop=b.scrollHeight-u+_,b)},[o,a,d,t,n,r,s,c,u,_,b,E]}class Qi extends we{constructor(e){super(),$e(this,e,Yi,Ui,pe,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function Ji(i){let e,l,t,n,o,r,s,a;t=new _r({});const f=i[3].default,c=rr(f,i,i[6],null);return{c(){e=I("div"),l=I("button"),A(t.$$.fragment),n=Y(),o=I("span"),c&&c.c(),this.h()},l(d){e=V(d,"DIV",{class:!0});var u=k(e);l=V(u,"BUTTON",{class:!0});var _=k(l);H(t.$$.fragment,_),_.forEach(m),n=Q(u),o=V(u,"SPAN",{class:!0});var b=k(o);c&&c.l(b),b.forEach(m),u.forEach(m),this.h()},h(){N(l,"class","p-0 opacity-50 hover:opacity-100"),N(o,"class","truncate"),N(e,"class","removable-tag flex items-center gap-x-1")},m(d,u){D(d,e,u),p(e,l),B(t,l,null),p(e,n),p(e,o),c&&c.m(o,null),r=!0,s||(a=Ae(l,"click",ir(i[4])),s=!0)},p(d,u){c&&c.p&&(!r||u&64)&&sr(c,f,d,d[6],r?or(f,d[6],u,null):ar(d[6]),null)},i(d){r||(h(t.$$.fragment,d),h(c,d),r=!0)},o(d){g(t.$$.fragment,d),g(c,d),r=!1},d(d){d&&m(e),q(t),c&&c.d(d),s=!1,a()}}}function Ki(i){let e,l;const t=[{type:i[0]},i[2]];let n={$$slots:{default:[Ji]},$$scope:{ctx:i}};for(let o=0;o<t.length;o+=1)n=ge(n,t[o]);return e=new xe({props:n}),e.$on("click",i[5]),{c(){A(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,r){B(e,o,r),l=!0},p(o,[r]){const s=r&5?Be(t,[r&1&&{type:o[0]},r&4&&nr(o[2])]):{};r&64&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){q(e,o)}}}function Gi(i,e,l){const t=["type"];let n=Ee(e,t),{$$slots:o={},$$scope:r}=e;const s=bt();let{type:a}=e;const f=()=>s("remove");function c(d){ht.call(this,i,d)}return i.$$set=d=>{e=ge(ge({},e),Ie(d)),l(2,n=Ee(e,t)),"type"in d&&l(0,a=d.type),"$$scope"in d&&l(6,r=d.$$scope)},[a,s,n,o,f,c,r]}class wt extends we{constructor(e){super(),$e(this,e,Gi,Ki,pe,{type:0})}}function Zi(i){let e,l=(i[2]?"":i[5])+"",t,n,o=i[0][i[1].op]+"",r,s,a;return{c(){e=I("span"),t=K(l),n=Y(),r=K(o),s=Y(),a=K(i[4]),this.h()},l(f){e=V(f,"SPAN",{class:!0});var c=k(e);t=G(c,l),c.forEach(m),n=Q(f),r=G(f,o),s=Q(f),a=G(f,i[4]),this.h()},h(){N(e,"class","font-mono")},m(f,c){D(f,e,c),p(e,t),D(f,n,c),D(f,r,c),D(f,s,c),D(f,a,c)},p(f,c){c&36&&l!==(l=(f[2]?"":f[5])+"")&&oe(t,l),c&2&&o!==(o=f[0][f[1].op]+"")&&oe(r,o),c&16&&oe(a,f[4])},d(f){f&&m(e),f&&m(n),f&&m(r),f&&m(s),f&&m(a)}}}function Wi(i){let e,l,t,n,o,r;return l=new wt({props:{interactive:!0,type:"magenta",$$slots:{default:[Zi]},$$scope:{ctx:i}}}),l.$on("click",i[9]),l.$on("remove",i[10]),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=k(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){N(e,"class","filter-pill items-center")},m(s,a){D(s,e,a),B(l,e,null),n=!0,o||(r=Te(t=Me.call(null,e,{text:i[6]})),o=!0)},p(s,[a]){const f={};a&2102&&(f.$$scope={dirty:a,ctx:s}),l.$set(f),t&&Le(t.update)&&a&64&&t.update.call(null,{text:s[6]})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){g(l.$$.fragment,s),n=!1},d(s){s&&m(e),q(l),o=!1,r()}}}function Xi(i,e,l){let t,n,o,r,s;const a={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists"};let{filter:f}=e,{hidePath:c=!1}=e;const d=Pe();_e(i,d,b=>l(7,s=b));const u=()=>Ke({command:Ge.EditFilter,namespace:s.namespace,datasetName:s.datasetName,path:n}),_=()=>d.removeFilter(f);return i.$$set=b=>{"filter"in b&&l(1,f=b.filter),"hidePath"in b&&l(2,c=b.hidePath)},i.$$.update=()=>{i.$$.dirty&2&&l(4,t=ye(f.value||"false")),i.$$.dirty&2&&l(3,n=Tt(f.path)),i.$$.dirty&18&&l(6,o=`${Se(f.path)} ${a[f.op]} ${t}`),i.$$.dirty&8&&l(5,r=n.at(-1))},[a,f,c,n,t,r,o,s,d,u,_]}class At extends we{constructor(e){super(),$e(this,e,Xi,Wi,pe,{FILTER_SHORTHANDS:0,filter:1,hidePath:2})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function el(i){let e,l=i[0].query.concept_namespace+"",t,n,o=i[0].query.concept_name+"",r;return{c(){e=I("div"),t=K(l),n=K(" / "),r=K(o),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=k(e);t=G(a,l),n=G(a," / "),r=G(a,o),a.forEach(m),this.h()},h(){N(e,"class","mb-2 w-full text-center text-xs")},m(s,a){D(s,e,a),p(e,t),p(e,n),p(e,r)},p(s,a){a&1&&l!==(l=s[0].query.concept_namespace+"")&&oe(t,l),a&1&&o!==(o=s[0].query.concept_name+"")&&oe(r,o)},d(s){s&&m(e)}}}function xi(i){let e=Se(i[0].path)+"",l,t,n=i[0].query.type+"",o;return{c(){l=K(e),t=K(": "),o=K(n)},l(r){l=G(r,e),t=G(r,": "),o=G(r,n)},m(r,s){D(r,l,s),D(r,t,s),D(r,o,s)},p(r,s){s&1&&e!==(e=Se(r[0].path)+"")&&oe(l,e),s&1&&n!==(n=r[0].query.type+"")&&oe(o,n)},d(r){r&&m(l),r&&m(t),r&&m(o)}}}function tl(i){let e,l,t;return l=new Yn({props:{embedding:i[0].query.embedding}}),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=k(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){N(e,"class","ml-2")},m(n,o){D(n,e,o),B(l,e,null),t=!0},p(n,o){const r={};o&1&&(r.embedding=n[0].query.embedding),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&m(e),q(l)}}}function ll(i){let e,l;return{c(){e=I("div"),l=K(i[2]),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=k(e);l=G(n,i[2]),n.forEach(m),this.h()},h(){N(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){D(t,e,n),p(e,l)},p(t,n){n&4&&oe(l,t[2])},d(t){t&&m(e)}}}function es(i){let e,l,t,n,o,r,s,a,f=i[0].query.type==="concept"&&el(i);n=new xe({props:{type:i[1],$$slots:{default:[xi]},$$scope:{ctx:i}}});let c=(i[0].query.type==="semantic"||i[0].query.type==="concept")&&tl(i),d=i[2]&&ll(i);return{c(){f&&f.c(),e=Y(),l=I("div"),t=I("div"),A(n.$$.fragment),o=Y(),c&&c.c(),r=Y(),d&&d.c(),s=ie(),this.h()},l(u){f&&f.l(u),e=Q(u),l=V(u,"DIV",{class:!0});var _=k(l);t=V(_,"DIV",{class:!0});var b=k(t);H(n.$$.fragment,b),b.forEach(m),o=Q(_),c&&c.l(_),_.forEach(m),r=Q(u),d&&d.l(u),s=ie(),this.h()},h(){N(t,"class","whitespace-nowrap"),N(l,"class","flex items-center justify-items-center")},m(u,_){f&&f.m(u,_),D(u,e,_),D(u,l,_),p(l,t),B(n,t,null),p(l,o),c&&c.m(l,null),D(u,r,_),d&&d.m(u,_),D(u,s,_),a=!0},p(u,[_]){u[0].query.type==="concept"?f?f.p(u,_):(f=el(u),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const b={};_&2&&(b.type=u[1]),_&9&&(b.$$scope={dirty:_,ctx:u}),n.$set(b),u[0].query.type==="semantic"||u[0].query.type==="concept"?c?(c.p(u,_),_&1&&h(c,1)):(c=tl(u),c.c(),h(c,1),c.m(l,null)):c&&(te(),g(c,1,1,()=>{c=null}),le()),u[2]?d?d.p(u,_):(d=ll(u),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},i(u){a||(h(n.$$.fragment,u),h(c),a=!0)},o(u){g(n.$$.fragment,u),g(c),a=!1},d(u){f&&f.d(u),u&&m(e),u&&m(l),q(n),c&&c.d(),u&&m(r),d&&d.d(u),u&&m(s)}}}function ts(i,e,l){let t,{search:n}=e,{tagType:o="outline"}=e;return i.$$set=r=>{"search"in r&&l(0,n=r.search),"tagType"in r&&l(1,o=r.tagType)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=n.query.type==="concept"?"":n.query.search)},[n,o,t]}class nl extends we{constructor(e){super(),$e(this,e,ts,es,pe,{search:0,tagType:1})}}function ls(i){let e,l=Se(i[0].path)+"",t,n,o,r;return{c(){e=I("span"),t=K(l),n=K(' has "'),o=K(i[2]),r=K('"'),this.h()},l(s){e=V(s,"SPAN",{class:!0});var a=k(e);t=G(a,l),a.forEach(m),n=G(s,' has "'),o=G(s,i[2]),r=G(s,'"'),this.h()},h(){N(e,"class","font-mono")},m(s,a){D(s,e,a),p(e,t),D(s,n,a),D(s,o,a),D(s,r,a)},p(s,a){a&1&&l!==(l=Se(s[0].path)+"")&&oe(t,l),a&4&&oe(o,s[2])},d(s){s&&m(e),s&&m(n),s&&m(o),s&&m(r)}}}function ns(i){let e,l,t,n,o,r;return l=new wt({props:{title:"query",interactive:!0,type:i[1],$$slots:{default:[ls]},$$scope:{ctx:i}}}),l.$on("click",i[6]),l.$on("remove",i[7]),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=k(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){N(e,"class","search-pill items-center text-left")},m(s,a){D(s,e,a),B(l,e,null),n=!0,o||(r=Te(t=Me.call(null,e,{component:nl,props:{search:i[0],tagType:i[1]}})),o=!0)},p(s,[a]){const f={};a&2&&(f.type=s[1]),a&517&&(f.$$scope={dirty:a,ctx:s}),l.$set(f),t&&Le(t.update)&&a&3&&t.update.call(null,{component:nl,props:{search:s[0],tagType:s[1]}})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){g(l.$$.fragment,s),n=!1},d(s){s&&m(e),q(l),o=!1,r()}}}function rs(i,e,l){let t,n,o,{search:r}=e;const s={keyword:"outline",semantic:"teal",concept:"green"},a=Pe(),f=je();_e(i,f,u=>l(3,o=u));function c(u){ht.call(this,i,u)}const d=()=>{var u;return a.removeSearch(r,((u=o.selectRowsSchema)==null?void 0:u.data)||null)};return i.$$set=u=>{"search"in u&&l(0,r=u.search)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=r.query.type==="concept"?r.query.concept_name:r.query.search),i.$$.dirty&1&&l(1,n=r.query.type!=null?s[r.query.type]:"outline")},[r,n,t,o,a,f,c,d]}class Xn extends we{constructor(e){super(),$e(this,e,rs,ns,pe,{search:0})}}function rl(i,e,l){const t=i.slice();return t[26]=e[l][0],t[27]=e[l][1],t}function il(i,e,l){const t=i.slice();return t[30]=e[l],t}function sl(i,e,l){const t=i.slice();return t[33]=e[l],t}function al(i,e,l){const t=i.slice();return t[36]=e[l],t}function ol(i,e,l){const t=i.slice();return t[39]=e[l],t}function is(i){let e,l,t,n=i[13],o=[];for(let a=0;a<n.length;a+=1)o[a]=ul(al(i,n,a));const r=a=>g(o[a],1,1,()=>{o[a]=null});let s=i[8]!=null&&i[8].length>0&&dl(i);return{c(){e=I("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),s&&s.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=k(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=Q(f),s&&s.l(f),f.forEach(m),this.h()},h(){N(e,"class","flex w-full flex-row gap-x-4")},m(a,f){D(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);p(e,l),s&&s.m(e,null),t=!0},p(a,f){if(f[0]&57352){n=a[13];let c;for(c=0;c<n.length;c+=1){const d=al(a,n,c);o[c]?(o[c].p(d,f),h(o[c],1)):(o[c]=ul(d),o[c].c(),h(o[c],1),o[c].m(e,l))}for(te(),c=n.length;c<o.length;c+=1)r(c);le()}a[8]!=null&&a[8].length>0?s?(s.p(a,f),f[0]&256&&h(s,1)):(s=dl(a),s.c(),h(s,1),s.m(e,null)):s&&(te(),g(s,1,1,()=>{s=null}),le())},i(a){if(!t){for(let f=0;f<n.length;f+=1)h(o[f]);h(s),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)g(o[f]);g(s),t=!1},d(a){a&&m(e),Fe(o,a),s&&s.d()}}}function fl(i){let e,l,t=i[14][i[36]]+"",n,o,r,s,a,f=i[3][i[36]],c=[];for(let u=0;u<f.length;u+=1)c[u]=cl(ol(i,f,u));const d=u=>g(c[u],1,1,()=>{c[u]=null});return{c(){e=I("div"),l=I("div"),n=K(t),o=Y(),r=I("div");for(let u=0;u<c.length;u+=1)c[u].c();s=Y(),this.h()},l(u){e=V(u,"DIV",{class:!0});var _=k(e);l=V(_,"DIV",{class:!0});var b=k(l);n=G(b,t),b.forEach(m),o=Q(_),r=V(_,"DIV",{class:!0});var v=k(r);for(let w=0;w<c.length;w+=1)c[w].l(v);v.forEach(m),s=Q(_),_.forEach(m),this.h()},h(){N(l,"class","text-xs font-light"),N(r,"class","flex flex-row gap-x-1"),N(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(u,_){D(u,e,_),p(e,l),p(l,n),p(e,o),p(e,r);for(let b=0;b<c.length;b+=1)c[b]&&c[b].m(r,null);p(e,s),a=!0},p(u,_){if(_[0]&40968){f=u[3][u[36]];let b;for(b=0;b<f.length;b+=1){const v=ol(u,f,b);c[b]?(c[b].p(v,_),h(c[b],1)):(c[b]=cl(v),c[b].c(),h(c[b],1),c[b].m(r,null))}for(te(),b=f.length;b<c.length;b+=1)d(b);le()}},i(u){if(!a){for(let _=0;_<f.length;_+=1)h(c[_]);a=!0}},o(u){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)g(c[_]);a=!1},d(u){u&&m(e),Fe(c,u)}}}function cl(i){let e,l;function t(){return i[23](i[39])}return e=new Xn({props:{search:i[39]}}),e.$on("click",t),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,o){B(e,n,o),l=!0},p(n,o){i=n;const r={};o[0]&8&&(r.search=i[39]),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){g(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function ul(i){let e,l,t=i[3][i[36]]&&fl(i);return{c(){t&&t.c(),e=ie()},l(n){t&&t.l(n),e=ie()},m(n,o){t&&t.m(n,o),D(n,e,o),l=!0},p(n,o){n[3][n[36]]?t?(t.p(n,o),o[0]&8&&h(t,1)):(t=fl(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(te(),g(t,1,1,()=>{t=null}),le())},i(n){l||(h(t),l=!0)},o(n){g(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function dl(i){let e,l,t,n,o,r,s=i[8],a=[];for(let c=0;c<s.length;c+=1)a[c]=ml(sl(i,s,c));const f=c=>g(a[c],1,1,()=>{a[c]=null});return{c(){e=I("div"),l=I("div"),t=K("Filters"),n=Y(),o=I("div");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=V(c,"DIV",{class:!0});var d=k(e);l=V(d,"DIV",{class:!0});var u=k(l);t=G(u,"Filters"),u.forEach(m),n=Q(d),o=V(d,"DIV",{class:!0});var _=k(o);for(let b=0;b<a.length;b+=1)a[b].l(_);_.forEach(m),d.forEach(m),this.h()},h(){N(l,"class","text-xs font-light"),N(o,"class","flex flex-row gap-x-1"),N(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(c,d){D(c,e,d),p(e,l),p(l,t),p(e,n),p(e,o);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,null);r=!0},p(c,d){if(d[0]&256){s=c[8];let u;for(u=0;u<s.length;u+=1){const _=sl(c,s,u);a[u]?(a[u].p(_,d),h(a[u],1)):(a[u]=ml(_),a[u].c(),h(a[u],1),a[u].m(o,null))}for(te(),u=s.length;u<a.length;u+=1)f(u);le()}},i(c){if(!r){for(let d=0;d<s.length;d+=1)h(a[d]);r=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)g(a[d]);r=!1},d(c){c&&m(e),Fe(a,c)}}}function ml(i){let e,l;return e=new At({props:{filter:i[33]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&256&&(o.filter=t[33]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function hl(i){let e=ye(i[0])+"",l,t,n=ye(i[1].dataset_manifest.num_items)+"",o,r;return{c(){l=K(e),t=K(" of "),o=K(n),r=K(" rows")},l(s){l=G(s,e),t=G(s," of "),o=G(s,n),r=G(s," rows")},m(s,a){D(s,l,a),D(s,t,a),D(s,o,a),D(s,r,a)},p(s,a){a[0]&1&&e!==(e=ye(s[0])+"")&&oe(l,e),a[0]&2&&n!==(n=ye(s[1].dataset_manifest.num_items)+"")&&oe(o,n)},d(s){s&&m(l),s&&m(t),s&&m(o),s&&m(r)}}}function _l(i){let e,l;return e=new dt({props:{value:i[30].path!=null?Se(i[30].path):void 0,text:i[30].text,disabled:i[30].disabled}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.value=t[30].path!=null?Se(t[30].path):void 0),n[0]&128&&(o.text=t[30].text),n[0]&128&&(o.disabled=t[30].disabled),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ss(i){let e,l,t=i[27],n=[];for(let r=0;r<t.length;r+=1)n[r]=_l(il(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Y()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=Q(r)},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&128){t=r[27];let a;for(a=0;a<t.length;a+=1){const f=il(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=_l(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function gl(i){let e,l;return e=new pr({props:{label:i[26],$$slots:{default:[ss]},$$scope:{ctx:i}}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.label=t[26]),n[0]&128|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function as(i){let e,l,t=Object.entries(i[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=gl(rl(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&128){t=Object.entries(r[7]);let a;for(a=0;a<t.length;a+=1){const f=rl(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=gl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function pl(i){let e,l,t,n,o,r;return l=new ei({}),{c(){e=I("button"),A(l.$$.fragment),this.h()},l(s){e=V(s,"BUTTON",{});var a=k(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){e.disabled=t=i[4]==null},m(s,a){D(s,e,a),B(l,e,null),n=!0,o||(r=[Te(Me.call(null,e,{text:"Clear sort"})),Ae(e,"click",i[18])],o=!0)},p(s,a){(!n||a[0]&16&&t!==(t=s[4]==null))&&(e.disabled=t)},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){g(l.$$.fragment,s),n=!1},d(s){s&&m(e),q(l),o=!1,Xe(r)}}}function os(i){let e,l;return e=new Rt({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function fs(i){let e,l;return e=new Pt({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function cs(i){let e,l;return e=new ji({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function bl(i){let e,l;return e=new Qn({props:{open:!0,modalHeading:"Concept",passiveModal:!0,size:"lg",$$slots:{default:[hs]},$$scope:{ctx:i}}}),e.$on("close",i[24]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&1024|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function us(i){let e,l;return e=new ii({props:{concept:i[10].data}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&1024&&(o.concept=t[10].data),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ds(i){let e,l=i[10].error.message+"",t;return{c(){e=I("p"),t=K(l)},l(n){e=V(n,"P",{});var o=k(e);t=G(o,l),o.forEach(m)},m(n,o){D(n,e,o),p(e,t)},p(n,o){o[0]&1024&&l!==(l=n[10].error.message+"")&&oe(t,l)},i:x,o:x,d(n){n&&m(e)}}}function ms(i){let e,l;return e=new Ue({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function hs(i){let e,l,t,n;const o=[ms,ds,us],r=[];function s(a,f){var c,d,u;return(c=a[10])!=null&&c.isLoading?0:(d=a[10])!=null&&d.isError?1:(u=a[10])!=null&&u.isSuccess?2:-1}return~(e=s(i))&&(l=r[e]=o[e](i)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),D(a,t,f),n=!0},p(a,f){let c=e;e=s(a),e===c?~e&&r[e].p(a,f):(l&&(te(),g(r[c],1,1,()=>{r[c]=null}),le()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){g(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function _s(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T,y,O,F,M,S=i[13].length>0&&is(i),P=i[0]&&i[1]&&hl(i);c=new vt({props:{noLabel:!0,size:"sm",class:"w-80",selected:i[5],$$slots:{default:[as]},$$scope:{ctx:i}}}),c.$on("update",i[16]);let R=i[6]!=null&&pl(i);const $=[cs,fs,os],C=[];function ee(J,z){var j,U,L;return((j=J[4])==null?void 0:j.order)==null?0:((U=J[4])==null?void 0:U.order)==="ASC"?1:((L=J[4])==null?void 0:L.order)==="DESC"?2:-1}~(b=ee(i))&&(v=C[b]=$[b](i));let X=i[2]&&bl(i);return{c(){e=I("div"),S&&S.c(),l=Y(),t=I("div"),n=I("div"),P&&P.c(),o=Y(),r=I("div"),s=I("div"),a=K("Sort by"),f=Y(),A(c.$$.fragment),d=Y(),R&&R.c(),u=Y(),_=I("button"),v&&v.c(),T=Y(),X&&X.c(),y=ie(),this.h()},l(J){e=V(J,"DIV",{class:!0});var z=k(e);S&&S.l(z),l=Q(z),t=V(z,"DIV",{class:!0});var j=k(t);n=V(j,"DIV",{class:!0});var U=k(n);P&&P.l(U),U.forEach(m),o=Q(j),r=V(j,"DIV",{class:!0});var L=k(r);s=V(L,"DIV",{class:!0});var W=k(s);a=G(W,"Sort by"),W.forEach(m),f=Q(L),H(c.$$.fragment,L),d=Q(L),R&&R.l(L),u=Q(L),_=V(L,"BUTTON",{});var de=k(_);v&&v.l(de),de.forEach(m),L.forEach(m),j.forEach(m),z.forEach(m),T=Q(J),X&&X.l(J),y=ie(),this.h()},h(){N(n,"class","py-1"),N(s,"class","mr-1"),_.disabled=w=i[4]==null,N(r,"class","sort-container flex flex-row items-center gap-x-1"),N(t,"class","flex w-full flex-row items-center justify-between"),N(e,"class","mx-5 my-2 flex flex-col gap-y-2")},m(J,z){var j;D(J,e,z),S&&S.m(e,null),p(e,l),p(e,t),p(t,n),P&&P.m(n,null),p(t,o),p(t,r),p(r,s),p(s,a),p(r,f),B(c,r,null),p(r,d),R&&R.m(r,null),p(r,u),p(r,_),~b&&C[b].m(_,null),D(J,T,z),X&&X.m(J,z),D(J,y,z),O=!0,F||(M=[Te(E=Me.call(null,_,{text:((j=i[4])==null?void 0:j.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Ae(_,"click",i[17])],F=!0)},p(J,z){var L;J[13].length>0&&S.p(J,z),J[0]&&J[1]?P?P.p(J,z):(P=hl(J),P.c(),P.m(n,null)):P&&(P.d(1),P=null);const j={};z[0]&32&&(j.selected=J[5]),z[0]&128|z[1]&2048&&(j.$$scope={dirty:z,ctx:J}),c.$set(j),J[6]!=null?R?(R.p(J,z),z[0]&64&&h(R,1)):(R=pl(J),R.c(),h(R,1),R.m(r,u)):R&&(te(),g(R,1,1,()=>{R=null}),le());let U=b;b=ee(J),b!==U&&(v&&(te(),g(C[U],1,1,()=>{C[U]=null}),le()),~b?(v=C[b],v||(v=C[b]=$[b](J),v.c()),h(v,1),v.m(_,null)):v=null),(!O||z[0]&16&&w!==(w=J[4]==null))&&(_.disabled=w),E&&Le(E.update)&&z[0]&16&&E.update.call(null,{text:((L=J[4])==null?void 0:L.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."}),J[2]?X?(X.p(J,z),z[0]&4&&h(X,1)):(X=bl(J),X.c(),h(X,1),X.m(y.parentNode,y)):X&&(te(),g(X,1,1,()=>{X=null}),le())},i(J){O||(h(S),h(c.$$.fragment,J),h(R),h(v),h(X),O=!0)},o(J){g(S),g(c.$$.fragment,J),g(R),g(v),g(X),O=!1},d(J){J&&m(e),S&&S.d(),P&&P.d(),q(c),R&&R.d(),~b&&C[b].d(),J&&m(T),X&&X.d(J),J&&m(y),F=!1,Xe(M)}}}function gs(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,b=x,v=()=>(b(),b=ze(t,z=>l(10,_=z)),t);i.$$.on_destroy.push(()=>b());let{totalNumRows:w}=e,{manifest:E}=e,T=Pe();_e(i,T,z=>l(22,u=z));let y=je();_e(i,y,z=>l(21,d=z));let O=null;const F=["keyword","semantic","concept"],M={keyword:"Keyword",semantic:"Semantic",concept:"Concepts"};let S={};function P(z){if(z.query.type==="concept"){const j=z.query;l(2,O={namespace:j.concept_namespace,name:j.concept_name})}}let R={};const $=z=>{const j=z.detail;j!==s&&T.setSortBy(j===""?null:Tt(j))},C=()=>{r!=null&&T.setSortBy(r.path),T.setSortOrder((r==null?void 0:r.order)==="ASC"?"DESC":"ASC")},ee=()=>{T.clearSorts()},X=z=>P(z),J=()=>l(2,O=null);return i.$$set=z=>{"totalNumRows"in z&&l(0,w=z.totalNumRows),"manifest"in z&&l(1,E=z.manifest)},i.$$.update=()=>{var z,j,U,L;if(i.$$.dirty[0]&4&&v(l(9,t=O?Ar(O.namespace,O.name):void 0)),i.$$.dirty[0]&4194304&&l(20,n=Vt(u)),i.$$.dirty[0]&4194304&&l(8,o=u.query.filters),i.$$.dirty[0]&1048584){l(3,S={});for(const W of n)W.query.type&&(W.query.type in S||l(3,S[W.query.type]=[],S),S[W.query.type].push(W))}if(i.$$.dirty[0]&2097152&&l(4,r=gr(d)),i.$$.dirty[0]&2097152)for(const W of((j=(z=d.selectRowsSchema)==null?void 0:z.data)==null?void 0:j.search_results)||[])R[Se(W.result_path)]=W;i.$$.dirty[0]&16&&l(5,s=r!=null&&r.path?Se(r.path):""),i.$$.dirty[0]&4194304&&l(6,a=u.query.sort_by),i.$$.dirty[0]&2097248&&l(19,f=((L=(U=d.selectRowsSchema)==null?void 0:U.data)==null?void 0:L.schema)!=null?[{path:[""],text:"None",disabled:a==null&&s!==""},...Ft(d.selectRowsSchema.data.schema).filter(W=>W.dtype!="embedding"&&W.dtype!="string_span").map(W=>({path:W.path,text:Se(W.path.slice(1)),disabled:!1}))]:[]),i.$$.dirty[0]&524288&&l(7,c=f.reduce((W,de)=>{const he=de.path[0];return(W[he]=W[he]||[]).push(de),W},{}))},[w,E,O,S,r,s,a,c,o,t,_,T,y,F,M,P,$,C,ee,f,n,d,u,X,J]}class ps extends we{constructor(e){super(),$e(this,e,gs,_s,pe,{totalNumRows:0,manifest:1},null,[-1,-1])}}function vl(i,e,l){var r,s,a;const t=i.slice();t[14]=e[l],t[18]=l;const n=t[3].length>1?`[${t[18]}]`:"";t[15]=n;const o=((a=(s=(r=t[7].data)==null?void 0:r.ui)==null?void 0:s.markdown_paths)==null?void 0:a.find(f=>Oe(f,t[0])))!=null;return t[16]=o,t}function wl(i){let e,l,t,n=i[0].join(".")+i[15]+"",o,r,s,a,f,c;return a=new ai({props:{text:ye(i[14]),row:i[1],markdown:i[16],spanPaths:i[5].spanPaths,valuePaths:i[5].valuePaths,datasetViewStore:i[8],datasetStore:i[2],embeddings:i[6]}}),{c(){e=I("div"),l=I("div"),t=I("div"),o=K(n),r=Y(),s=I("div"),A(a.$$.fragment),f=Y(),this.h()},l(d){e=V(d,"DIV",{class:!0});var u=k(e);l=V(u,"DIV",{class:!0});var _=k(l);t=V(_,"DIV",{class:!0});var b=k(t);o=G(b,n),b.forEach(m),r=Q(_),s=V(_,"DIV",{class:!0});var v=k(s);H(a.$$.fragment,v),v.forEach(m),_.forEach(m),f=Q(u),u.forEach(m),this.h()},h(){N(t,"class","sticky top-0 z-10 w-full self-start border-t border-neutral-200 bg-neutral-100 px-2 py-2 pb-2 font-mono font-medium text-neutral-500"),N(s,"class","mx-4 font-normal"),N(l,"class","flex w-full flex-col"),N(e,"class","flex flex-row")},m(d,u){D(d,e,u),p(e,l),p(l,t),p(t,o),p(l,r),p(l,s),B(a,s,null),p(e,f),c=!0},p(d,u){(!c||u&9)&&n!==(n=d[0].join(".")+d[15]+"")&&oe(o,n);const _={};u&8&&(_.text=ye(d[14])),u&2&&(_.row=d[1]),u&129&&(_.markdown=d[16]),u&32&&(_.spanPaths=d[5].spanPaths),u&32&&(_.valuePaths=d[5].valuePaths),u&4&&(_.datasetStore=d[2]),u&64&&(_.embeddings=d[6]),a.$set(_)},i(d){c||(h(a.$$.fragment,d),c=!0)},o(d){g(a.$$.fragment,d),c=!1},d(d){d&&m(e),q(a)}}}function bs(i){let e,l,t=i[3],n=[];for(let r=0;r<t.length;r+=1)n[r]=wl(vl(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,[s]){if(s&495){t=r[3];let a;for(a=0;a<t.length;a+=1){const f=vl(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=wl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function vs(i,e,l){let t,n,o,r,s,a,f,c,d,u=x,_=()=>(u(),u=ze(s,y=>l(7,d=y)),s);i.$$.on_destroy.push(()=>u());let{path:b}=e,{row:v}=e,{field:w}=e;const E=Pe();_e(i,E,y=>l(13,f=y));const T=je();return _e(i,T,y=>l(2,c=y)),i.$$set=y=>{"path"in y&&l(0,b=y.path),"row"in y&&l(1,v=y.row),"field"in y&&l(10,w=y.field)},i.$$.update=()=>{i.$$.dirty&4&&l(11,t=c.visibleFields||[]),i.$$.dirty&8196&&l(12,n=Rn(f,c)),i.$$.dirty&4100&&l(6,o=An(c,n)),i.$$.dirty&3072&&l(5,r=br(w,t)),i.$$.dirty&8192&&_(l(4,s=ut(f.namespace,f.datasetName))),i.$$.dirty&3&&l(3,a=Br(v,b).map(y=>qr.value(y)).filter(ti))},[b,v,c,a,s,r,o,d,E,T,w,t,n,f]}class ws extends we{constructor(e){super(),$e(this,e,vs,bs,pe,{path:0,row:1,field:10})}}function $l(i,e,l){const t=i.slice();return t[8]=e[l],t[10]=l,t}function kl(i){let e,l=[],t=new Map,n,o,r=i[1];const s=a=>Se(a[8].path);for(let a=0;a<r.length;a+=1){let f=$l(i,r,a),c=s(f);t.set(c,l[a]=Sl(c,f))}return{c(){e=I("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=V(a,"DIV",{class:!0});var f=k(e);for(let c=0;c<l.length;c+=1)l[c].l(f);f.forEach(m),this.h()},h(){N(e,"class","w-2/3 overflow-hidden"),ct(()=>i[7].call(e))},m(a,f){D(a,e,f);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=fr(e,i[7].bind(e)),o=!0},p(a,f){f&3&&(r=a[1],te(),l=Dt(l,f,s,1,a,r,t,e,It,Sl,null,$l),le())},i(a){if(!o){for(let f=0;f<r.length;f+=1)h(l[f]);o=!0}},o(a){for(let f=0;f<l.length;f+=1)g(l[f]);o=!1},d(a){a&&m(e);for(let f=0;f<l.length;f+=1)l[f].d();n()}}}function Sl(i,e){let l,t,n,o;return t=new ws({props:{row:e[0],path:e[8].path,field:e[8]}}),{key:i,first:null,c(){l=I("div"),A(t.$$.fragment),n=Y(),this.h()},l(r){l=V(r,"DIV",{class:!0});var s=k(l);H(t.$$.fragment,s),n=Q(s),s.forEach(m),this.h()},h(){N(l,"class","border-gray-100"),ke(l,"border-b",e[10]<e[1].length-1),this.first=l},m(r,s){D(r,l,s),B(t,l,null),p(l,n),o=!0},p(r,s){e=r;const a={};s&1&&(a.row=e[0]),s&2&&(a.path=e[8].path),s&2&&(a.field=e[8]),t.$set(a),(!o||s&2)&&ke(l,"border-b",e[10]<e[1].length-1)},i(r){o||(h(t.$$.fragment,r),o=!0)},o(r){g(t.$$.fragment,r),o=!1},d(r){r&&m(l),q(t)}}}function $s(i){let e,l,t,n,o,r,s,a,f,c=i[1].length>0&&kl(i);return s=new ci({props:{row:i[0],visibleFields:i[2],selectRowsSchema:i[4]}}),{c(){e=I("div"),l=I("div"),c&&c.c(),t=Y(),n=I("div"),o=I("div"),r=I("div"),A(s.$$.fragment),this.h()},l(d){e=V(d,"DIV",{class:!0});var u=k(e);l=V(u,"DIV",{class:!0});var _=k(l);c&&c.l(_),t=Q(_),n=V(_,"DIV",{class:!0});var b=k(n);o=V(b,"DIV",{class:!0});var v=k(o);r=V(v,"DIV",{style:!0,class:!0});var w=k(r);H(s.$$.fragment,w),w.forEach(m),v.forEach(m),b.forEach(m),_.forEach(m),u.forEach(m),this.h()},h(){N(r,"style",a=`max-height: ${Math.max(yl,i[3])}px`),N(r,"class","overflow-y-auto"),N(o,"class","sticky top-0 self-start"),N(n,"class","flex h-full w-1/3 bg-neutral-100"),N(l,"class","flex h-full w-full flex-row"),N(e,"class","rounded border-x border-b border-neutral-200 shadow-md")},m(d,u){D(d,e,u),p(e,l),c&&c.m(l,null),p(l,t),p(l,n),p(n,o),p(o,r),B(s,r,null),f=!0},p(d,[u]){d[1].length>0?c?(c.p(d,u),u&2&&h(c,1)):(c=kl(d),c.c(),h(c,1),c.m(l,t)):c&&(te(),g(c,1,1,()=>{c=null}),le());const _={};u&1&&(_.row=d[0]),u&4&&(_.visibleFields=d[2]),u&16&&(_.selectRowsSchema=d[4]),s.$set(_),(!f||u&8&&a!==(a=`max-height: ${Math.max(yl,d[3])}px`))&&N(r,"style",a)},i(d){f||(h(c),h(s.$$.fragment,d),f=!0)},o(d){g(c),g(s.$$.fragment,d),f=!1},d(d){d&&m(e),c&&c.d(),q(s)}}}const yl=320;function ks(i,e,l){let t,n,{row:o}=e,{mediaFields:r}=e,{visibleFields:s}=e;const a=je();_e(i,a,d=>l(6,n=d));let f=0;function c(){f=this.clientHeight,l(3,f)}return i.$$set=d=>{"row"in d&&l(0,o=d.row),"mediaFields"in d&&l(1,r=d.mediaFields),"visibleFields"in d&&l(2,s=d.visibleFields)},i.$$.update=()=>{var d;i.$$.dirty&64&&l(4,t=(d=n.selectRowsSchema)==null?void 0:d.data)},[o,r,s,f,t,a,n,c]}class Ss extends we{constructor(e){super(),$e(this,e,ks,$s,pe,{row:0,mediaFields:1,visibleFields:2})}}function El(i,e,l){const t=i.slice();return t[23]=e[l],t}function ys(i){let e,l;return{c(){e=I("div"),l=K("No results."),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=k(e);l=G(n,"No results."),n.forEach(m),this.h()},h(){N(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){D(t,e,n),p(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function Es(i){let e,l;return{c(){e=I("div"),l=K("Select fields to display"),this.h()},l(t){e=V(t,"DIV",{class:!0});var n=k(e);l=G(n,"Select fields to display"),n.forEach(m),this.h()},h(){N(e,"class","mt-12 w-full text-center text-gray-600")},m(t,n){D(t,e,n),p(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function Ds(i){let e,l;return e=new Ue({props:{paragraph:!0,lines:3}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Is(i){var t,n;let e,l;return e=new Kn({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=i[2].error.body)==null?void 0:t.detail)||((n=i[2])==null?void 0:n.error.message)}}),{c(){A(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,r){B(e,o,r),l=!0},p(o,r){var a,f;const s={};r&4&&(s.subtitle=((a=o[2].error.body)==null?void 0:a.detail)||((f=o[2])==null?void 0:f.error.message)),e.$set(s)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){q(e,o)}}}function Vs(i){var t;let e,l;return e=new Kn({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=i[5].error.body)==null?void 0:t.detail)||i[5].error.message}}),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,o){B(e,n,o),l=!0},p(n,o){var s;const r={};o&32&&(r.subtitle=((s=n[5].error.body)==null?void 0:s.detail)||n[5].error.message),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){g(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function Dl(i){let e,l,t,n=i[3],o=[];for(let a=0;a<n.length;a+=1)o[a]=Il(El(i,n,a));const r=a=>g(o[a],1,1,()=>{o[a]=null});let s=i[3].length>0&&Vl(i);return{c(){e=I("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Y(),s&&s.c(),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=k(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=Q(f),s&&s.l(f),f.forEach(m),this.h()},h(){N(e,"class","flex h-full w-full flex-col gap-y-10 overflow-y-scroll px-5 pb-32")},m(a,f){D(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);p(e,l),s&&s.m(e,null),i[21](e),t=!0},p(a,f){if(f&74){n=a[3];let c;for(c=0;c<n.length;c+=1){const d=El(a,n,c);o[c]?(o[c].p(d,f),h(o[c],1)):(o[c]=Il(d),o[c].c(),h(o[c],1),o[c].m(e,l))}for(te(),c=n.length;c<o.length;c+=1)r(c);le()}a[3].length>0?s?(s.p(a,f),f&8&&h(s,1)):(s=Vl(a),s.c(),h(s,1),s.m(e,null)):s&&(te(),g(s,1,1,()=>{s=null}),le())},i(a){if(!t){for(let f=0;f<n.length;f+=1)h(o[f]);h(s),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)g(o[f]);g(s),t=!1},d(a){a&&m(e),Fe(o,a),s&&s.d(),i[21](null)}}}function Il(i){let e,l;return e=new Ss({props:{visibleFields:i[1],row:i[23],mediaFields:i[6]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n&2&&(o.visibleFields=t[1]),n&8&&(o.row=t[23]),n&64&&(o.mediaFields=t[6]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Vl(i){let e,l;return e=new Qi({props:{threshold:100}}),e.$on("loadMore",i[20]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Ns(i){let e,l,t,n,o,r,s;e=new ps({props:{totalNumRows:i[7],manifest:i[12].data}});const a=[Vs,Is,Ds,Es,ys],f=[];function c(u,_){var b,v,w,E;return u[5].isError?0:(b=u[2])!=null&&b.isError?1:(v=u[5])!=null&&v.isFetching||u[13].isFetching||(w=u[2])!=null&&w.isFetching||u[4].isFetching?2:u[1].length===0?3:(E=u[5])!=null&&E.isSuccess&&u[3]&&u[3].length===0?4:-1}~(t=c(i))&&(n=f[t]=a[t](i));let d=i[3]&&i[1].length>0&&i[13].isSuccess&&i[6]!=null&&Dl(i);return{c(){A(e.$$.fragment),l=Y(),n&&n.c(),o=Y(),d&&d.c(),r=ie()},l(u){H(e.$$.fragment,u),l=Q(u),n&&n.l(u),o=Q(u),d&&d.l(u),r=ie()},m(u,_){B(e,u,_),D(u,l,_),~t&&f[t].m(u,_),D(u,o,_),d&&d.m(u,_),D(u,r,_),s=!0},p(u,[_]){const b={};_&128&&(b.totalNumRows=u[7]),_&4096&&(b.manifest=u[12].data),e.$set(b);let v=t;t=c(u),t===v?~t&&f[t].p(u,_):(n&&(te(),g(f[v],1,1,()=>{f[v]=null}),le()),~t?(n=f[t],n?n.p(u,_):(n=f[t]=a[t](u),n.c()),h(n,1),n.m(o.parentNode,o)):n=null),u[3]&&u[1].length>0&&u[13].isSuccess&&u[6]!=null?d?(d.p(u,_),_&8266&&h(d,1)):(d=Dl(u),d.c(),h(d,1),d.m(r.parentNode,r)):d&&(te(),g(d,1,1,()=>{d=null}),le())},i(u){s||(h(e.$$.fragment,u),h(n),h(d),s=!0)},o(u){g(e.$$.fragment,u),g(n),g(d),s=!1},d(u){q(e,u),u&&m(l),~t&&f[t].d(u),u&&m(o),d&&d.d(u),u&&m(r)}}}function Cs(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,b,v=x,w=()=>(v(),v=ze(r,L=>l(4,b=L)),r),E,T,y=x,O=()=>(y(),y=ze(a,L=>l(5,T=L)),a),F,M,S=x,P=()=>(S(),S=ze(t,L=>l(12,M=L)),t),R,$=x,C=()=>($(),$=ze(n,L=>l(13,R=L)),n);i.$$.on_destroy.push(()=>v()),i.$$.on_destroy.push(()=>y()),i.$$.on_destroy.push(()=>S()),i.$$.on_destroy.push(()=>$());const ee=Pe();_e(i,ee,L=>l(19,F=L));const X=je();_e(i,X,L=>l(18,E=L));let J=null;const z=xr(J),j=()=>T==null?void 0:T.fetchNextPage();function U(L){Re[L?"unshift":"push"](()=>{J=L,l(0,J)})}return i.$$.update=()=>{var L,W,de,he;i.$$.dirty&524288&&P(l(11,t=Or(F.namespace,F.datasetName))),i.$$.dirty&524288&&C(l(10,n=Mt(F.namespace,F.datasetName))),i.$$.dirty&524288&&l(17,o=vr(F)),i.$$.dirty&524288&&w(l(9,r=ut(F.namespace,F.datasetName))),i.$$.dirty&262144&&l(2,s=E.selectRowsSchema),i.$$.dirty&655364&&O(l(8,a=Hr(F.namespace,F.datasetName,o||{},s!=null&&s.isSuccess?s.data.schema:void 0))),i.$$.dirty&32&&l(7,f=(L=T.data)==null?void 0:L.pages[0].total_num_rows),i.$$.dirty&32&&l(3,c=(W=T.data)==null?void 0:W.pages.flatMap(se=>se.rows)),i.$$.dirty&8&&console.log(c==null?void 0:c.length),i.$$.dirty&262144&&l(1,d=(E.visibleFields||[]).sort((se,De)=>Se(se.path)>Se(De.path)?1:-1)),i.$$.dirty&6&&l(16,u=((de=s==null?void 0:s.data)==null?void 0:de.schema)!=null?wr((he=s==null?void 0:s.data)==null?void 0:he.schema,d):null),i.$$.dirty&65552&&l(6,_=b.data?$r(u,b.data):[]),i.$$.dirty&1&&z.set(J)},cr(kr,z),[J,d,s,c,b,T,_,f,a,r,n,t,M,R,ee,X,u,o,E,F,j,U]}class Ts extends we{constructor(e){super(),$e(this,e,Cs,Ns,pe,{})}}function Nl(i,e,l){const t=i.slice();return t[44]=e[l],t}function Cl(i,e,l){const t=i.slice();return t[47]=e[l],t}function Tl(i){const e=i[5][i[50]];i[51]=e}function Fs(i){let e,l,t=i[51].text+"",n,o,r=i[51].description&&Fl(i);return{c(){e=I("div"),l=I("div"),n=K(t),o=Y(),r&&r.c(),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=k(e);l=V(a,"DIV",{});var f=k(l);n=G(f,t),f.forEach(m),o=Q(a),r&&r.l(a),a.forEach(m),this.h()},h(){N(e,"class","flex justify-between gap-x-4")},m(s,a){D(s,e,a),p(e,l),p(l,n),p(e,o),r&&r.m(e,null)},p(s,a){a[0]&32|a[1]&524288&&t!==(t=s[51].text+"")&&oe(n,t),s[51].description?r?r.p(s,a):(r=Fl(s),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:x,o:x,d(s){s&&m(e),r&&r.d()}}}function Ms(i){let e,l,t,n,o,r,s;return l=new xe({props:{$$slots:{default:[Rs]},$$scope:{ctx:i}}}),{c(){e=I("div"),A(l.$$.fragment),t=Y(),n=I("div"),o=K(`Semantic search:
                    `),r=K(i[0]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=k(e);H(l.$$.fragment,f),t=Q(f),n=V(f,"DIV",{class:!0});var c=k(n);o=G(c,`Semantic search:
                    `),r=G(c,i[0]),c.forEach(m),f.forEach(m),this.h()},h(){N(n,"class","ml-2"),N(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){D(a,e,f),B(l,e,null),p(e,t),p(e,n),p(n,o),p(n,r),s=!0},p(a,f){const c={};f[1]&2097152&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!s||f[0]&1)&&oe(r,a[0])},i(a){s||(h(l.$$.fragment,a),s=!0)},o(a){g(l.$$.fragment,a),s=!1},d(a){a&&m(e),q(l)}}}function zs(i){let e,l,t,n,o,r,s;return l=new xe({props:{$$slots:{default:[As]},$$scope:{ctx:i}}}),{c(){e=I("div"),A(l.$$.fragment),t=Y(),n=I("div"),o=K(`Keyword search:
                    `),r=K(i[0]),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=k(e);H(l.$$.fragment,f),t=Q(f),n=V(f,"DIV",{class:!0});var c=k(n);o=G(c,`Keyword search:
                    `),r=G(c,i[0]),c.forEach(m),f.forEach(m),this.h()},h(){N(n,"class","ml-2"),N(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){D(a,e,f),B(l,e,null),p(e,t),p(e,n),p(n,o),p(n,r),s=!0},p(a,f){const c={};f[1]&2097152&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!s||f[0]&1)&&oe(r,a[0])},i(a){s||(h(l.$$.fragment,a),s=!0)},o(a){g(l.$$.fragment,a),s=!1},d(a){a&&m(e),q(l)}}}function Ps(i){let e,l,t,n,o,r=i[0]!=""?":":"",s,a,f,c;return l=new xe({props:{$$slots:{default:[Bs]},$$scope:{ctx:i}}}),{c(){e=I("div"),A(l.$$.fragment),t=Y(),n=I("div"),o=K("New concept"),s=K(r),a=Y(),f=K(i[0]),this.h()},l(d){e=V(d,"DIV",{class:!0});var u=k(e);H(l.$$.fragment,u),t=Q(u),n=V(u,"DIV",{class:!0});var _=k(n);o=G(_,"New concept"),s=G(_,r),a=Q(_),f=G(_,i[0]),_.forEach(m),u.forEach(m),this.h()},h(){N(n,"class","ml-2"),N(e,"class","new-concept flex flex-row items-center justify-items-center")},m(d,u){D(d,e,u),B(l,e,null),p(e,t),p(e,n),p(n,o),p(n,s),p(n,a),p(n,f),c=!0},p(d,u){const _={};u[1]&2097152&&(_.$$scope={dirty:u,ctx:d}),l.$set(_),(!c||u[0]&1)&&r!==(r=d[0]!=""?":":"")&&oe(s,r),(!c||u[0]&1)&&oe(f,d[0])},i(d){c||(h(l.$$.fragment,d),c=!0)},o(d){g(l.$$.fragment,d),c=!1},d(d){d&&m(e),q(l)}}}function Fl(i){let e,l=i[51].description+"",t;return{c(){e=I("div"),t=K(l),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=k(e);t=G(o,l),o.forEach(m),this.h()},h(){N(e,"class","truncate text-xs text-gray-500")},m(n,o){D(n,e,o),p(e,t)},p(n,o){o[0]&32|o[1]&524288&&l!==(l=n[51].description+"")&&oe(t,l)},d(n){n&&m(e)}}}function Rs(i){let e,l;return e=new Wn({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function As(i){let e,l;return e=new Wn({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Bs(i){let e,l;return e=new pi({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function qs(i){Tl(i);let e,l,t,n;const o=[Ps,zs,Ms,Fs],r=[];function s(a,f){return a[51].id==="new-concept"?0:a[51].id==="keyword-search"?1:a[51].id==="semantic-search"?2:3}return e=s(i),l=r[e]=o[e](i),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),D(a,t,f),n=!0},p(a,f){Tl(a);let c=e;e=s(a),e===c?r[e].p(a,f):(te(),g(r[c],1,1,()=>{r[c]=null}),le(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){g(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function Ml(i){let e,l;return e=new dt({props:{value:Se(i[47]),text:Se(i[47])}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=Se(t[47])),n[0]&512&&(o.text=Se(t[47])),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Os(i){let e,l,t=i[9],n=[];for(let r=0;r<t.length;r+=1)n[r]=Ml(Cl(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&512){t=r[9];let a;for(a=0;a<t.length;a+=1){const f=Cl(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=Ml(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function zl(i){let e,l;return e=new vt({props:{size:"xl",class:"field-select w-48",selected:i[2]?Se(i[2]):"",disabled:i[9].length===0,warn:i[9].length===0,$$slots:{default:[Os]},$$scope:{ctx:i}}}),e.$on("change",i[21]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&4&&(o.selected=t[2]?Se(t[2]):""),n[0]&512&&(o.disabled=t[9].length===0),n[0]&512&&(o.warn=t[9].length===0),n[0]&512|n[1]&2097152&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Pl(i){let e,l;return e=new dt({props:{value:i[44].name,text:i[44].name}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&16&&(o.value=t[44].name),n[0]&16&&(o.text=t[44].name),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Hs(i){let e,l,t=i[4].data||[],n=[];for(let r=0;r<t.length;r+=1)n[r]=Pl(Nl(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&16){t=r[4].data||[];let a;for(a=0;a<t.length;a+=1){const f=Nl(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=Pl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function Ls(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,b=i[9],v,w,E,T,y,O,F;t=new ot({props:{disabled:i[3]||i[8],iconDescription:"Compute embedding index. This may be expensive.",icon:i[3]?qt:i[8]?Ot:Et}}),t.$on("click",i[36]);function M(R){i[38](R)}let S={size:"xl",items:i[5],shouldFilterItem:js,placeholder:i[7],$$slots:{default:[qs,({index:R})=>({50:R}),({index:R})=>[0,R?524288:0]]},$$scope:{ctx:i}};i[0]!==void 0&&(S.value=i[0]),c=new mi({props:S}),i[37](c),Re.push(()=>Ye(c,"value",M)),c.$on("select",i[20]);let P=zl(i);return T=new vt({props:{size:"xl",selected:i[1]||"",name:i[1]||"",$$slots:{default:[Hs]},$$scope:{ctx:i}}}),T.$on("change",i[18]),{c(){e=I("div"),l=I("div"),A(t.$$.fragment),n=Y(),o=I("div"),r=I("div"),s=I("div"),a=I("div"),f=I("div"),A(c.$$.fragment),u=Y(),_=I("div"),P.c(),v=Y(),w=I("div"),E=I("div"),A(T.$$.fragment),this.h()},l(R){e=V(R,"DIV",{class:!0});var $=k(e);l=V($,"DIV",{class:!0});var C=k(l);H(t.$$.fragment,C),C.forEach(m),n=Q($),o=V($,"DIV",{class:!0});var ee=k(o);r=V(ee,"DIV",{class:!0});var X=k(r);s=V(X,"DIV",{class:!0});var J=k(s);a=V(J,"DIV",{class:!0});var z=k(a);f=V(z,"DIV",{class:!0});var j=k(f);H(c.$$.fragment,j),j.forEach(m),z.forEach(m),J.forEach(m),X.forEach(m),ee.forEach(m),u=Q($),_=V($,"DIV",{class:!0});var U=k(_);P.l(U),U.forEach(m),v=Q($),w=V($,"DIV",{class:!0});var L=k(w);E=V(L,"DIV",{class:!0});var W=k(E);H(T.$$.fragment,W),W.forEach(m),L.forEach(m),$.forEach(m),this.h()},h(){N(l,"class","compute-embedding mr-1"),ke(l,"compute-embedding-indexing",i[8]),N(f,"class","flex-grow"),N(a,"class","flex w-full flex-row items-start justify-items-start"),N(s,"class","flex flex-row"),N(r,"class","w-full"),N(o,"class","search-container flex w-full flex-grow flex-row"),N(_,"class","mx-1"),N(E,"class","w-32"),N(w,"class","embedding-select mr-8 flex flex-row"),N(e,"class","border-1 flex w-full flex-row items-center px-4")},m(R,$){D(R,e,$),p(e,l),B(t,l,null),p(e,n),p(e,o),p(o,r),p(r,s),p(s,a),p(a,f),B(c,f,null),p(e,u),p(e,_),P.m(_,null),p(e,v),p(e,w),p(w,E),B(T,E,null),y=!0,O||(F=[Te(Me.call(null,_,{text:"Select the field to search over."})),Te(Me.call(null,E,{text:"Select the embedding to use."}))],O=!0)},p(R,$){const C={};$[0]&264&&(C.disabled=R[3]||R[8]),$[0]&264&&(C.icon=R[3]?qt:R[8]?Ot:Et),t.$set(C),(!y||$[0]&256)&&ke(l,"compute-embedding-indexing",R[8]);const ee={};$[0]&32&&(ee.items=R[5]),$[0]&128&&(ee.placeholder=R[7]),$[0]&33|$[1]&2621440&&(ee.$$scope={dirty:$,ctx:R}),!d&&$[0]&1&&(d=!0,ee.value=R[0],Qe(()=>d=!1)),c.$set(ee),$[0]&512&&pe(b,b=R[9])?(te(),g(P,1,1,x),le(),P=zl(R),P.c(),h(P,1),P.m(_,null)):P.p(R,$);const X={};$[0]&2&&(X.selected=R[1]||""),$[0]&2&&(X.name=R[1]||""),$[0]&16|$[1]&2097152&&(X.$$scope={dirty:$,ctx:R}),T.$set(X)},i(R){y||(h(t.$$.fragment,R),h(c.$$.fragment,R),h(P),h(T.$$.fragment,R),y=!0)},o(R){g(t.$$.fragment,R),g(c.$$.fragment,R),g(P),g(T.$$.fragment,R),y=!1},d(R){R&&m(e),q(t),i[37](null),q(c),P.d(R),q(T),O=!1,Xe(F)}}}const js=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-concept";function Us(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T,y,O,F,M,S,P,R=x,$=()=>(R(),R=ze(t,re=>l(34,P=re)),t),C;i.$$.on_destroy.push(()=>R());const ee=Pe();_e(i,ee,re=>l(33,S=re));const X=je();_e(i,X,re=>l(32,F=re));const J=Zn();_e(i,J,re=>l(35,C=re));const z=Ln();_e(i,z,re=>l(41,T=re));const j=Gn();_e(i,j,re=>l(4,M=re));const U=(re,Ne)=>`${Se(re||"")}_${Ne}`;let L={};const W=Lr();_e(i,W,re=>l(31,O=re));const de=zt();_e(i,de,re=>l(30,y=re));let he=[],se="",De;const ue=re=>{l(1,f=re.target.value),ee.setSearchEmbedding(re.target.value)},ae=()=>{f!=null&&(l(22,L[U(r,f)]=!0,L),T.mutate([n,o,{leaf_path:Tt(r||[]),signal:{signal_name:f}}]))};let fe;const me=(re,Ne)=>{r==null||f==null||(ee.addSearch({path:[Se(r)],query:{type:"concept",concept_namespace:re,concept_name:Ne,embedding:f}}),fe.clear())},Z=re=>{if(!(r==null||f==null)){if(re.detail.selectedId==="new-concept"){se===De.id&&l(0,se="");const Ne=se.split("/",2);let Ce="",qe="";Ne.length===2?[Ce,qe]=Ne:[qe]=Ne,Ke({command:Ge.CreateConcept,namespace:Ce,conceptName:qe,onCreate:et=>me(et.detail.namespace,et.detail.name)}),fe.clear();return}else if(re.detail.selectedId==="keyword-search"){if(se=="")return;ee.addSearch({path:[Se(r)],query:{type:"keyword",search:se}}),fe.clear();return}else if(re.detail.selectedId=="semantic-search"){if(se=="")return;ee.addSearch({path:[Se(r)],query:{type:"semantic",search:se,embedding:f}}),fe.clear();return}me(re.detail.selectedId.namespace,re.detail.selectedId.name)}},ne=re=>{ee.setSearchPath(re.target.value)},ce=()=>{ae()};function He(re){Re[re?"unshift":"push"](()=>{fe=re,l(6,fe)})}function Je(re){se=re,l(0,se)}return i.$$.update=()=>{var re,Ne;i.$$.dirty[1]&4&&$(l(10,t=ut(S.namespace,S.datasetName))),i.$$.dirty[1]&4&&(n=S.namespace),i.$$.dirty[1]&4&&(o=S.datasetName),i.$$.dirty[1]&6&&l(2,r=Rn(S,F)),i.$$.dirty[0]&4|i.$$.dirty[1]&4&&l(24,s=Vt(S,r)),i.$$.dirty[1]&2&&l(9,a=(F.visibleFields||[]).filter(Ce=>Ce.dtype==="string").map(Ce=>Se(Ce.path))),i.$$.dirty[0]&20|i.$$.dirty[1]&30&&l(1,f=Sr(C,P.data,S,F,r,(M.data||[]).map(Ce=>Ce.name))),i.$$.dirty[0]&4|i.$$.dirty[1]&2&&l(29,c=An(F,r)),i.$$.dirty[0]&536870914&&l(3,d=c!=null&&!!c.includes(f||"")),i.$$.dirty[0]&4194318&&l(8,u=!d&&L[U(r,f)]),i.$$.dirty[0]&8&&l(7,_=d?"Search by concept or keyword.":'Search by keyword. Click "compute embedding" to search by concept.'),i.$$.dirty[0]&1073741824&&l(28,b=(Ne=(re=y.data)==null?void 0:re.user)==null?void 0:Ne.id),i.$$.dirty[0]&268435456|i.$$.dirty[1]&1&&l(25,v=yr(O.data||[],b)),i.$$.dirty[0]&9&&l(23,De={id:"new-concept",text:se,disabled:!d}),i.$$.dirty[0]&1&&l(27,w={id:"keyword-search",text:se}),i.$$.dirty[0]&9&&l(26,E={id:"semantic-search",text:se,disabled:!d}),i.$$.dirty[0]&1333788683|i.$$.dirty[1]&1&&l(5,he=O!=null&&O.data?[De,...se!=""?[w]:[],...se!=""&&f?[E]:[],...v.flatMap(Ce=>Ce.concepts.map(qe=>({id:{namespace:qe.namespace,name:qe.name},text:Er(qe.namespace,qe.name,y.data),description:qe.description,disabled:!d||s.some(et=>et.query.type==="concept"&&et.query.concept_namespace===qe.namespace&&et.query.concept_name===qe.name)})))]:[])},[se,f,r,d,M,he,fe,_,u,a,t,ee,X,J,z,j,W,de,ue,ae,Z,ne,L,De,s,v,E,w,b,c,y,O,F,S,P,C,ce,He,Je]}class Ys extends we{constructor(e){super(),$e(this,e,Us,Ls,pe,{},null,[-1,-1])}}function Qs(i){let e,l;return e=new ot({props:{$$slots:{default:[Ks]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Js(i){let e,l;return{c(){e=I("span"),l=K("Invalid query"),this.h()},l(t){e=V(t,"SPAN",{class:!0});var n=k(e);l=G(n,"Invalid query"),n.forEach(m),this.h()},h(){N(e,"class","text-red-500")},m(t,n){D(t,e,n),p(e,l)},p:x,i:x,o:x,d(t){t&&m(e)}}}function Ks(i){let e;return{c(){e=K("Apply")},l(l){e=G(l,"Apply")},m(l,t){D(l,e,t)},d(l){l&&m(e)}}}function Gs(i){let e,l,t,n,o,r,s,a,f,c,d;const u=[Js,Qs],_=[];function b(v,w){return v[0]?v[3]?1:-1:0}return~(r=b(i))&&(s=_[r]=u[r](i)),{c(){e=I("pre"),l=K(""),t=K(i[2]),n=K(`
`),o=Y(),s&&s.c(),a=ie(),this.h()},l(v){e=V(v,"PRE",{class:!0,contenteditable:!0});var w=k(e);l=G(w,""),t=G(w,i[2]),n=G(w,`
`),w.forEach(m),o=Q(v),s&&s.l(v),a=ie(),this.h()},h(){N(e,"class","whitespace-pre bg-gray-50 p-4 font-mono"),N(e,"contenteditable",""),i[1]===void 0&&ct(()=>i[8].call(e)),ke(e,"outline-red-500",!i[0])},m(v,w){D(v,e,w),p(e,l),p(e,t),p(e,n),i[1]!==void 0&&(e.innerText=i[1]),D(v,o,w),~r&&_[r].m(v,w),D(v,a,w),f=!0,c||(d=Ae(e,"input",i[8]),c=!0)},p(v,[w]){(!f||w&4)&&ur(t,v[2]),w&2&&v[1]!==e.innerText&&(e.innerText=v[1]),(!f||w&1)&&ke(e,"outline-red-500",!v[0]);let E=r;r=b(v),r===E?~r&&_[r].p(v,w):(s&&(te(),g(_[E],1,1,()=>{_[E]=null}),le()),~r?(s=_[r],s?s.p(v,w):(s=_[r]=u[r](v),s.c()),h(s,1),s.m(a.parentNode,a)):s=null)},i(v){f||(h(s),f=!0)},o(v){g(s),f=!1},d(v){v&&m(e),v&&m(o),~r&&_[r].d(v),v&&m(a),c=!1,d()}}}function Zs(i,e,l){let t,n,o,r,s;const a=Pe();_e(i,a,u=>l(7,s=u));let f=!0;function c(){tt(a,s.query=JSON.parse(o),s)}function d(){o=this.innerText,l(1,o),l(2,n),l(6,t),l(7,s)}return i.$$.update=()=>{if(i.$$.dirty&128&&l(6,t=s.query),i.$$.dirty&64&&l(2,n=t?JSON.stringify(t,null,2):""),i.$$.dirty&4&&l(1,o=n),i.$$.dirty&2)try{JSON.parse(o),l(0,f=!0)}catch{l(0,f=!1)}i.$$.dirty&67&&l(3,r=f&&!Dr(JSON.parse(o),t))},[f,o,n,r,a,c,t,s,d]}class Ws extends we{constructor(e){super(),$e(this,e,Zs,Gs,pe,{})}}function Rl(i){let e,l;return e=new mr({props:{light:!0,flipped:!0,$$slots:{default:[Xs]},$$scope:{ctx:i}}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n&1073742079&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Al(i){let e,l;return e=new at({props:{text:"Sort by"}}),e.$on("click",i[20]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Bl(i){let e,l;return e=new at({props:{text:"Filter"}}),e.$on("click",i[21]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ql(i){let e,l,t,n,o,r;return l=new at({props:{disabled:!i[7],text:"Compute embedding"}}),l.$on("click",i[22]),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=k(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){N(e,"class","w-full")},m(s,a){D(s,e,a),B(l,e,null),n=!0,o||(r=Te(t=Me.call(null,e,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})),o=!0)},p(s,a){const f={};a&128&&(f.disabled=!s[7]),l.$set(f),t&&Le(t.update)&&a&128&&t.update.call(null,{text:s[7]?"":"User does not have access to compute embeddings over this dataset."})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){g(l.$$.fragment,s),n=!1},d(s){s&&m(e),q(l),o=!1,r()}}}function Ol(i){let e,l;return e=new at({props:{text:"Preview signal"}}),e.$on("click",i[23]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Hl(i){let e,l,t,n,o,r;return l=new at({props:{text:"Compute signal",disabled:!i[7]}}),l.$on("click",i[24]),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=k(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){N(e,"class","w-full")},m(s,a){D(s,e,a),B(l,e,null),n=!0,o||(r=Te(t=Me.call(null,e,{text:i[7]?"":"User does not have access to compute signals over this dataset."})),o=!0)},p(s,a){const f={};a&128&&(f.disabled=!s[7]),l.$set(f),t&&Le(t.update)&&a&128&&t.update.call(null,{text:s[7]?"":"User does not have access to compute signals over this dataset."})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){g(l.$$.fragment,s),n=!1},d(s){s&&m(e),q(l),o=!1,r()}}}function Ll(i){let e,l,t,n,o,r;return l=new at({props:{disabled:!i[6],text:"Delete signal"}}),l.$on("click",i[25]),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=k(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){N(e,"class","w-full")},m(s,a){D(s,e,a),B(l,e,null),n=!0,o||(r=Te(t=Me.call(null,e,{text:i[6]?"":"User does not have access to delete signals for this dataset."})),o=!0)},p(s,a){const f={};a&64&&(f.disabled=!s[6]),l.$set(f),t&&Le(t.update)&&a&64&&t.update.call(null,{text:s[6]?"":"User does not have access to delete signals for this dataset."})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){g(l.$$.fragment,s),n=!1},d(s){s&&m(e),q(l),o=!1,r()}}}function Xs(i){let e=_t(i[0]),l,t=yt(i[0]),n,o,r,s,a,f,c=e&&Al(i),d=t&&Bl(i),u=!i[2]&&ql(i),_=!i[2]&&Ol(i),b=!i[2]&&Hl(i),v=i[1]&&Ll(i);return{c(){c&&c.c(),l=Y(),d&&d.c(),n=Y(),u&&u.c(),o=Y(),_&&_.c(),r=Y(),b&&b.c(),s=Y(),v&&v.c(),a=ie()},l(w){c&&c.l(w),l=Q(w),d&&d.l(w),n=Q(w),u&&u.l(w),o=Q(w),_&&_.l(w),r=Q(w),b&&b.l(w),s=Q(w),v&&v.l(w),a=ie()},m(w,E){c&&c.m(w,E),D(w,l,E),d&&d.m(w,E),D(w,n,E),u&&u.m(w,E),D(w,o,E),_&&_.m(w,E),D(w,r,E),b&&b.m(w,E),D(w,s,E),v&&v.m(w,E),D(w,a,E),f=!0},p(w,E){E&1&&(e=_t(w[0])),e?c?(c.p(w,E),E&1&&h(c,1)):(c=Al(w),c.c(),h(c,1),c.m(l.parentNode,l)):c&&(te(),g(c,1,1,()=>{c=null}),le()),E&1&&(t=yt(w[0])),t?d?(d.p(w,E),E&1&&h(d,1)):(d=Bl(w),d.c(),h(d,1),d.m(n.parentNode,n)):d&&(te(),g(d,1,1,()=>{d=null}),le()),w[2]?u&&(te(),g(u,1,1,()=>{u=null}),le()):u?(u.p(w,E),E&4&&h(u,1)):(u=ql(w),u.c(),h(u,1),u.m(o.parentNode,o)),w[2]?_&&(te(),g(_,1,1,()=>{_=null}),le()):_?(_.p(w,E),E&4&&h(_,1)):(_=Ol(w),_.c(),h(_,1),_.m(r.parentNode,r)),w[2]?b&&(te(),g(b,1,1,()=>{b=null}),le()):b?(b.p(w,E),E&4&&h(b,1)):(b=Hl(w),b.c(),h(b,1),b.m(s.parentNode,s)),w[1]?v?(v.p(w,E),E&2&&h(v,1)):(v=Ll(w),v.c(),h(v,1),v.m(a.parentNode,a)):v&&(te(),g(v,1,1,()=>{v=null}),le())},i(w){f||(h(c),h(d),h(u),h(_),h(b),h(v),f=!0)},o(w){g(c),g(d),g(u),g(_),g(b),g(v),f=!1},d(w){c&&c.d(w),w&&m(l),d&&d.d(w),w&&m(n),u&&u.d(w),w&&m(o),_&&_.d(w),w&&m(r),b&&b.d(w),w&&m(s),v&&v.d(w),w&&m(a)}}}function xs(i){let e,l,t,n=Se(i[0].path)+"",o,r,s,a,f;return{c(){e=I("p"),l=K("Confirm deleting "),t=I("code"),o=K(n),r=K(" ?"),s=Y(),a=I("p"),f=K("This is a permanent action and cannot be undone."),this.h()},l(c){e=V(c,"P",{class:!0});var d=k(e);l=G(d,"Confirm deleting "),t=V(d,"CODE",{});var u=k(t);o=G(u,n),u.forEach(m),r=G(d," ?"),d.forEach(m),s=Q(c),a=V(c,"P",{class:!0});var _=k(a);f=G(_,"This is a permanent action and cannot be undone."),_.forEach(m),this.h()},h(){N(e,"class","!text-lg"),N(a,"class","mt-2")},m(c,d){D(c,e,d),p(e,l),p(e,t),p(t,o),p(e,r),D(c,s,d),D(c,a,d),p(a,f)},p(c,d){d&1&&n!==(n=Se(c[0].path)+"")&&oe(o,n)},d(c){c&&m(e),c&&m(s),c&&m(a)}}}function ea(i){let e,l,t,n,o=i[8]&&Rl(i);function r(a){i[26](a)}let s={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:i[9].isLoading?Ht:void 0,secondaryButtonText:"Cancel",$$slots:{default:[xs]},$$scope:{ctx:i}};return i[3]!==void 0&&(s.open=i[3]),l=new Qn({props:s}),Re.push(()=>Ye(l,"open",r)),l.$on("click:button--secondary",i[27]),l.$on("open",i[28]),l.$on("close",i[29]),l.$on("submit",i[14]),{c(){o&&o.c(),e=Y(),A(l.$$.fragment)},l(a){o&&o.l(a),e=Q(a),H(l.$$.fragment,a)},m(a,f){o&&o.m(a,f),D(a,e,f),B(l,a,f),n=!0},p(a,[f]){a[8]?o?(o.p(a,f),f&256&&h(o,1)):(o=Rl(a),o.c(),h(o,1),o.m(e.parentNode,e)):o&&(te(),g(o,1,1,()=>{o=null}),le());const c={};f&512&&(c.primaryButtonIcon=a[9].isLoading?Ht:void 0),f&1073741825&&(c.$$scope={dirty:f,ctx:a}),!t&&f&8&&(t=!0,c.open=a[3],Qe(()=>t=!1)),l.$set(c)},i(a){n||(h(o),h(l.$$.fragment,a),n=!0)},o(a){g(o),g(l.$$.fragment,a),n=!1},d(a){o&&o.d(a),a&&m(e),q(l,a)}}}function ta(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,b,{field:v}=e,{schema:w}=e,E=!1;const T=Pe();_e(i,T,U=>l(19,b=U));const y=je();_e(i,y,U=>l(18,_=U));const O=jr();_e(i,O,U=>l(9,d=U));const F=zt();_e(i,F,U=>l(17,u=U));function M(){d.mutate([t,n,{signal_path:v.path}],{onSuccess:()=>{l(3,E=!1),T.deleteSignal(v.path)}})}const S=()=>T.addSortBy(v.path),P=()=>Ke({command:Ge.EditFilter,namespace:t,datasetName:n,path:v.path}),R=()=>Ke({command:Ge.ComputeEmbedding,namespace:t,datasetName:n,path:v==null?void 0:v.path}),$=()=>Ke({command:Ge.PreviewConcept,namespace:t,datasetName:n,path:v==null?void 0:v.path}),C=()=>Ke({command:Ge.ComputeSignal,namespace:t,datasetName:n,path:v==null?void 0:v.path}),ee=()=>l(3,E=!0);function X(U){E=U,l(3,E)}const J=()=>l(3,E=!1);function z(U){ht.call(this,i,U)}function j(U){ht.call(this,i,U)}return i.$$set=U=>{"field"in U&&l(0,v=U.field),"schema"in U&&l(15,w=U.schema)},i.$$.update=()=>{var U,L,W;i.$$.dirty&524288&&l(5,t=b.namespace),i.$$.dirty&524288&&l(4,n=b.datasetName),i.$$.dirty&32769&&l(2,o=We(v,w)),i.$$.dirty&1&&l(1,r=st(v)),i.$$.dirty&262145&&l(16,s=Nt(((U=_.selectRowsSchema)==null?void 0:U.data)||null,v.path)),i.$$.dirty&65543&&l(8,a=(_t(v)||yt(v)||!o||r)&&!s),i.$$.dirty&131072&&l(7,f=(L=u.data)==null?void 0:L.access.dataset.compute_signals),i.$$.dirty&131072&&l(6,c=(W=u.data)==null?void 0:W.access.dataset.delete_signals)},[v,r,o,E,n,t,c,f,a,d,T,y,O,F,M,w,s,u,_,b,S,P,R,$,C,ee,X,J,z,j]}class xn extends we{constructor(e){super(),$e(this,e,ta,ea,pe,{field:0,schema:15})}}function jl(i,e,l){const t=i.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const o=`${t[8]/t[1]*100}%`;t[10]=o;const r=ye(t[8]);return t[11]=r,t}function Ul(i){let e,l,t=i[9]+"",n,o,r,s,a,f=i[11]+"",c,d,u,_,b;function v(){return i[6](i[7])}return{c(){e=I("button"),l=I("div"),n=K(t),r=Y(),s=I("div"),a=I("div"),c=K(f),u=Y(),this.h()},l(w){e=V(w,"BUTTON",{class:!0});var E=k(e);l=V(E,"DIV",{title:!0,class:!0});var T=k(l);n=G(T,t),T.forEach(m),r=Q(E),s=V(E,"DIV",{class:!0});var y=k(s);a=V(y,"DIV",{title:!0,class:!0});var O=k(a);c=G(O,f),O.forEach(m),y.forEach(m),u=Q(E),E.forEach(m),this.h()},h(){N(l,"title",o=i[9]),N(l,"class","w-48 flex-none truncate px-2"),N(a,"title",d=i[11]),N(a,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),Ze(a,"width",i[10]),N(s,"class","w-36 border-l border-gray-300 pl-2"),N(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(w,E){D(w,e,E),p(e,l),p(l,n),p(e,r),p(e,s),p(s,a),p(a,c),p(e,u),_||(b=Ae(e,"click",v),_=!0)},p(w,E){i=w,E&1&&t!==(t=i[9]+"")&&oe(n,t),E&1&&o!==(o=i[9])&&N(l,"title",o),E&1&&f!==(f=i[11]+"")&&oe(c,f),E&1&&d!==(d=i[11])&&N(a,"title",d),E&3&&Ze(a,"width",i[10])},d(w){w&&m(e),_=!1,b()}}}function la(i){let e,l=i[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=Ul(jl(i,l,n));return{c(){e=I("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=V(n,"DIV",{class:!0});var o=k(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){N(e,"class","histogram")},m(n,o){D(n,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(n,[o]){if(o&15){l=n[0];let r;for(r=0;r<l.length;r+=1){const s=jl(n,l,r);t[r]?t[r].p(s,o):(t[r]=Ul(s),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},i:x,o:x,d(n){n&&m(e),Fe(t,n)}}}function na(i,e,l){let t,{field:n}=e,{counts:o}=e,{bins:r}=e;function s(c){if(c==null)return ye(c);if(r==null||n.bins!=null)return ye(c);const[d,u]=r[c.toString()];return d==null?`< ${ye(u)}`:u==null?`≥ ${ye(d)}`:`${ye(d)} .. ${ye(u)}`}const a=bt(),f=c=>a("row-click",{value:c});return i.$$set=c=>{"field"in c&&l(4,n=c.field),"counts"in c&&l(0,o=c.counts),"bins"in c&&l(5,r=c.bins)},i.$$.update=()=>{i.$$.dirty&1&&l(1,t=Math.max(...o.map(([c,d])=>d)))},[o,t,s,a,n,r,f]}class ra extends we{constructor(e){super(),$e(this,e,na,la,pe,{field:4,counts:0,bins:5})}}function ia(i){let e,l,t,n,o,r,s,a,f,c,d,u=ye(i[4].total_count)+"",_,b,v,w,E,T,y,O,F,M,S,P,R=ye(i[4].approx_count_distinct)+"",$,C,ee,X,J,z;r=new pt({props:{class:"inline"}}),T=new pt({props:{class:"inline"}});let j=i[4].avg_text_length&&Yl(i),U=i[4].min_val&&i[4].max_val&&Ql(i);return{c(){e=I("table"),l=I("tbody"),t=I("tr"),n=I("td"),o=I("span"),A(r.$$.fragment),s=Y(),a=I("span"),f=K("Total count"),c=Y(),d=I("td"),_=K(u),b=Y(),v=I("tr"),w=I("td"),E=I("span"),A(T.$$.fragment),y=Y(),O=I("span"),F=K("Unique values"),M=Y(),S=I("td"),P=K("~"),$=K(R),C=Y(),j&&j.c(),ee=Y(),U&&U.c(),this.h()},l(L){e=V(L,"TABLE",{class:!0});var W=k(e);l=V(W,"TBODY",{});var de=k(l);t=V(de,"TR",{});var he=k(t);n=V(he,"TD",{class:!0});var se=k(n);o=V(se,"SPAN",{});var De=k(o);H(r.$$.fragment,De),De.forEach(m),s=Q(se),a=V(se,"SPAN",{});var ue=k(a);f=G(ue,"Total count"),ue.forEach(m),se.forEach(m),c=Q(he),d=V(he,"TD",{class:!0});var ae=k(d);_=G(ae,u),ae.forEach(m),he.forEach(m),b=Q(de),v=V(de,"TR",{});var fe=k(v);w=V(fe,"TD",{class:!0});var me=k(w);E=V(me,"SPAN",{});var Z=k(E);H(T.$$.fragment,Z),Z.forEach(m),y=Q(me),O=V(me,"SPAN",{});var ne=k(O);F=G(ne,"Unique values"),ne.forEach(m),me.forEach(m),M=Q(fe),S=V(fe,"TD",{class:!0});var ce=k(S);P=G(ce,"~"),$=G(ce,R),ce.forEach(m),fe.forEach(m),C=Q(de),j&&j.l(de),ee=Q(de),U&&U.l(de),de.forEach(m),W.forEach(m),this.h()},h(){N(n,"class","svelte-1tctrjz"),N(d,"class","svelte-1tctrjz"),N(w,"class","svelte-1tctrjz"),N(S,"class","svelte-1tctrjz"),N(e,"class","stats-table w-full svelte-1tctrjz")},m(L,W){D(L,e,W),p(e,l),p(l,t),p(t,n),p(n,o),B(r,o,null),p(n,s),p(n,a),p(a,f),p(t,c),p(t,d),p(d,_),p(l,b),p(l,v),p(v,w),p(w,E),B(T,E,null),p(w,y),p(w,O),p(O,F),p(v,M),p(v,S),p(S,P),p(S,$),p(l,C),j&&j.m(l,null),p(l,ee),U&&U.m(l,null),X=!0,J||(z=[Te(Me.call(null,o,{text:"Total number of rows where the value is defined."})),Te(Me.call(null,E,{text:"An approximation of the total number of unique values."}))],J=!0)},p(L,W){(!X||W&16)&&u!==(u=ye(L[4].total_count)+"")&&oe(_,u),(!X||W&16)&&R!==(R=ye(L[4].approx_count_distinct)+"")&&oe($,R),L[4].avg_text_length?j?(j.p(L,W),W&16&&h(j,1)):(j=Yl(L),j.c(),h(j,1),j.m(l,ee)):j&&(te(),g(j,1,1,()=>{j=null}),le()),L[4].min_val&&L[4].max_val?U?(U.p(L,W),W&16&&h(U,1)):(U=Ql(L),U.c(),h(U,1),U.m(l,null)):U&&(te(),g(U,1,1,()=>{U=null}),le())},i(L){X||(h(r.$$.fragment,L),h(T.$$.fragment,L),h(j),h(U),X=!0)},o(L){g(r.$$.fragment,L),g(T.$$.fragment,L),g(j),g(U),X=!1},d(L){L&&m(e),q(r),q(T),j&&j.d(),U&&U.d(),J=!1,Xe(z)}}}function sa(i){let e,l;return e=new Ue({props:{paragraph:!0,width:"50%"}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function aa(i){let e,l,t=i[2].error.message+"",n;return{c(){e=I("p"),l=K("Error: "),n=K(t)},l(o){e=V(o,"P",{});var r=k(e);l=G(r,"Error: "),n=G(r,t),r.forEach(m)},m(o,r){D(o,e,r),p(e,l),p(e,n)},p(o,r){r&4&&t!==(t=o[2].error.message+"")&&oe(n,t)},i:x,o:x,d(o){o&&m(e)}}}function Yl(i){let e,l,t,n,o,r,s,a,f,c=ye(i[4].avg_text_length)+"",d,u,_,b;return n=new pt({props:{class:"inline"}}),{c(){e=I("tr"),l=I("td"),t=I("span"),A(n.$$.fragment),o=Y(),r=I("span"),s=K("Average text length"),a=Y(),f=I("td"),d=K(c),this.h()},l(v){e=V(v,"TR",{});var w=k(e);l=V(w,"TD",{class:!0});var E=k(l);t=V(E,"SPAN",{});var T=k(t);H(n.$$.fragment,T),T.forEach(m),o=Q(E),r=V(E,"SPAN",{});var y=k(r);s=G(y,"Average text length"),y.forEach(m),E.forEach(m),a=Q(w),f=V(w,"TD",{class:!0});var O=k(f);d=G(O,c),O.forEach(m),w.forEach(m),this.h()},h(){N(l,"class","svelte-1tctrjz"),N(f,"class","svelte-1tctrjz")},m(v,w){D(v,e,w),p(e,l),p(l,t),B(n,t,null),p(l,o),p(l,r),p(r,s),p(e,a),p(e,f),p(f,d),u=!0,_||(b=Te(Me.call(null,t,{text:"The average length of the text in characters."})),_=!0)},p(v,w){(!u||w&16)&&c!==(c=ye(v[4].avg_text_length)+"")&&oe(d,c)},i(v){u||(h(n.$$.fragment,v),u=!0)},o(v){g(n.$$.fragment,v),u=!1},d(v){v&&m(e),q(n),_=!1,b()}}}function Ql(i){let e,l,t,n,o,r,s,a,f,c=ye(i[4].min_val)+"",d,u,_=ye(i[4].max_val)+"",b,v,w,E;return n=new pt({props:{class:"inline"}}),{c(){e=I("tr"),l=I("td"),t=I("span"),A(n.$$.fragment),o=Y(),r=I("span"),s=K("Range"),a=Y(),f=I("td"),d=K(c),u=K(" .. "),b=K(_),this.h()},l(T){e=V(T,"TR",{});var y=k(e);l=V(y,"TD",{class:!0});var O=k(l);t=V(O,"SPAN",{});var F=k(t);H(n.$$.fragment,F),F.forEach(m),o=Q(O),r=V(O,"SPAN",{});var M=k(r);s=G(M,"Range"),M.forEach(m),O.forEach(m),a=Q(y),f=V(y,"TD",{class:!0});var S=k(f);d=G(S,c),u=G(S," .. "),b=G(S,_),S.forEach(m),y.forEach(m),this.h()},h(){N(l,"class","svelte-1tctrjz"),N(f,"class","svelte-1tctrjz")},m(T,y){D(T,e,y),p(e,l),p(l,t),B(n,t,null),p(l,o),p(l,r),p(r,s),p(e,a),p(e,f),p(f,d),p(f,u),p(f,b),v=!0,w||(E=Te(Me.call(null,t,{text:"The minimum and maximum value across the dataset"})),w=!0)},p(T,y){(!v||y&16)&&c!==(c=ye(T[4].min_val)+"")&&oe(d,c),(!v||y&16)&&_!==(_=ye(T[4].max_val)+"")&&oe(b,_)},i(T){v||(h(n.$$.fragment,T),v=!0)},o(T){g(n.$$.fragment,T),v=!1},d(T){T&&m(e),q(n),w=!1,E()}}}function oa(i){let e,l,t;return l=new ra({props:{counts:i[5],bins:i[3],field:i[0]}}),l.$on("row-click",i[11]),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=k(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){N(e,"class","mt-4")},m(n,o){D(n,e,o),B(l,e,null),t=!0},p(n,o){const r={};o&32&&(r.counts=n[5]),o&8&&(r.bins=n[3]),o&1&&(r.field=n[0]),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&m(e),q(l)}}}function fa(i){let e,l;return e=new Ue({props:{paragraph:!0,width:"50%"}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ca(i){let e,l,t=i[1].error.message+"",n;return{c(){e=I("p"),l=K("Error: "),n=K(t)},l(o){e=V(o,"P",{});var r=k(e);l=G(r,"Error: "),n=G(r,t),r.forEach(m)},m(o,r){D(o,e,r),p(e,l),p(e,n)},p(o,r){r&2&&t!==(t=o[1].error.message+"")&&oe(n,t)},i:x,o:x,d(o){o&&m(e)}}}function ua(i){let e,l,t,n,o,r,s;const a=[aa,sa,ia],f=[];function c(b,v){return b[2].error?0:b[4]==null?1:2}l=c(i),t=f[l]=a[l](i);const d=[ca,fa,oa],u=[];function _(b,v){return b[1].error?0:b[5]==null?1:b[5].length>0?2:-1}return~(o=_(i))&&(r=u[o]=d[o](i)),{c(){e=I("div"),t.c(),n=Y(),r&&r.c(),this.h()},l(b){e=V(b,"DIV",{class:!0});var v=k(e);t.l(v),n=Q(v),r&&r.l(v),v.forEach(m),this.h()},h(){N(e,"class","p-4")},m(b,v){D(b,e,v),f[l].m(e,null),p(e,n),~o&&u[o].m(e,null),s=!0},p(b,[v]){let w=l;l=c(b),l===w?f[l].p(b,v):(te(),g(f[w],1,1,()=>{f[w]=null}),le(),t=f[l],t?t.p(b,v):(t=f[l]=a[l](b),t.c()),h(t,1),t.m(e,n));let E=o;o=_(b),o===E?~o&&u[o].p(b,v):(r&&(te(),g(u[E],1,1,()=>{u[E]=null}),le()),~o?(r=u[o],r?r.p(b,v):(r=u[o]=d[o](b),r.c()),h(r,1),r.m(e,null)):r=null)},i(b){s||(h(t),h(r),s=!0)},o(b){g(t),g(r),s=!1},d(b){b&&m(e),f[l].d(),~o&&u[o].d()}}}function da(i,e,l){let t,n,o,r,s,a=x,f=()=>(a(),a=ze(n,y=>l(1,s=y)),n),c,d=x,u=()=>(d(),d=ze(t,y=>l(2,c=y)),t),_;i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>d());let{field:b}=e;const v=Pe();_e(i,v,y=>l(10,_=y));let w=null;function E(y){if(y==null)return;if(w!=null){const[F,M]=w[y.toString()];if(F!=null){const S={path:b.path,op:"greater_equal",value:F};v.addFilter(S)}if(M!=null){const S={path:b.path,op:"less",value:M};v.addFilter(S)}return}const O={path:b.path,op:"equals",value:y};v.addFilter(O)}const T=y=>E(y.detail.value);return i.$$set=y=>{"field"in y&&l(0,b=y.field)},i.$$.update=()=>{var y;if(i.$$.dirty&1025&&u(l(7,t=Ur(_.namespace,_.datasetName,{leaf_path:b.path}))),i.$$.dirty&1025&&f(l(6,n=Yr(_.namespace,_.datasetName,{leaf_path:b.path,filters:_.query.filters}))),i.$$.dirty&2&&l(5,o=s.data!=null?s.data.counts:null),i.$$.dirty&4&&l(4,r=c.data!=null?c.data:null),i.$$.dirty&2)if(((y=s.data)==null?void 0:y.bins)!=null){l(3,w={});for(const[O,F,M]of Object.values(s.data.bins))l(3,w[O]=[F,M],w)}else l(3,w=null)},[b,s,c,w,r,o,n,t,v,E,_,T]}class ma extends we{constructor(e){super(),$e(this,e,da,ua,pe,{field:0})}}function Jl(i,e,l){const t=i.slice();return t[38]=e[l],t}function Kl(i,e,l){const t=i.slice();return t[41]=e[l],t}function Gl(i,e,l){const t=i.slice();return t[44]=e[l],t}function Zl(i,e,l){const t=i.slice();return t[47]=e[l],t}function ha(i){let e,l="{}",t;return{c(){e=I("span"),t=K(l),this.h()},l(n){e=V(n,"SPAN",{class:!0});var o=k(e);t=G(o,l),o.forEach(m),this.h()},h(){N(e,"class","font-mono")},m(n,o){D(n,e,o),p(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function _a(i){let e,l,t,n;var o=it[i[1].repeated_field.dtype];function r(s){return{props:{title:s[1].dtype}}}return o&&(l=nt(o,r(i))),{c(){e=I("div"),l&&A(l.$$.fragment),t=K("[]"),this.h()},l(s){e=V(s,"DIV",{class:!0});var a=k(e);l&&H(l.$$.fragment,a),t=G(a,"[]"),a.forEach(m),this.h()},h(){N(e,"class","flex")},m(s,a){D(s,e,a),l&&B(l,e,null),p(e,t),n=!0},p(s,a){const f={};if(a[0]&2&&(f.title=s[1].dtype),a[0]&2&&o!==(o=it[s[1].repeated_field.dtype])){if(l){te();const c=l;g(c.$$.fragment,1,0,()=>{q(c,1)}),le()}o?(l=nt(o,r(s)),A(l.$$.fragment),h(l.$$.fragment,1),B(l,e,t)):l=null}else o&&l.$set(f)},i(s){n||(l&&h(l.$$.fragment,s),n=!0)},o(s){l&&g(l.$$.fragment,s),n=!1},d(s){s&&m(e),l&&q(l)}}}function ga(i){let e,l,t;var n=it[i[1].dtype];function o(r){return{props:{title:r[1].dtype}}}return n&&(e=nt(n,o(i))),{c(){e&&A(e.$$.fragment),l=ie()},l(r){e&&H(e.$$.fragment,r),l=ie()},m(r,s){e&&B(e,r,s),D(r,l,s),t=!0},p(r,s){const a={};if(s[0]&2&&(a.title=r[1].dtype),s[0]&2&&n!==(n=it[r[1].dtype])){if(e){te();const f=e;g(f.$$.fragment,1,0,()=>{q(f,1)}),le()}n?(e=nt(n,o(r)),A(e.$$.fragment),h(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&h(e.$$.fragment,r),t=!0)},o(r){e&&g(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&q(e,r)}}}function Wl(i){let e,l;return e=new wt({props:{interactive:!0,type:"green",$$slots:{default:[va]},$$scope:{ctx:i}}}),e.$on("click",i[32]),e.$on("remove",i[33]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&16384|n[1]&524288&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function pa(i){let e,l;return e=new Rt({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ba(i){let e,l;return e=new Pt({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function va(i){let e,l,t,n,o,r,s,a;const f=[ba,pa],c=[];function d(u,_){return u[14]=="ASC"?0:1}return r=d(i),s=c[r]=f[r](i),{c(){e=I("div"),l=I("div"),t=K("Sorted"),n=Y(),o=I("span"),s.c(),this.h()},l(u){e=V(u,"DIV",{class:!0});var _=k(e);l=V(_,"DIV",{class:!0});var b=k(l);t=G(b,"Sorted"),b.forEach(m),n=Q(_),o=V(_,"SPAN",{});var v=k(o);s.l(v),v.forEach(m),_.forEach(m),this.h()},h(){N(l,"class","mr-1"),N(e,"class","flex flex-row")},m(u,_){D(u,e,_),p(e,l),p(l,t),p(e,n),p(e,o),c[r].m(o,null),a=!0},p(u,_){let b=r;r=d(u),r!==b&&(te(),g(c[b],1,1,()=>{c[b]=null}),le(),s=c[r],s||(s=c[r]=f[r](u),s.c()),h(s,1),s.m(o,null))},i(u){a||(h(s),a=!0)},o(u){g(s),a=!1},d(u){u&&m(e),c[r].d()}}}function Xl(i){let e,l,t=i[7],n=[];for(let r=0;r<t.length;r+=1)n[r]=xl(Zl(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&128){t=r[7];let a;for(a=0;a<t.length;a+=1){const f=Zl(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=xl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function xl(i){let e,l;return e=new At({props:{filter:i[47],hidePath:!0}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.filter=t[47]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function en(i){let e,l;return e=new Xn({props:{search:i[44]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&4096&&(o.search=t[44]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function tn(i){var t;let e,l;return e=new Yn({props:{embedding:(t=i[41].signal)==null?void 0:t.signal_name}}),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,o){B(e,n,o),l=!0},p(n,o){var s;const r={};o[0]&65536&&(r.embedding=(s=n[41].signal)==null?void 0:s.signal_name),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){g(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function ln(i){let e,l,t,n,o,r,s;return l=new xe({props:{type:"cyan",icon:Et}}),l.$on("click",i[34]),n=new Jn({props:{isPreview:!0}}),n.$on("click",i[35]),{c(){e=I("div"),A(l.$$.fragment),t=Y(),A(n.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0});var f=k(e);H(l.$$.fragment,f),f.forEach(m),t=Q(a),H(n.$$.fragment,a),this.h()},h(){N(e,"class","compute-signal-preview pointer-events-auto")},m(a,f){D(a,e,f),B(l,e,null),D(a,t,f),B(n,a,f),o=!0,r||(s=Te(Me.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),r=!0)},p:x,i(a){o||(h(l.$$.fragment,a),h(n.$$.fragment,a),o=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),o=!1},d(a){a&&m(e),q(l),a&&m(t),q(n,a),r=!1,s()}}}function nn(i){let e,l,t,n,o,r,s;return t=new fi({}),{c(){e=I("button"),l=I("div"),A(t.$$.fragment),this.h()},l(a){e=V(a,"BUTTON",{});var f=k(e);l=V(f,"DIV",{class:!0});var c=k(l);H(t.$$.fragment,c),c.forEach(m),f.forEach(m),this.h()},h(){N(l,"class","transition"),ke(l,"rotate-180",i[20]),ke(e,"bg-slate-300",i[20])},m(a,f){D(a,e,f),p(e,l),B(t,l,null),o=!0,r||(s=[Te(n=Me.call(null,e,{text:i[20]?"Close statistics":"See statistics"})),Ae(e,"click",i[36])],r=!0)},p(a,f){(!o||f[0]&1048576)&&ke(l,"rotate-180",a[20]),n&&Le(n.update)&&f[0]&1048576&&n.update.call(null,{text:a[20]?"Close statistics":"See statistics"}),(!o||f[0]&1048576)&&ke(e,"bg-slate-300",a[20])},i(a){o||(h(t.$$.fragment,a),o=!0)},o(a){g(t.$$.fragment,a),o=!1},d(a){a&&m(e),q(t),r=!1,Xe(s)}}}function rn(i){let e,l,t,n;return l=new ma({props:{field:i[1]}}),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(o){e=V(o,"DIV",{class:!0});var r=k(e);H(l.$$.fragment,r),r.forEach(m),this.h()},h(){N(e,"class","px-2")},m(o,r){D(o,e,r),B(l,e,null),n=!0},p(o,r){const s={};r[0]&2&&(s.field=o[1]),l.$set(s)},i(o){n||(h(l.$$.fragment,o),o&&ct(()=>{n&&(t||(t=lt(e,rt,{},!0)),t.run(1))}),n=!0)},o(o){g(l.$$.fragment,o),o&&(t||(t=lt(e,rt,{},!1)),t.run(0)),n=!1},d(o){o&&m(e),q(l),o&&t&&t.end()}}}function sn(i){let e,l,t=i[18],n=[];for(let r=0;r<t.length;r+=1)n[r]=an(Jl(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&262415){t=r[18];let a;for(a=0;a<t.length;a+=1){const f=Jl(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=an(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function an(i){let e,l;return e=new er({props:{schema:i[0],field:i[38],indent:i[3]+1,sourceField:i[8]&&We(i[38],i[0])?i[1]:i[2]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&262144&&(o.field=t[38]),n[0]&8&&(o.indent=t[3]+1),n[0]&262407&&(o.sourceField=t[8]&&We(t[38],t[0])?t[1]:t[2]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function wa(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T,y,O,F,M,S,P,R,$,C,ee;n=new Ct({props:{labelText:"Show",hideLabel:!0,checked:i[17]}}),n.$on("change",i[30]);const X=[ga,_a,ha],J=[];function z(Z,ne){return Z[1].dtype?0:Z[1].repeated_field&&Z[1].repeated_field.dtype?1:2}s=z(i),a=J[s]=X[s](i);let j=i[15]&&Wl(i),U=i[13]&&Xl(i),L=i[12],W=[];for(let Z=0;Z<L.length;Z+=1)W[Z]=en(Gl(i,L,Z));const de=Z=>g(W[Z],1,1,()=>{W[Z]=null});let he=i[16],se=[];for(let Z=0;Z<he.length;Z+=1)se[Z]=tn(Kl(i,he,Z));const De=Z=>g(se[Z],1,1,()=>{se[Z]=null});let ue=i[4]&&i[21]&&ln(i),ae=i[10]&&nn(i);F=new xn({props:{field:i[1],schema:i[0]}});let fe=i[20]&&rn(i),me=i[18].length&&sn(i);return{c(){e=I("div"),l=I("div"),t=I("div"),A(n.$$.fragment),o=Y(),r=I("div"),a.c(),c=Y(),d=I("button"),u=K(i[19]),b=Y(),j&&j.c(),v=Y(),U&&U.c(),w=Y();for(let Z=0;Z<W.length;Z+=1)W[Z].c();E=Y();for(let Z=0;Z<se.length;Z+=1)se[Z].c();T=Y(),ue&&ue.c(),y=Y(),ae&&ae.c(),O=Y(),A(F.$$.fragment),M=Y(),fe&&fe.c(),S=Y(),P=I("div"),me&&me.c(),this.h()},l(Z){e=V(Z,"DIV",{class:!0});var ne=k(e);l=V(ne,"DIV",{class:!0});var ce=k(l);t=V(ce,"DIV",{});var He=k(t);H(n.$$.fragment,He),He.forEach(m),o=Q(ce),r=V(ce,"DIV",{class:!0});var Je=k(r);a.l(Je),Je.forEach(m),c=Q(ce),d=V(ce,"BUTTON",{class:!0});var re=k(d);u=G(re,i[19]),re.forEach(m),b=Q(ce),j&&j.l(ce),v=Q(ce),U&&U.l(ce),w=Q(ce);for(let Ce=0;Ce<W.length;Ce+=1)W[Ce].l(ce);E=Q(ce);for(let Ce=0;Ce<se.length;Ce+=1)se[Ce].l(ce);T=Q(ce),ue&&ue.l(ce),y=Q(ce),ae&&ae.l(ce),O=Q(ce),H(F.$$.fragment,ce),ce.forEach(m),M=Q(ne),fe&&fe.l(ne),S=Q(ne),P=V(ne,"DIV",{});var Ne=k(P);me&&me.l(Ne),Ne.forEach(m),ne.forEach(m),this.h()},h(){Ze(t,"margin-left",i[3]*1.5+"rem"),N(r,"class","rounded-md bg-blue-200 p-0.5"),ke(r,"bg-blue-200",i[5]),N(d,"class","ml-2 grow cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),d.disabled=_=!i[10],ke(d,"cursor-default",!i[10]),N(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),ke(l,"bg-blue-50",i[5]),ke(l,"bg-emerald-100",i[4]),ke(l,"hover:bg-blue-100",i[5]),N(e,"class","border-gray-300"),ke(e,"border-b",!i[5])},m(Z,ne){D(Z,e,ne),p(e,l),p(l,t),B(n,t,null),p(l,o),p(l,r),J[s].m(r,null),p(l,c),p(l,d),p(d,u),p(l,b),j&&j.m(l,null),p(l,v),U&&U.m(l,null),p(l,w);for(let ce=0;ce<W.length;ce+=1)W[ce]&&W[ce].m(l,null);p(l,E);for(let ce=0;ce<se.length;ce+=1)se[ce]&&se[ce].m(l,null);p(l,T),ue&&ue.m(l,null),p(l,y),ae&&ae.m(l,null),p(l,O),B(F,l,null),p(e,M),fe&&fe.m(e,null),p(e,S),p(e,P),me&&me.m(P,null),$=!0,C||(ee=[Te(f=Me.call(null,r,{text:i[11]})),Ae(d,"click",i[31])],C=!0)},p(Z,ne){const ce={};ne[0]&131072&&(ce.checked=Z[17]),n.$set(ce),ne[0]&8&&Ze(t,"margin-left",Z[3]*1.5+"rem");let He=s;if(s=z(Z),s===He?J[s].p(Z,ne):(te(),g(J[He],1,1,()=>{J[He]=null}),le(),a=J[s],a?a.p(Z,ne):(a=J[s]=X[s](Z),a.c()),h(a,1),a.m(r,null)),f&&Le(f.update)&&ne[0]&2048&&f.update.call(null,{text:Z[11]}),(!$||ne[0]&32)&&ke(r,"bg-blue-200",Z[5]),(!$||ne[0]&524288)&&oe(u,Z[19]),(!$||ne[0]&1024&&_!==(_=!Z[10]))&&(d.disabled=_),(!$||ne[0]&1024)&&ke(d,"cursor-default",!Z[10]),Z[15]?j?(j.p(Z,ne),ne[0]&32768&&h(j,1)):(j=Wl(Z),j.c(),h(j,1),j.m(l,v)):j&&(te(),g(j,1,1,()=>{j=null}),le()),Z[13]?U?(U.p(Z,ne),ne[0]&8192&&h(U,1)):(U=Xl(Z),U.c(),h(U,1),U.m(l,w)):U&&(te(),g(U,1,1,()=>{U=null}),le()),ne[0]&4096){L=Z[12];let re;for(re=0;re<L.length;re+=1){const Ne=Gl(Z,L,re);W[re]?(W[re].p(Ne,ne),h(W[re],1)):(W[re]=en(Ne),W[re].c(),h(W[re],1),W[re].m(l,E))}for(te(),re=L.length;re<W.length;re+=1)de(re);le()}if(ne[0]&65536){he=Z[16];let re;for(re=0;re<he.length;re+=1){const Ne=Kl(Z,he,re);se[re]?(se[re].p(Ne,ne),h(se[re],1)):(se[re]=tn(Ne),se[re].c(),h(se[re],1),se[re].m(l,T))}for(te(),re=he.length;re<se.length;re+=1)De(re);le()}Z[4]&&Z[21]?ue?(ue.p(Z,ne),ne[0]&2097168&&h(ue,1)):(ue=ln(Z),ue.c(),h(ue,1),ue.m(l,y)):ue&&(te(),g(ue,1,1,()=>{ue=null}),le()),Z[10]?ae?(ae.p(Z,ne),ne[0]&1024&&h(ae,1)):(ae=nn(Z),ae.c(),h(ae,1),ae.m(l,O)):ae&&(te(),g(ae,1,1,()=>{ae=null}),le());const Je={};ne[0]&2&&(Je.field=Z[1]),ne[0]&1&&(Je.schema=Z[0]),F.$set(Je),(!$||ne[0]&32)&&ke(l,"bg-blue-50",Z[5]),(!$||ne[0]&16)&&ke(l,"bg-emerald-100",Z[4]),(!$||ne[0]&32)&&ke(l,"hover:bg-blue-100",Z[5]),Z[20]?fe?(fe.p(Z,ne),ne[0]&1048576&&h(fe,1)):(fe=rn(Z),fe.c(),h(fe,1),fe.m(e,S)):fe&&(te(),g(fe,1,1,()=>{fe=null}),le()),Z[18].length?me?(me.p(Z,ne),ne[0]&262144&&h(me,1)):(me=sn(Z),me.c(),h(me,1),me.m(P,null)):me&&(te(),g(me,1,1,()=>{me=null}),le()),(!$||ne[0]&32)&&ke(e,"border-b",!Z[5])},i(Z){if(!$){h(n.$$.fragment,Z),h(a),h(j),h(U);for(let ne=0;ne<L.length;ne+=1)h(W[ne]);for(let ne=0;ne<he.length;ne+=1)h(se[ne]);h(ue),h(ae),h(F.$$.fragment,Z),h(fe),h(me),Z&&ct(()=>{$&&(R||(R=lt(P,rt,{},!0)),R.run(1))}),$=!0}},o(Z){g(n.$$.fragment,Z),g(a),g(j),g(U),W=W.filter(Boolean);for(let ne=0;ne<W.length;ne+=1)g(W[ne]);se=se.filter(Boolean);for(let ne=0;ne<se.length;ne+=1)g(se[ne]);g(ue),g(ae),g(F.$$.fragment,Z),g(fe),g(me),Z&&(R||(R=lt(P,rt,{},!1)),R.run(0)),$=!1},d(Z){Z&&m(e),q(n),J[s].d(),j&&j.d(),U&&U.d(),Fe(W,Z),Fe(se,Z),ue&&ue.d(),ae&&ae.d(),q(F),fe&&fe.d(),me&&me.d(),Z&&R&&R.end(),C=!1,Xe(ee)}}}function $a(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T,y,O,F,M,S,P,R,{schema:$}=e,{field:C}=e,{sourceField:ee=void 0}=e,{indent:X=0}=e;const J=Ln();_e(i,J,ae=>l(22,R=ae));const z=Pe();_e(i,z,ae=>l(9,S=ae));const j=je();_e(i,j,ae=>l(29,P=ae));function U(ae){return ae!=null&&ae.repeated_field?U(ae.repeated_field):ae!=null&&ae.fields?[...Object.values(ae.fields).filter(fe=>fe.path.at(-1)!==jn)].flatMap(fe=>{const me=U(fe);return me.some(Z=>st(Z))?me:[fe]}).filter(fe=>{var me,Z,ne,ce;return!(fe.dtype==="embedding"||fe.signal!=null&&ft(fe).some(He=>He.dtype==="embedding")||((me=fe.signal)==null?void 0:me.signal_name)==="sentences"||((Z=fe.signal)==null?void 0:Z.signal_name)==="substring_search"||((ne=fe.signal)==null?void 0:ne.signal_name)==="semantic_similarity"||((ce=fe.signal)==null?void 0:ce.signal_name)==="concept_labels")}):[]}const L=()=>{d?z.removeSelectedColumn(r):z.addSelectedColumn(r)},W=()=>{M&&(s?z.removeExpandedColumn(r):z.addExpandedColumn(r))},de=()=>b==="ASC"?tt(z,S.query.sort_order="DESC",S):tt(z,S.query.sort_order="ASC",S),he=()=>z.removeSortBy(r),se=()=>C.signal&&E&&ee&&R.mutate([S.namespace,S.datasetName,{leaf_path:ee.path,signal:C.signal}]),De=()=>{var ae;return C.signal&&E&&Ke({command:Ge.EditPreviewConcept,namespace:S.namespace,datasetName:S.datasetName,path:ee==null?void 0:ee.path,signalName:(ae=C.signal)==null?void 0:ae.signal_name,value:C.signal})},ue=()=>{s?z.removeExpandedColumn(r):z.addExpandedColumn(r)};return i.$$set=ae=>{"schema"in ae&&l(0,$=ae.schema),"field"in ae&&l(1,C=ae.field),"sourceField"in ae&&l(2,ee=ae.sourceField),"indent"in ae&&l(3,X=ae.indent)},i.$$.update=()=>{var ae,fe,me,Z;i.$$.dirty[0]&3&&l(5,t=We(C,$)),i.$$.dirty[0]&2&&l(21,n=st(C)),i.$$.dirty[0]&32&&l(8,o=!t),i.$$.dirty[0]&2&&l(6,r=C.path),i.$$.dirty[0]&576&&l(20,s=S.expandedColumns[Se(r)]||!1),i.$$.dirty[0]&64&&l(28,a=r.at(-1)===gt),i.$$.dirty[0]&268435520&&l(19,f=a?r.at(-2):r.at(-1)),i.$$.dirty[0]&2&&l(18,c=U(C)),i.$$.dirty[0]&536870976&&l(17,d=(ae=P.visibleFields)==null?void 0:ae.some(ne=>Oe(ne.path,r))),i.$$.dirty[0]&258&&l(16,u=o?ft(C).filter(ne=>ne.signal!=null&&ft(ne).some(ce=>ce.dtype==="embedding")):[]),i.$$.dirty[0]&576&&l(15,_=(fe=S.query.sort_by)==null?void 0:fe.some(ne=>Oe(ne,r))),i.$$.dirty[0]&512&&l(14,b=S.query.sort_order),i.$$.dirty[0]&576&&l(7,v=((me=S.query.filters)==null?void 0:me.filter(ne=>Oe(ne.path,r)))||[]),i.$$.dirty[0]&128&&l(13,w=v.length>0),i.$$.dirty[0]&536870976&&l(4,E=Nt(((Z=P.selectRowsSchema)==null?void 0:Z.data)||null,r)),i.$$.dirty[0]&576&&l(12,T=Vt(S,r)),i.$$.dirty[0]&32&&l(26,y=t?". Generated by a signal":""),i.$$.dirty[0]&2&&l(27,O=C.dtype??(C.repeated_field&&C.repeated_field.dtype?`${C.repeated_field.dtype}[]`:"object")),i.$$.dirty[0]&201326592&&l(11,F=`Data type: ${O}${y}`),i.$$.dirty[0]&18&&l(10,M=_t(C)&&!E)},[$,C,ee,X,E,t,r,v,o,S,M,F,T,w,b,_,u,d,c,f,s,n,R,J,z,j,y,O,a,P,L,W,de,he,se,De,ue]}class er extends we{constructor(e){super(),$e(this,e,$a,wa,pe,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function on(i,e,l){const t=i.slice();return t[28]=e[l],t}function fn(i,e,l){const t=i.slice();return t[31]=e[l],t}function ka(i){var R;let e,l,t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T;t=new Ct({props:{labelText:"Show",hideLabel:!0,checked:i[14],disabled:i[10]}}),t.$on("change",i[23]);let y=i[15]&&cn(i),O=i[13]&&un(i),F=i[11]&&dn(i),M=i[17]&&hn(i),S=((R=i[1])==null?void 0:R.dtype)&&_n(i);v=new xn({props:{field:i[1],schema:i[0]}});let P=i[8]&&gn(i);return{c(){e=I("div"),l=I("div"),A(t.$$.fragment),n=Y(),o=I("div"),y&&y.c(),r=Y(),s=I("div"),a=K(i[16]),f=Y(),O&&O.c(),c=Y(),F&&F.c(),d=Y(),M&&M.c(),u=Y(),S&&S.c(),_=Y(),b=I("div"),A(v.$$.fragment),w=Y(),P&&P.c(),E=ie(),this.h()},l($){e=V($,"DIV",{class:!0});var C=k(e);l=V(C,"DIV",{class:!0});var ee=k(l);H(t.$$.fragment,ee),ee.forEach(m),n=Q(C),o=V(C,"DIV",{class:!0});var X=k(o);y&&y.l(X),X.forEach(m),r=Q(C),s=V(C,"DIV",{class:!0,title:!0});var J=k(s);a=G(J,i[16]),J.forEach(m),f=Q(C),O&&O.l(C),c=Q(C),F&&F.l(C),d=Q(C),M&&M.l(C),u=Q(C),S&&S.l(C),_=Q(C),b=V(C,"DIV",{});var z=k(b);H(v.$$.fragment,z),z.forEach(m),C.forEach(m),w=Q($),P&&P.l($),E=ie(),this.h()},h(){N(l,"class","w-6"),N(o,"class","w-6"),Ze(o,"margin-left",i[2]*24+"px"),N(s,"class","grow truncate whitespace-nowrap pr-2 text-gray-900"),N(s,"title",i[16]),N(e,"class","flex w-full flex-row items-center border-b border-gray-200 px-4 py-2 hover:bg-gray-100"),ke(e,"bg-blue-50",i[18]),ke(e,"hover:bg-blue-100",i[18])},m($,C){D($,e,C),p(e,l),B(t,l,null),p(e,n),p(e,o),y&&y.m(o,null),p(e,r),p(e,s),p(s,a),p(e,f),O&&O.m(e,null),p(e,c),F&&F.m(e,null),p(e,d),M&&M.m(e,null),p(e,u),S&&S.m(e,null),p(e,_),p(e,b),B(v,b,null),D($,w,C),P&&P.m($,C),D($,E,C),T=!0},p($,C){var J;const ee={};C[0]&16384&&(ee.checked=$[14]),C[0]&1024&&(ee.disabled=$[10]),t.$set(ee),$[15]?y?(y.p($,C),C[0]&32768&&h(y,1)):(y=cn($),y.c(),h(y,1),y.m(o,null)):y&&(te(),g(y,1,1,()=>{y=null}),le()),C[0]&4&&Ze(o,"margin-left",$[2]*24+"px"),(!T||C[0]&65536)&&oe(a,$[16]),(!T||C[0]&65536)&&N(s,"title",$[16]),$[13]?O?(O.p($,C),C[0]&8192&&h(O,1)):(O=un($),O.c(),h(O,1),O.m(e,c)):O&&(te(),g(O,1,1,()=>{O=null}),le()),$[11]?F?(F.p($,C),C[0]&2048&&h(F,1)):(F=dn($),F.c(),h(F,1),F.m(e,d)):F&&(te(),g(F,1,1,()=>{F=null}),le()),$[17]?M?(M.p($,C),C[0]&131072&&h(M,1)):(M=hn($),M.c(),h(M,1),M.m(e,u)):M&&(te(),g(M,1,1,()=>{M=null}),le()),(J=$[1])!=null&&J.dtype?S?S.p($,C):(S=_n($),S.c(),S.m(e,_)):S&&(S.d(1),S=null);const X={};C[0]&2&&(X.field=$[1]),C[0]&1&&(X.schema=$[0]),v.$set(X),(!T||C[0]&262144)&&ke(e,"bg-blue-50",$[18]),(!T||C[0]&262144)&&ke(e,"hover:bg-blue-100",$[18]),$[8]?P?(P.p($,C),C[0]&256&&h(P,1)):(P=gn($),P.c(),h(P,1),P.m(E.parentNode,E)):P&&(te(),g(P,1,1,()=>{P=null}),le())},i($){T||(h(t.$$.fragment,$),h(y),h(O),h(F),h(M),h(v.$$.fragment,$),h(P),T=!0)},o($){g(t.$$.fragment,$),g(y),g(O),g(F),g(M),g(v.$$.fragment,$),g(P),T=!1},d($){$&&m(e),q(t),y&&y.d(),O&&O.d(),F&&F.d(),M&&M.d(),S&&S.d(),q(v),$&&m(w),P&&P.d($),$&&m(E)}}}function Sa(i){let e,l;return e=new Bt({props:{field:i[1].repeated_field,indent:i[2],schema:i[0]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&2&&(o.field=t[1].repeated_field),n[0]&4&&(o.indent=t[2]),n[0]&1&&(o.schema=t[0]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function cn(i){let e,l,t,n,o;return l=new wi({props:{class:"w-3"}}),{c(){e=I("button"),A(l.$$.fragment),this.h()},l(r){e=V(r,"BUTTON",{class:!0});var s=k(e);H(l.$$.fragment,s),s.forEach(m),this.h()},h(){N(e,"class","p-2 transition hover:opacity-60"),ke(e,"rotate-180",!i[8])},m(r,s){D(r,e,s),B(l,e,null),t=!0,n||(o=Ae(e,"click",i[24]),n=!0)},p(r,s){(!t||s[0]&256)&&ke(e,"rotate-180",!r[8])},i(r){t||(h(l.$$.fragment,r),t=!0)},o(r){g(l.$$.fragment,r),t=!1},d(r){r&&m(e),q(l),n=!1,o()}}}function un(i){let e,l;return e=new wt({props:{interactive:!0,type:"green",$$slots:{default:[Da]},$$scope:{ctx:i}}}),e.$on("click",i[25]),e.$on("remove",i[26]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&4096|n[1]&8&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ya(i){let e,l;return e=new Rt({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Ea(i){let e,l;return e=new Pt({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Da(i){let e,l,t,n,o;const r=[Ea,ya],s=[];function a(f,c){return f[12]=="ASC"?0:1}return l=a(i),t=s[l]=r[l](i),{c(){e=K(`Sorted
        `),t.c(),n=ie()},l(f){e=G(f,`Sorted
        `),t.l(f),n=ie()},m(f,c){D(f,e,c),s[l].m(f,c),D(f,n,c),o=!0},p(f,c){let d=l;l=a(f),l!==d&&(te(),g(s[d],1,1,()=>{s[d]=null}),le(),t=s[l],t||(t=s[l]=r[l](f),t.c()),h(t,1),t.m(n.parentNode,n))},i(f){o||(h(t),o=!0)},o(f){g(t),o=!1},d(f){f&&m(e),s[l].d(f),f&&m(n)}}}function dn(i){let e,l,t=i[4],n=[];for(let r=0;r<t.length;r+=1)n[r]=mn(fn(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&16){t=r[4];let a;for(a=0;a<t.length;a+=1){const f=fn(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=mn(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function mn(i){let e,l,t,n;return l=new At({props:{filter:i[31],hidePath:!0}}),{c(){e=I("div"),A(l.$$.fragment),t=Y(),this.h()},l(o){e=V(o,"DIV",{class:!0});var r=k(e);H(l.$$.fragment,r),t=Q(r),r.forEach(m),this.h()},h(){N(e,"class","mx-1")},m(o,r){D(o,e,r),B(l,e,null),p(e,t),n=!0},p(o,r){const s={};r[0]&16&&(s.filter=o[31]),l.$set(s)},i(o){n||(h(l.$$.fragment,o),n=!0)},o(o){g(l.$$.fragment,o),n=!1},d(o){o&&m(e),q(l)}}}function hn(i){let e,l;return e=new Jn({props:{isPreview:i[9]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.isPreview=t[9]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function _n(i){let e,l=i[1].dtype+"",t,n=i[6]?"[]":"",o;return{c(){e=I("div"),t=K(l),o=K(n),this.h()},l(r){e=V(r,"DIV",{class:!0});var s=k(e);t=G(s,l),o=G(s,n),s.forEach(m),this.h()},h(){N(e,"class","w-24 px-2 text-right")},m(r,s){D(r,e,s),p(e,t),p(e,o)},p(r,s){s[0]&2&&l!==(l=r[1].dtype+"")&&oe(t,l),s[0]&64&&n!==(n=r[6]?"[]":"")&&oe(o,n)},d(r){r&&m(e)}}}function gn(i){let e,l,t,n=i[5].length&&pn(i);return{c(){e=I("div"),n&&n.c()},l(o){e=V(o,"DIV",{});var r=k(e);n&&n.l(r),r.forEach(m)},m(o,r){D(o,e,r),n&&n.m(e,null),t=!0},p(o,r){o[5].length?n?(n.p(o,r),r[0]&32&&h(n,1)):(n=pn(o),n.c(),h(n,1),n.m(e,null)):n&&(te(),g(n,1,1,()=>{n=null}),le())},i(o){t||(h(n),o&&ct(()=>{t&&(l||(l=lt(e,rt,{},!0)),l.run(1))}),t=!0)},o(o){g(n),o&&(l||(l=lt(e,rt,{},!1)),l.run(0)),t=!1},d(o){o&&m(e),n&&n.d(),o&&l&&l.end()}}}function pn(i){let e,l,t=i[5],n=[];for(let r=0;r<t.length;r+=1)n[r]=bn(on(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,s){if(s[0]&37){t=r[5];let a;for(a=0;a<t.length;a+=1){const f=on(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=bn(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function bn(i){let e,l;return e=new Bt({props:{schema:i[0],field:i[28],indent:i[2]+1}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&32&&(o.field=t[28]),n[0]&4&&(o.indent=t[2]+1),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Ia(i){let e,l,t,n;const o=[Sa,ka],r=[];function s(a,f){return a[1].repeated_field?0:1}return e=s(i),l=r[e]=o[e](i),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),D(a,t,f),n=!0},p(a,f){let c=e;e=s(a),e===c?r[e].p(a,f):(te(),g(r[c],1,1,()=>{r[c]=null}),le(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){g(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function Va(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T,y,{schema:O}=e,{field:F}=e,{indent:M=0}=e;const S=Pe();_e(i,S,z=>l(7,y=z));const P=je();_e(i,P,z=>l(22,T=z));let R=!0;function $(z){return z!=null&&z.fields?Object.values(z.fields).filter(j=>j.path.at(-1)!==jn):[]}const C=()=>{d?S.removeSelectedColumn(t):S.addSelectedColumn(t)},ee=()=>l(8,R=!R),X=()=>_==="ASC"?tt(S,y.query.sort_order="DESC",y):tt(S,y.query.sort_order="ASC",y),J=()=>S.removeSortBy(t);return i.$$set=z=>{"schema"in z&&l(0,O=z.schema),"field"in z&&l(1,F=z.field),"indent"in z&&l(2,M=z.indent)},i.$$.update=()=>{var z,j,U,L;i.$$.dirty[0]&2&&l(3,t=F.path),i.$$.dirty[0]&3&&l(21,n=Qr(O,F.path.slice(0,-1))),i.$$.dirty[0]&3&&l(18,o=We(F,O)),i.$$.dirty[0]&2&&l(6,s=F.path.at(-1)===gt),i.$$.dirty[0]&2097218&&l(17,r=s&&n?st(n):st(F)),i.$$.dirty[0]&66&&l(16,a=s?F.path.at(-2):F.path.at(-1)),i.$$.dirty[0]&2&&l(5,f=$(F)),i.$$.dirty[0]&32&&l(15,c=f.length>0),i.$$.dirty[0]&4194312&&l(14,d=(z=T.visibleFields)==null?void 0:z.some(W=>Oe(W.path,t))),i.$$.dirty[0]&136&&l(13,u=(j=y.query.sort_by)==null?void 0:j.some(W=>Oe(W,t))),i.$$.dirty[0]&128&&l(12,_=y.query.sort_order),i.$$.dirty[0]&136&&l(4,b=((U=y.query.filters)==null?void 0:U.filter(W=>Oe(W.path,t)))||[]),i.$$.dirty[0]&16&&l(11,v=b.length>0),i.$$.dirty[0]&2&&l(10,w=!F.dtype||F.dtype==="embedding"),i.$$.dirty[0]&4194312&&l(9,E=Nt(((L=T.selectRowsSchema)==null?void 0:L.data)||null,t))},[O,F,M,t,b,f,s,y,R,E,w,v,_,u,d,c,a,r,o,S,P,n,T,C,ee,X,J]}class Bt extends we{constructor(e){super(),$e(this,e,Va,Ia,pe,{schema:0,field:1,indent:2},null,[-1,-1])}}function vn(i,e,l){const t=i.slice();return t[3]=e[l],t}function wn(i,e,l){const t=i.slice();return t[3]=e[l],t}function Na(i){let e,l,t,n,o,r;return e=new kt({props:{label:"Schema",class:"w-1/3"}}),t=new kt({props:{label:"Tree View",class:"w-1/3"}}),o=new kt({props:{label:"Raw Query",class:"w-1/3"}}),{c(){A(e.$$.fragment),l=Y(),A(t.$$.fragment),n=Y(),A(o.$$.fragment)},l(s){H(e.$$.fragment,s),l=Q(s),H(t.$$.fragment,s),n=Q(s),H(o.$$.fragment,s)},m(s,a){B(e,s,a),D(s,l,a),B(t,s,a),D(s,n,a),B(o,s,a),r=!0},p:x,i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),h(o.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(o.$$.fragment,s),r=!1},d(s){q(e,s),s&&m(l),q(t,s),s&&m(n),q(o,s)}}}function Ca(i){let e=[],l=new Map,t,n,o=Object.keys(i[0].data.schema.fields);const r=s=>s[3];for(let s=0;s<o.length;s+=1){let a=wn(i,o,s),f=r(a);l.set(f,e[s]=$n(f,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=ie()},l(s){for(let a=0;a<e.length;a+=1)e[a].l(s);t=ie()},m(s,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,a);D(s,t,a),n=!0},p(s,a){a&1&&(o=Object.keys(s[0].data.schema.fields),te(),e=Dt(e,a,r,1,s,o,l,t.parentNode,It,$n,t,wn),le())},i(s){if(!n){for(let a=0;a<o.length;a+=1)h(e[a]);n=!0}},o(s){for(let a=0;a<e.length;a+=1)g(e[a]);n=!1},d(s){for(let a=0;a<e.length;a+=1)e[a].d(s);s&&m(t)}}}function Ta(i){let e,l;return e=new Ue({props:{paragraph:!0,lines:3}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function $n(i,e){let l,t,n;return t=new er({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:i,first:null,c(){l=ie(),A(t.$$.fragment),this.h()},l(o){l=ie(),H(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,r){D(o,l,r),B(t,o,r),n=!0},p(o,r){e=o;const s={};r&1&&(s.schema=e[0].data.schema),r&1&&(s.field=e[0].data.schema.fields[e[3]]),t.$set(s)},i(o){n||(h(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&m(l),q(t,o)}}}function Fa(i){let e,l,t,n;const o=[Ta,Ca],r=[];function s(a,f){var c,d;return(c=a[0])!=null&&c.isLoading?0:(d=a[0])!=null&&d.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(e=s(i))&&(l=r[e]=o[e](i)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),D(a,t,f),n=!0},p(a,f){let c=e;e=s(a),e===c?~e&&r[e].p(a,f):(l&&(te(),g(r[c],1,1,()=>{r[c]=null}),le()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){g(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function Ma(i){let e=[],l=new Map,t,n,o=Object.keys(i[0].data.schema.fields);const r=s=>s[3];for(let s=0;s<o.length;s+=1){let a=vn(i,o,s),f=r(a);l.set(f,e[s]=kn(f,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=ie()},l(s){for(let a=0;a<e.length;a+=1)e[a].l(s);t=ie()},m(s,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,a);D(s,t,a),n=!0},p(s,a){a&1&&(o=Object.keys(s[0].data.schema.fields),te(),e=Dt(e,a,r,1,s,o,l,t.parentNode,It,kn,t,vn),le())},i(s){if(!n){for(let a=0;a<o.length;a+=1)h(e[a]);n=!0}},o(s){for(let a=0;a<e.length;a+=1)g(e[a]);n=!1},d(s){for(let a=0;a<e.length;a+=1)e[a].d(s);s&&m(t)}}}function za(i){let e,l;return e=new Ue({props:{paragraph:!0,lines:3}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function kn(i,e){let l,t,n;return t=new Bt({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:i,first:null,c(){l=ie(),A(t.$$.fragment),this.h()},l(o){l=ie(),H(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,r){D(o,l,r),B(t,o,r),n=!0},p(o,r){e=o;const s={};r&1&&(s.schema=e[0].data.schema),r&1&&(s.field=e[0].data.schema.fields[e[3]]),t.$set(s)},i(o){n||(h(t.$$.fragment,o),n=!0)},o(o){g(t.$$.fragment,o),n=!1},d(o){o&&m(l),q(t,o)}}}function Pa(i){let e,l,t,n;const o=[za,Ma],r=[];function s(a,f){var c,d;return(c=a[0])!=null&&c.isLoading?0:(d=a[0])!=null&&d.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(e=s(i))&&(l=r[e]=o[e](i)),{c(){l&&l.c(),t=ie()},l(a){l&&l.l(a),t=ie()},m(a,f){~e&&r[e].m(a,f),D(a,t,f),n=!0},p(a,f){let c=e;e=s(a),e===c?~e&&r[e].p(a,f):(l&&(te(),g(r[c],1,1,()=>{r[c]=null}),le()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){g(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function Ra(i){let e,l;return e=new Ws({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Aa(i){let e,l,t,n,o,r,s;return l=new St({props:{$$slots:{default:[Fa]},$$scope:{ctx:i}}}),n=new St({props:{$$slots:{default:[Pa]},$$scope:{ctx:i}}}),r=new St({props:{$$slots:{default:[Ra]},$$scope:{ctx:i}}}),{c(){e=I("div"),A(l.$$.fragment),t=Y(),A(n.$$.fragment),o=Y(),A(r.$$.fragment),this.h()},l(a){e=V(a,"DIV",{class:!0,slot:!0});var f=k(e);H(l.$$.fragment,f),t=Q(f),H(n.$$.fragment,f),o=Q(f),H(r.$$.fragment,f),f.forEach(m),this.h()},h(){N(e,"class","h-full overflow-y-auto"),N(e,"slot","content")},m(a,f){D(a,e,f),B(l,e,null),p(e,t),B(n,e,null),p(e,o),B(r,e,null),s=!0},p(a,f){const c={};f&257&&(c.$$scope={dirty:f,ctx:a}),l.$set(c);const d={};f&257&&(d.$$scope={dirty:f,ctx:a}),n.$set(d);const u={};f&256&&(u.$$scope={dirty:f,ctx:a}),r.$set(u)},i(a){s||(h(l.$$.fragment,a),h(n.$$.fragment,a),h(r.$$.fragment,a),s=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),g(r.$$.fragment,a),s=!1},d(a){a&&m(e),q(l),q(n),q(r)}}}function Ba(i){let e,l,t;return l=new ui({props:{class:"overflow-hidden border-b border-gray-200",$$slots:{content:[Aa],default:[Na]},$$scope:{ctx:i}}}),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{class:!0});var o=k(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){N(e,"class","schema flex h-full flex-col pt-4")},m(n,o){D(n,e,o),B(l,e,null),t=!0},p(n,[o]){const r={};o&257&&(r.$$scope={dirty:o,ctx:n}),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&m(e),q(l)}}}function qa(i,e,l){let t,n;const o=je();return _e(i,o,r=>l(2,n=r)),i.$$.update=()=>{i.$$.dirty&4&&l(0,t=n.selectRowsSchema)},[t,o,n]}class Oa extends we{constructor(e){super(),$e(this,e,qa,Ba,pe,{})}}function Sn(i,e,l){const t=i.slice();return t[5]=e[l],t}function Ha(i){let e,l="{}",t;return{c(){e=I("span"),t=K(l),this.h()},l(n){e=V(n,"SPAN",{class:!0});var o=k(e);t=G(o,l),o.forEach(m),this.h()},h(){N(e,"class","font-mono")},m(n,o){D(n,e,o),p(e,t)},p:x,i:x,o:x,d(n){n&&m(e)}}}function La(i){let e,l,t;var n=it[i[5].dtype];function o(r){return{props:{title:r[5].dtype}}}return n&&(e=nt(n,o(i))),{c(){e&&A(e.$$.fragment),l=ie()},l(r){e&&H(e.$$.fragment,r),l=ie()},m(r,s){e&&B(e,r,s),D(r,l,s),t=!0},p(r,s){const a={};if(s&2&&(a.title=r[5].dtype),s&2&&n!==(n=it[r[5].dtype])){if(e){te();const f=e;g(f.$$.fragment,1,0,()=>{q(f,1)}),le()}n?(e=nt(n,o(r)),A(e.$$.fragment),h(e.$$.fragment,1),B(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&h(e.$$.fragment,r),t=!0)},o(r){e&&g(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&q(e,r)}}}function yn(i){let e;return{c(){e=K("[]")},l(l){e=G(l,"[]")},m(l,t){D(l,e,t)},d(l){l&&m(e)}}}function En(i){let e,l,t,n,o,r,s,a,f,c=i[5].path.indexOf(gt)>=0,d,u,_=Se(i[5].path)+"",b,v,w;function E(...S){return i[3](i[5],...S)}function T(...S){return i[4](i[5],...S)}t=new Ct({props:{labelText:"Download",hideLabel:!0,checked:i[0].find(E)!=null}}),t.$on("change",T);const y=[La,Ha],O=[];function F(S,P){return S[5].dtype?0:1}s=F(i),a=O[s]=y[s](i);let M=c&&yn();return{c(){e=I("div"),l=I("div"),A(t.$$.fragment),n=Y(),o=I("div"),r=I("div"),a.c(),f=Y(),M&&M.c(),d=Y(),u=I("div"),b=K(_),v=Y(),this.h()},l(S){e=V(S,"DIV",{class:!0});var P=k(e);l=V(P,"DIV",{class:!0});var R=k(l);H(t.$$.fragment,R),R.forEach(m),n=Q(P),o=V(P,"DIV",{class:!0});var $=k(o);r=V($,"DIV",{class:!0});var C=k(r);a.l(C),f=Q(C),M&&M.l(C),C.forEach(m),$.forEach(m),d=Q(P),u=V(P,"DIV",{class:!0});var ee=k(u);b=G(ee,_),ee.forEach(m),v=Q(P),P.forEach(m),this.h()},h(){N(l,"class","mr-2"),N(r,"class","inline-flex items-center rounded-md bg-blue-200 p-0.5"),N(o,"class","flex w-10"),N(u,"class","flex-grow"),N(e,"class","flex items-center")},m(S,P){D(S,e,P),p(e,l),B(t,l,null),p(e,n),p(e,o),p(o,r),O[s].m(r,null),p(r,f),M&&M.m(r,null),p(e,d),p(e,u),p(u,b),p(e,v),w=!0},p(S,P){i=S;const R={};P&3&&(R.checked=i[0].find(E)!=null),t.$set(R);let $=s;s=F(i),s===$?O[s].p(i,P):(te(),g(O[$],1,1,()=>{O[$]=null}),le(),a=O[s],a?a.p(i,P):(a=O[s]=y[s](i),a.c()),h(a,1),a.m(r,f)),P&2&&(c=i[5].path.indexOf(gt)>=0),c?M||(M=yn(),M.c(),M.m(r,null)):M&&(M.d(1),M=null),(!w||P&2)&&_!==(_=Se(i[5].path)+"")&&oe(b,_)},i(S){w||(h(t.$$.fragment,S),h(a),w=!0)},o(S){g(t.$$.fragment,S),g(a),w=!1},d(S){S&&m(e),q(t),O[s].d(),M&&M.d()}}}function ja(i){let e,l,t=i[1],n=[];for(let r=0;r<t.length;r+=1)n[r]=En(Sn(i,t,r));const o=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=ie()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=ie()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);D(r,e,s),l=!0},p(r,[s]){if(s&7){t=r[1];let a;for(a=0;a<t.length;a+=1){const f=Sn(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=En(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(te(),a=t.length;a<n.length;a+=1)o(a);le()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)g(n[s]);l=!1},d(r){Fe(n,r),r&&m(e)}}}function Ua(i,e,l){let{fields:t}=e,{checkedFields:n}=e;function o(a,f){f.target.checked?(n.push(a),l(0,n)):l(0,n=n.filter(d=>d!==a))}const r=(a,f)=>Oe(f.path,a.path),s=(a,f)=>o(a,f);return i.$$set=a=>{"fields"in a&&l(1,t=a.fields),"checkedFields"in a&&l(0,n=a.checkedFields)},[n,t,o,r,s]}class $t extends we{constructor(e){super(),$e(this,e,Ua,ja,pe,{fields:1,checkedFields:0})}}function Dn(i,e,l){const t=i.slice();return t[29]=e[l],t}function Ya(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T,y,O,F,M,S,P,R,$,C,ee;function X(z){i[23](z)}let J={invalid:i[8]!=i[9]};return i[8]!==void 0&&(J.value=i[8]),y=new ni({props:J}),Re.push(()=>Ye(y,"value",X)),P=new si({}),{c(){e=I("div"),l=I("section"),t=I("div"),n=K("Delete this dataset"),o=Y(),r=I("div"),s=I("p"),a=K("This action cannot be undone."),f=Y(),c=I("p"),d=K(`This will permanently delete the
                  `),u=I("span"),_=K(i[9]),b=K(` dataset and all its files. Please type
                  `),v=I("span"),w=K(i[9]),E=K(" to confirm."),T=Y(),A(y.$$.fragment),F=Y(),M=I("button"),S=K(`I understand, delete this dataset
                `),A(P.$$.fragment),this.h()},l(z){e=V(z,"DIV",{class:!0});var j=k(e);l=V(j,"SECTION",{class:!0});var U=k(l);t=V(U,"DIV",{class:!0});var L=k(t);n=G(L,"Delete this dataset"),L.forEach(m),o=Q(U),r=V(U,"DIV",{class:!0});var W=k(r);s=V(W,"P",{class:!0});var de=k(s);a=G(de,"This action cannot be undone."),de.forEach(m),f=Q(W),c=V(W,"P",{});var he=k(c);d=G(he,`This will permanently delete the
                  `),u=V(he,"SPAN",{class:!0});var se=k(u);_=G(se,i[9]),se.forEach(m),b=G(he,` dataset and all its files. Please type
                  `),v=V(he,"SPAN",{class:!0});var De=k(v);w=G(De,i[9]),De.forEach(m),E=G(he," to confirm."),he.forEach(m),W.forEach(m),T=Q(U),H(y.$$.fragment,U),F=Q(U),M=V(U,"BUTTON",{class:!0});var ue=k(M);S=G(ue,`I understand, delete this dataset
                `),H(P.$$.fragment,ue),ue.forEach(m),U.forEach(m),j.forEach(m),this.h()},h(){N(t,"class","text-lg text-gray-700"),N(s,"class","mb-2"),N(u,"class","font-bold"),N(v,"class","font-bold"),N(r,"class","mb-4 text-sm text-gray-500"),N(M,"class","flex cursor-pointer flex-row justify-between p-4 text-left hover:bg-gray-200"),M.disabled=R=i[8]!=i[9],ke(M,"cursor-not-allowed",i[8]!=i[9]),N(l,"class","flex flex-col gap-y-1"),N(e,"class","flex flex-col gap-y-6")},m(z,j){D(z,e,j),p(e,l),p(l,t),p(t,n),p(l,o),p(l,r),p(r,s),p(s,a),p(r,f),p(r,c),p(c,d),p(c,u),p(u,_),p(c,b),p(c,v),p(v,w),p(c,E),p(l,T),B(y,l,null),p(l,F),p(l,M),p(M,S),B(P,M,null),$=!0,C||(ee=Ae(M,"click",i[24]),C=!0)},p(z,j){(!$||j[0]&512)&&oe(_,z[9]),(!$||j[0]&512)&&oe(w,z[9]);const U={};j[0]&768&&(U.invalid=z[8]!=z[9]),!O&&j[0]&256&&(O=!0,U.value=z[8],Qe(()=>O=!1)),y.$set(U),(!$||j[0]&768&&R!==(R=z[8]!=z[9]))&&(M.disabled=R),(!$||j[0]&768)&&ke(M,"cursor-not-allowed",z[8]!=z[9])},i(z){$||(h(y.$$.fragment,z),h(P.$$.fragment,z),$=!0)},o(z){g(y.$$.fragment,z),g(P.$$.fragment,z),$=!1},d(z){z&&m(e),q(y),q(P),C=!1,ee()}}}function Qa(i){let e,l,t,n;const o=[Ka,Ja],r=[];function s(a,f){return a[6].isFetching?0:1}return e=s(i),l=r[e]=o[e](i),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),D(a,t,f),n=!0},p(a,f){let c=e;e=s(a),e===c?r[e].p(a,f):(te(),g(r[c],1,1,()=>{r[c]=null}),le(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){g(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function Ja(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T,y,O,F,M,S,P,R,$=i[3]!=null&&In(i);const C=[Za,Ga],ee=[];function X(z,j){return z[11].isFetching?0:1}T=X(i),y=ee[T]=C[T](i);let J=i[3]!=null&&i[4]!=null&&Nn(i);return{c(){e=I("div"),l=I("section"),t=I("div"),n=K("Media fields"),o=Y(),r=I("div"),s=K("These fields will be presented differently from the rest of the metadata fields."),a=Y(),$&&$.c(),f=Y(),c=I("section"),d=I("div"),u=K("Preferred embedding"),_=Y(),b=I("div"),v=K("This embedding will be used by default when indexing and querying the data."),w=Y(),E=I("div"),y.c(),O=Y(),F=I("section"),M=I("div"),S=K("Render as markdown"),P=Y(),J&&J.c(),this.h()},l(z){e=V(z,"DIV",{class:!0});var j=k(e);l=V(j,"SECTION",{class:!0});var U=k(l);t=V(U,"DIV",{class:!0});var L=k(t);n=G(L,"Media fields"),L.forEach(m),o=Q(U),r=V(U,"DIV",{class:!0});var W=k(r);s=G(W,"These fields will be presented differently from the rest of the metadata fields."),W.forEach(m),a=Q(U),$&&$.l(U),U.forEach(m),f=Q(j),c=V(j,"SECTION",{class:!0});var de=k(c);d=V(de,"DIV",{class:!0});var he=k(d);u=G(he,"Preferred embedding"),he.forEach(m),_=Q(de),b=V(de,"DIV",{class:!0});var se=k(b);v=G(se,"This embedding will be used by default when indexing and querying the data."),se.forEach(m),w=Q(de),E=V(de,"DIV",{class:!0});var De=k(E);y.l(De),De.forEach(m),de.forEach(m),O=Q(j),F=V(j,"SECTION",{class:!0});var ue=k(F);M=V(ue,"DIV",{class:!0});var ae=k(M);S=G(ae,"Render as markdown"),ae.forEach(m),P=Q(ue),J&&J.l(ue),ue.forEach(m),j.forEach(m),this.h()},h(){N(t,"class","text-lg text-gray-700"),N(r,"class","text-sm text-gray-500"),N(l,"class","flex flex-col gap-y-1"),N(d,"class","text-lg text-gray-700"),N(b,"class","text-sm text-gray-500"),N(E,"class","w-60"),N(c,"class","flex flex-col gap-y-1"),N(M,"class","text-lg text-gray-700"),N(F,"class","flex flex-col gap-y-1"),N(e,"class","flex flex-col gap-y-6")},m(z,j){D(z,e,j),p(e,l),p(l,t),p(t,n),p(l,o),p(l,r),p(r,s),p(l,a),$&&$.m(l,null),p(e,f),p(e,c),p(c,d),p(d,u),p(c,_),p(c,b),p(b,v),p(c,w),p(c,E),ee[T].m(E,null),p(e,O),p(e,F),p(F,M),p(M,S),p(F,P),J&&J.m(F,null),R=!0},p(z,j){z[3]!=null?$?($.p(z,j),j[0]&8&&h($,1)):($=In(z),$.c(),h($,1),$.m(l,null)):$&&(te(),g($,1,1,()=>{$=null}),le());let U=T;T=X(z),T===U?ee[T].p(z,j):(te(),g(ee[U],1,1,()=>{ee[U]=null}),le(),y=ee[T],y?y.p(z,j):(y=ee[T]=C[T](z),y.c()),h(y,1),y.m(E,null)),z[3]!=null&&z[4]!=null?J?(J.p(z,j),j[0]&24&&h(J,1)):(J=Nn(z),J.c(),h(J,1),J.m(F,null)):J&&(te(),g(J,1,1,()=>{J=null}),le())},i(z){R||(h($),h(y),h(J),R=!0)},o(z){g($),g(y),g(J),R=!1},d(z){z&&m(e),$&&$.d(),ee[T].d(),J&&J.d()}}}function Ka(i){let e,l;return e=new Ue({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function In(i){let e,l,t;function n(r){i[21](r)}let o={fields:i[5]};return i[3]!==void 0&&(o.checkedFields=i[3]),e=new $t({props:o}),Re.push(()=>Ye(e,"checkedFields",n)),{c(){A(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){B(e,r,s),t=!0},p(r,s){const a={};s[0]&32&&(a.fields=r[5]),!l&&s[0]&8&&(l=!0,a.checkedFields=r[3],Qe(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Ga(i){var t;let e,l;return e=new vt({props:{selected:(t=i[6].data)==null?void 0:t.preferred_embedding,$$slots:{default:[Wa]},$$scope:{ctx:i}}}),e.$on("change",i[16]),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,o){B(e,n,o),l=!0},p(n,o){var s;const r={};o[0]&64&&(r.selected=(s=n[6].data)==null?void 0:s.preferred_embedding),o[0]&2048|o[1]&2&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){g(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function Za(i){let e,l;return e=new di({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Vn(i){let e,l;return e=new dt({props:{value:i[29].name}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&2048&&(o.value=t[29].name),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Wa(i){let e,l,t,n;e=new dt({props:{value:void 0,text:"None"}});let o=i[11].data||[],r=[];for(let a=0;a<o.length;a+=1)r[a]=Vn(Dn(i,o,a));const s=a=>g(r[a],1,1,()=>{r[a]=null});return{c(){A(e.$$.fragment),l=Y();for(let a=0;a<r.length;a+=1)r[a].c();t=ie()},l(a){H(e.$$.fragment,a),l=Q(a);for(let f=0;f<r.length;f+=1)r[f].l(a);t=ie()},m(a,f){B(e,a,f),D(a,l,f);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,f);D(a,t,f),n=!0},p(a,f){if(f[0]&2048){o=a[11].data||[];let c;for(c=0;c<o.length;c+=1){const d=Dn(a,o,c);r[c]?(r[c].p(d,f),h(r[c],1)):(r[c]=Vn(d),r[c].c(),h(r[c],1),r[c].m(t.parentNode,t))}for(te(),c=o.length;c<r.length;c+=1)s(c);le()}},i(a){if(!n){h(e.$$.fragment,a);for(let f=0;f<o.length;f+=1)h(r[f]);n=!0}},o(a){g(e.$$.fragment,a),r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)g(r[f]);n=!1},d(a){q(e,a),a&&m(l),Fe(r,a),a&&m(t)}}}function Nn(i){let e,l,t;function n(r){i[22](r)}let o={fields:i[3]};return i[4]!==void 0&&(o.checkedFields=i[4]),e=new $t({props:o}),Re.push(()=>Ye(e,"checkedFields",n)),{c(){A(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){B(e,r,s),t=!0},p(r,s){const a={};s[0]&8&&(a.fields=r[3]),!l&&s[0]&16&&(l=!0,a.checkedFields=r[4],Qe(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function Xa(i){let e,l,t,n,o,r,s,a;t=new Ir({props:{items:[{title:"Fields",value:"fields"},{title:"Administration",value:"administration"}],item:i[7]}}),t.$on("select",i[20]);const f=[Qa,Ya],c=[];function d(u,_){return u[7]==="fields"?0:u[7]==="administration"?1:-1}return~(r=d(i))&&(s=c[r]=f[r](i)),{c(){e=I("div"),l=I("div"),A(t.$$.fragment),n=Y(),o=I("div"),s&&s.c(),this.h()},l(u){e=V(u,"DIV",{class:!0});var _=k(e);l=V(_,"DIV",{class:!0});var b=k(l);H(t.$$.fragment,b),b.forEach(m),n=Q(_),o=V(_,"DIV",{class:!0});var v=k(o);s&&s.l(v),v.forEach(m),_.forEach(m),this.h()},h(){N(l,"class","-ml-4 mr-4 w-96 grow-0"),N(o,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),N(e,"class","flex flex-row")},m(u,_){D(u,e,_),p(e,l),B(t,l,null),p(e,n),p(e,o),~r&&c[r].m(o,null),a=!0},p(u,_){const b={};_[0]&128&&(b.item=u[7]),t.$set(b);let v=r;r=d(u),r===v?~r&&c[r].p(u,_):(s&&(te(),g(c[v],1,1,()=>{c[v]=null}),le()),~r?(s=c[r],s?s.p(u,_):(s=c[r]=f[r](u),s.c()),h(s,1),s.m(o,null)):s=null)},i(u){a||(h(t.$$.fragment,u),h(s),a=!0)},o(u){g(t.$$.fragment,u),g(s),a=!1},d(u){u&&m(e),q(t),~r&&c[r].d()}}}function xa(i){let e,l,t,n,o,r;return e=new qn({props:{label:"Changes",title:"Dataset settings"}}),t=new On({props:{hasForm:!0,$$slots:{default:[Xa]},$$scope:{ctx:i}}}),o=new Hn({props:{primaryButtonText:"Save",secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",close),{c(){A(e.$$.fragment),l=Y(),A(t.$$.fragment),n=Y(),A(o.$$.fragment)},l(s){H(e.$$.fragment,s),l=Q(s),H(t.$$.fragment,s),n=Q(s),H(o.$$.fragment,s)},m(s,a){B(e,s,a),D(s,l,a),B(t,s,a),D(s,n,a),B(o,s,a),r=!0},p(s,a){const f={};a[0]&7166|a[1]&2&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),h(o.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(o.$$.fragment,s),r=!1},d(s){q(e,s),s&&m(l),q(t,s),s&&m(n),q(o,s)}}}function eo(i){let e,l;return e=new Bn({props:{open:i[0],$$slots:{default:[xa]},$$scope:{ctx:i}}}),e.$on("submit",i[17]),e.$on("close",i[25]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.open=t[0]),n[0]&7166|n[1]&2&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function to(i,e,l){let t,n,o,r,s,a=x,f=()=>(a(),a=ze(t,L=>l(6,s=L)),t),c,d,u;i.$$.on_destroy.push(()=>a());let{namespace:_}=e,{name:b}=e,{open:v=!1}=e,{schema:w}=e;const E=Zn();_e(i,E,L=>l(28,c=L));const T=Gn();_e(i,T,L=>l(11,d=L));const y=Jr();_e(i,y,L=>l(27,r=L));let O="fields",F=null,M=null,S=c.embedding;function P(L){S=L.target.value,S===""&&(S=void 0)}function R(){if(F==null)return;const L={ui:{media_paths:F.map(W=>W.path),markdown_paths:M==null?void 0:M.map(W=>W.path)},preferred_embedding:S};r.mutate([_,b,L],{onSuccess:()=>{l(0,v=!1)}})}let $="";const C=Kr();_e(i,C,L=>l(12,u=L));const ee=L=>l(7,O=L.detail);function X(L){F=L,l(3,F),l(6,s),l(5,o),l(19,w)}function J(L){M=L,l(4,M),l(6,s),l(5,o),l(19,w)}function z(L){$=L,l(8,$)}const j=()=>u.mutate([_,b],{onSuccess:()=>Pn("/")}),U=()=>l(0,v=!1);return i.$$set=L=>{"namespace"in L&&l(1,_=L.namespace),"name"in L&&l(2,b=L.name),"open"in L&&l(0,v=L.open),"schema"in L&&l(19,w=L.schema)},i.$$.update=()=>{var L,W,de,he;if(i.$$.dirty[0]&6&&f(l(10,t=ut(_,b))),i.$$.dirty[0]&6&&l(9,n=li(_,b)),i.$$.dirty[0]&524288&&l(5,o=Ft(w).filter(se=>se.dtype==="string"&&!Oe(se.path,[Un])&&!We(se,w))),i.$$.dirty[0]&104&&F==null){const se=(W=(L=s.data)==null?void 0:L.ui)==null?void 0:W.media_paths;se!=null&&l(3,F=o.filter(De=>se.some(ue=>Oe(De.path,ue))))}if(i.$$.dirty[0]&112&&M==null){const se=(he=(de=s.data)==null?void 0:de.ui)==null?void 0:he.markdown_paths;se!=null&&l(4,M=o.filter(De=>se.some(ue=>Oe(De.path,ue))))}},[v,_,b,F,M,o,s,O,$,n,t,d,u,E,T,y,P,R,C,w,ee,X,J,z,j,U]}class lo extends we{constructor(e){super(),$e(this,e,to,eo,pe,{namespace:1,name:2,open:0,schema:19},null,[-1,-1])}}function no(i){let e,l,t;function n(r){i[13](r)}let o={fields:i[6]};return i[1]!==void 0&&(o.checkedFields=i[1]),e=new $t({props:o}),Re.push(()=>Ye(e,"checkedFields",n)),{c(){A(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){B(e,r,s),t=!0},p(r,s){const a={};s&64&&(a.fields=r[6]),!l&&s&2&&(l=!0,a.checkedFields=r[1],Qe(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function ro(i){let e,l;return e=new Ue({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Cn(i){let e,l,t,n,o,r,s;const a=[so,io],f=[];function c(d,u){return d[5]==null?0:1}return o=c(i),r=f[o]=a[o](i),{c(){e=I("section"),l=I("h4"),t=K("Select enriched fields"),n=Y(),r.c(),this.h()},l(d){e=V(d,"SECTION",{});var u=k(e);l=V(u,"H4",{class:!0});var _=k(l);t=G(_,"Select enriched fields"),_.forEach(m),n=Q(u),r.l(u),u.forEach(m),this.h()},h(){N(l,"class","svelte-1ge817j")},m(d,u){D(d,e,u),p(e,l),p(l,t),p(e,n),f[o].m(e,null),s=!0},p(d,u){let _=o;o=c(d),o===_?f[o].p(d,u):(te(),g(f[_],1,1,()=>{f[_]=null}),le(),r=f[o],r?r.p(d,u):(r=f[o]=a[o](d),r.c()),h(r,1),r.m(e,null))},i(d){s||(h(r),s=!0)},o(d){g(r),s=!1},d(d){d&&m(e),f[o].d()}}}function io(i){let e,l,t;function n(r){i[14](r)}let o={fields:i[5]};return i[2]!==void 0&&(o.checkedFields=i[2]),e=new $t({props:o}),Re.push(()=>Ye(e,"checkedFields",n)),{c(){A(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){B(e,r,s),t=!0},p(r,s){const a={};s&32&&(a.fields=r[5]),!l&&s&4&&(l=!0,a.checkedFields=r[2],Qe(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){q(e,r)}}}function so(i){let e,l;return e=new Ue({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Tn(i){let e,l;return{c(){e=I("p"),l=K("No fields selected. Please select at least one field to download."),this.h()},l(t){e=V(t,"P",{class:!0});var n=k(e);l=G(n,"No fields selected. Please select at least one field to download."),n.forEach(m),this.h()},h(){N(e,"class","text-gray-600")},m(t,n){D(t,e,n),p(e,l)},d(t){t&&m(e)}}}function ao(i){let e,l;return e=new oi({props:{value:JSON.stringify(i[7].data,null,2),readonly:!0,rows:30,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n&128&&(o.value=JSON.stringify(t[7].data,null,2)),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function oo(i){let e,l;return e=new Ue({props:{paragraph:!0}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p:x,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function fo(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,b,v,w,E;const T=[ro,no],y=[];function O($,C){return $[6]==null?0:1}o=O(i),r=y[o]=T[o](i);let F=(i[5]==null||i[5].length>0)&&Cn(i),M=i[3].length===0&&Tn();const S=[oo,ao],P=[];function R($,C){return $[7]&&$[7].isFetching?0:$[4]&&$[7]?1:-1}return~(v=R(i))&&(w=P[v]=S[v](i)),{c(){e=I("section"),l=I("h4"),t=K("Select source fields"),n=Y(),r.c(),s=Y(),F&&F.c(),a=Y(),f=I("section"),c=I("h4"),d=K("Download preview"),u=Y(),M&&M.c(),_=Y(),b=I("div"),w&&w.c(),this.h()},l($){e=V($,"SECTION",{});var C=k(e);l=V(C,"H4",{class:!0});var ee=k(l);t=G(ee,"Select source fields"),ee.forEach(m),n=Q(C),r.l(C),C.forEach(m),s=Q($),F&&F.l($),a=Q($),f=V($,"SECTION",{});var X=k(f);c=V(X,"H4",{class:!0});var J=k(c);d=G(J,"Download preview"),J.forEach(m),u=Q(X),M&&M.l(X),_=Q(X),b=V(X,"DIV",{class:!0});var z=k(b);w&&w.l(z),z.forEach(m),X.forEach(m),this.h()},h(){N(l,"class","svelte-1ge817j"),N(c,"class","svelte-1ge817j"),N(b,"class","preview svelte-1ge817j")},m($,C){D($,e,C),p(e,l),p(l,t),p(e,n),y[o].m(e,null),D($,s,C),F&&F.m($,C),D($,a,C),D($,f,C),p(f,c),p(c,d),p(f,u),M&&M.m(f,null),p(f,_),p(f,b),~v&&P[v].m(b,null),E=!0},p($,C){let ee=o;o=O($),o===ee?y[o].p($,C):(te(),g(y[ee],1,1,()=>{y[ee]=null}),le(),r=y[o],r?r.p($,C):(r=y[o]=T[o]($),r.c()),h(r,1),r.m(e,null)),$[5]==null||$[5].length>0?F?(F.p($,C),C&32&&h(F,1)):(F=Cn($),F.c(),h(F,1),F.m(a.parentNode,a)):F&&(te(),g(F,1,1,()=>{F=null}),le()),$[3].length===0?M||(M=Tn(),M.c(),M.m(f,_)):M&&(M.d(1),M=null);let X=v;v=R($),v===X?~v&&P[v].p($,C):(w&&(te(),g(P[X],1,1,()=>{P[X]=null}),le()),~v?(w=P[v],w?w.p($,C):(w=P[v]=S[v]($),w.c()),h(w,1),w.m(b,null)):w=null)},i($){E||(h(r),h(F),h(w),E=!0)},o($){g(r),g(F),g(w),E=!1},d($){$&&m(e),y[o].d(),$&&m(s),F&&F.d($),$&&m(a),$&&m(f),M&&M.d(),~v&&P[v].d()}}}function co(i){let e,l,t,n,o,r;return e=new qn({props:{title:"Download data"}}),t=new On({props:{hasForm:!0,$$slots:{default:[fo]},$$scope:{ctx:i}}}),o=new Hn({props:{primaryButtonText:"Download",primaryButtonDisabled:i[3].length===0,secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",i[10]),{c(){A(e.$$.fragment),l=Y(),A(t.$$.fragment),n=Y(),A(o.$$.fragment)},l(s){H(e.$$.fragment,s),l=Q(s),H(t.$$.fragment,s),n=Q(s),H(o.$$.fragment,s)},m(s,a){B(e,s,a),D(s,l,a),B(t,s,a),D(s,n,a),B(o,s,a),r=!0},p(s,a){const f={};a&262398&&(f.$$scope={dirty:a,ctx:s}),t.$set(f);const c={};a&8&&(c.primaryButtonDisabled=s[3].length===0),o.$set(c)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),h(o.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(o.$$.fragment,s),r=!1},d(s){q(e,s),s&&m(l),q(t,s),s&&m(n),q(o,s)}}}function uo(i){let e,l;return e=new Bn({props:{size:"lg",open:i[0],$$slots:{default:[co]},$$scope:{ctx:i}}}),e.$on("submit",i[9]),e.$on("close",i[15]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,[n]){const o={};n&1&&(o.open=t[0]),n&262398&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function mo(i,e,l){let t,n,o,r,s,a,f=x,c=()=>(f(),f=ze(r,S=>l(7,a=S)),r);i.$$.on_destroy.push(()=>f());let{open:d=!1}=e,{schema:u}=e;const _=bt(),b=Pe();_e(i,b,S=>l(12,s=S));let v=[],w=[];function E(S){if(S==null)return{sourceFields:null,enrichedFields:null};const R=Ft(S).filter(C=>["embedding"].indexOf(C.dtype)===-1).filter(C=>!We(C,S)&&C.path.at(-1)!==Un),$=ft(S).filter(C=>st(C)).filter(C=>!ft(C).some(ee=>ee.dtype==="embedding"));return{sourceFields:R,enrichedFields:$}}async function T(){const S=s.namespace,P=s.datasetName,R={combine_columns:!1,columns:o.map(ee=>ee.path)},$=`/api/v1/datasets/${S}/${P}/select_rows_download?url_safe_options=${encodeURIComponent(JSON.stringify(R))}`,C=document.createElement("a");C.download=`${S}_${P}.json`,C.href=$,document.body.appendChild(C),C.click(),C.remove()}function y(){l(0,d=!1),_("close")}function O(S){v=S,l(1,v)}function F(S){w=S,l(2,w)}const M=()=>l(0,d=!1);return i.$$set=S=>{"open"in S&&l(0,d=S.open),"schema"in S&&l(11,u=S.schema)},i.$$.update=()=>{i.$$.dirty&2048&&l(6,{sourceFields:t,enrichedFields:n}=E(u),t,(l(5,n),l(11,u))),i.$$.dirty&6&&l(3,o=[...v,...w]),i.$$.dirty&4104&&c(l(4,r=o.length>0?Gr(s.namespace,s.datasetName,{columns:o.map(S=>S.path),limit:3,combine_columns:!1}):null))},[d,v,w,o,r,n,t,a,b,T,y,u,s,O,F,M]}class ho extends we{constructor(e){super(),$e(this,e,mo,uo,pe,{open:0,schema:11})}}function _o(i){let e,l;return e=new Di({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function go(i){let e,l;return e=new Si({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Fn(i){let e,l,t,n,o,r;function s(d){i[19](d)}let a={schema:i[10].data,namespace:i[0],name:i[1]};i[3]!==void 0&&(a.open=i[3]),e=new lo({props:a}),Re.push(()=>Ye(e,"open",s));function f(d){i[20](d)}let c={schema:i[10].data};return i[4]!==void 0&&(c.open=i[4]),n=new ho({props:c}),Re.push(()=>Ye(n,"open",f)),{c(){A(e.$$.fragment),t=Y(),A(n.$$.fragment)},l(d){H(e.$$.fragment,d),t=Q(d),H(n.$$.fragment,d)},m(d,u){B(e,d,u),D(d,t,u),B(n,d,u),r=!0},p(d,u){const _={};u&1024&&(_.schema=d[10].data),u&1&&(_.namespace=d[0]),u&2&&(_.name=d[1]),!l&&u&8&&(l=!0,_.open=d[3],Qe(()=>l=!1)),e.$set(_);const b={};u&1024&&(b.schema=d[10].data),!o&&u&16&&(o=!0,b.open=d[4],Qe(()=>o=!1)),n.$set(b)},i(d){r||(h(e.$$.fragment,d),h(n.$$.fragment,d),r=!0)},o(d){g(e.$$.fragment,d),g(n.$$.fragment,d),r=!1},d(d){q(e,d),d&&m(t),q(n,d)}}}function po(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,b,v,w,E,T;t=new Oa({});const y=[go,_o],O=[];function F(S,P){return S[9]?1:0}r=F(i),s=O[r]=y[r](i),_=new Ts({});let M=i[10].data&&Fn(i);return{c(){e=I("div"),l=I("div"),A(t.$$.fragment),n=Y(),o=I("div"),s.c(),d=Y(),u=I("div"),A(_.$$.fragment),b=Y(),M&&M.c(),v=ie(),this.h()},l(S){e=V(S,"DIV",{class:!0});var P=k(e);l=V(P,"DIV",{class:!0});var R=k(l);H(t.$$.fragment,R),n=Q(R),o=V(R,"DIV",{class:!0});var $=k(o);s.l($),$.forEach(m),R.forEach(m),d=Q(P),u=V(P,"DIV",{class:!0});var C=k(u);H(_.$$.fragment,C),C.forEach(m),P.forEach(m),b=Q(S),M&&M.l(S),v=ie(),this.h()},h(){N(o,"class",a=mt(`absolute right-0 top-1/2 flex
                h-8 w-4 cursor-pointer items-center justify-center
                rounded border
                border-neutral-200 bg-neutral-100
                opacity-60 hover:bg-neutral-200
                hover:opacity-100
                ${i[9]?" translate-x-full":" translate-x-1/2"}`)+" svelte-1nu5kbu"),N(l,"class",c=mt(`schema-container relative h-full ${i[9]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1nu5kbu"),N(u,"class","h-full w-2/3 flex-grow"),N(e,"class","flex h-full w-full")},m(S,P){D(S,e,P),p(e,l),B(t,l,null),p(l,n),p(l,o),O[r].m(o,null),p(e,d),p(e,u),B(_,u,null),D(S,b,P),M&&M.m(S,P),D(S,v,P),w=!0,E||(T=[Te(f=Me.call(null,o,{text:i[9]?"Show Schema":"Hide Schema"})),Ae(o,"click",i[12]),Ae(o,"keypress",i[12])],E=!0)},p(S,P){let R=r;r=F(S),r!==R&&(te(),g(O[R],1,1,()=>{O[R]=null}),le(),s=O[r],s||(s=O[r]=y[r](S),s.c()),h(s,1),s.m(o,null)),(!w||P&512&&a!==(a=mt(`absolute right-0 top-1/2 flex
                h-8 w-4 cursor-pointer items-center justify-center
                rounded border
                border-neutral-200 bg-neutral-100
                opacity-60 hover:bg-neutral-200
                hover:opacity-100
                ${S[9]?" translate-x-full":" translate-x-1/2"}`)+" svelte-1nu5kbu"))&&N(o,"class",a),f&&Le(f.update)&&P&512&&f.update.call(null,{text:S[9]?"Show Schema":"Hide Schema"}),(!w||P&512&&c!==(c=mt(`schema-container relative h-full ${S[9]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1nu5kbu"))&&N(l,"class",c),S[10].data?M?(M.p(S,P),P&1024&&h(M,1)):(M=Fn(S),M.c(),h(M,1),M.m(v.parentNode,v)):M&&(te(),g(M,1,1,()=>{M=null}),le())},i(S){w||(h(t.$$.fragment,S),h(s),h(_.$$.fragment,S),h(M),w=!0)},o(S){g(t.$$.fragment,S),g(s),g(_.$$.fragment,S),g(M),w=!1},d(S){S&&m(e),q(t),O[r].d(),q(_),S&&m(b),M&&M.d(S),S&&m(v),E=!1,Xe(T)}}}function bo(i){let e,l=i[2].namespace+"",t,n,o=i[2].datasetName+"",r,s,a;return{c(){e=I("a"),t=K(l),n=K("/"),r=K(o),this.h()},l(f){e=V(f,"A",{class:!0,href:!0});var c=k(e);t=G(c,l),n=G(c,"/"),r=G(c,o),c.forEach(m),this.h()},h(){N(e,"class","font-semibold text-black"),N(e,"href",i[6])},m(f,c){D(f,e,c),p(e,t),p(e,n),p(e,r),s||(a=Ae(e,"click",i[18]),s=!0)},p(f,c){c&4&&l!==(l=f[2].namespace+"")&&oe(t,l),c&4&&o!==(o=f[2].datasetName+"")&&oe(r,o),c&64&&N(e,"href",f[6])},d(f){f&&m(e),s=!1,a()}}}function vo(i){let e,l,t;return l=new xe({props:{type:"outline",$$slots:{default:[bo]},$$scope:{ctx:i}}}),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{slot:!0});var o=k(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){N(e,"slot","header-subtext")},m(n,o){D(n,e,o),B(l,e,null),t=!0},p(n,o){const r={};o&2097220&&(r.$$scope={dirty:o,ctx:n}),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&m(e),q(l)}}}function wo(i){let e,l,t;return l=new Ys({}),{c(){e=I("div"),A(l.$$.fragment),this.h()},l(n){e=V(n,"DIV",{slot:!0,class:!0});var o=k(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){N(e,"slot","header-center"),N(e,"class","flex w-full items-center")},m(n,o){D(n,e,o),B(l,e,null),t=!0},p:x,i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&m(e),q(l)}}}function Mn(i){let e,l,t,n;return{c(){e=I("div"),l=K("Copied!"),this.h()},l(o){e=V(o,"DIV",{class:!0});var r=k(e);l=G(r,"Copied!"),r.forEach(m),this.h()},h(){N(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(o,r){D(o,e,r),p(e,l),n=!0},i(o){n||(t&&t.end(1),n=!0)},o(o){t=dr(e,Nr,{}),n=!1},d(o){o&&m(e),o&&t&&t.end()}}}function $o(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,b,v,w=i[5]&&Mn();return r=new ot({props:{size:"field",kind:"ghost",icon:Ri,iconDescription:"Copy the URL"}}),r.$on("click",i[15]),a=new ot({props:{size:"field",kind:"ghost",icon:Ni,iconDescription:"Download data"}}),a.$on("click",i[16]),d=new ot({props:{disabled:!i[7],size:"field",kind:"ghost",icon:hi,iconDescription:"Dataset settings"}}),d.$on("click",i[17]),{c(){e=I("div"),l=I("div"),t=I("div"),n=I("div"),w&&w.c(),o=Y(),A(r.$$.fragment),s=Y(),A(a.$$.fragment),f=Y(),c=I("div"),A(d.$$.fragment),this.h()},l(E){e=V(E,"DIV",{slot:!0});var T=k(e);l=V(T,"DIV",{class:!0});var y=k(l);t=V(y,"DIV",{class:!0});var O=k(t);n=V(O,"DIV",{class:!0});var F=k(n);w&&w.l(F),o=Q(F),H(r.$$.fragment,F),F.forEach(m),s=Q(O),H(a.$$.fragment,O),f=Q(O),c=V(O,"DIV",{});var M=k(c);H(d.$$.fragment,M),M.forEach(m),O.forEach(m),y.forEach(m),T.forEach(m),this.h()},h(){N(n,"class","relative"),ke(c,"opacity-40",!i[7]),N(t,"class","flex"),N(l,"class","flex h-full flex-col"),N(e,"slot","header-right")},m(E,T){D(E,e,T),p(e,l),p(l,t),p(t,n),w&&w.m(n,null),p(n,o),B(r,n,null),p(t,s),B(a,t,null),p(t,f),p(t,c),B(d,c,null),_=!0,b||(v=Te(u=Me.call(null,c,{text:i[7]?"":"User does not have access to update settings of this dataset."})),b=!0)},p(E,T){E[5]?w?T&32&&h(w,1):(w=Mn(),w.c(),h(w,1),w.m(n,o)):w&&(te(),g(w,1,1,()=>{w=null}),le());const y={};T&128&&(y.disabled=!E[7]),d.$set(y),u&&Le(u.update)&&T&128&&u.update.call(null,{text:E[7]?"":"User does not have access to update settings of this dataset."}),(!_||T&128)&&ke(c,"opacity-40",!E[7])},i(E){_||(h(w),h(r.$$.fragment,E),h(a.$$.fragment,E),h(d.$$.fragment,E),_=!0)},o(E){g(w),g(r.$$.fragment,E),g(a.$$.fragment,E),g(d.$$.fragment,E),_=!1},d(E){E&&m(e),w&&w.d(),q(r),q(a),q(d),b=!1,v()}}}function ko(i){let e,l,t,n;return e=new hr({props:{$$slots:{"header-right":[$o],"header-center":[wo],"header-subtext":[vo],default:[po]},$$scope:{ctx:i}}}),t=new Vr({}),{c(){A(e.$$.fragment),l=Y(),A(t.$$.fragment)},l(o){H(e.$$.fragment,o),l=Q(o),H(t.$$.fragment,o)},m(o,r){B(e,o,r),D(o,l,r),B(t,o,r),n=!0},p(o,[r]){const s={};r&2098943&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(h(e.$$.fragment,o),h(t.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),n=!1},d(o){q(e,o),o&&m(l),q(t,o)}}}function So(i,e,l){let t,n,o,r,s,a,f,c=x,d=()=>(c(),c=ze(n,$=>l(10,f=$)),n);i.$$.on_destroy.push(()=>c());let{namespace:u}=e,{datasetName:_}=e;const b=Pe();_e(i,b,$=>l(2,a=$));function v(){tt(b,a.schemaCollapsed=!a.schemaCollapsed,a)}let w=!1,E=!1;const T=zt();_e(i,T,$=>l(14,s=$));let y=!1;const O=()=>navigator.clipboard.writeText(location.href).then(()=>{l(5,y=!0),setTimeout(()=>l(5,y=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),F=()=>l(4,E=!0),M=()=>l(3,w=!0),S=()=>Pn(r);function P($){w=$,l(3,w)}function R($){E=$,l(4,E)}return i.$$set=$=>{"namespace"in $&&l(0,u=$.namespace),"datasetName"in $&&l(1,_=$.datasetName)},i.$$.update=()=>{var $;i.$$.dirty&4&&l(9,t=a.schemaCollapsed),i.$$.dirty&4&&d(l(8,n=Mt(a.namespace,a.datasetName))),i.$$.dirty&16384&&l(7,o=($=s.data)==null?void 0:$.access.dataset.update_settings),i.$$.dirty&3&&l(6,r=ri(u,_))},[u,_,a,w,E,y,r,o,n,t,f,b,v,T,s,O,F,M,S,P,R]}class yo extends we{constructor(e){super(),$e(this,e,So,ko,pe,{namespace:0,datasetName:1})}}function Eo(i){let e;return{c(){e=K("Page not found! Please specify a dataset.")},l(l){e=G(l,"Page not found! Please specify a dataset.")},m(l,t){D(l,e,t)},p:x,i:x,o:x,d(l){l&&m(e)}}}function Do(i){let e=i[2],l,t,n=zn(i);return{c(){n.c(),l=ie()},l(o){n.l(o),l=ie()},m(o,r){n.m(o,r),D(o,l,r),t=!0},p(o,r){r&4&&pe(e,e=o[2])?(te(),g(n,1,1,x),le(),n=zn(o),n.c(),h(n,1),n.m(l.parentNode,l)):n.p(o,r)},i(o){t||(h(n),t=!0)},o(o){g(n),t=!1},d(o){o&&m(l),n.d(o)}}}function zn(i){let e,l;return e=new yo({props:{namespace:i[0],datasetName:i[1]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){B(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.namespace=t[0]),n&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Io(i){let e,l,t,n;const o=[Do,Eo],r=[];function s(a,f){return a[2]&&a[0]&&a[1]?0:1}return e=s(i),l=r[e]=o[e](i),{c(){l.c(),t=ie()},l(a){l.l(a),t=ie()},m(a,f){r[e].m(a,f),D(a,t,f),n=!0},p(a,[f]){let c=e;e=s(a),e===c?r[e].p(a,f):(te(),g(r[c],1,1,()=>{r[c]=null}),le(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){g(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function Vo(i,e,l){let t,n,o,r,s,a,f,c,d=x,u=()=>(d(),d=ze(f,X=>l(10,c=X)),f),_,b=x,v=()=>(b(),b=ze(t,X=>l(11,_=X)),t),w,E=x,T=()=>(E(),E=ze(a,X=>l(12,w=X)),a),y,O=x,F=()=>(O(),O=ze(r,X=>l(13,y=X)),r),M,S=x,P=()=>(S(),S=ze(o,X=>l(14,M=X)),o),R;i.$$.on_destroy.push(()=>d()),i.$$.on_destroy.push(()=>b()),i.$$.on_destroy.push(()=>E()),i.$$.on_destroy.push(()=>O()),i.$$.on_destroy.push(()=>S());let $,C;const ee=Cr();return _e(i,ee,X=>l(15,R=X)),i.$$.update=()=>{var X,J;if(i.$$.dirty&32771&&R.page==="datasets")if(R.identifier==""||R.identifier==null)l(0,$=void 0),l(1,C=void 0);else{const[z,j]=R.identifier.split("/");($!=z||C!=j)&&(l(0,$=z),l(1,C=j))}if(i.$$.dirty&3&&v(l(2,t=$&&C?zr(ee,$,C):null)),i.$$.dirty&4&&t!=null&&Tr(t),i.$$.dirty&3&&l(8,n=$&&C?Pr($,C):null),i.$$.dirty&256&&n!=null&&Fr(n),i.$$.dirty&3&&P(l(6,o=$&&C?ut($,C):null)),i.$$.dirty&16640&&n&&M!=null&&M.data&&n.setSettings(M.data),i.$$.dirty&3&&F(l(5,r=$&&C?Mt($,C):null)),i.$$.dirty&8448&&n&&y!=null&&y.data&&n.setSchema(y.data),i.$$.dirty&8192&&l(9,s=y!=null&&y.data?Zr("string",y.data):null),i.$$.dirty&515&&T(l(4,a=$&&C&&s?Wr($,C,s.map(z=>z.path)):null)),i.$$.dirty&4352&&n&&w!=null&&w.data&&!w.isFetching&&n.setStats(w.data),i.$$.dirty&2051&&u(l(3,f=$&&C&&_?Xr($,C,Rr(_)):null)),i.$$.dirty&1280&&n&&c!=null&&c.data&&n.setSelectRowsSchema(c),i.$$.dirty&3328&&n&&_&&(X=c==null?void 0:c.data)!=null&&X.schema){const z=Mr(_.selectedColumns||{},((J=c.data)==null?void 0:J.schema)||null);n.setVisibleFields(z)}},[$,C,t,f,a,r,o,ee,n,s,c,_,w,y,M,R]}class Qo extends we{constructor(e){super(),$e(this,e,Vo,Io,pe,{})}}export{Qo as component};
