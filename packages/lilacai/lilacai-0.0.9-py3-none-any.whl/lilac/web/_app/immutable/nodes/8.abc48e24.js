import{S as ke,i as we,s as re,k as V,q as Y,a as J,y as P,l as D,m as j,r as Z,h as d,c as z,z as y,n as F,G as ae,b as N,a0 as b,A as C,u as le,g as u,v as Q,d as _,f as K,B as T,o as Ie,w as ie,T as oe,U as fe,a1 as U,ab as ue,O as ce,e as me,H as Ve}from"../chunks/index.b7741aa8.js";import{g as De}from"../chunks/navigation.079c90e4.js";import{P as je}from"../chunks/Page.db7c5102.js";import{B as Pe,aN as ye,at as Ce,aO as Te,aJ as Fe,aP as Oe,aQ as He,aR as Ne,av as Re,aw as qe,D as Ae,aS as Je,c as se,i as ze,d as Be}from"../chunks/Commands.5462b365.js";import{i as Me}from"../chunks/notificationsStore.f0ce865c.js";import{T as Ue,a as _e,b as pe,R as Ge}from"../chunks/RowItemMetadata.fd9470eb.js";import{T as Se,S as Le}from"../chunks/StringSpanHighlight.200c9f0d.js";import{g as Qe,s as Ke}from"../chunks/utils.9aeb0141.js";function de(s){let t,n,e;return n=new Te({props:{source:s[0].json_schema.description}}),{c(){t=V("div"),P(n.$$.fragment),this.h()},l(r){t=D(r,"DIV",{class:!0});var l=j(t);y(n.$$.fragment,l),l.forEach(d),this.h()},h(){F(t,"class","text text-base text-gray-600")},m(r,l){N(r,t,l),C(n,t,null),e=!0},p(r,l){const a={};l&1&&(a.source=r[0].json_schema.description),n.$set(a)},i(r){e||(u(n.$$.fragment,r),e=!0)},o(r){_(n.$$.fragment,r),e=!1},d(r){r&&d(t),T(n)}}}function We(s){let t;return{c(){t=Y("Compute")},l(n){t=Z(n,"Compute")},m(n,e){N(n,t,e)},d(n){n&&d(t)}}}function Xe(s){let t,n;return t=new Ue({props:{$$slots:{content:[tt],default:[Ze]},$$scope:{ctx:s}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&8389594&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function Ye(s){let t,n;return t=new se({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:U,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function Ze(s){let t,n,e,r;return t=new _e({props:{label:"Preview"}}),e=new _e({props:{label:"Raw response"}}),{c(){P(t.$$.fragment),n=J(),P(e.$$.fragment)},l(l){y(t.$$.fragment,l),n=z(l),y(e.$$.fragment,l)},m(l,a){C(t,l,a),N(l,n,a),C(e,l,a),r=!0},p:U,i(l){r||(u(t.$$.fragment,l),u(e.$$.fragment,l),r=!0)},o(l){_(t.$$.fragment,l),_(e.$$.fragment,l),r=!1},d(l){T(t,l),l&&d(n),T(e,l)}}}function ge(s){let t,n;return t=new Le({props:{text:s[1],row:s[6],spanPaths:s[3],valuePaths:s[7],embeddings:[]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&2&&(l.text=e[1]),r&64&&(l.row=e[6]),r&8&&(l.spanPaths=e[3]),r&128&&(l.valuePaths=e[7]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function $e(s){let t,n;return t=new Ge({props:{row:s[6],visibleFields:s[8]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&64&&(l.row=e[6]),r&256&&(l.visibleFields=e[8]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function he(s){let t,n,e;return{c(){t=V("div"),n=V("div"),e=Y(s[9]),this.h()},l(r){t=D(r,"DIV",{class:!0});var l=j(t);n=D(l,"DIV",{class:!0});var a=j(n);e=Z(a,s[9]),a.forEach(d),l.forEach(d),this.h()},h(){F(n,"class","text text-base"),F(t,"class","flex flex-row items-center")},m(r,l){N(r,t,l),b(t,n),b(n,e)},p(r,l){l&512&&le(e,r[9])},d(r){r&&d(t)}}}function xe(s){let t,n,e,r,l=s[7].length>0&&ge(s),a=s[8].length>0&&$e(s),f=s[9]!=null&&he(s);return{c(){t=V("div"),l&&l.c(),n=J(),a&&a.c(),e=J(),f&&f.c(),this.h()},l(o){t=D(o,"DIV",{class:!0});var i=j(t);l&&l.l(i),n=z(i),a&&a.l(i),e=z(i),f&&f.l(i),i.forEach(d),this.h()},h(){F(t,"class","mt-2")},m(o,i){N(o,t,i),l&&l.m(t,null),b(t,n),a&&a.m(t,null),b(t,e),f&&f.m(t,null),r=!0},p(o,i){o[7].length>0?l?(l.p(o,i),i&128&&u(l,1)):(l=ge(o),l.c(),u(l,1),l.m(t,n)):l&&(Q(),_(l,1,1,()=>{l=null}),K()),o[8].length>0?a?(a.p(o,i),i&256&&u(a,1)):(a=$e(o),a.c(),u(a,1),a.m(t,e)):a&&(Q(),_(a,1,1,()=>{a=null}),K()),o[9]!=null?f?f.p(o,i):(f=he(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i(o){r||(u(l),u(a),r=!0)},o(o){_(l),_(a),r=!1},d(o){o&&d(t),l&&l.d(),a&&a.d(),f&&f.d()}}}function et(s){let t,n;return t=new Se({props:{value:JSON.stringify(s[4].data.items[0],null,2),readonly:!0,rows:10,class:"mb-2 font-mono"}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&16&&(l.value=JSON.stringify(e[4].data.items[0],null,2)),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function tt(s){let t,n,e,r;return t=new pe({props:{$$slots:{default:[xe]},$$scope:{ctx:s}}}),e=new pe({props:{$$slots:{default:[et]},$$scope:{ctx:s}}}),{c(){P(t.$$.fragment),n=J(),P(e.$$.fragment)},l(l){y(t.$$.fragment,l),n=z(l),y(e.$$.fragment,l)},m(l,a){C(t,l,a),N(l,n,a),C(e,l,a),r=!0},p(l,a){const f={};a&8389578&&(f.$$scope={dirty:a,ctx:l}),t.$set(f);const o={};a&8388624&&(o.$$scope={dirty:a,ctx:l}),e.$set(o)},i(l){r||(u(t.$$.fragment,l),u(e.$$.fragment,l),r=!0)},o(l){_(t.$$.fragment,l),_(e.$$.fragment,l),r=!1},d(l){T(t,l),l&&d(n),T(e,l)}}}function ve(s){var H;let t,n,e,r,l,a,f,o;function i(c){s[21](c)}function g(c){s[22](c)}let m={schema:s[0].json_schema,showDescription:!1,hiddenProperties:["/signal_name"],customComponents:s[16][(H=s[0])==null?void 0:H.name]};return s[2]!==void 0&&(m.value=s[2]),s[10]!==void 0&&(m.validationErrors=s[10]),l=new Fe({props:m}),ie.push(()=>oe(l,"value",i)),ie.push(()=>oe(l,"validationErrors",g)),{c(){t=V("div"),n=V("h4"),e=Y("Signal options"),r=J(),P(l.$$.fragment)},l(c){t=D(c,"DIV",{});var $=j(t);n=D($,"H4",{});var k=j(n);e=Z(k,"Signal options"),k.forEach(d),r=z($),y(l.$$.fragment,$),$.forEach(d)},m(c,$){N(c,t,$),b(t,n),b(n,e),b(t,r),C(l,t,null),o=!0},p(c,$){var G;const k={};$&1&&(k.schema=c[0].json_schema),$&1&&(k.customComponents=c[16][(G=c[0])==null?void 0:G.name]),!a&&$&4&&(a=!0,k.value=c[2],fe(()=>a=!1)),!f&&$&1024&&(f=!0,k.validationErrors=c[10],fe(()=>f=!1)),l.$set(k)},i(c){o||(u(l.$$.fragment,c),o=!0)},o(c){_(l.$$.fragment,c),o=!1},d(c){c&&d(t),T(l)}}}function nt(s){let t,n,e,r=s[0].json_schema.title+"",l,a,f,o,i,g,m,H,c,$,k,G,O,S,I,W,B,v=s[0].json_schema.description&&de(s);m=new Se({props:{value:s[5],cols:50,placeholder:"Paste text to try the signal.",rows:6,class:"mb-2"}}),m.$on("input",s[14]),k=new Pe({props:{$$slots:{default:[We]},$$scope:{ctx:s}}}),k.$on("click",s[20]);const x=[Ye,Xe],R=[];function X(p,E){var q,h;return(q=p[4])!=null&&q.isFetching?0:p[6]!=null&&p[1]!=null&&((h=p[4])==null?void 0:h.data)!=null?1:-1}~(S=X(s))&&(I=R[S]=x[S](s));let w=s[11]&&ve(s);return{c(){t=V("div"),n=V("div"),e=V("div"),l=Y(r),a=J(),v&&v.c(),f=J(),o=V("div"),i=V("div"),g=V("div"),P(m.$$.fragment),H=J(),c=V("div"),$=V("div"),P(k.$$.fragment),G=J(),O=V("div"),I&&I.c(),W=J(),w&&w.c(),this.h()},l(p){t=D(p,"DIV",{class:!0});var E=j(t);n=D(E,"DIV",{});var q=j(n);e=D(q,"DIV",{class:!0});var h=j(e);l=Z(h,r),h.forEach(d),a=z(q),v&&v.l(q),q.forEach(d),f=z(E),o=D(E,"DIV",{class:!0});var M=j(o);i=D(M,"DIV",{class:!0});var A=j(i);g=D(A,"DIV",{});var L=j(g);y(m.$$.fragment,L),H=z(L),c=D(L,"DIV",{class:!0});var ee=j(c);$=D(ee,"DIV",{class:!0});var te=j($);y(k.$$.fragment,te),te.forEach(d),ee.forEach(d),L.forEach(d),G=z(A),O=D(A,"DIV",{class:!0});var ne=j(O);I&&I.l(ne),ne.forEach(d),W=z(A),w&&w.l(A),A.forEach(d),M.forEach(d),E.forEach(d),this.h()},h(){F(e,"class","mb-4 flex flex-row items-center text-2xl font-semibold"),F($,"class","pt-4"),F(c,"class","flex flex-row justify-between"),F(O,"class","mb-8 mt-4 border-gray-200 pt-4"),ae(O,"border-t",s[1]!=null),F(i,"class","flex w-full flex-col gap-x-8"),F(o,"class","w-full"),F(t,"class","flex h-full w-full flex-col gap-y-8 px-10")},m(p,E){N(p,t,E),b(t,n),b(n,e),b(e,l),b(n,a),v&&v.m(n,null),b(t,f),b(t,o),b(o,i),b(i,g),C(m,g,null),b(g,H),b(g,c),b(c,$),C(k,$,null),b(i,G),b(i,O),~S&&R[S].m(O,null),b(i,W),w&&w.m(i,null),B=!0},p(p,[E]){(!B||E&1)&&r!==(r=p[0].json_schema.title+"")&&le(l,r),p[0].json_schema.description?v?(v.p(p,E),E&1&&u(v,1)):(v=de(p),v.c(),u(v,1),v.m(n,null)):v&&(Q(),_(v,1,1,()=>{v=null}),K());const q={};E&32&&(q.value=p[5]),m.$set(q);const h={};E&8388608&&(h.$$scope={dirty:E,ctx:p}),k.$set(h);let M=S;S=X(p),S===M?~S&&R[S].p(p,E):(I&&(Q(),_(R[M],1,1,()=>{R[M]=null}),K()),~S?(I=R[S],I?I.p(p,E):(I=R[S]=x[S](p),I.c()),u(I,1),I.m(O,null)):I=null),(!B||E&2)&&ae(O,"border-t",p[1]!=null),p[11]?w?(w.p(p,E),E&2048&&u(w,1)):(w=ve(p),w.c(),u(w,1),w.m(i,null)):w&&(Q(),_(w,1,1,()=>{w=null}),K())},i(p){B||(u(v),u(m.$$.fragment,p),u(k.$$.fragment,p),u(I),u(w),B=!0)},o(p){_(v),_(m.$$.fragment,p),_(k.$$.fragment,p),_(I),_(w),B=!1},d(p){p&&d(t),v&&v.d(),T(m),T(k),~S&&R[S].d(),w&&w.d()}}}function lt(s,t,n){let e,r,l,a,f,o=U,i=()=>(o(),o=ue(l,h=>n(19,f=h)),l),g,m=U,H=()=>(m(),m=ue(r,h=>n(4,g=h)),r);s.$$.on_destroy.push(()=>o()),s.$$.on_destroy.push(()=>m());let{signalInfo:c}=t,{text:$=void 0}=t,k=($==null?void 0:$.trim())||"";Ie(()=>{$!=null&&I()});function G(h){n(5,k=h.target.value),n(1,O=void 0)}let O,S={};function I(){n(1,O=k)}let W,B,v,x,R,X=[];const w={concept_score:{"/namespace":Oe,"/concept_name":He,"/embedding":Ne}},p=()=>I();function E(h){S=h,n(2,S)}function q(h){X=h,n(10,X)}return s.$$set=h=>{"signalInfo"in h&&n(0,c=h.signalInfo),"text"in h&&n(17,$=h.text)},s.$$.update=()=>{var h,M;if(s.$$.dirty&131072&&$!=null&&(n(5,k=$.trim()),n(1,O=void 0)),s.$$.dirty&5&&n(18,e={...S,signal_name:c.name}),s.$$.dirty&262146&&H(n(13,r=O!=null?ye({signal:e,inputs:[O]}):null)),s.$$.dirty&262144&&i(n(12,l=Ce({signal:e}))),s.$$.dirty&524312&&(g==null?void 0:g.data)!=null&&((h=f.data)==null?void 0:h.fields)!=null){n(9,R=null);const A=g.data.items[0],L=Re(f.data.fields);n(6,W=qe(A,L));const ee=Me(L);n(3,v=ee.spanPaths),n(7,B=ee.valuePaths);const te=Ae(L);n(8,x=te.filter(ne=>!v.some(Ee=>Je(ne.path,Ee)))),te.length===0&&n(9,R=A)}s.$$.dirty&1&&n(11,a=Object.keys(((M=c==null?void 0:c.json_schema)==null?void 0:M.properties)||{}).filter(A=>A!="signal_name").length>0)},[c,O,S,v,g,k,W,B,x,R,X,a,l,r,G,I,w,$,e,f,p,E,q]}class rt extends ke{constructor(t){super(),we(this,t,lt,nt,re,{signalInfo:0,text:17})}}function st(s){let t=s[3],n,e,r=be(s);return{c(){r.c(),n=me()},l(l){r.l(l),n=me()},m(l,a){r.m(l,a),N(l,n,a),e=!0},p(l,a){a&8&&re(t,t=l[3])?(Q(),_(r,1,1,U),K(),r=be(l),r.c(),u(r,1),r.m(n.parentNode,n)):r.p(l,a)},i(l){e||(u(r),e=!0)},o(l){_(r),e=!1},d(l){l&&d(n),r.d(l)}}}function at(s){let t,n=s[1].error+"",e;return{c(){t=V("p"),e=Y(n)},l(r){t=D(r,"P",{});var l=j(t);e=Z(l,n),l.forEach(d)},m(r,l){N(r,t,l),b(t,e)},p(r,l){l&2&&n!==(n=r[1].error+"")&&le(e,n)},i:U,o:U,d(r){r&&d(t)}}}function it(s){let t,n;return t=new se({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:U,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function be(s){let t,n;return t=new rt({props:{signalInfo:s[3]}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&8&&(l.signalInfo=e[3]),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ot(s){let t,n,e,r,l;const a=[it,at,st],f=[];function o(i,g){var m,H,c;return(m=i[1])!=null&&m.isFetching?0:(H=i[1])!=null&&H.isError?1:(c=i[1])!=null&&c.isSuccess&&i[3]?2:-1}return~(e=o(s))&&(r=f[e]=a[e](s)),{c(){t=V("div"),n=V("div"),r&&r.c(),this.h()},l(i){t=D(i,"DIV",{class:!0});var g=j(t);n=D(g,"DIV",{class:!0});var m=j(n);r&&r.l(m),m.forEach(d),g.forEach(d),this.h()},h(){F(n,"class","lilac-page flex w-full"),F(t,"class","flex h-full w-full overflow-x-hidden overflow-y-scroll")},m(i,g){N(i,t,g),b(t,n),~e&&f[e].m(n,null),l=!0},p(i,g){let m=e;e=o(i),e===m?~e&&f[e].p(i,g):(r&&(Q(),_(f[m],1,1,()=>{f[m]=null}),K()),~e?(r=f[e],r?r.p(i,g):(r=f[e]=a[e](i),r.c()),u(r,1),r.m(n,null)):r=null)},i(i){l||(u(r),l=!0)},o(i){_(r),l=!1},d(i){i&&d(t),~e&&f[e].d()}}}function ft(s){let t,n;return t=new Be({props:{type:"blue",$$slots:{default:[ct]},$$scope:{ctx:s}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,r){const l={};r&261&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ut(s){let t,n;return t=new se({}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p:U,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function ct(s){let t,n,e,r;return{c(){t=V("a"),n=Y(s[0]),this.h()},l(l){t=D(l,"A",{class:!0,href:!0});var a=j(t);n=Z(a,s[0]),a.forEach(d),this.h()},h(){F(t,"class","font-semibold text-black"),F(t,"href",s[2])},m(l,a){N(l,t,a),b(t,n),e||(r=Ve(t,"click",s[7]),e=!0)},p(l,a){a&1&&le(n,l[0]),a&4&&F(t,"href",l[2])},d(l){l&&d(t),e=!1,r()}}}function mt(s){let t,n,e,r;const l=[ut,ft],a=[];function f(o,i){return o[1].isFetching?0:1}return n=f(s),e=a[n]=l[n](s),{c(){t=V("div"),e.c(),this.h()},l(o){t=D(o,"DIV",{slot:!0});var i=j(t);e.l(i),i.forEach(d),this.h()},h(){F(t,"slot","header-subtext")},m(o,i){N(o,t,i),a[n].m(t,null),r=!0},p(o,i){let g=n;n=f(o),n===g?a[n].p(o,i):(Q(),_(a[g],1,1,()=>{a[g]=null}),K(),e=a[n],e?e.p(o,i):(e=a[n]=l[n](o),e.c()),u(e,1),e.m(t,null))},i(o){r||(u(e),r=!0)},o(o){_(e),r=!1},d(o){o&&d(t),a[n].d()}}}function _t(s){let t,n;return t=new je({props:{$$slots:{"header-subtext":[mt],default:[ot]},$$scope:{ctx:s}}}),{c(){P(t.$$.fragment)},l(e){y(t.$$.fragment,e)},m(e,r){C(t,e,r),n=!0},p(e,[r]){const l={};r&271&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){T(t,e)}}}function pt(s,t,n){let e,r,l,a,f;const o=Qe();ce(s,o,m=>n(6,a=m));const i=ze();ce(s,i,m=>n(1,l=m));const g=()=>De(r);return s.$$.update=()=>{var m;s.$$.dirty&65&&a.page==="signals"&&a.identifier!=null&&f!=a.identifier&&n(0,f=a.identifier),s.$$.dirty&3&&n(3,e=(m=l.data)==null?void 0:m.find(H=>H.name===f)),s.$$.dirty&1&&n(2,r=f!=null?Ke(f):"")},[f,l,r,e,o,i,a,g]}class St extends ke{constructor(t){super(),we(this,t,pt,_t,re,{})}}export{St as component};
