import{S as ae,i as ce,s as ie,y as P,z as V,A as B,g as _,d as g,B as N,O,k as v,a as X,e as q,l as k,m as C,h as d,c as Y,n as w,b as y,a0 as $,v as U,f as R,G,H as Z,a7 as fe,ab as ue,M as pe,a1 as L,ac as de,q as S,r as I,u as M,ad as me}from"../chunks/index.b333a928.js";import{g as K}from"../chunks/navigation.c426a7d3.js";import{P as _e}from"../chunks/Page.3051bdc4.js";import{f as he,n as $e,d as ge,h as be,p as ve,r as ke,c as Ce,u as we}from"../chunks/Commands.543935b9.js";import{T as ye,I as F,C as Ee}from"../chunks/ConceptView.fe2246f8.js";import{g as Te,c as Se,d as J}from"../chunks/utils.2fa1092a.js";import{M as Ie}from"../chunks/ChevronUp.efe9cbe8.js";function Q(l){let e,n,t,o;const a=[Ve,Pe,De],s=[];function c(r,i){var f,p,b;return(f=r[7])!=null&&f.isLoading?0:(p=r[7])!=null&&p.isError?1:(b=r[7])!=null&&b.isSuccess?2:-1}return~(e=c(l))&&(n=s[e]=a[e](l)),{c(){n&&n.c(),t=q()},l(r){n&&n.l(r),t=q()},m(r,i){~e&&s[e].m(r,i),y(r,t,i),o=!0},p(r,i){let f=e;e=c(r),e===f?~e&&s[e].p(r,i):(n&&(U(),g(s[f],1,1,()=>{s[f]=null}),R()),~e?(n=s[e],n?n.p(r,i):(n=s[e]=a[e](r),n.c()),_(n,1),n.m(t.parentNode,t)):n=null)},i(r){o||(_(n),o=!0)},o(r){g(n),o=!1},d(r){~e&&s[e].d(r),r&&d(t)}}}function De(l){let e,n;return e=new Ee({props:{concept:l[7].data}}),{c(){P(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,o){const a={};o&128&&(a.concept=t[7].data),e.$set(a)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Pe(l){let e,n=l[7].error+"",t;return{c(){e=v("p"),t=S(n)},l(o){e=k(o,"P",{});var a=C(e);t=I(a,n),a.forEach(d)},m(o,a){y(o,e,a),$(e,t)},p(o,a){a&128&&n!==(n=o[7].error+"")&&M(t,n)},i:L,o:L,d(o){o&&d(e)}}}function Ve(l){let e,n;return e=new Ce({}),{c(){P(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p:L,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function W(l){let e,n;return e=new Ie({props:{danger:!0,open:!0,modalHeading:"Delete concept",primaryButtonText:"Delete",primaryButtonIcon:l[6].isLoading?F:void 0,secondaryButtonText:"Cancel",$$slots:{default:[Be]},$$scope:{ctx:l}}}),e.$on("click:button--secondary",l[17]),e.$on("close",l[18]),e.$on("submit",l[19]),{c(){P(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,o){const a={};o&64&&(a.primaryButtonIcon=t[6].isLoading?F:void 0),o&1048580&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Be(l){let e,n,t,o=l[2].namespace+"",a,s,c=l[2].name+"",r,i,f,p,b;return{c(){e=v("p"),n=S("Confirm deleting "),t=v("code"),a=S(o),s=S("/"),r=S(c),i=S(" ?"),f=X(),p=v("p"),b=S("This is a permanent action and cannot be undone."),this.h()},l(u){e=k(u,"P",{class:!0});var m=C(e);n=I(m,"Confirm deleting "),t=k(m,"CODE",{});var D=C(t);a=I(D,o),s=I(D,"/"),r=I(D,c),D.forEach(d),i=I(m," ?"),m.forEach(d),f=Y(u),p=k(u,"P",{class:!0});var E=C(p);b=I(E,"This is a permanent action and cannot be undone."),E.forEach(d),this.h()},h(){w(e,"class","!text-lg"),w(p,"class","mt-2")},m(u,m){y(u,e,m),$(e,n),$(e,t),$(t,a),$(t,s),$(t,r),$(e,i),y(u,f,m),y(u,p,m),$(p,b)},p(u,m){m&4&&o!==(o=u[2].namespace+"")&&M(a,o),m&4&&c!==(c=u[2].name+"")&&M(r,c)},d(u){u&&d(e),u&&d(f),u&&d(p)}}}function Ne(l){let e,n,t,o,a,s=l[0]!=null&&l[1]!=null&&Q(l),c=l[2]&&W(l);return{c(){e=v("div"),n=v("div"),s&&s.c(),t=X(),c&&c.c(),o=q(),this.h()},l(r){e=k(r,"DIV",{class:!0});var i=C(e);n=k(i,"DIV",{class:!0});var f=C(n);s&&s.l(f),f.forEach(d),i.forEach(d),t=Y(r),c&&c.l(r),o=q(),this.h()},h(){w(n,"class","lilac-page flex w-full"),w(e,"class","flex h-full w-full overflow-x-hidden overflow-y-scroll")},m(r,i){y(r,e,i),$(e,n),s&&s.m(n,null),y(r,t,i),c&&c.m(r,i),y(r,o,i),a=!0},p(r,i){r[0]!=null&&r[1]!=null?s?(s.p(r,i),i&3&&_(s,1)):(s=Q(r),s.c(),_(s,1),s.m(n,null)):s&&(U(),g(s,1,1,()=>{s=null}),R()),r[2]?c?(c.p(r,i),i&4&&_(c,1)):(c=W(r),c.c(),_(c,1),c.m(o.parentNode,o)):c&&(U(),g(c,1,1,()=>{c=null}),R())},i(r){a||(_(s),_(c),a=!0)},o(r){g(s),g(c),a=!1},d(r){r&&d(e),s&&s.d(),r&&d(t),c&&c.d(r),r&&d(o)}}}function He(l){let e,n=J(l[0],l[1])+"",t,o,a;return{c(){e=v("a"),t=S(n),this.h()},l(s){e=k(s,"A",{class:!0,href:!0});var c=C(e);t=I(c,n),c.forEach(d),this.h()},h(){w(e,"class","font-semibold text-black"),w(e,"href",l[3])},m(s,c){y(s,e,c),$(e,t),o||(a=Z(e,"click",l[16]),o=!0)},p(s,c){c&3&&n!==(n=J(s[0],s[1])+"")&&M(t,n),c&8&&w(e,"href",s[3])},d(s){s&&d(e),o=!1,a()}}}function qe(l){let e,n,t;return n=new ge({props:{type:"green",$$slots:{default:[He]},$$scope:{ctx:l}}}),{c(){e=v("div"),P(n.$$.fragment),this.h()},l(o){e=k(o,"DIV",{slot:!0});var a=C(e);V(n.$$.fragment,a),a.forEach(d),this.h()},h(){w(e,"slot","header-subtext")},m(o,a){y(o,e,a),B(n,e,null),t=!0},p(o,a){const s={};a&1048587&&(s.$$scope={dirty:a,ctx:o}),n.$set(s)},i(o){t||(_(n.$$.fragment,o),t=!0)},o(o){g(n.$$.fragment,o),t=!1},d(o){o&&d(e),N(n)}}}function Le(l){let e,n,t,o,a,s,c,r,i;return o=new ye({props:{size:16}}),{c(){e=v("div"),n=v("div"),t=v("button"),P(o.$$.fragment),this.h()},l(f){e=k(f,"DIV",{slot:!0});var p=C(e);n=k(p,"DIV",{});var b=C(n);t=k(b,"BUTTON",{title:!0,class:!0});var u=C(t);V(o.$$.fragment,u),u.forEach(d),b.forEach(d),p.forEach(d),this.h()},h(){w(t,"title","Remove concept"),t.disabled=a=!l[4],w(t,"class","p-3 hover:text-red-400 hover:opacity-100"),G(n,"opacity-40",!l[4]),w(e,"slot","header-right")},m(f,p){y(f,e,p),$(e,n),$(n,t),B(o,t,null),c=!0,r||(i=[Z(t,"click",l[15]),fe(s=be.call(null,n,{text:l[4]?"":"User does not have access to delete this concept."}))],r=!0)},p(f,p){(!c||p&16&&a!==(a=!f[4]))&&(t.disabled=a),s&&ue(s.update)&&p&16&&s.update.call(null,{text:f[4]?"":"User does not have access to delete this concept."}),(!c||p&16)&&G(n,"opacity-40",!f[4])},i(f){c||(_(o.$$.fragment,f),c=!0)},o(f){g(o.$$.fragment,f),c=!1},d(f){f&&d(e),N(o),r=!1,pe(i)}}}function Me(l){let e,n;return e=new _e({props:{$$slots:{"header-right":[Le],"header-subtext":[qe],default:[Ne]},$$scope:{ctx:l}}}),{c(){P(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,[o]){const a={};o&1048799&&(a.$$scope={dirty:o,ctx:t}),e.$set(a)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function Oe(l,e,n){let t,o,a,s,c,r,i,f,p=L,b=()=>(p(),p=de(t,h=>n(7,f=h)),t);l.$$.on_destroy.push(()=>p());let u,m;const D=Te();O(l,D,h=>n(14,i=h));let E=null;const z=he();O(l,z,h=>n(13,r=h));const A=$e();O(l,A,h=>n(6,c=h));function j(){if(E==null)return;const{namespace:h,name:T}=E;c.mutate([h,T],{onSuccess:()=>{var H;for(const[se,re]of Object.entries(ve)){const le=(H=me(we[se]).selectRowsSchema)==null?void 0:H.data;re.deleteConcept(h,T,le)}n(2,E=null),K("/")}})}const x=()=>n(2,E={namespace:u,name:m}),ee=()=>K(s),te=()=>n(2,E=null),ne=()=>n(2,E=null),oe=()=>j();return l.$$.update=()=>{var h;if(l.$$.dirty&16387&&i.page==="concepts"&&i.identifier!=null){const[T,H]=i.identifier.split("/");(u!=T||m!=H)&&(n(0,u=T),n(1,m=H))}l.$$.dirty&3&&b(n(5,t=u&&m?ke(u,m):void 0)),l.$$.dirty&8195&&n(12,o=(h=r.data)==null?void 0:h.find(T=>T.namespace===u&&T.name===m)),l.$$.dirty&4096&&n(4,a=o==null?void 0:o.acls.write),l.$$.dirty&3&&n(3,s=Se(u,m))},[u,m,E,s,a,t,c,f,D,z,A,j,o,r,i,x,ee,te,ne,oe]}class Fe extends ae{constructor(e){super(),ce(this,e,Oe,Me,ie,{})}}export{Fe as component};
