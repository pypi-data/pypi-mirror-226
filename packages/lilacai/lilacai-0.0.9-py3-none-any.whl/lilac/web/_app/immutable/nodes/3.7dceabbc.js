import{S as ie,i as fe,s as Y,y as N,z as V,A as B,g as _,d as h,B as H,R as O,k as v,a as Z,e as P,l as y,m as C,h as d,c as x,n as w,b as g,J as b,v as R,f as U,H as K,K as ee,a7 as ue,aa as pe,P as de,a1 as L,ab as me,q as S,r as I,u as M,ac as _e}from"../chunks/index.8c57c90c.js";import{g as J}from"../chunks/navigation.64ae4a30.js";import{P as he}from"../chunks/Page.e3c4f184.js";import{c as $e,j as be,h as ge,k as ke}from"../chunks/HoverTooltip.13cf70d2.js";import{T as ve,I as F,C as ye}from"../chunks/ConceptView.992c249d.js";import{g as Ce,T as we,e as Ee,f as Te}from"../chunks/datasetStore.40f12627.js";import{c as Se,b as G,S as Ie}from"../chunks/SvelteMarkdown.e407b063.js";import{M as De}from"../chunks/ChevronUp.a74739dd.js";function Q(a){let e,n,t,o;const l=[Ve,Ne,Pe],r=[];function c(s,i){var f,p,k;return(f=s[7])!=null&&f.isLoading?0:(p=s[7])!=null&&p.isError?1:(k=s[7])!=null&&k.isSuccess?2:-1}return~(e=c(a))&&(n=r[e]=l[e](a)),{c(){n&&n.c(),t=P()},l(s){n&&n.l(s),t=P()},m(s,i){~e&&r[e].m(s,i),g(s,t,i),o=!0},p(s,i){let f=e;e=c(s),e===f?~e&&r[e].p(s,i):(n&&(R(),h(r[f],1,1,()=>{r[f]=null}),U()),~e?(n=r[e],n?n.p(s,i):(n=r[e]=l[e](s),n.c()),_(n,1),n.m(t.parentNode,t)):n=null)},i(s){o||(_(n),o=!0)},o(s){h(n),o=!1},d(s){~e&&r[e].d(s),s&&d(t)}}}function Pe(a){let e=a[7].data,n,t,o=W(a);return{c(){o.c(),n=P()},l(l){o.l(l),n=P()},m(l,r){o.m(l,r),g(l,n,r),t=!0},p(l,r){r&128&&Y(e,e=l[7].data)?(R(),h(o,1,1,L),U(),o=W(l),o.c(),_(o,1),o.m(n.parentNode,n)):o.p(l,r)},i(l){t||(_(o),t=!0)},o(l){h(o),t=!1},d(l){l&&d(n),o.d(l)}}}function Ne(a){let e,n=a[7].error+"",t;return{c(){e=v("p"),t=S(n)},l(o){e=y(o,"P",{});var l=C(e);t=I(l,n),l.forEach(d)},m(o,l){g(o,e,l),b(e,t)},p(o,l){l&128&&n!==(n=o[7].error+"")&&M(t,n)},i:L,o:L,d(o){o&&d(e)}}}function Ve(a){let e,n;return e=new Ie({}),{c(){N(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p:L,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function W(a){let e,n;return e=new ye({props:{concept:a[7].data}}),{c(){N(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,o){const l={};o&128&&(l.concept=t[7].data),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function X(a){let e,n;return e=new De({props:{danger:!0,open:!0,modalHeading:"Delete concept",primaryButtonText:"Delete",primaryButtonIcon:a[6].isLoading?F:void 0,secondaryButtonText:"Cancel",$$slots:{default:[Be]},$$scope:{ctx:a}}}),e.$on("click:button--secondary",a[17]),e.$on("close",a[18]),e.$on("submit",a[19]),{c(){N(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,o){const l={};o&64&&(l.primaryButtonIcon=t[6].isLoading?F:void 0),o&1048580&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Be(a){let e,n,t,o=a[2].namespace+"",l,r,c=a[2].name+"",s,i,f,p,k;return{c(){e=v("p"),n=S("Confirm deleting "),t=v("code"),l=S(o),r=S("/"),s=S(c),i=S(" ?"),f=Z(),p=v("p"),k=S("This is a permanent action and cannot be undone."),this.h()},l(u){e=y(u,"P",{class:!0});var m=C(e);n=I(m,"Confirm deleting "),t=y(m,"CODE",{});var D=C(t);l=I(D,o),r=I(D,"/"),s=I(D,c),D.forEach(d),i=I(m," ?"),m.forEach(d),f=x(u),p=y(u,"P",{class:!0});var E=C(p);k=I(E,"This is a permanent action and cannot be undone."),E.forEach(d),this.h()},h(){w(e,"class","!text-lg"),w(p,"class","mt-2")},m(u,m){g(u,e,m),b(e,n),b(e,t),b(t,l),b(t,r),b(t,s),b(e,i),g(u,f,m),g(u,p,m),b(p,k)},p(u,m){m&4&&o!==(o=u[2].namespace+"")&&M(l,o),m&4&&c!==(c=u[2].name+"")&&M(s,c)},d(u){u&&d(e),u&&d(f),u&&d(p)}}}function He(a){let e,n,t,o,l,r=a[0]!=null&&a[1]!=null&&Q(a),c=a[2]&&X(a);return{c(){e=v("div"),n=v("div"),r&&r.c(),t=Z(),c&&c.c(),o=P(),this.h()},l(s){e=y(s,"DIV",{class:!0});var i=C(e);n=y(i,"DIV",{class:!0});var f=C(n);r&&r.l(f),f.forEach(d),i.forEach(d),t=x(s),c&&c.l(s),o=P(),this.h()},h(){w(n,"class","lilac-page flex w-full"),w(e,"class","flex h-full w-full overflow-x-hidden overflow-y-scroll")},m(s,i){g(s,e,i),b(e,n),r&&r.m(n,null),g(s,t,i),c&&c.m(s,i),g(s,o,i),l=!0},p(s,i){s[0]!=null&&s[1]!=null?r?(r.p(s,i),i&3&&_(r,1)):(r=Q(s),r.c(),_(r,1),r.m(n,null)):r&&(R(),h(r,1,1,()=>{r=null}),U()),s[2]?c?(c.p(s,i),i&4&&_(c,1)):(c=X(s),c.c(),_(c,1),c.m(o.parentNode,o)):c&&(R(),h(c,1,1,()=>{c=null}),U())},i(s){l||(_(r),_(c),l=!0)},o(s){h(r),h(c),l=!1},d(s){s&&d(e),r&&r.d(),s&&d(t),c&&c.d(s),s&&d(o)}}}function qe(a){let e,n=G(a[0],a[1])+"",t,o,l;return{c(){e=v("a"),t=S(n),this.h()},l(r){e=y(r,"A",{class:!0,href:!0});var c=C(e);t=I(c,n),c.forEach(d),this.h()},h(){w(e,"class","font-semibold text-black"),w(e,"href",a[3])},m(r,c){g(r,e,c),b(e,t),o||(l=ee(e,"click",a[16]),o=!0)},p(r,c){c&3&&n!==(n=G(r[0],r[1])+"")&&M(t,n),c&8&&w(e,"href",r[3])},d(r){r&&d(e),o=!1,l()}}}function Le(a){let e,n,t;return n=new we({props:{type:"green",$$slots:{default:[qe]},$$scope:{ctx:a}}}),{c(){e=v("div"),N(n.$$.fragment),this.h()},l(o){e=y(o,"DIV",{slot:!0});var l=C(e);V(n.$$.fragment,l),l.forEach(d),this.h()},h(){w(e,"slot","header-subtext")},m(o,l){g(o,e,l),B(n,e,null),t=!0},p(o,l){const r={};l&1048587&&(r.$$scope={dirty:l,ctx:o}),n.$set(r)},i(o){t||(_(n.$$.fragment,o),t=!0)},o(o){h(n.$$.fragment,o),t=!1},d(o){o&&d(e),H(n)}}}function Re(a){let e,n,t,o,l,r,c,s,i;return o=new ve({props:{size:16}}),{c(){e=v("div"),n=v("div"),t=v("button"),N(o.$$.fragment),this.h()},l(f){e=y(f,"DIV",{slot:!0});var p=C(e);n=y(p,"DIV",{});var k=C(n);t=y(k,"BUTTON",{title:!0,class:!0});var u=C(t);V(o.$$.fragment,u),u.forEach(d),k.forEach(d),p.forEach(d),this.h()},h(){w(t,"title","Remove concept"),t.disabled=l=!a[4],w(t,"class","p-3 hover:text-red-400 hover:opacity-100"),K(n,"opacity-40",!a[4]),w(e,"slot","header-right")},m(f,p){g(f,e,p),b(e,n),b(n,t),B(o,t,null),c=!0,s||(i=[ee(t,"click",a[15]),ue(r=ge.call(null,n,{text:a[4]?"":"User does not have access to delete this concept."}))],s=!0)},p(f,p){(!c||p&16&&l!==(l=!f[4]))&&(t.disabled=l),r&&pe(r.update)&&p&16&&r.update.call(null,{text:f[4]?"":"User does not have access to delete this concept."}),(!c||p&16)&&K(n,"opacity-40",!f[4])},i(f){c||(_(o.$$.fragment,f),c=!0)},o(f){h(o.$$.fragment,f),c=!1},d(f){f&&d(e),H(o),s=!1,de(i)}}}function Ue(a){let e,n;return e=new he({props:{$$slots:{"header-right":[Re],"header-subtext":[Le],default:[He]},$$scope:{ctx:a}}}),{c(){N(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,o){B(e,t,o),n=!0},p(t,[o]){const l={};o&1048799&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function Me(a,e,n){let t,o,l,r,c,s,i,f,p=L,k=()=>(p(),p=me(t,$=>n(7,f=$)),t);a.$$.on_destroy.push(()=>p());let u,m;const D=Ce();O(a,D,$=>n(14,i=$));let E=null;const j=$e();O(a,j,$=>n(13,s=$));const z=be();O(a,z,$=>n(6,c=$));function A(){if(E==null)return;const{namespace:$,name:T}=E;c.mutate([$,T],{onSuccess:()=>{var q;for(const[se,ae]of Object.entries(Ee)){const ce=(q=_e(Te[se]).selectRowsSchema)==null?void 0:q.data;ae.deleteConcept($,T,ce)}n(2,E=null),J("/")}})}const te=()=>n(2,E={namespace:u,name:m}),ne=()=>J(r),oe=()=>n(2,E=null),le=()=>n(2,E=null),re=()=>A();return a.$$.update=()=>{var $;if(a.$$.dirty&16387&&i.page==="concepts"&&i.identifier!=null){const[T,q]=i.identifier.split("/");(u!=T||m!=q)&&(n(0,u=T),n(1,m=q))}a.$$.dirty&3&&k(n(5,t=u&&m?ke(u,m):void 0)),a.$$.dirty&8195&&n(12,o=($=s.data)==null?void 0:$.find(T=>T.namespace===u&&T.name===m)),a.$$.dirty&4096&&n(4,l=o==null?void 0:o.acls.write),a.$$.dirty&3&&n(3,r=Se(u,m))},[u,m,E,r,l,t,c,f,D,j,z,A,o,s,i,te,ne,oe,le,re]}class Qe extends ie{constructor(e){super(),fe(this,e,Me,Ue,Y,{})}}export{Qe as component};
