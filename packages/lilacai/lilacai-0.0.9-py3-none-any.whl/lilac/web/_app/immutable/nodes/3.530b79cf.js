import{S as ie,i as fe,s as x,y as P,z as N,A as V,g as _,d as h,B,R as M,k as v,a as O,e as H,l as C,m as w,h as m,c as z,n as y,b as g,J as k,v as R,f as U,H as F,K as ee,a7 as ue,aa as pe,P as me,a1 as L,ab as de,q as S,r as I,u as j,ac as _e}from"../chunks/index.f491bb8d.js";import{g as G}from"../chunks/navigation.bdcdc485.js";import{P as he}from"../chunks/Page.cae9fef0.js";import{g as $e,h as be,T as ge,M as ke,i as ve,j as Ce}from"../chunks/Commands.e68f9867.js";import{c as we,j as ye,h as Ee,k as Te}from"../chunks/HoverTooltip.b4b82cd7.js";import{T as Se,I as Q,C as Ie}from"../chunks/ConceptView.10745c32.js";import{c as De,e as W,S as Pe}from"../chunks/JSONSchemaForm.42d7a47d.js";function X(a){let e,n,t,o;const l=[Be,Ve,Ne],c=[];function u(s,i){var r,f,$;return(r=s[7])!=null&&r.isLoading?0:(f=s[7])!=null&&f.isError?1:($=s[7])!=null&&$.isSuccess?2:-1}return~(e=u(a))&&(n=c[e]=l[e](a)),{c(){n&&n.c(),t=H()},l(s){n&&n.l(s),t=H()},m(s,i){~e&&c[e].m(s,i),g(s,t,i),o=!0},p(s,i){let r=e;e=u(s),e===r?~e&&c[e].p(s,i):(n&&(R(),h(c[r],1,1,()=>{c[r]=null}),U()),~e?(n=c[e],n?n.p(s,i):(n=c[e]=l[e](s),n.c()),_(n,1),n.m(t.parentNode,t)):n=null)},i(s){o||(_(n),o=!0)},o(s){h(n),o=!1},d(s){~e&&c[e].d(s),s&&m(t)}}}function Ne(a){let e=a[7].data,n,t,o=Y(a);return{c(){o.c(),n=H()},l(l){o.l(l),n=H()},m(l,c){o.m(l,c),g(l,n,c),t=!0},p(l,c){c&128&&x(e,e=l[7].data)?(R(),h(o,1,1,L),U(),o=Y(l),o.c(),_(o,1),o.m(n.parentNode,n)):o.p(l,c)},i(l){t||(_(o),t=!0)},o(l){h(o),t=!1},d(l){l&&m(n),o.d(l)}}}function Ve(a){let e,n=a[7].error+"",t;return{c(){e=v("p"),t=S(n)},l(o){e=C(o,"P",{});var l=w(e);t=I(l,n),l.forEach(m)},m(o,l){g(o,e,l),k(e,t)},p(o,l){l&128&&n!==(n=o[7].error+"")&&j(t,n)},i:L,o:L,d(o){o&&m(e)}}}function Be(a){let e,n;return e=new Pe({}),{c(){P(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,o){V(e,t,o),n=!0},p:L,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Y(a){let e,n;return e=new Ie({props:{concept:a[7].data}}),{c(){P(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,o){V(e,t,o),n=!0},p(t,o){const l={};o&128&&(l.concept=t[7].data),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Z(a){let e,n;return e=new ke({props:{danger:!0,open:!0,modalHeading:"Delete concept",primaryButtonText:"Delete",primaryButtonIcon:a[6].isLoading?Q:void 0,secondaryButtonText:"Cancel",$$slots:{default:[He]},$$scope:{ctx:a}}}),e.$on("click:button--secondary",a[17]),e.$on("close",a[18]),e.$on("submit",a[19]),{c(){P(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,o){V(e,t,o),n=!0},p(t,o){const l={};o&64&&(l.primaryButtonIcon=t[6].isLoading?Q:void 0),o&1048580&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function He(a){let e,n,t,o=a[2].namespace+"",l,c,u=a[2].name+"",s,i,r,f,$;return{c(){e=v("p"),n=S("Confirm deleting "),t=v("code"),l=S(o),c=S("/"),s=S(u),i=S(" ?"),r=O(),f=v("p"),$=S("This is a permanent action and cannot be undone."),this.h()},l(p){e=C(p,"P",{class:!0});var d=w(e);n=I(d,"Confirm deleting "),t=C(d,"CODE",{});var D=w(t);l=I(D,o),c=I(D,"/"),s=I(D,u),D.forEach(m),i=I(d," ?"),d.forEach(m),r=z(p),f=C(p,"P",{class:!0});var E=w(f);$=I(E,"This is a permanent action and cannot be undone."),E.forEach(m),this.h()},h(){y(e,"class","!text-lg"),y(f,"class","mt-2")},m(p,d){g(p,e,d),k(e,n),k(e,t),k(t,l),k(t,c),k(t,s),k(e,i),g(p,r,d),g(p,f,d),k(f,$)},p(p,d){d&4&&o!==(o=p[2].namespace+"")&&j(l,o),d&4&&u!==(u=p[2].name+"")&&j(s,u)},d(p){p&&m(e),p&&m(r),p&&m(f)}}}function qe(a){let e,n,t,o,l,c,u,s=a[0]!=null&&a[1]!=null&&X(a);o=new be({});let i=a[2]&&Z(a);return{c(){e=v("div"),n=v("div"),s&&s.c(),t=O(),P(o.$$.fragment),l=O(),i&&i.c(),c=H(),this.h()},l(r){e=C(r,"DIV",{class:!0});var f=w(e);n=C(f,"DIV",{class:!0});var $=w(n);s&&s.l($),$.forEach(m),f.forEach(m),t=z(r),N(o.$$.fragment,r),l=z(r),i&&i.l(r),c=H(),this.h()},h(){y(n,"class","lilac-page flex w-full"),y(e,"class","flex h-full w-full overflow-x-hidden overflow-y-scroll")},m(r,f){g(r,e,f),k(e,n),s&&s.m(n,null),g(r,t,f),V(o,r,f),g(r,l,f),i&&i.m(r,f),g(r,c,f),u=!0},p(r,f){r[0]!=null&&r[1]!=null?s?(s.p(r,f),f&3&&_(s,1)):(s=X(r),s.c(),_(s,1),s.m(n,null)):s&&(R(),h(s,1,1,()=>{s=null}),U()),r[2]?i?(i.p(r,f),f&4&&_(i,1)):(i=Z(r),i.c(),_(i,1),i.m(c.parentNode,c)):i&&(R(),h(i,1,1,()=>{i=null}),U())},i(r){u||(_(s),_(o.$$.fragment,r),_(i),u=!0)},o(r){h(s),h(o.$$.fragment,r),h(i),u=!1},d(r){r&&m(e),s&&s.d(),r&&m(t),B(o,r),r&&m(l),i&&i.d(r),r&&m(c)}}}function Le(a){let e,n=W(a[0],a[1])+"",t,o,l;return{c(){e=v("a"),t=S(n),this.h()},l(c){e=C(c,"A",{class:!0,href:!0});var u=w(e);t=I(u,n),u.forEach(m),this.h()},h(){y(e,"class","font-semibold text-black"),y(e,"href",a[3])},m(c,u){g(c,e,u),k(e,t),o||(l=ee(e,"click",a[16]),o=!0)},p(c,u){u&3&&n!==(n=W(c[0],c[1])+"")&&j(t,n),u&8&&y(e,"href",c[3])},d(c){c&&m(e),o=!1,l()}}}function Re(a){let e,n,t;return n=new ge({props:{type:"green",$$slots:{default:[Le]},$$scope:{ctx:a}}}),{c(){e=v("div"),P(n.$$.fragment),this.h()},l(o){e=C(o,"DIV",{slot:!0});var l=w(e);N(n.$$.fragment,l),l.forEach(m),this.h()},h(){y(e,"slot","header-subtext")},m(o,l){g(o,e,l),V(n,e,null),t=!0},p(o,l){const c={};l&1048587&&(c.$$scope={dirty:l,ctx:o}),n.$set(c)},i(o){t||(_(n.$$.fragment,o),t=!0)},o(o){h(n.$$.fragment,o),t=!1},d(o){o&&m(e),B(n)}}}function Ue(a){let e,n,t,o,l,c,u,s,i;return o=new Se({props:{size:16}}),{c(){e=v("div"),n=v("div"),t=v("button"),P(o.$$.fragment),this.h()},l(r){e=C(r,"DIV",{slot:!0});var f=w(e);n=C(f,"DIV",{});var $=w(n);t=C($,"BUTTON",{title:!0,class:!0});var p=w(t);N(o.$$.fragment,p),p.forEach(m),$.forEach(m),f.forEach(m),this.h()},h(){y(t,"title","Remove concept"),t.disabled=l=!a[4],y(t,"class","p-3 hover:text-red-400 hover:opacity-100"),F(n,"opacity-40",!a[4]),y(e,"slot","header-right")},m(r,f){g(r,e,f),k(e,n),k(n,t),V(o,t,null),u=!0,s||(i=[ee(t,"click",a[15]),ue(c=Ee.call(null,n,{text:a[4]?"":"User does not have access to delete this concept."}))],s=!0)},p(r,f){(!u||f&16&&l!==(l=!r[4]))&&(t.disabled=l),c&&pe(c.update)&&f&16&&c.update.call(null,{text:r[4]?"":"User does not have access to delete this concept."}),(!u||f&16)&&F(n,"opacity-40",!r[4])},i(r){u||(_(o.$$.fragment,r),u=!0)},o(r){h(o.$$.fragment,r),u=!1},d(r){r&&m(e),B(o),s=!1,me(i)}}}function je(a){let e,n;return e=new he({props:{$$slots:{"header-right":[Ue],"header-subtext":[Re],default:[qe]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,o){V(e,t,o),n=!0},p(t,[o]){const l={};o&1048799&&(l.$$scope={dirty:o,ctx:t}),e.$set(l)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){B(e,t)}}}function Me(a,e,n){let t,o,l,c,u,s,i,r,f=L,$=()=>(f(),f=de(t,b=>n(7,r=b)),t);a.$$.on_destroy.push(()=>f());let p,d;const D=$e();M(a,D,b=>n(14,i=b));let E=null;const A=we();M(a,A,b=>n(13,s=b));const K=ye();M(a,K,b=>n(6,u=b));function J(){if(E==null)return;const{namespace:b,name:T}=E;u.mutate([b,T],{onSuccess:()=>{var q;for(const[se,ae]of Object.entries(ve)){const ce=(q=_e(Ce[se]).selectRowsSchema)==null?void 0:q.data;ae.deleteConcept(b,T,ce)}n(2,E=null),G("/")}})}const te=()=>n(2,E={namespace:p,name:d}),ne=()=>G(c),oe=()=>n(2,E=null),le=()=>n(2,E=null),re=()=>J();return a.$$.update=()=>{var b;if(a.$$.dirty&16387&&i.page==="concepts"&&i.identifier!=null){const[T,q]=i.identifier.split("/");(p!=T||d!=q)&&(n(0,p=T),n(1,d=q))}a.$$.dirty&3&&$(n(5,t=p&&d?Te(p,d):void 0)),a.$$.dirty&8195&&n(12,o=(b=s.data)==null?void 0:b.find(T=>T.namespace===p&&T.name===d)),a.$$.dirty&4096&&n(4,l=o==null?void 0:o.acls.write),a.$$.dirty&3&&n(3,c=De(p,d))},[p,d,E,c,l,t,u,r,D,A,K,J,o,s,i,te,ne,oe,le,re]}class Qe extends ie{constructor(e){super(),fe(this,e,Me,je,x,{})}}export{Qe as component};
