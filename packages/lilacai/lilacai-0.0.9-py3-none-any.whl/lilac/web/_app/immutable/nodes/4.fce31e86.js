import{S as $e,i as ke,s as be,E as pe,_ as ve,$ as we,m as $,h as m,n as I,a0 as Ce,b as N,J as g,O as qe,a1 as W,D as Ie,F as Ve,q as K,r as G,u as fe,e as se,C as pt,o as Bn,Z as qn,k as E,l as D,p as st,w as Pe,y as A,z as H,A as R,W as On,g as h,d as b,B,Q as ct,G as Hn,a as Q,c as J,K as Be,ad as Ln,L as jn,M as Un,N as Yn,a7 as Te,aa as Le,R as ge,v as le,f as ne,P as We,a4 as ze,ab as Me,a2 as bt,ae as Qn,X as hn,Y as _n,H as ye,T as Jn,U as je,V as Ue,af as Kn,a8 as ut,a3 as dt,x as et,a6 as ft,ag as Gn}from"../chunks/index.8c57c90c.js";import{g as gn}from"../chunks/navigation.57025172.js";import{C as Ct,O as Zn,a as nt,P as Wn}from"../chunks/Page.3c9cfeea.js";import{T as Xe,i as Xn,j as Ae,t as Ge,C as Ze,k as Ye,l as yt,m as xn,S as er,n as pn,o as bn,p as tr,q as lr,r as nr,u as rr,I as ir,v as Tt,w as sr,b as ar,x as or,y as fr,z as vn,A as wn,s as mt,D as tt,B as $n,M as kn,E as Sn,F as yn,G as cr,e as ur,H as dr,g as mr,J as hr,K as _r,L as gr,N as pr,O as br,P as vr}from"../chunks/Commands.64fd5097.js";import{h as Fe,l as Ee,m as Et,n as Se,p as Dt,k as wr,r as at,t as $r,L as kr,u as Ke,v as Sr,w as It,x as yr,B as rt,y as En,c as Er,a as Vt,z as Dr,A as lt,C as ht,D as _t,E as $t,F as Ir,G as Vr,P as kt,H as it,V as Nr,I as Cr,J as Tr,U as Dn,K as Fr,M as Mr,N as zr,O as Pr}from"../chunks/HoverTooltip.37fb4e68.js";import{w as Ar}from"../chunks/index.3d04a9ea.js";import{C as Rr,S as Qe,n as Br,I as In,b as qr,f as Or,d as Hr}from"../chunks/JSONSchemaForm.8c795d36.js";import{C as Lr,a as St,I as Ft,T as jr}from"../chunks/ConceptView.fe3d8012.js";import{E as Vn,S as Ur,T as Yr}from"../chunks/StringSpanHighlight.27b59b22.js";import{S as vt,a as ot}from"../chunks/SelectItem.5cf70406.js";import{M as Nn,C as Qr}from"../chunks/ChevronUp.97c4db90.js";import{R as Jr,S as Kr,T as Gr,a as Mt,b as zt}from"../chunks/RowItemMetadata.c47ef61b.js";import{a as Cn,S as Zr}from"../chunks/signalQueries.b26cf1ff.js";import{g as Tn}from"../chunks/settingsStore.ca891065.js";import{C as Wr}from"../chunks/ComboBox.cafe583a.js";import{S as Xr}from"../chunks/Settings.e965354c.js";function Pt(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function xr(i){let e,l,t=i[1]&&Pt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Pt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function ei(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class ti extends $e{constructor(e){super(),ke(this,e,ei,xr,be,{size:0,title:1})}}function At(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function li(i){let e,l,t=i[1]&&At(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M10 16L20 6 21.4 7.4 12.8 16 21.4 24.6 20 26z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=At(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function ni(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class ri extends $e{constructor(e){super(),ke(this,e,ni,li,be,{size:0,title:1})}}function Rt(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ii(i){let e,l,t=i[1]&&Rt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Rt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function si(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class ai extends $e{constructor(e){super(),ke(this,e,si,ii,be,{size:0,title:1})}}function Bt(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function oi(i){let e,l,t=i[1]&&Bt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Bt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function fi(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class ci extends $e{constructor(e){super(),ke(this,e,fi,oi,be,{size:0,title:1})}}function qt(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ui(i){let e,l,t,n=i[1]&&qt(i),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],r={};for(let s=0;s<o.length;s+=1)r=pe(r,o[s]);return{c(){e=ve("svg"),n&&n.c(),l=ve("path"),t=ve("path"),this.h()},l(s){e=we(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var a=$(e);n&&n.l(a),l=we(a,"path",{d:!0}),$(l).forEach(m),t=we(a,"path",{d:!0}),$(t).forEach(m),a.forEach(m),this.h()},h(){I(l,"d","M17 22L17 14 13 14 13 16 15 16 15 22 12 22 12 24 20 24 20 22 17 22zM16 8a1.5 1.5 0 101.5 1.5A1.5 1.5 0 0016 8z"),I(t,"d","M16,30A14,14,0,1,1,30,16,14,14,0,0,1,16,30ZM16,4A12,12,0,1,0,28,16,12,12,0,0,0,16,4Z"),Ce(e,r)},m(s,a){N(s,e,a),n&&n.m(e,null),g(e,l),g(e,t)},p(s,[a]){s[1]?n?n.p(s,a):(n=qt(s),n.c(),n.m(e,l)):n&&(n.d(1),n=null),Ce(e,r=qe(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:W,o:W,d(s){s&&m(e),n&&n.d()}}}function di(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class gt extends $e{constructor(e){super(),ke(this,e,di,ui,be,{size:0,title:1})}}function Ot(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function mi(i){let e,l,t=i[1]&&Ot(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M30 6L26 6 26 2 24 2 24 6 20 6 20 8 24 8 24 12 26 12 26 8 30 8 30 6zM24 28.5859l-5.9751-5.9751a9.0234 9.0234 0 10-1.4141 1.4141L22.5859 30zM4 17a7 7 0 117 7A7.0078 7.0078 0 014 17z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Ot(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function hi(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class Fn extends $e{constructor(e){super(),ke(this,e,hi,mi,be,{size:0,title:1})}}function Ht(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function _i(i){let e,l,t=i[1]&&Ht(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M23,20a5,5,0,0,0-3.89,1.89L11.8,17.32a4.46,4.46,0,0,0,0-2.64l7.31-4.57A5,5,0,1,0,18,7a4.79,4.79,0,0,0,.2,1.32l-7.31,4.57a5,5,0,1,0,0,6.22l7.31,4.57A4.79,4.79,0,0,0,18,25a5,5,0,1,0,5-5ZM23,4a3,3,0,1,1-3,3A3,3,0,0,1,23,4ZM7,19a3,3,0,1,1,3-3A3,3,0,0,1,7,19Zm16,9a3,3,0,1,1,3-3A3,3,0,0,1,23,28Z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Ht(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function gi(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class pi extends $e{constructor(e){super(),ke(this,e,gi,_i,be,{size:0,title:1})}}function Lt(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function bi(i){let e,l,t=i[1]&&Lt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 18H16V20H2zM6 12H16V14H6zM10 6H16V8H10z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Lt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function vi(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class Mn extends $e{constructor(e){super(),ke(this,e,vi,bi,be,{size:0,title:1})}}function jt(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function wi(i){let e,l,t=i[1]&&jt(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M18 22L19.414 20.586 23 24.172 23 4 25 4 25 24.172 28.586 20.586 30 22 24 28 18 22zM2 6H16V8H2zM6 12H16V14H6zM10 18H16V20H10z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=jt(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function $i(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class zn extends $e{constructor(e){super(),ke(this,e,$i,wi,be,{size:0,title:1})}}function Ut(i){let e,l;return{c(){e=ve("title"),l=K(i[1])},l(t){e=we(t,"title",{});var n=$(e);l=G(n,i[1]),n.forEach(m)},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&2&&fe(l,t[1])},d(t){t&&m(e)}}}function ki(i){let e,l,t=i[1]&&Ut(i),n=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:i[0]},{height:i[0]},i[2],i[3]],o={};for(let r=0;r<n.length;r+=1)o=pe(o,n[r]);return{c(){e=ve("svg"),t&&t.c(),l=ve("path"),this.h()},l(r){e=we(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,preserveAspectRatio:!0,width:!0,height:!0});var s=$(e);t&&t.l(s),l=we(s,"path",{d:!0}),$(l).forEach(m),s.forEach(m),this.h()},h(){I(l,"d","M30 19.415L28.586 18 25 21.587 21.414 18 20 19.415 23.586 23 20 26.586 21.414 28 25 24.414 28.586 28 30 26.586 26.414 23 30 19.415zM10 18H16V20H10zM2 6H16V8H2zM6 12H16V14H6z"),Ce(e,o)},m(r,s){N(r,e,s),t&&t.m(e,null),g(e,l)},p(r,[s]){r[1]?t?t.p(r,s):(t=Ut(r),t.c(),t.m(e,l)):t&&(t.d(1),t=null),Ce(e,o=qe(n,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:r[0]},s&1&&{height:r[0]},s&4&&r[2],s&8&&r[3]]))},i:W,o:W,d(r){r&&m(e),t&&t.d()}}}function Si(i,e,l){let t,n;const o=["size","title"];let r=Ie(e,o),{size:s=16}=e,{title:a=void 0}=e;return i.$$set=f=>{l(5,e=pe(pe({},e),Ve(f))),l(3,r=Ie(e,o)),"size"in f&&l(0,s=f.size),"title"in f&&l(1,a=f.title)},i.$$.update=()=>{l(4,t=e["aria-label"]||e["aria-labelledby"]||a),l(2,n={"aria-hidden":t?void 0:!0,role:t?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ve(e),[s,a,n,r,t]}class yi extends $e{constructor(e){super(),ke(this,e,Si,ki,be,{size:0,title:1})}}function Yt(i){let e;return{c(){e=E("div"),this.h()},l(l){e=D(l,"DIV",{id:!0,style:!0}),$(e).forEach(m),this.h()},h(){I(e,"id","svelte-infinite-scroll"),st(e,"width","0")},m(l,t){N(l,e,t),i[11](e)},p:W,d(l){l&&m(e),i[11](null)}}}function Ei(i){let e,l=!i[1]&&!i[0]&&Yt(i);return{c(){l&&l.c(),e=se()},l(t){l&&l.l(t),e=se()},m(t,n){l&&l.m(t,n),N(t,e,n)},p(t,[n]){!t[1]&&!t[0]?l?l.p(t,n):(l=Yt(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:W,o:W,d(t){l&&l.d(t),t&&m(e)}}}function Di(i,e,l){let{threshold:t=0}=e,{horizontal:n=!1}=e,{elementScroll:o=null}=e,{hasMore:r=!0}=e,{reverse:s=!1}=e,{window:a=!1}=e;const f=pt();let c=!1,d,u,_,p;const v=C=>{if(!r)return;const V=C.target;w(V,s,n)<=t?(!c&&r&&(f("loadMore"),l(8,u=V.scrollHeight),l(9,_=V.scrollTop)),l(7,c=!0)):l(7,c=!1)},w=(C,V,U)=>{const z=C.documentElement?C.documentElement:C;return V?U?z.scrollLeft:z.scrollTop:U?z.scrollWidth-z.clientWidth-z.scrollLeft:z.scrollHeight-z.clientHeight-z.scrollTop};Bn(()=>{a?l(10,p=document):o?l(10,p=o):l(10,p=d.parentNode)}),qn(()=>{p&&(p.removeEventListener("scroll",v),p.removeEventListener("resize",v))});function S(C){Pe[C?"unshift":"push"](()=>{d=C,l(2,d)})}return i.$$set=C=>{"threshold"in C&&l(3,t=C.threshold),"horizontal"in C&&l(4,n=C.horizontal),"elementScroll"in C&&l(0,o=C.elementScroll),"hasMore"in C&&l(5,r=C.hasMore),"reverse"in C&&l(6,s=C.reverse),"window"in C&&l(1,a=C.window)},i.$$.update=()=>{i.$$.dirty&1088&&p&&(s&&l(10,p.scrollTop=p.scrollHeight,p),p.addEventListener("scroll",v),p.addEventListener("resize",v)),i.$$.dirty&1984&&c&&s&&l(10,p.scrollTop=p.scrollHeight-u+_,p)},[o,a,d,t,n,r,s,c,u,_,p,S]}class Ii extends $e{constructor(e){super(),ke(this,e,Di,Ei,be,{threshold:3,horizontal:4,elementScroll:0,hasMore:5,reverse:6,window:1})}}function Vi(i){let e,l,t,n,o,r,s,a;t=new Xn({});const f=i[3].default,c=Hn(f,i,i[6],null);return{c(){e=E("div"),l=E("button"),A(t.$$.fragment),n=Q(),o=E("span"),c&&c.c(),this.h()},l(d){e=D(d,"DIV",{class:!0});var u=$(e);l=D(u,"BUTTON",{class:!0});var _=$(l);H(t.$$.fragment,_),_.forEach(m),n=J(u),o=D(u,"SPAN",{class:!0});var p=$(o);c&&c.l(p),p.forEach(m),u.forEach(m),this.h()},h(){I(l,"class","p-0 opacity-50 hover:opacity-100"),I(o,"class","truncate"),I(e,"class","removable-tag flex items-center gap-x-1")},m(d,u){N(d,e,u),g(e,l),R(t,l,null),g(e,n),g(e,o),c&&c.m(o,null),r=!0,s||(a=Be(l,"click",Ln(i[4])),s=!0)},p(d,u){c&&c.p&&(!r||u&64)&&jn(c,f,d,d[6],r?Yn(f,d[6],u,null):Un(d[6]),null)},i(d){r||(h(t.$$.fragment,d),h(c,d),r=!0)},o(d){b(t.$$.fragment,d),b(c,d),r=!1},d(d){d&&m(e),B(t),c&&c.d(d),s=!1,a()}}}function Ni(i){let e,l;const t=[{type:i[0]},i[2]];let n={$$slots:{default:[Vi]},$$scope:{ctx:i}};for(let o=0;o<t.length;o+=1)n=pe(n,t[o]);return e=new Xe({props:n}),e.$on("click",i[5]),{c(){A(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,r){R(e,o,r),l=!0},p(o,[r]){const s=r&5?qe(t,[r&1&&{type:o[0]},r&4&&On(o[2])]):{};r&64&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),l=!1},d(o){B(e,o)}}}function Ci(i,e,l){const t=["type"];let n=Ie(e,t),{$$slots:o={},$$scope:r}=e;const s=pt();let{type:a}=e;const f=()=>s("remove");function c(d){ct.call(this,i,d)}return i.$$set=d=>{e=pe(pe({},e),Ve(d)),l(2,n=Ie(e,t)),"type"in d&&l(0,a=d.type),"$$scope"in d&&l(6,r=d.$$scope)},[a,s,n,o,f,c,r]}class Nt extends $e{constructor(e){super(),ke(this,e,Ci,Ni,be,{type:0})}}function Ti(i){let e,l=(i[2]?"":i[5])+"",t,n,o=i[0][i[1].op]+"",r,s,a;return{c(){e=E("span"),t=K(l),n=Q(),r=K(o),s=Q(),a=K(i[4]),this.h()},l(f){e=D(f,"SPAN",{class:!0});var c=$(e);t=G(c,l),c.forEach(m),n=J(f),r=G(f,o),s=J(f),a=G(f,i[4]),this.h()},h(){I(e,"class","font-mono")},m(f,c){N(f,e,c),g(e,t),N(f,n,c),N(f,r,c),N(f,s,c),N(f,a,c)},p(f,c){c&36&&l!==(l=(f[2]?"":f[5])+"")&&fe(t,l),c&2&&o!==(o=f[0][f[1].op]+"")&&fe(r,o),c&16&&fe(a,f[4])},d(f){f&&m(e),f&&m(n),f&&m(r),f&&m(s),f&&m(a)}}}function Fi(i){let e,l,t,n,o,r;return l=new Nt({props:{interactive:!0,type:"magenta",$$slots:{default:[Ti]},$$scope:{ctx:i}}}),l.$on("click",i[9]),l.$on("remove",i[10]),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=$(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","filter-pill items-center")},m(s,a){N(s,e,a),R(l,e,null),n=!0,o||(r=Te(t=Fe.call(null,e,{text:i[6]})),o=!0)},p(s,[a]){const f={};a&2102&&(f.$$scope={dirty:a,ctx:s}),l.$set(f),t&&Le(t.update)&&a&64&&t.update.call(null,{text:s[6]})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){b(l.$$.fragment,s),n=!1},d(s){s&&m(e),B(l),o=!1,r()}}}function Mi(i,e,l){let t,n,o,r,s;const a={equals:"=",not_equal:"≠",less:"<",less_equal:"≤",greater:">",greater_equal:"≥",in:"in",exists:"exists"};let{filter:f}=e,{hidePath:c=!1}=e;const d=Ae();ge(i,d,p=>l(7,s=p));const u=()=>Ge({command:Ze.EditFilter,namespace:s.namespace,datasetName:s.datasetName,path:n}),_=()=>d.removeFilter(f);return i.$$set=p=>{"filter"in p&&l(1,f=p.filter),"hidePath"in p&&l(2,c=p.hidePath)},i.$$.update=()=>{i.$$.dirty&2&&l(4,t=Ee(f.value||"false")),i.$$.dirty&2&&l(3,n=Et(f.path)),i.$$.dirty&18&&l(6,o=`${Se(f.path)} ${a[f.op]} ${t}`),i.$$.dirty&8&&l(5,r=n.at(-1))},[a,f,c,n,t,r,o,s,d,u,_]}class Pn extends $e{constructor(e){super(),ke(this,e,Mi,Fi,be,{FILTER_SHORTHANDS:0,filter:1,hidePath:2})}get FILTER_SHORTHANDS(){return this.$$.ctx[0]}}function Qt(i){let e,l=i[0].query.concept_namespace+"",t,n,o=i[0].query.concept_name+"",r;return{c(){e=E("div"),t=K(l),n=K(" / "),r=K(o),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=$(e);t=G(a,l),n=G(a," / "),r=G(a,o),a.forEach(m),this.h()},h(){I(e,"class","mb-2 w-full text-center text-xs")},m(s,a){N(s,e,a),g(e,t),g(e,n),g(e,r)},p(s,a){a&1&&l!==(l=s[0].query.concept_namespace+"")&&fe(t,l),a&1&&o!==(o=s[0].query.concept_name+"")&&fe(r,o)},d(s){s&&m(e)}}}function zi(i){let e=Se(i[0].path)+"",l,t,n=i[0].query.type+"",o;return{c(){l=K(e),t=K(": "),o=K(n)},l(r){l=G(r,e),t=G(r,": "),o=G(r,n)},m(r,s){N(r,l,s),N(r,t,s),N(r,o,s)},p(r,s){s&1&&e!==(e=Se(r[0].path)+"")&&fe(l,e),s&1&&n!==(n=r[0].query.type+"")&&fe(o,n)},d(r){r&&m(l),r&&m(t),r&&m(o)}}}function Jt(i){let e,l,t;return l=new Vn({props:{embedding:i[0].query.embedding}}),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=$(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","ml-2")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const r={};o&1&&(r.embedding=n[0].query.embedding),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){b(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function Kt(i){let e,l;return{c(){e=E("div"),l=K(i[2]),this.h()},l(t){e=D(t,"DIV",{class:!0});var n=$(e);l=G(n,i[2]),n.forEach(m),this.h()},h(){I(e,"class","mt-2 whitespace-pre-wrap text-left")},m(t,n){N(t,e,n),g(e,l)},p(t,n){n&4&&fe(l,t[2])},d(t){t&&m(e)}}}function Pi(i){let e,l,t,n,o,r,s,a,f=i[0].query.type==="concept"&&Qt(i);n=new Xe({props:{type:i[1],$$slots:{default:[zi]},$$scope:{ctx:i}}});let c=(i[0].query.type==="semantic"||i[0].query.type==="concept")&&Jt(i),d=i[2]&&Kt(i);return{c(){f&&f.c(),e=Q(),l=E("div"),t=E("div"),A(n.$$.fragment),o=Q(),c&&c.c(),r=Q(),d&&d.c(),s=se(),this.h()},l(u){f&&f.l(u),e=J(u),l=D(u,"DIV",{class:!0});var _=$(l);t=D(_,"DIV",{class:!0});var p=$(t);H(n.$$.fragment,p),p.forEach(m),o=J(_),c&&c.l(_),_.forEach(m),r=J(u),d&&d.l(u),s=se(),this.h()},h(){I(t,"class","whitespace-nowrap"),I(l,"class","flex items-center justify-items-center")},m(u,_){f&&f.m(u,_),N(u,e,_),N(u,l,_),g(l,t),R(n,t,null),g(l,o),c&&c.m(l,null),N(u,r,_),d&&d.m(u,_),N(u,s,_),a=!0},p(u,[_]){u[0].query.type==="concept"?f?f.p(u,_):(f=Qt(u),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null);const p={};_&2&&(p.type=u[1]),_&9&&(p.$$scope={dirty:_,ctx:u}),n.$set(p),u[0].query.type==="semantic"||u[0].query.type==="concept"?c?(c.p(u,_),_&1&&h(c,1)):(c=Jt(u),c.c(),h(c,1),c.m(l,null)):c&&(le(),b(c,1,1,()=>{c=null}),ne()),u[2]?d?d.p(u,_):(d=Kt(u),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},i(u){a||(h(n.$$.fragment,u),h(c),a=!0)},o(u){b(n.$$.fragment,u),b(c),a=!1},d(u){f&&f.d(u),u&&m(e),u&&m(l),B(n),c&&c.d(),u&&m(r),d&&d.d(u),u&&m(s)}}}function Ai(i,e,l){let t,{search:n}=e,{tagType:o="outline"}=e;return i.$$set=r=>{"search"in r&&l(0,n=r.search),"tagType"in r&&l(1,o=r.tagType)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=n.query.type==="concept"?"":n.query.search)},[n,o,t]}class Gt extends $e{constructor(e){super(),ke(this,e,Ai,Pi,be,{search:0,tagType:1})}}function Ri(i){let e,l=Se(i[0].path)+"",t,n,o,r;return{c(){e=E("span"),t=K(l),n=K(' has "'),o=K(i[2]),r=K('"'),this.h()},l(s){e=D(s,"SPAN",{class:!0});var a=$(e);t=G(a,l),a.forEach(m),n=G(s,' has "'),o=G(s,i[2]),r=G(s,'"'),this.h()},h(){I(e,"class","font-mono")},m(s,a){N(s,e,a),g(e,t),N(s,n,a),N(s,o,a),N(s,r,a)},p(s,a){a&1&&l!==(l=Se(s[0].path)+"")&&fe(t,l),a&4&&fe(o,s[2])},d(s){s&&m(e),s&&m(n),s&&m(o),s&&m(r)}}}function Bi(i){let e,l,t,n,o,r;return l=new Nt({props:{title:"query",interactive:!0,type:i[1],$$slots:{default:[Ri]},$$scope:{ctx:i}}}),l.$on("click",i[6]),l.$on("remove",i[7]),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=$(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","search-pill items-center text-left")},m(s,a){N(s,e,a),R(l,e,null),n=!0,o||(r=Te(t=Fe.call(null,e,{component:Gt,props:{search:i[0],tagType:i[1]}})),o=!0)},p(s,[a]){const f={};a&2&&(f.type=s[1]),a&517&&(f.$$scope={dirty:a,ctx:s}),l.$set(f),t&&Le(t.update)&&a&3&&t.update.call(null,{component:Gt,props:{search:s[0],tagType:s[1]}})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){b(l.$$.fragment,s),n=!1},d(s){s&&m(e),B(l),o=!1,r()}}}function qi(i,e,l){let t,n,o,{search:r}=e;const s={keyword:"outline",semantic:"teal",concept:"green"},a=Ae(),f=Ye();ge(i,f,u=>l(3,o=u));function c(u){ct.call(this,i,u)}const d=()=>{var u;return a.removeSearch(r,((u=o.selectRowsSchema)==null?void 0:u.data)||null)};return i.$$set=u=>{"search"in u&&l(0,r=u.search)},i.$$.update=()=>{i.$$.dirty&1&&l(2,t=r.query.type==="concept"?r.query.concept_name:r.query.search),i.$$.dirty&1&&l(1,n=r.query.type!=null?s[r.query.type]:"outline")},[r,n,t,o,a,f,c,d]}class An extends $e{constructor(e){super(),ke(this,e,qi,Bi,be,{search:0})}}function Zt(i,e,l){const t=i.slice();return t[26]=e[l][0],t[27]=e[l][1],t}function Wt(i,e,l){const t=i.slice();return t[30]=e[l],t}function Xt(i,e,l){const t=i.slice();return t[33]=e[l],t}function xt(i,e,l){const t=i.slice();return t[36]=e[l],t}function el(i,e,l){const t=i.slice();return t[39]=e[l],t}function Oi(i){let e,l,t,n=i[13],o=[];for(let a=0;a<n.length;a+=1)o[a]=nl(xt(i,n,a));const r=a=>b(o[a],1,1,()=>{o[a]=null});let s=i[8]!=null&&i[8].length>0&&rl(i);return{c(){e=E("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Q(),s&&s.c(),this.h()},l(a){e=D(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=J(f),s&&s.l(f),f.forEach(m),this.h()},h(){I(e,"class","flex w-full flex-row gap-x-4")},m(a,f){N(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);g(e,l),s&&s.m(e,null),t=!0},p(a,f){if(f[0]&57352){n=a[13];let c;for(c=0;c<n.length;c+=1){const d=xt(a,n,c);o[c]?(o[c].p(d,f),h(o[c],1)):(o[c]=nl(d),o[c].c(),h(o[c],1),o[c].m(e,l))}for(le(),c=n.length;c<o.length;c+=1)r(c);ne()}a[8]!=null&&a[8].length>0?s?(s.p(a,f),f[0]&256&&h(s,1)):(s=rl(a),s.c(),h(s,1),s.m(e,null)):s&&(le(),b(s,1,1,()=>{s=null}),ne())},i(a){if(!t){for(let f=0;f<n.length;f+=1)h(o[f]);h(s),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)b(o[f]);b(s),t=!1},d(a){a&&m(e),ze(o,a),s&&s.d()}}}function tl(i){let e,l,t=i[14][i[36]]+"",n,o,r,s,a,f=i[3][i[36]],c=[];for(let u=0;u<f.length;u+=1)c[u]=ll(el(i,f,u));const d=u=>b(c[u],1,1,()=>{c[u]=null});return{c(){e=E("div"),l=E("div"),n=K(t),o=Q(),r=E("div");for(let u=0;u<c.length;u+=1)c[u].c();s=Q(),this.h()},l(u){e=D(u,"DIV",{class:!0});var _=$(e);l=D(_,"DIV",{class:!0});var p=$(l);n=G(p,t),p.forEach(m),o=J(_),r=D(_,"DIV",{class:!0});var v=$(r);for(let w=0;w<c.length;w+=1)c[w].l(v);v.forEach(m),s=J(_),_.forEach(m),this.h()},h(){I(l,"class","text-xs font-light"),I(r,"class","flex flex-row gap-x-1"),I(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(u,_){N(u,e,_),g(e,l),g(l,n),g(e,o),g(e,r);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(r,null);g(e,s),a=!0},p(u,_){if(_[0]&40968){f=u[3][u[36]];let p;for(p=0;p<f.length;p+=1){const v=el(u,f,p);c[p]?(c[p].p(v,_),h(c[p],1)):(c[p]=ll(v),c[p].c(),h(c[p],1),c[p].m(r,null))}for(le(),p=f.length;p<c.length;p+=1)d(p);ne()}},i(u){if(!a){for(let _=0;_<f.length;_+=1)h(c[_]);a=!0}},o(u){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)b(c[_]);a=!1},d(u){u&&m(e),ze(c,u)}}}function ll(i){let e,l;function t(){return i[23](i[39])}return e=new An({props:{search:i[39]}}),e.$on("click",t),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){i=n;const r={};o[0]&8&&(r.search=i[39]),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function nl(i){let e,l,t=i[3][i[36]]&&tl(i);return{c(){t&&t.c(),e=se()},l(n){t&&t.l(n),e=se()},m(n,o){t&&t.m(n,o),N(n,e,o),l=!0},p(n,o){n[3][n[36]]?t?(t.p(n,o),o[0]&8&&h(t,1)):(t=tl(n),t.c(),h(t,1),t.m(e.parentNode,e)):t&&(le(),b(t,1,1,()=>{t=null}),ne())},i(n){l||(h(t),l=!0)},o(n){b(t),l=!1},d(n){t&&t.d(n),n&&m(e)}}}function rl(i){let e,l,t,n,o,r,s=i[8],a=[];for(let c=0;c<s.length;c+=1)a[c]=il(Xt(i,s,c));const f=c=>b(a[c],1,1,()=>{a[c]=null});return{c(){e=E("div"),l=E("div"),t=K("Filters"),n=Q(),o=E("div");for(let c=0;c<a.length;c+=1)a[c].c();this.h()},l(c){e=D(c,"DIV",{class:!0});var d=$(e);l=D(d,"DIV",{class:!0});var u=$(l);t=G(u,"Filters"),u.forEach(m),n=J(d),o=D(d,"DIV",{class:!0});var _=$(o);for(let p=0;p<a.length;p+=1)a[p].l(_);_.forEach(m),d.forEach(m),this.h()},h(){I(l,"class","text-xs font-light"),I(o,"class","flex flex-row gap-x-1"),I(e,"class","filter-group rounded bg-slate-50 px-2 py-1 shadow-sm svelte-16ln9ke")},m(c,d){N(c,e,d),g(e,l),g(l,t),g(e,n),g(e,o);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(o,null);r=!0},p(c,d){if(d[0]&256){s=c[8];let u;for(u=0;u<s.length;u+=1){const _=Xt(c,s,u);a[u]?(a[u].p(_,d),h(a[u],1)):(a[u]=il(_),a[u].c(),h(a[u],1),a[u].m(o,null))}for(le(),u=s.length;u<a.length;u+=1)f(u);ne()}},i(c){if(!r){for(let d=0;d<s.length;d+=1)h(a[d]);r=!0}},o(c){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)b(a[d]);r=!1},d(c){c&&m(e),ze(a,c)}}}function il(i){let e,l;return e=new Pn({props:{filter:i[33]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&256&&(o.filter=t[33]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function sl(i){let e=Ee(i[0])+"",l,t,n=Ee(i[1].dataset_manifest.num_items)+"",o,r;return{c(){l=K(e),t=K(" of "),o=K(n),r=K(" rows")},l(s){l=G(s,e),t=G(s," of "),o=G(s,n),r=G(s," rows")},m(s,a){N(s,l,a),N(s,t,a),N(s,o,a),N(s,r,a)},p(s,a){a[0]&1&&e!==(e=Ee(s[0])+"")&&fe(l,e),a[0]&2&&n!==(n=Ee(s[1].dataset_manifest.num_items)+"")&&fe(o,n)},d(s){s&&m(l),s&&m(t),s&&m(o),s&&m(r)}}}function al(i){let e,l;return e=new ot({props:{value:i[30].path!=null?Se(i[30].path):void 0,text:i[30].text,disabled:i[30].disabled}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.value=t[30].path!=null?Se(t[30].path):void 0),n[0]&128&&(o.text=t[30].text),n[0]&128&&(o.disabled=t[30].disabled),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Hi(i){let e,l,t=i[27],n=[];for(let r=0;r<t.length;r+=1)n[r]=al(Wt(i,t,r));const o=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Q()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=J(r)},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);N(r,e,s),l=!0},p(r,s){if(s[0]&128){t=r[27];let a;for(a=0;a<t.length;a+=1){const f=Wt(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=al(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(r){ze(n,r),r&&m(e)}}}function ol(i){let e,l;return e=new er({props:{label:i[26],$$slots:{default:[Hi]},$$scope:{ctx:i}}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.label=t[26]),n[0]&128|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Li(i){let e,l,t=Object.entries(i[7]),n=[];for(let r=0;r<t.length;r+=1)n[r]=ol(Zt(i,t,r));const o=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=se()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=se()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);N(r,e,s),l=!0},p(r,s){if(s[0]&128){t=Object.entries(r[7]);let a;for(a=0;a<t.length;a+=1){const f=Zt(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=ol(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(r){ze(n,r),r&&m(e)}}}function fl(i){let e,l,t,n,o,r;return l=new Rr({}),{c(){e=E("button"),A(l.$$.fragment),this.h()},l(s){e=D(s,"BUTTON",{});var a=$(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){e.disabled=t=i[4]==null},m(s,a){N(s,e,a),R(l,e,null),n=!0,o||(r=[Te(Fe.call(null,e,{text:"Clear sort"})),Be(e,"click",i[18])],o=!0)},p(s,a){(!n||a[0]&16&&t!==(t=s[4]==null))&&(e.disabled=t)},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){b(l.$$.fragment,s),n=!1},d(s){s&&m(e),B(l),o=!1,We(r)}}}function ji(i){let e,l;return e=new zn({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ui(i){let e,l;return e=new Mn({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Yi(i){let e,l;return e=new yi({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function cl(i){let e,l;return e=new Nn({props:{open:!0,modalHeading:"Concept",passiveModal:!0,size:"lg",$$slots:{default:[Gi]},$$scope:{ctx:i}}}),e.$on("close",i[24]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1024|n[1]&2048&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Qi(i){let e,l;return e=new Lr({props:{concept:i[10].data}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1024&&(o.concept=t[10].data),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ji(i){let e,l=i[10].error.message+"",t;return{c(){e=E("p"),t=K(l)},l(n){e=D(n,"P",{});var o=$(e);t=G(o,l),o.forEach(m)},m(n,o){N(n,e,o),g(e,t)},p(n,o){o[0]&1024&&l!==(l=n[10].error.message+"")&&fe(t,l)},i:W,o:W,d(n){n&&m(e)}}}function Ki(i){let e,l;return e=new Qe({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Gi(i){let e,l,t,n;const o=[Ki,Ji,Qi],r=[];function s(a,f){var c,d,u;return(c=a[10])!=null&&c.isLoading?0:(d=a[10])!=null&&d.isError?1:(u=a[10])!=null&&u.isSuccess?2:-1}return~(e=s(i))&&(l=r[e]=o[e](i)),{c(){l&&l.c(),t=se()},l(a){l&&l.l(a),t=se()},m(a,f){~e&&r[e].m(a,f),N(a,t,f),n=!0},p(a,f){let c=e;e=s(a),e===c?~e&&r[e].p(a,f):(l&&(le(),b(r[c],1,1,()=>{r[c]=null}),ne()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){b(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function Zi(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,p,v,w,S,C,V,U,z,T,y=i[13].length>0&&Oi(i),P=i[0]&&i[1]&&sl(i);c=new vt({props:{noLabel:!0,size:"sm",class:"w-80",selected:i[5],$$slots:{default:[Li]},$$scope:{ctx:i}}}),c.$on("update",i[16]);let M=i[6]!=null&&fl(i);const k=[Yi,Ui,ji],q=[];function ee(Y,F){var j,L,O;return((j=Y[4])==null?void 0:j.order)==null?0:((L=Y[4])==null?void 0:L.order)==="ASC"?1:((O=Y[4])==null?void 0:O.order)==="DESC"?2:-1}~(p=ee(i))&&(v=q[p]=k[p](i));let x=i[2]&&cl(i);return{c(){e=E("div"),y&&y.c(),l=Q(),t=E("div"),n=E("div"),P&&P.c(),o=Q(),r=E("div"),s=E("div"),a=K("Sort by"),f=Q(),A(c.$$.fragment),d=Q(),M&&M.c(),u=Q(),_=E("button"),v&&v.c(),C=Q(),x&&x.c(),V=se(),this.h()},l(Y){e=D(Y,"DIV",{class:!0});var F=$(e);y&&y.l(F),l=J(F),t=D(F,"DIV",{class:!0});var j=$(t);n=D(j,"DIV",{class:!0});var L=$(n);P&&P.l(L),L.forEach(m),o=J(j),r=D(j,"DIV",{class:!0});var O=$(r);s=D(O,"DIV",{class:!0});var X=$(s);a=G(X,"Sort by"),X.forEach(m),f=J(O),H(c.$$.fragment,O),d=J(O),M&&M.l(O),u=J(O),_=D(O,"BUTTON",{});var de=$(_);v&&v.l(de),de.forEach(m),O.forEach(m),j.forEach(m),F.forEach(m),C=J(Y),x&&x.l(Y),V=se(),this.h()},h(){I(n,"class","py-1"),I(s,"class","mr-1"),_.disabled=w=i[4]==null,I(r,"class","sort-container flex flex-row items-center gap-x-1"),I(t,"class","flex w-full flex-row items-center justify-between"),I(e,"class","mx-5 my-2 flex flex-col gap-y-2")},m(Y,F){var j;N(Y,e,F),y&&y.m(e,null),g(e,l),g(e,t),g(t,n),P&&P.m(n,null),g(t,o),g(t,r),g(r,s),g(s,a),g(r,f),R(c,r,null),g(r,d),M&&M.m(r,null),g(r,u),g(r,_),~p&&q[p].m(_,null),N(Y,C,F),x&&x.m(Y,F),N(Y,V,F),U=!0,z||(T=[Te(S=Fe.call(null,_,{text:((j=i[4])==null?void 0:j.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."})),Be(_,"click",i[17])],z=!0)},p(Y,F){var O;Y[13].length>0&&y.p(Y,F),Y[0]&&Y[1]?P?P.p(Y,F):(P=sl(Y),P.c(),P.m(n,null)):P&&(P.d(1),P=null);const j={};F[0]&32&&(j.selected=Y[5]),F[0]&128|F[1]&2048&&(j.$$scope={dirty:F,ctx:Y}),c.$set(j),Y[6]!=null?M?(M.p(Y,F),F[0]&64&&h(M,1)):(M=fl(Y),M.c(),h(M,1),M.m(r,u)):M&&(le(),b(M,1,1,()=>{M=null}),ne());let L=p;p=ee(Y),p!==L&&(v&&(le(),b(q[L],1,1,()=>{q[L]=null}),ne()),~p?(v=q[p],v||(v=q[p]=k[p](Y),v.c()),h(v,1),v.m(_,null)):v=null),(!U||F[0]&16&&w!==(w=Y[4]==null))&&(_.disabled=w),S&&Le(S.update)&&F[0]&16&&S.update.call(null,{text:((O=Y[4])==null?void 0:O.order)==="ASC"?"Sorted ascending. Toggle to switch to descending.":"Sorted descending. Toggle to switch to ascending."}),Y[2]?x?(x.p(Y,F),F[0]&4&&h(x,1)):(x=cl(Y),x.c(),h(x,1),x.m(V.parentNode,V)):x&&(le(),b(x,1,1,()=>{x=null}),ne())},i(Y){U||(h(y),h(c.$$.fragment,Y),h(M),h(v),h(x),U=!0)},o(Y){b(y),b(c.$$.fragment,Y),b(M),b(v),b(x),U=!1},d(Y){Y&&m(e),y&&y.d(),P&&P.d(),B(c),M&&M.d(),~p&&q[p].d(),Y&&m(C),x&&x.d(Y),Y&&m(V),z=!1,We(T)}}}function Wi(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,p=W,v=()=>(p(),p=Me(t,F=>l(10,_=F)),t);i.$$.on_destroy.push(()=>p());let{totalNumRows:w}=e,{manifest:S}=e,C=Ae();ge(i,C,F=>l(22,u=F));let V=Ye();ge(i,V,F=>l(21,d=F));let U=null;const z=["keyword","semantic","concept"],T={keyword:"Keyword",semantic:"Semantic",concept:"Concepts"};let y={};function P(F){if(F.query.type==="concept"){const j=F.query;l(2,U={namespace:j.concept_namespace,name:j.concept_name})}}let M={};const k=F=>{const j=F.detail;j!==s&&C.setSortBy(j===""?null:Et(j))},q=()=>{r!=null&&C.setSortBy(r.path),C.setSortOrder((r==null?void 0:r.order)==="ASC"?"DESC":"ASC")},ee=()=>{C.clearSorts()},x=F=>P(F),Y=()=>l(2,U=null);return i.$$set=F=>{"totalNumRows"in F&&l(0,w=F.totalNumRows),"manifest"in F&&l(1,S=F.manifest)},i.$$.update=()=>{var F,j,L,O;if(i.$$.dirty[0]&4&&v(l(9,t=U?wr(U.namespace,U.name):void 0)),i.$$.dirty[0]&4194304&&l(20,n=yt(u)),i.$$.dirty[0]&4194304&&l(8,o=u.query.filters),i.$$.dirty[0]&1048584){l(3,y={});for(const X of n)X.query.type&&(X.query.type in y||l(3,y[X.query.type]=[],y),y[X.query.type].push(X))}if(i.$$.dirty[0]&2097152&&l(4,r=xn(d)),i.$$.dirty[0]&2097152)for(const X of((j=(F=d.selectRowsSchema)==null?void 0:F.data)==null?void 0:j.search_results)||[])M[Se(X.result_path)]=X;i.$$.dirty[0]&16&&l(5,s=r!=null&&r.path?Se(r.path):""),i.$$.dirty[0]&4194304&&l(6,a=u.query.sort_by),i.$$.dirty[0]&2097248&&l(19,f=((O=(L=d.selectRowsSchema)==null?void 0:L.data)==null?void 0:O.schema)!=null?[{path:[""],text:"None",disabled:a==null&&s!==""},...Dt(d.selectRowsSchema.data.schema).filter(X=>X.dtype!="embedding"&&X.dtype!="string_span").map(X=>({path:X.path,text:Se(X.path.slice(1)),disabled:!1}))]:[]),i.$$.dirty[0]&524288&&l(7,c=f.reduce((X,de)=>{const he=de.path[0];return(X[he]=X[he]||[]).push(de),X},{}))},[w,S,U,y,r,s,a,c,o,t,_,C,V,z,T,P,k,q,ee,f,n,d,u,x,Y]}class Xi extends $e{constructor(e){super(),ke(this,e,Wi,Zi,be,{totalNumRows:0,manifest:1},null,[-1,-1])}}function ul(i,e,l){var r,s,a;const t=i.slice();t[14]=e[l],t[18]=l;const n=t[3].length>1?`[${t[18]}]`:"";t[15]=n;const o=((a=(s=(r=t[7].data)==null?void 0:r.ui)==null?void 0:s.markdown_paths)==null?void 0:a.find(f=>Ke(f,t[0])))!=null;return t[16]=o,t}function dl(i){let e,l,t,n=i[0].join(".")+i[15]+"",o,r,s,a,f,c;return a=new Ur({props:{text:Ee(i[14]),row:i[1],markdown:i[16],spanPaths:i[5].spanPaths,valuePaths:i[5].valuePaths,datasetViewStore:i[8],datasetStore:i[2],embeddings:i[6]}}),{c(){e=E("div"),l=E("div"),t=E("div"),o=K(n),r=Q(),s=E("div"),A(a.$$.fragment),f=Q(),this.h()},l(d){e=D(d,"DIV",{class:!0});var u=$(e);l=D(u,"DIV",{class:!0});var _=$(l);t=D(_,"DIV",{class:!0});var p=$(t);o=G(p,n),p.forEach(m),r=J(_),s=D(_,"DIV",{class:!0});var v=$(s);H(a.$$.fragment,v),v.forEach(m),_.forEach(m),f=J(u),u.forEach(m),this.h()},h(){I(t,"class","sticky top-0 z-10 w-full self-start border-t border-neutral-200 bg-neutral-100 px-2 py-2 pb-2 font-mono font-medium text-neutral-500"),I(s,"class","mx-4 font-normal"),I(l,"class","flex w-full flex-col"),I(e,"class","flex flex-row")},m(d,u){N(d,e,u),g(e,l),g(l,t),g(t,o),g(l,r),g(l,s),R(a,s,null),g(e,f),c=!0},p(d,u){(!c||u&9)&&n!==(n=d[0].join(".")+d[15]+"")&&fe(o,n);const _={};u&8&&(_.text=Ee(d[14])),u&2&&(_.row=d[1]),u&129&&(_.markdown=d[16]),u&32&&(_.spanPaths=d[5].spanPaths),u&32&&(_.valuePaths=d[5].valuePaths),u&4&&(_.datasetStore=d[2]),u&64&&(_.embeddings=d[6]),a.$set(_)},i(d){c||(h(a.$$.fragment,d),c=!0)},o(d){b(a.$$.fragment,d),c=!1},d(d){d&&m(e),B(a)}}}function xi(i){let e,l,t=i[3],n=[];for(let r=0;r<t.length;r+=1)n[r]=dl(ul(i,t,r));const o=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=se()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=se()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);N(r,e,s),l=!0},p(r,[s]){if(s&495){t=r[3];let a;for(a=0;a<t.length;a+=1){const f=ul(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=dl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(r){ze(n,r),r&&m(e)}}}function es(i,e,l){let t,n,o,r,s,a,f,c,d,u=W,_=()=>(u(),u=Me(s,V=>l(7,d=V)),s);i.$$.on_destroy.push(()=>u());let{path:p}=e,{row:v}=e,{field:w}=e;const S=Ae();ge(i,S,V=>l(13,f=V));const C=Ye();return ge(i,C,V=>l(2,c=V)),i.$$set=V=>{"path"in V&&l(0,p=V.path),"row"in V&&l(1,v=V.row),"field"in V&&l(10,w=V.field)},i.$$.update=()=>{i.$$.dirty&4&&l(11,t=c.visibleFields||[]),i.$$.dirty&8196&&l(12,n=pn(f,c)),i.$$.dirty&4100&&l(6,o=bn(c,n)),i.$$.dirty&3072&&l(5,r=tr(w,t)),i.$$.dirty&8192&&_(l(4,s=at(f.namespace,f.datasetName))),i.$$.dirty&3&&l(3,a=$r(v,p).map(V=>kr.value(V)).filter(Br))},[p,v,c,a,s,r,o,d,S,C,w,t,n,f]}class ts extends $e{constructor(e){super(),ke(this,e,es,xi,be,{path:0,row:1,field:10})}}function ml(i,e,l){const t=i.slice();return t[8]=e[l],t[10]=l,t}function hl(i){let e,l=[],t=new Map,n,o,r=i[1];const s=a=>Se(a[8].path);for(let a=0;a<r.length;a+=1){let f=ml(i,r,a),c=s(f);t.set(c,l[a]=_l(c,f))}return{c(){e=E("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=D(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<l.length;c+=1)l[c].l(f);f.forEach(m),this.h()},h(){I(e,"class","w-2/3 overflow-hidden"),bt(()=>i[7].call(e))},m(a,f){N(a,e,f);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=Qn(e,i[7].bind(e)),o=!0},p(a,f){f&3&&(r=a[1],le(),l=hn(l,f,s,1,a,r,t,e,_n,_l,null,ml),ne())},i(a){if(!o){for(let f=0;f<r.length;f+=1)h(l[f]);o=!0}},o(a){for(let f=0;f<l.length;f+=1)b(l[f]);o=!1},d(a){a&&m(e);for(let f=0;f<l.length;f+=1)l[f].d();n()}}}function _l(i,e){let l,t,n,o;return t=new ts({props:{row:e[0],path:e[8].path,field:e[8]}}),{key:i,first:null,c(){l=E("div"),A(t.$$.fragment),n=Q(),this.h()},l(r){l=D(r,"DIV",{class:!0});var s=$(l);H(t.$$.fragment,s),n=J(s),s.forEach(m),this.h()},h(){I(l,"class","border-gray-100"),ye(l,"border-b",e[10]<e[1].length-1),this.first=l},m(r,s){N(r,l,s),R(t,l,null),g(l,n),o=!0},p(r,s){e=r;const a={};s&1&&(a.row=e[0]),s&2&&(a.path=e[8].path),s&2&&(a.field=e[8]),t.$set(a),(!o||s&2)&&ye(l,"border-b",e[10]<e[1].length-1)},i(r){o||(h(t.$$.fragment,r),o=!0)},o(r){b(t.$$.fragment,r),o=!1},d(r){r&&m(l),B(t)}}}function ls(i){let e,l,t,n,o,r,s,a,f,c=i[1].length>0&&hl(i);return s=new Jr({props:{row:i[0],visibleFields:i[2],selectRowsSchema:i[4]}}),{c(){e=E("div"),l=E("div"),c&&c.c(),t=Q(),n=E("div"),o=E("div"),r=E("div"),A(s.$$.fragment),this.h()},l(d){e=D(d,"DIV",{class:!0});var u=$(e);l=D(u,"DIV",{class:!0});var _=$(l);c&&c.l(_),t=J(_),n=D(_,"DIV",{class:!0});var p=$(n);o=D(p,"DIV",{class:!0});var v=$(o);r=D(v,"DIV",{style:!0,class:!0});var w=$(r);H(s.$$.fragment,w),w.forEach(m),v.forEach(m),p.forEach(m),_.forEach(m),u.forEach(m),this.h()},h(){I(r,"style",a=`max-height: ${Math.max(gl,i[3])}px`),I(r,"class","overflow-y-auto"),I(o,"class","sticky top-0 self-start"),I(n,"class","flex h-full w-1/3 bg-neutral-100"),I(l,"class","flex h-full w-full flex-row"),I(e,"class","rounded border-x border-b border-neutral-200 shadow-md")},m(d,u){N(d,e,u),g(e,l),c&&c.m(l,null),g(l,t),g(l,n),g(n,o),g(o,r),R(s,r,null),f=!0},p(d,[u]){d[1].length>0?c?(c.p(d,u),u&2&&h(c,1)):(c=hl(d),c.c(),h(c,1),c.m(l,t)):c&&(le(),b(c,1,1,()=>{c=null}),ne());const _={};u&1&&(_.row=d[0]),u&4&&(_.visibleFields=d[2]),u&16&&(_.selectRowsSchema=d[4]),s.$set(_),(!f||u&8&&a!==(a=`max-height: ${Math.max(gl,d[3])}px`))&&I(r,"style",a)},i(d){f||(h(c),h(s.$$.fragment,d),f=!0)},o(d){b(c),b(s.$$.fragment,d),f=!1},d(d){d&&m(e),c&&c.d(),B(s)}}}const gl=320;function ns(i,e,l){let t,n,{row:o}=e,{mediaFields:r}=e,{visibleFields:s}=e;const a=Ye();ge(i,a,d=>l(6,n=d));let f=0;function c(){f=this.clientHeight,l(3,f)}return i.$$set=d=>{"row"in d&&l(0,o=d.row),"mediaFields"in d&&l(1,r=d.mediaFields),"visibleFields"in d&&l(2,s=d.visibleFields)},i.$$.update=()=>{var d;i.$$.dirty&64&&l(4,t=(d=n.selectRowsSchema)==null?void 0:d.data)},[o,r,s,f,t,a,n,c]}class rs extends $e{constructor(e){super(),ke(this,e,ns,ls,be,{row:0,mediaFields:1,visibleFields:2})}}function pl(i,e,l){const t=i.slice();return t[23]=e[l],t}function is(i){let e,l;return{c(){e=E("div"),l=K("No results."),this.h()},l(t){e=D(t,"DIV",{class:!0});var n=$(e);l=G(n,"No results."),n.forEach(m),this.h()},h(){I(e,"class","mx-4 mt-8 w-full text-gray-600")},m(t,n){N(t,e,n),g(e,l)},p:W,i:W,o:W,d(t){t&&m(e)}}}function ss(i){let e,l;return{c(){e=E("div"),l=K("Select fields to display"),this.h()},l(t){e=D(t,"DIV",{class:!0});var n=$(e);l=G(n,"Select fields to display"),n.forEach(m),this.h()},h(){I(e,"class","mt-12 w-full text-center text-gray-600")},m(t,n){N(t,e,n),g(e,l)},p:W,i:W,o:W,d(t){t&&m(e)}}}function as(i){let e,l;return e=new Qe({props:{paragraph:!0,lines:3}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function os(i){var t,n;let e,l;return e=new In({props:{lowContrast:!0,title:"Could not fetch schema:",subtitle:((t=i[2].error.body)==null?void 0:t.detail)||((n=i[2])==null?void 0:n.error.message)}}),{c(){A(e.$$.fragment)},l(o){H(e.$$.fragment,o)},m(o,r){R(e,o,r),l=!0},p(o,r){var a,f;const s={};r&4&&(s.subtitle=((a=o[2].error.body)==null?void 0:a.detail)||((f=o[2])==null?void 0:f.error.message)),e.$set(s)},i(o){l||(h(e.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),l=!1},d(o){B(e,o)}}}function fs(i){var t;let e,l;return e=new In({props:{lowContrast:!0,title:"Could not fetch rows:",subtitle:((t=i[4].error.body)==null?void 0:t.detail)||i[4].error.message}}),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var s;const r={};o&16&&(r.subtitle=((s=n[4].error.body)==null?void 0:s.detail)||n[4].error.message),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function bl(i){let e,l,t,n=i[6],o=[];for(let a=0;a<n.length;a+=1)o[a]=vl(pl(i,n,a));const r=a=>b(o[a],1,1,()=>{o[a]=null});let s=i[6].length>0&&wl(i);return{c(){e=E("div");for(let a=0;a<o.length;a+=1)o[a].c();l=Q(),s&&s.c(),this.h()},l(a){e=D(a,"DIV",{class:!0});var f=$(e);for(let c=0;c<o.length;c+=1)o[c].l(f);l=J(f),s&&s.l(f),f.forEach(m),this.h()},h(){I(e,"class","flex h-full w-full flex-col gap-y-10 overflow-y-scroll px-5 pb-32")},m(a,f){N(a,e,f);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);g(e,l),s&&s.m(e,null),i[21](e),t=!0},p(a,f){if(f&98){n=a[6];let c;for(c=0;c<n.length;c+=1){const d=pl(a,n,c);o[c]?(o[c].p(d,f),h(o[c],1)):(o[c]=vl(d),o[c].c(),h(o[c],1),o[c].m(e,l))}for(le(),c=n.length;c<o.length;c+=1)r(c);ne()}a[6].length>0?s?(s.p(a,f),f&64&&h(s,1)):(s=wl(a),s.c(),h(s,1),s.m(e,null)):s&&(le(),b(s,1,1,()=>{s=null}),ne())},i(a){if(!t){for(let f=0;f<n.length;f+=1)h(o[f]);h(s),t=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)b(o[f]);b(s),t=!1},d(a){a&&m(e),ze(o,a),s&&s.d(),i[21](null)}}}function vl(i){let e,l;return e=new rs({props:{visibleFields:i[1],row:i[23],mediaFields:i[5]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&2&&(o.visibleFields=t[1]),n&64&&(o.row=t[23]),n&32&&(o.mediaFields=t[5]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function wl(i){let e,l;return e=new Ii({props:{threshold:100}}),e.$on("loadMore",i[20]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function cs(i){let e,l,t,n,o,r,s;e=new Xi({props:{totalNumRows:i[7],manifest:i[12].data}});const a=[fs,os,as,ss,is],f=[];function c(u,_){var p,v,w,S;return u[4].isError?0:(p=u[2])!=null&&p.isError?1:(v=u[4])!=null&&v.isFetching||u[13].isFetching||(w=u[2])!=null&&w.isFetching||u[3].isFetching?2:u[1].length===0?3:(S=u[4])!=null&&S.isSuccess&&u[6]&&u[6].length===0?4:-1}~(t=c(i))&&(n=f[t]=a[t](i));let d=i[6]&&i[1].length>0&&i[13].isSuccess&&i[5]!=null&&bl(i);return{c(){A(e.$$.fragment),l=Q(),n&&n.c(),o=Q(),d&&d.c(),r=se()},l(u){H(e.$$.fragment,u),l=J(u),n&&n.l(u),o=J(u),d&&d.l(u),r=se()},m(u,_){R(e,u,_),N(u,l,_),~t&&f[t].m(u,_),N(u,o,_),d&&d.m(u,_),N(u,r,_),s=!0},p(u,[_]){const p={};_&128&&(p.totalNumRows=u[7]),_&4096&&(p.manifest=u[12].data),e.$set(p);let v=t;t=c(u),t===v?~t&&f[t].p(u,_):(n&&(le(),b(f[v],1,1,()=>{f[v]=null}),ne()),~t?(n=f[t],n?n.p(u,_):(n=f[t]=a[t](u),n.c()),h(n,1),n.m(o.parentNode,o)):n=null),u[6]&&u[1].length>0&&u[13].isSuccess&&u[5]!=null?d?(d.p(u,_),_&8290&&h(d,1)):(d=bl(u),d.c(),h(d,1),d.m(r.parentNode,r)):d&&(le(),b(d,1,1,()=>{d=null}),ne())},i(u){s||(h(e.$$.fragment,u),h(n),h(d),s=!0)},o(u){b(e.$$.fragment,u),b(n),b(d),s=!1},d(u){B(e,u),u&&m(l),~t&&f[t].d(u),u&&m(o),d&&d.d(u),u&&m(r)}}}function us(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,p,v=W,w=()=>(v(),v=Me(r,O=>l(3,p=O)),r),S,C,V=W,U=()=>(V(),V=Me(a,O=>l(4,C=O)),a),z,T,y=W,P=()=>(y(),y=Me(t,O=>l(12,T=O)),t),M,k=W,q=()=>(k(),k=Me(n,O=>l(13,M=O)),n);i.$$.on_destroy.push(()=>v()),i.$$.on_destroy.push(()=>V()),i.$$.on_destroy.push(()=>y()),i.$$.on_destroy.push(()=>k());const ee=Ae();ge(i,ee,O=>l(19,z=O));const x=Ye();ge(i,x,O=>l(18,S=O));let Y=null;const F=Ar(Y),j=()=>C==null?void 0:C.fetchNextPage();function L(O){Pe[O?"unshift":"push"](()=>{Y=O,l(0,Y)})}return i.$$.update=()=>{var O,X,de,he;i.$$.dirty&524288&&P(l(11,t=Sr(z.namespace,z.datasetName))),i.$$.dirty&524288&&q(l(10,n=It(z.namespace,z.datasetName))),i.$$.dirty&524288&&l(17,o=lr(z)),i.$$.dirty&524288&&w(l(9,r=at(z.namespace,z.datasetName))),i.$$.dirty&262144&&l(2,s=S.selectRowsSchema),i.$$.dirty&655364&&U(l(8,a=yr(z.namespace,z.datasetName,o||{},s!=null&&s.isSuccess?s.data.schema:void 0))),i.$$.dirty&16&&l(7,f=(O=C.data)==null?void 0:O.pages[0].total_num_rows),i.$$.dirty&16&&l(6,c=(X=C.data)==null?void 0:X.pages.flatMap(re=>re.rows)),i.$$.dirty&262144&&l(1,d=(S.visibleFields||[]).sort((re,De)=>Se(re.path)>Se(De.path)?1:-1)),i.$$.dirty&6&&l(16,u=((de=s==null?void 0:s.data)==null?void 0:de.schema)!=null?nr((he=s==null?void 0:s.data)==null?void 0:he.schema,d):null),i.$$.dirty&65544&&l(5,_=p.data?rr(u,p.data):[]),i.$$.dirty&1&&F.set(Y)},Jn(ir,F),[Y,d,s,p,C,_,c,f,a,r,n,t,T,M,ee,x,u,o,S,z,j,L]}class ds extends $e{constructor(e){super(),ke(this,e,us,cs,be,{})}}function $l(i,e,l){const t=i.slice();return t[45]=e[l],t}function kl(i,e,l){const t=i.slice();return t[48]=e[l],t}function Sl(i){const e=i[5].find(function(...t){return i[37](i[51],...t)});i[52]=e}function ms(i){let e,l,t=i[52].text+"",n,o,r=i[52].description&&yl(i);return{c(){e=E("div"),l=E("div"),n=K(t),o=Q(),r&&r.c(),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=$(e);l=D(a,"DIV",{});var f=$(l);n=G(f,t),f.forEach(m),o=J(a),r&&r.l(a),a.forEach(m),this.h()},h(){I(e,"class","flex justify-between gap-x-4")},m(s,a){N(s,e,a),g(e,l),g(l,n),g(e,o),r&&r.m(e,null)},p(s,a){a[0]&32|a[1]&1048576&&t!==(t=s[52].text+"")&&fe(n,t),s[52].description?r?r.p(s,a):(r=yl(s),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:W,o:W,d(s){s&&m(e),r&&r.d()}}}function hs(i){let e,l,t,n,o,r,s;return l=new Xe({props:{$$slots:{default:[bs]},$$scope:{ctx:i}}}),{c(){e=E("div"),A(l.$$.fragment),t=Q(),n=E("div"),o=K(`Semantic search:
                    `),r=K(i[0]),this.h()},l(a){e=D(a,"DIV",{class:!0});var f=$(e);H(l.$$.fragment,f),t=J(f),n=D(f,"DIV",{class:!0});var c=$(n);o=G(c,`Semantic search:
                    `),r=G(c,i[0]),c.forEach(m),f.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),g(e,t),g(e,n),g(n,o),g(n,r),s=!0},p(a,f){const c={};f[1]&4194304&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!s||f[0]&1)&&fe(r,a[0])},i(a){s||(h(l.$$.fragment,a),s=!0)},o(a){b(l.$$.fragment,a),s=!1},d(a){a&&m(e),B(l)}}}function _s(i){let e,l,t,n,o,r,s;return l=new Xe({props:{$$slots:{default:[vs]},$$scope:{ctx:i}}}),{c(){e=E("div"),A(l.$$.fragment),t=Q(),n=E("div"),o=K(`Keyword search:
                    `),r=K(i[0]),this.h()},l(a){e=D(a,"DIV",{class:!0});var f=$(e);H(l.$$.fragment,f),t=J(f),n=D(f,"DIV",{class:!0});var c=$(n);o=G(c,`Keyword search:
                    `),r=G(c,i[0]),c.forEach(m),f.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-keyword flex flex-row items-center justify-items-center")},m(a,f){N(a,e,f),R(l,e,null),g(e,t),g(e,n),g(n,o),g(n,r),s=!0},p(a,f){const c={};f[1]&4194304&&(c.$$scope={dirty:f,ctx:a}),l.$set(c),(!s||f[0]&1)&&fe(r,a[0])},i(a){s||(h(l.$$.fragment,a),s=!0)},o(a){b(l.$$.fragment,a),s=!1},d(a){a&&m(e),B(l)}}}function gs(i){let e,l,t,n,o,r=i[0]!=""?":":"",s,a,f,c;return l=new Xe({props:{$$slots:{default:[ws]},$$scope:{ctx:i}}}),{c(){e=E("div"),A(l.$$.fragment),t=Q(),n=E("div"),o=K("New concept"),s=K(r),a=Q(),f=K(i[0]),this.h()},l(d){e=D(d,"DIV",{class:!0});var u=$(e);H(l.$$.fragment,u),t=J(u),n=D(u,"DIV",{class:!0});var _=$(n);o=G(_,"New concept"),s=G(_,r),a=J(_),f=G(_,i[0]),_.forEach(m),u.forEach(m),this.h()},h(){I(n,"class","ml-2"),I(e,"class","new-concept flex flex-row items-center justify-items-center")},m(d,u){N(d,e,u),R(l,e,null),g(e,t),g(e,n),g(n,o),g(n,s),g(n,a),g(n,f),c=!0},p(d,u){const _={};u[1]&4194304&&(_.$$scope={dirty:u,ctx:d}),l.$set(_),(!c||u[0]&1)&&r!==(r=d[0]!=""?":":"")&&fe(s,r),(!c||u[0]&1)&&fe(f,d[0])},i(d){c||(h(l.$$.fragment,d),c=!0)},o(d){b(l.$$.fragment,d),c=!1},d(d){d&&m(e),B(l)}}}function ps(i){let e;return{c(){e=E("div")},l(l){e=D(l,"DIV",{}),$(e).forEach(m)},m(l,t){N(l,e,t)},p:W,i:W,o:W,d(l){l&&m(e)}}}function yl(i){let e,l=i[52].description+"",t;return{c(){e=E("div"),t=K(l),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){I(e,"class","truncate text-xs text-gray-500")},m(n,o){N(n,e,o),g(e,t)},p(n,o){o[0]&32|o[1]&1048576&&l!==(l=n[52].description+"")&&fe(t,l)},d(n){n&&m(e)}}}function bs(i){let e,l;return e=new Fn({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function vs(i){let e,l;return e=new Fn({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ws(i){let e,l;return e=new ti({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function $s(i){Sl(i);let e,l,t,n;const o=[ps,gs,_s,hs,ms],r=[];function s(a,f){return a[52]==null?0:a[52].id==="new-concept"?1:a[52].id==="keyword-search"?2:a[52].id==="semantic-search"?3:4}return e=s(i),l=r[e]=o[e](i),{c(){l.c(),t=se()},l(a){l.l(a),t=se()},m(a,f){r[e].m(a,f),N(a,t,f),n=!0},p(a,f){Sl(a);let c=e;e=s(a),e===c?r[e].p(a,f):(le(),b(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){b(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function El(i){let e,l;return e=new ot({props:{value:Se(i[48]),text:Se(i[48])}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&512&&(o.value=Se(t[48])),n[0]&512&&(o.text=Se(t[48])),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ks(i){let e,l,t=i[9],n=[];for(let r=0;r<t.length;r+=1)n[r]=El(kl(i,t,r));const o=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=se()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=se()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);N(r,e,s),l=!0},p(r,s){if(s[0]&512){t=r[9];let a;for(a=0;a<t.length;a+=1){const f=kl(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=El(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Dl(i){let e,l;return e=new vt({props:{size:"xl",class:"field-select w-48",selected:i[2]?Se(i[2]):"",disabled:i[9].length===0,warn:i[9].length===0,$$slots:{default:[ks]},$$scope:{ctx:i}}}),e.$on("change",i[21]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&4&&(o.selected=t[2]?Se(t[2]):""),n[0]&512&&(o.disabled=t[9].length===0),n[0]&512&&(o.warn=t[9].length===0),n[0]&512|n[1]&4194304&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Il(i){let e,l;return e=new ot({props:{value:i[45].name,text:i[45].name}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&16&&(o.value=t[45].name),n[0]&16&&(o.text=t[45].name),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ss(i){let e,l,t=i[4].data||[],n=[];for(let r=0;r<t.length;r+=1)n[r]=Il($l(i,t,r));const o=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=se()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=se()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);N(r,e,s),l=!0},p(r,s){if(s[0]&16){t=r[4].data||[];let a;for(a=0;a<t.length;a+=1){const f=$l(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=Il(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(r){ze(n,r),r&&m(e)}}}function ys(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,p=i[9],v,w,S,C,V,U,z;t=new rt({props:{disabled:i[3]||i[8],iconDescription:"Compute embedding index. This may be expensive.",icon:i[3]?Ct:i[8]?Tt:St}}),t.$on("click",i[36]);function T(M){i[39](M)}let y={size:"xl",items:i[5],shouldFilterItem:Es,placeholder:i[7],$$slots:{default:[$s,({item:M})=>({51:M}),({item:M})=>[0,M?1048576:0]]},$$scope:{ctx:i}};i[0]!==void 0&&(y.value=i[0]),c=new Wr({props:y}),i[38](c),Pe.push(()=>je(c,"value",T)),c.$on("select",i[20]);let P=Dl(i);return C=new vt({props:{size:"xl",selected:i[1]||"",name:i[1]||"",$$slots:{default:[Ss]},$$scope:{ctx:i}}}),C.$on("change",i[18]),{c(){e=E("div"),l=E("div"),A(t.$$.fragment),n=Q(),o=E("div"),r=E("div"),s=E("div"),a=E("div"),f=E("div"),A(c.$$.fragment),u=Q(),_=E("div"),P.c(),v=Q(),w=E("div"),S=E("div"),A(C.$$.fragment),this.h()},l(M){e=D(M,"DIV",{class:!0});var k=$(e);l=D(k,"DIV",{class:!0});var q=$(l);H(t.$$.fragment,q),q.forEach(m),n=J(k),o=D(k,"DIV",{class:!0});var ee=$(o);r=D(ee,"DIV",{class:!0});var x=$(r);s=D(x,"DIV",{class:!0});var Y=$(s);a=D(Y,"DIV",{class:!0});var F=$(a);f=D(F,"DIV",{class:!0});var j=$(f);H(c.$$.fragment,j),j.forEach(m),F.forEach(m),Y.forEach(m),x.forEach(m),ee.forEach(m),u=J(k),_=D(k,"DIV",{class:!0});var L=$(_);P.l(L),L.forEach(m),v=J(k),w=D(k,"DIV",{class:!0});var O=$(w);S=D(O,"DIV",{class:!0});var X=$(S);H(C.$$.fragment,X),X.forEach(m),O.forEach(m),k.forEach(m),this.h()},h(){I(l,"class","compute-embedding mr-1"),ye(l,"compute-embedding-indexing",i[8]),I(f,"class","flex-grow"),I(a,"class","flex w-full flex-row items-start justify-items-start"),I(s,"class","flex flex-row"),I(r,"class","w-full"),I(o,"class","search-container flex w-full flex-grow flex-row"),I(_,"class","mx-1"),I(S,"class","w-32"),I(w,"class","embedding-select mr-8 flex flex-row"),I(e,"class","border-1 flex w-full flex-row items-center px-4")},m(M,k){N(M,e,k),g(e,l),R(t,l,null),g(e,n),g(e,o),g(o,r),g(r,s),g(s,a),g(a,f),R(c,f,null),g(e,u),g(e,_),P.m(_,null),g(e,v),g(e,w),g(w,S),R(C,S,null),V=!0,U||(z=[Te(Fe.call(null,_,{text:"Select the field to search over."})),Te(Fe.call(null,S,{text:"Select the embedding to use."}))],U=!0)},p(M,k){const q={};k[0]&264&&(q.disabled=M[3]||M[8]),k[0]&264&&(q.icon=M[3]?Ct:M[8]?Tt:St),t.$set(q),(!V||k[0]&256)&&ye(l,"compute-embedding-indexing",M[8]);const ee={};k[0]&32&&(ee.items=M[5]),k[0]&128&&(ee.placeholder=M[7]),k[0]&33|k[1]&5242880&&(ee.$$scope={dirty:k,ctx:M}),!d&&k[0]&1&&(d=!0,ee.value=M[0],Ue(()=>d=!1)),c.$set(ee),k[0]&512&&be(p,p=M[9])?(le(),b(P,1,1,W),ne(),P=Dl(M),P.c(),h(P,1),P.m(_,null)):P.p(M,k);const x={};k[0]&2&&(x.selected=M[1]||""),k[0]&2&&(x.name=M[1]||""),k[0]&16|k[1]&4194304&&(x.$$scope={dirty:k,ctx:M}),C.$set(x)},i(M){V||(h(t.$$.fragment,M),h(c.$$.fragment,M),h(P),h(C.$$.fragment,M),V=!0)},o(M){b(t.$$.fragment,M),b(c.$$.fragment,M),b(P),b(C.$$.fragment,M),V=!1},d(M){M&&m(e),B(t),i[38](null),B(c),P.d(M),B(C),U=!1,We(z)}}}const Es=(i,e)=>i.text.toLowerCase().includes(e.toLowerCase())||i.id==="new-concept";function Ds(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,p,v,w,S,C,V,U,z,T,y,P,M=W,k=()=>(M(),M=Me(t,oe=>l(34,P=oe)),t),q;i.$$.on_destroy.push(()=>M());const ee=Ae();ge(i,ee,oe=>l(33,y=oe));const x=Ye();ge(i,x,oe=>l(32,z=oe));const Y=Tn();ge(i,Y,oe=>l(35,q=oe));const F=En();ge(i,F,oe=>l(42,C=oe));const j=Cn();ge(i,j,oe=>l(4,T=oe));const L=(oe,Ne)=>`${Se(oe||"")}_${Ne}`;let O={};const X=Er();ge(i,X,oe=>l(31,U=oe));const de=Vt();ge(i,de,oe=>l(30,V=oe));let he=[],re="",De;const ue=oe=>{l(1,f=oe.target.value),ee.setSearchEmbedding(oe.target.value)},ie=()=>{f!=null&&(l(22,O[L(r,f)]=!0,O),C.mutate([n,o,{leaf_path:Et(r||[]),signal:{signal_name:f}}]))};let ae;const me=(oe,Ne)=>{r==null||f==null||(ee.addSearch({path:[Se(r)],query:{type:"concept",concept_namespace:oe,concept_name:Ne,embedding:f}}),ae.clear())},Z=oe=>{if(!(r==null||f==null)){if(oe.detail.selectedId==="new-concept"){re===De.id&&l(0,re="");const Ne=re.split("/",2);let He="",Re="";Ne.length===2?[He,Re]=Ne:[Re]=Ne,Ge({command:Ze.CreateConcept,namespace:He,conceptName:Re,dataset:{namespace:n,name:o},path:r,onCreate:xe=>me(xe.detail.namespace,xe.detail.name)}),ae.clear();return}else if(oe.detail.selectedId==="keyword-search"){if(re=="")return;ee.addSearch({path:[Se(r)],query:{type:"keyword",search:re}}),ae.clear();return}else if(oe.detail.selectedId=="semantic-search"){if(re=="")return;ee.addSearch({path:[Se(r)],query:{type:"semantic",search:re,embedding:f}}),ae.clear();return}me(oe.detail.selectedId.namespace,oe.detail.selectedId.name)}},te=oe=>{ee.setSearchPath(oe.target.value)},ce=()=>{ie()},Oe=(oe,Ne)=>Ne.id===oe.id;function Je(oe){Pe[oe?"unshift":"push"](()=>{ae=oe,l(6,ae)})}function _e(oe){re=oe,l(0,re)}return i.$$.update=()=>{var oe,Ne;i.$$.dirty[1]&4&&k(l(10,t=at(y.namespace,y.datasetName))),i.$$.dirty[1]&4&&(n=y.namespace),i.$$.dirty[1]&4&&(o=y.datasetName),i.$$.dirty[1]&6&&l(2,r=pn(y,z)),i.$$.dirty[0]&4|i.$$.dirty[1]&4&&l(24,s=yt(y,r)),i.$$.dirty[1]&2&&l(9,a=(z.visibleFields||[]).filter(He=>He.dtype==="string").map(He=>Se(He.path))),i.$$.dirty[0]&20|i.$$.dirty[1]&30&&l(1,f=sr(q,P.data,y,z,r,(T.data||[]).map(He=>He.name))),i.$$.dirty[0]&4|i.$$.dirty[1]&2&&l(29,c=bn(z,r)),i.$$.dirty[0]&536870914&&l(3,d=c!=null&&!!c.includes(f||"")),i.$$.dirty[0]&4194318&&l(8,u=!d&&O[L(r,f)]),i.$$.dirty[0]&8&&l(7,_=d?"Search by concept or keyword.":'Search by keyword. Click "compute embedding" to search by concept.'),i.$$.dirty[0]&1073741824&&l(28,p=(Ne=(oe=V.data)==null?void 0:oe.user)==null?void 0:Ne.id),i.$$.dirty[0]&268435456|i.$$.dirty[1]&1&&l(25,v=ar(U.data||[],p)),i.$$.dirty[0]&9&&l(23,De={id:"new-concept",text:re,disabled:!d}),i.$$.dirty[0]&1&&l(27,w={id:"keyword-search",text:re}),i.$$.dirty[0]&9&&l(26,S={id:"semantic-search",text:re,disabled:!d}),i.$$.dirty[0]&1333788683|i.$$.dirty[1]&1&&l(5,he=U!=null&&U.data?[De,...re!=""?[w]:[],...re!=""&&f?[S]:[],...v.flatMap(He=>He.concepts.map(Re=>({id:{namespace:Re.namespace,name:Re.name},text:or(Re.namespace,Re.name,V.data),description:Re.description,disabled:!d||s.some(xe=>xe.query.type==="concept"&&xe.query.concept_namespace===Re.namespace&&xe.query.concept_name===Re.name)})))]:[])},[re,f,r,d,T,he,ae,_,u,a,t,ee,x,Y,F,j,X,de,ue,ie,Z,te,O,De,s,v,S,w,p,c,V,U,z,y,P,q,ce,Oe,Je,_e]}class Is extends $e{constructor(e){super(),ke(this,e,Ds,ys,be,{},null,[-1,-1])}}function Vs(i){let e,l;return e=new rt({props:{$$slots:{default:[Cs]},$$scope:{ctx:i}}}),e.$on("click",i[5]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&512&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ns(i){let e,l;return{c(){e=E("span"),l=K("Invalid query"),this.h()},l(t){e=D(t,"SPAN",{class:!0});var n=$(e);l=G(n,"Invalid query"),n.forEach(m),this.h()},h(){I(e,"class","text-red-500")},m(t,n){N(t,e,n),g(e,l)},p:W,i:W,o:W,d(t){t&&m(e)}}}function Cs(i){let e;return{c(){e=K("Apply")},l(l){e=G(l,"Apply")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function Ts(i){let e,l,t,n,o,r,s,a,f,c,d;const u=[Ns,Vs],_=[];function p(v,w){return v[0]?v[3]?1:-1:0}return~(r=p(i))&&(s=_[r]=u[r](i)),{c(){e=E("pre"),l=K(""),t=K(i[2]),n=K(`
`),o=Q(),s&&s.c(),a=se(),this.h()},l(v){e=D(v,"PRE",{class:!0,contenteditable:!0});var w=$(e);l=G(w,""),t=G(w,i[2]),n=G(w,`
`),w.forEach(m),o=J(v),s&&s.l(v),a=se(),this.h()},h(){I(e,"class","whitespace-pre bg-gray-50 p-4 font-mono"),I(e,"contenteditable",""),i[1]===void 0&&bt(()=>i[8].call(e)),ye(e,"outline-red-500",!i[0])},m(v,w){N(v,e,w),g(e,l),g(e,t),g(e,n),i[1]!==void 0&&(e.innerText=i[1]),N(v,o,w),~r&&_[r].m(v,w),N(v,a,w),f=!0,c||(d=Be(e,"input",i[8]),c=!0)},p(v,[w]){(!f||w&4)&&Kn(t,v[2]),w&2&&v[1]!==e.innerText&&(e.innerText=v[1]),(!f||w&1)&&ye(e,"outline-red-500",!v[0]);let S=r;r=p(v),r===S?~r&&_[r].p(v,w):(s&&(le(),b(_[S],1,1,()=>{_[S]=null}),ne()),~r?(s=_[r],s?s.p(v,w):(s=_[r]=u[r](v),s.c()),h(s,1),s.m(a.parentNode,a)):s=null)},i(v){f||(h(s),f=!0)},o(v){b(s),f=!1},d(v){v&&m(e),v&&m(o),~r&&_[r].d(v),v&&m(a),c=!1,d()}}}function Fs(i,e,l){let t,n,o,r,s;const a=Ae();ge(i,a,u=>l(7,s=u));let f=!0;function c(){ut(a,s.query=JSON.parse(o),s)}function d(){o=this.innerText,l(1,o),l(2,n),l(6,t),l(7,s)}return i.$$.update=()=>{if(i.$$.dirty&128&&l(6,t=s.query),i.$$.dirty&64&&l(2,n=t?JSON.stringify(t,null,2):""),i.$$.dirty&4&&l(1,o=n),i.$$.dirty&2)try{JSON.parse(o),l(0,f=!0)}catch{l(0,f=!1)}i.$$.dirty&67&&l(3,r=f&&!fr(JSON.parse(o),t))},[f,o,n,r,a,c,t,s,d]}class Ms extends $e{constructor(e){super(),ke(this,e,Fs,Ts,be,{})}}function Vl(i){let e,l;return e=new Zn({props:{light:!0,flipped:!0,$$slots:{default:[zs]},$$scope:{ctx:i}}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&1073742079&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Nl(i){let e,l;return e=new nt({props:{text:"Sort by"}}),e.$on("click",i[20]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Cl(i){let e,l;return e=new nt({props:{text:"Filter"}}),e.$on("click",i[21]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Tl(i){let e,l,t,n,o,r;return l=new nt({props:{disabled:!i[7],text:"Compute embedding"}}),l.$on("click",i[22]),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=$(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(s,a){N(s,e,a),R(l,e,null),n=!0,o||(r=Te(t=Fe.call(null,e,{text:i[7]?"":"User does not have access to compute embeddings over this dataset."})),o=!0)},p(s,a){const f={};a&128&&(f.disabled=!s[7]),l.$set(f),t&&Le(t.update)&&a&128&&t.update.call(null,{text:s[7]?"":"User does not have access to compute embeddings over this dataset."})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){b(l.$$.fragment,s),n=!1},d(s){s&&m(e),B(l),o=!1,r()}}}function Fl(i){let e,l;return e=new nt({props:{text:"Preview signal"}}),e.$on("click",i[23]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ml(i){let e,l,t,n,o,r;return l=new nt({props:{text:"Compute signal",disabled:!i[7]}}),l.$on("click",i[24]),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=$(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(s,a){N(s,e,a),R(l,e,null),n=!0,o||(r=Te(t=Fe.call(null,e,{text:i[7]?"":"User does not have access to compute signals over this dataset."})),o=!0)},p(s,a){const f={};a&128&&(f.disabled=!s[7]),l.$set(f),t&&Le(t.update)&&a&128&&t.update.call(null,{text:s[7]?"":"User does not have access to compute signals over this dataset."})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){b(l.$$.fragment,s),n=!1},d(s){s&&m(e),B(l),o=!1,r()}}}function zl(i){let e,l,t,n,o,r;return l=new nt({props:{disabled:!i[6],text:"Delete signal"}}),l.$on("click",i[25]),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=$(e);H(l.$$.fragment,a),a.forEach(m),this.h()},h(){I(e,"class","w-full")},m(s,a){N(s,e,a),R(l,e,null),n=!0,o||(r=Te(t=Fe.call(null,e,{text:i[6]?"":"User does not have access to delete signals for this dataset."})),o=!0)},p(s,a){const f={};a&64&&(f.disabled=!s[6]),l.$set(f),t&&Le(t.update)&&a&64&&t.update.call(null,{text:s[6]?"":"User does not have access to delete signals for this dataset."})},i(s){n||(h(l.$$.fragment,s),n=!0)},o(s){b(l.$$.fragment,s),n=!1},d(s){s&&m(e),B(l),o=!1,r()}}}function zs(i){let e=_t(i[0]),l,t=$t(i[0]),n,o,r,s,a,f,c=e&&Nl(i),d=t&&Cl(i),u=!i[2]&&Tl(i),_=!i[2]&&Fl(i),p=!i[2]&&Ml(i),v=i[1]&&zl(i);return{c(){c&&c.c(),l=Q(),d&&d.c(),n=Q(),u&&u.c(),o=Q(),_&&_.c(),r=Q(),p&&p.c(),s=Q(),v&&v.c(),a=se()},l(w){c&&c.l(w),l=J(w),d&&d.l(w),n=J(w),u&&u.l(w),o=J(w),_&&_.l(w),r=J(w),p&&p.l(w),s=J(w),v&&v.l(w),a=se()},m(w,S){c&&c.m(w,S),N(w,l,S),d&&d.m(w,S),N(w,n,S),u&&u.m(w,S),N(w,o,S),_&&_.m(w,S),N(w,r,S),p&&p.m(w,S),N(w,s,S),v&&v.m(w,S),N(w,a,S),f=!0},p(w,S){S&1&&(e=_t(w[0])),e?c?(c.p(w,S),S&1&&h(c,1)):(c=Nl(w),c.c(),h(c,1),c.m(l.parentNode,l)):c&&(le(),b(c,1,1,()=>{c=null}),ne()),S&1&&(t=$t(w[0])),t?d?(d.p(w,S),S&1&&h(d,1)):(d=Cl(w),d.c(),h(d,1),d.m(n.parentNode,n)):d&&(le(),b(d,1,1,()=>{d=null}),ne()),w[2]?u&&(le(),b(u,1,1,()=>{u=null}),ne()):u?(u.p(w,S),S&4&&h(u,1)):(u=Tl(w),u.c(),h(u,1),u.m(o.parentNode,o)),w[2]?_&&(le(),b(_,1,1,()=>{_=null}),ne()):_?(_.p(w,S),S&4&&h(_,1)):(_=Fl(w),_.c(),h(_,1),_.m(r.parentNode,r)),w[2]?p&&(le(),b(p,1,1,()=>{p=null}),ne()):p?(p.p(w,S),S&4&&h(p,1)):(p=Ml(w),p.c(),h(p,1),p.m(s.parentNode,s)),w[1]?v?(v.p(w,S),S&2&&h(v,1)):(v=zl(w),v.c(),h(v,1),v.m(a.parentNode,a)):v&&(le(),b(v,1,1,()=>{v=null}),ne())},i(w){f||(h(c),h(d),h(u),h(_),h(p),h(v),f=!0)},o(w){b(c),b(d),b(u),b(_),b(p),b(v),f=!1},d(w){c&&c.d(w),w&&m(l),d&&d.d(w),w&&m(n),u&&u.d(w),w&&m(o),_&&_.d(w),w&&m(r),p&&p.d(w),w&&m(s),v&&v.d(w),w&&m(a)}}}function Ps(i){let e,l,t,n=Se(i[0].path)+"",o,r,s,a,f;return{c(){e=E("p"),l=K("Confirm deleting "),t=E("code"),o=K(n),r=K(" ?"),s=Q(),a=E("p"),f=K("This is a permanent action and cannot be undone."),this.h()},l(c){e=D(c,"P",{class:!0});var d=$(e);l=G(d,"Confirm deleting "),t=D(d,"CODE",{});var u=$(t);o=G(u,n),u.forEach(m),r=G(d," ?"),d.forEach(m),s=J(c),a=D(c,"P",{class:!0});var _=$(a);f=G(_,"This is a permanent action and cannot be undone."),_.forEach(m),this.h()},h(){I(e,"class","!text-lg"),I(a,"class","mt-2")},m(c,d){N(c,e,d),g(e,l),g(e,t),g(t,o),g(e,r),N(c,s,d),N(c,a,d),g(a,f)},p(c,d){d&1&&n!==(n=Se(c[0].path)+"")&&fe(o,n)},d(c){c&&m(e),c&&m(s),c&&m(a)}}}function As(i){let e,l,t,n,o=i[8]&&Vl(i);function r(a){i[26](a)}let s={danger:!0,modalHeading:"Delete signal",primaryButtonText:"Delete",primaryButtonIcon:i[9].isLoading?Ft:void 0,secondaryButtonText:"Cancel",$$slots:{default:[Ps]},$$scope:{ctx:i}};return i[3]!==void 0&&(s.open=i[3]),l=new Nn({props:s}),Pe.push(()=>je(l,"open",r)),l.$on("click:button--secondary",i[27]),l.$on("open",i[28]),l.$on("close",i[29]),l.$on("submit",i[14]),{c(){o&&o.c(),e=Q(),A(l.$$.fragment)},l(a){o&&o.l(a),e=J(a),H(l.$$.fragment,a)},m(a,f){o&&o.m(a,f),N(a,e,f),R(l,a,f),n=!0},p(a,[f]){a[8]?o?(o.p(a,f),f&256&&h(o,1)):(o=Vl(a),o.c(),h(o,1),o.m(e.parentNode,e)):o&&(le(),b(o,1,1,()=>{o=null}),ne());const c={};f&512&&(c.primaryButtonIcon=a[9].isLoading?Ft:void 0),f&1073741825&&(c.$$scope={dirty:f,ctx:a}),!t&&f&8&&(t=!0,c.open=a[3],Ue(()=>t=!1)),l.$set(c)},i(a){n||(h(o),h(l.$$.fragment,a),n=!0)},o(a){b(o),b(l.$$.fragment,a),n=!1},d(a){o&&o.d(a),a&&m(e),B(l,a)}}}function Rs(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,p,{field:v}=e,{schema:w}=e,S=!1;const C=Ae();ge(i,C,L=>l(19,p=L));const V=Ye();ge(i,V,L=>l(18,_=L));const U=Dr();ge(i,U,L=>l(9,d=L));const z=Vt();ge(i,z,L=>l(17,u=L));function T(){d.mutate([t,n,{signal_path:v.path}],{onSuccess:()=>{l(3,S=!1),C.deleteSignal(v.path)}})}const y=()=>C.addSortBy(v.path),P=()=>Ge({command:Ze.EditFilter,namespace:t,datasetName:n,path:v.path}),M=()=>Ge({command:Ze.ComputeEmbedding,namespace:t,datasetName:n,path:v==null?void 0:v.path}),k=()=>Ge({command:Ze.PreviewConcept,namespace:t,datasetName:n,path:v==null?void 0:v.path}),q=()=>Ge({command:Ze.ComputeSignal,namespace:t,datasetName:n,path:v==null?void 0:v.path}),ee=()=>l(3,S=!0);function x(L){S=L,l(3,S)}const Y=()=>l(3,S=!1);function F(L){ct.call(this,i,L)}function j(L){ct.call(this,i,L)}return i.$$set=L=>{"field"in L&&l(0,v=L.field),"schema"in L&&l(15,w=L.schema)},i.$$.update=()=>{var L,O,X;i.$$.dirty&524288&&l(5,t=p.namespace),i.$$.dirty&524288&&l(4,n=p.datasetName),i.$$.dirty&32769&&l(2,o=lt(v,w)),i.$$.dirty&1&&l(1,r=ht(v)),i.$$.dirty&262145&&l(16,s=vn(((L=_.selectRowsSchema)==null?void 0:L.data)||null,v.path)),i.$$.dirty&65543&&l(8,a=(_t(v)||$t(v)||!o||r)&&!s),i.$$.dirty&131072&&l(7,f=(O=u.data)==null?void 0:O.access.dataset.compute_signals),i.$$.dirty&131072&&l(6,c=(X=u.data)==null?void 0:X.access.dataset.delete_signals)},[v,r,o,S,n,t,c,f,a,d,C,V,U,z,T,w,s,u,_,p,y,P,M,k,q,ee,x,Y,F,j]}class Bs extends $e{constructor(e){super(),ke(this,e,Rs,As,be,{field:0,schema:15})}}function Pl(i,e,l){const t=i.slice();t[7]=e[l][0],t[8]=e[l][1];const n=t[2](t[7]);t[9]=n;const o=`${t[8]/t[1]*100}%`;t[10]=o;const r=Ee(t[8]);return t[11]=r,t}function Al(i){let e,l,t=i[9]+"",n,o,r,s,a,f=i[11]+"",c,d,u,_,p;function v(){return i[6](i[7])}return{c(){e=E("button"),l=E("div"),n=K(t),r=Q(),s=E("div"),a=E("div"),c=K(f),u=Q(),this.h()},l(w){e=D(w,"BUTTON",{class:!0});var S=$(e);l=D(S,"DIV",{title:!0,class:!0});var C=$(l);n=G(C,t),C.forEach(m),r=J(S),s=D(S,"DIV",{class:!0});var V=$(s);a=D(V,"DIV",{title:!0,class:!0});var U=$(a);c=G(U,f),U.forEach(m),V.forEach(m),u=J(S),S.forEach(m),this.h()},h(){I(l,"title",o=i[9]),I(l,"class","w-48 flex-none truncate px-2"),I(a,"title",d=i[11]),I(a,"class","histogram-bar my-px bg-indigo-200 pl-2 text-xs leading-5"),st(a,"width",i[10]),I(s,"class","w-36 border-l border-gray-300 pl-2"),I(e,"class","flex items-center p-0 text-left text-xs text-black hover:bg-gray-200")},m(w,S){N(w,e,S),g(e,l),g(l,n),g(e,r),g(e,s),g(s,a),g(a,c),g(e,u),_||(p=Be(e,"click",v),_=!0)},p(w,S){i=w,S&1&&t!==(t=i[9]+"")&&fe(n,t),S&1&&o!==(o=i[9])&&I(l,"title",o),S&1&&f!==(f=i[11]+"")&&fe(c,f),S&1&&d!==(d=i[11])&&I(a,"title",d),S&3&&st(a,"width",i[10])},d(w){w&&m(e),_=!1,p()}}}function qs(i){let e,l=i[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=Al(Pl(i,l,n));return{c(){e=E("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=D(n,"DIV",{class:!0});var o=$(e);for(let r=0;r<t.length;r+=1)t[r].l(o);o.forEach(m),this.h()},h(){I(e,"class","histogram")},m(n,o){N(n,e,o);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null)},p(n,[o]){if(o&15){l=n[0];let r;for(r=0;r<l.length;r+=1){const s=Pl(n,l,r);t[r]?t[r].p(s,o):(t[r]=Al(s),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},i:W,o:W,d(n){n&&m(e),ze(t,n)}}}function Os(i,e,l){let t,{field:n}=e,{counts:o}=e,{bins:r}=e;function s(c){if(c==null)return Ee(c);if(r==null||n.bins!=null)return Ee(c);const[d,u]=r[c.toString()];return d==null?`< ${Ee(u)}`:u==null?`≥ ${Ee(d)}`:`${Ee(d)} .. ${Ee(u)}`}const a=pt(),f=c=>a("row-click",{value:c});return i.$$set=c=>{"field"in c&&l(4,n=c.field),"counts"in c&&l(0,o=c.counts),"bins"in c&&l(5,r=c.bins)},i.$$.update=()=>{i.$$.dirty&1&&l(1,t=Math.max(...o.map(([c,d])=>d)))},[o,t,s,a,n,r,f]}class Hs extends $e{constructor(e){super(),ke(this,e,Os,qs,be,{field:4,counts:0,bins:5})}}function Ls(i){let e,l,t,n,o,r,s,a,f,c,d,u=Ee(i[4].total_count)+"",_,p,v,w,S,C,V,U,z,T,y,P,M=Ee(i[4].approx_count_distinct)+"",k,q,ee,x,Y,F;r=new gt({props:{class:"inline"}}),C=new gt({props:{class:"inline"}});let j=i[4].avg_text_length&&Rl(i),L=i[4].min_val&&i[4].max_val&&Bl(i);return{c(){e=E("table"),l=E("tbody"),t=E("tr"),n=E("td"),o=E("span"),A(r.$$.fragment),s=Q(),a=E("span"),f=K("Total count"),c=Q(),d=E("td"),_=K(u),p=Q(),v=E("tr"),w=E("td"),S=E("span"),A(C.$$.fragment),V=Q(),U=E("span"),z=K("Unique values"),T=Q(),y=E("td"),P=K("~"),k=K(M),q=Q(),j&&j.c(),ee=Q(),L&&L.c(),this.h()},l(O){e=D(O,"TABLE",{class:!0});var X=$(e);l=D(X,"TBODY",{});var de=$(l);t=D(de,"TR",{});var he=$(t);n=D(he,"TD",{class:!0});var re=$(n);o=D(re,"SPAN",{});var De=$(o);H(r.$$.fragment,De),De.forEach(m),s=J(re),a=D(re,"SPAN",{});var ue=$(a);f=G(ue,"Total count"),ue.forEach(m),re.forEach(m),c=J(he),d=D(he,"TD",{class:!0});var ie=$(d);_=G(ie,u),ie.forEach(m),he.forEach(m),p=J(de),v=D(de,"TR",{});var ae=$(v);w=D(ae,"TD",{class:!0});var me=$(w);S=D(me,"SPAN",{});var Z=$(S);H(C.$$.fragment,Z),Z.forEach(m),V=J(me),U=D(me,"SPAN",{});var te=$(U);z=G(te,"Unique values"),te.forEach(m),me.forEach(m),T=J(ae),y=D(ae,"TD",{class:!0});var ce=$(y);P=G(ce,"~"),k=G(ce,M),ce.forEach(m),ae.forEach(m),q=J(de),j&&j.l(de),ee=J(de),L&&L.l(de),de.forEach(m),X.forEach(m),this.h()},h(){I(n,"class","svelte-1tctrjz"),I(d,"class","svelte-1tctrjz"),I(w,"class","svelte-1tctrjz"),I(y,"class","svelte-1tctrjz"),I(e,"class","stats-table w-full svelte-1tctrjz")},m(O,X){N(O,e,X),g(e,l),g(l,t),g(t,n),g(n,o),R(r,o,null),g(n,s),g(n,a),g(a,f),g(t,c),g(t,d),g(d,_),g(l,p),g(l,v),g(v,w),g(w,S),R(C,S,null),g(w,V),g(w,U),g(U,z),g(v,T),g(v,y),g(y,P),g(y,k),g(l,q),j&&j.m(l,null),g(l,ee),L&&L.m(l,null),x=!0,Y||(F=[Te(Fe.call(null,o,{text:"Total number of rows where the value is defined."})),Te(Fe.call(null,S,{text:"An approximation of the total number of unique values."}))],Y=!0)},p(O,X){(!x||X&16)&&u!==(u=Ee(O[4].total_count)+"")&&fe(_,u),(!x||X&16)&&M!==(M=Ee(O[4].approx_count_distinct)+"")&&fe(k,M),O[4].avg_text_length?j?(j.p(O,X),X&16&&h(j,1)):(j=Rl(O),j.c(),h(j,1),j.m(l,ee)):j&&(le(),b(j,1,1,()=>{j=null}),ne()),O[4].min_val&&O[4].max_val?L?(L.p(O,X),X&16&&h(L,1)):(L=Bl(O),L.c(),h(L,1),L.m(l,null)):L&&(le(),b(L,1,1,()=>{L=null}),ne())},i(O){x||(h(r.$$.fragment,O),h(C.$$.fragment,O),h(j),h(L),x=!0)},o(O){b(r.$$.fragment,O),b(C.$$.fragment,O),b(j),b(L),x=!1},d(O){O&&m(e),B(r),B(C),j&&j.d(),L&&L.d(),Y=!1,We(F)}}}function js(i){let e,l;return e=new Qe({props:{paragraph:!0,width:"50%"}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Us(i){let e,l,t=i[2].error.message+"",n;return{c(){e=E("p"),l=K("Error: "),n=K(t)},l(o){e=D(o,"P",{});var r=$(e);l=G(r,"Error: "),n=G(r,t),r.forEach(m)},m(o,r){N(o,e,r),g(e,l),g(e,n)},p(o,r){r&4&&t!==(t=o[2].error.message+"")&&fe(n,t)},i:W,o:W,d(o){o&&m(e)}}}function Rl(i){let e,l,t,n,o,r,s,a,f,c=Ee(i[4].avg_text_length)+"",d,u,_,p;return n=new gt({props:{class:"inline"}}),{c(){e=E("tr"),l=E("td"),t=E("span"),A(n.$$.fragment),o=Q(),r=E("span"),s=K("Average text length"),a=Q(),f=E("td"),d=K(c),this.h()},l(v){e=D(v,"TR",{});var w=$(e);l=D(w,"TD",{class:!0});var S=$(l);t=D(S,"SPAN",{});var C=$(t);H(n.$$.fragment,C),C.forEach(m),o=J(S),r=D(S,"SPAN",{});var V=$(r);s=G(V,"Average text length"),V.forEach(m),S.forEach(m),a=J(w),f=D(w,"TD",{class:!0});var U=$(f);d=G(U,c),U.forEach(m),w.forEach(m),this.h()},h(){I(l,"class","svelte-1tctrjz"),I(f,"class","svelte-1tctrjz")},m(v,w){N(v,e,w),g(e,l),g(l,t),R(n,t,null),g(l,o),g(l,r),g(r,s),g(e,a),g(e,f),g(f,d),u=!0,_||(p=Te(Fe.call(null,t,{text:"The average length of the text in characters."})),_=!0)},p(v,w){(!u||w&16)&&c!==(c=Ee(v[4].avg_text_length)+"")&&fe(d,c)},i(v){u||(h(n.$$.fragment,v),u=!0)},o(v){b(n.$$.fragment,v),u=!1},d(v){v&&m(e),B(n),_=!1,p()}}}function Bl(i){let e,l,t,n,o,r,s,a,f,c=Ee(i[4].min_val)+"",d,u,_=Ee(i[4].max_val)+"",p,v,w,S;return n=new gt({props:{class:"inline"}}),{c(){e=E("tr"),l=E("td"),t=E("span"),A(n.$$.fragment),o=Q(),r=E("span"),s=K("Range"),a=Q(),f=E("td"),d=K(c),u=K(" .. "),p=K(_),this.h()},l(C){e=D(C,"TR",{});var V=$(e);l=D(V,"TD",{class:!0});var U=$(l);t=D(U,"SPAN",{});var z=$(t);H(n.$$.fragment,z),z.forEach(m),o=J(U),r=D(U,"SPAN",{});var T=$(r);s=G(T,"Range"),T.forEach(m),U.forEach(m),a=J(V),f=D(V,"TD",{class:!0});var y=$(f);d=G(y,c),u=G(y," .. "),p=G(y,_),y.forEach(m),V.forEach(m),this.h()},h(){I(l,"class","svelte-1tctrjz"),I(f,"class","svelte-1tctrjz")},m(C,V){N(C,e,V),g(e,l),g(l,t),R(n,t,null),g(l,o),g(l,r),g(r,s),g(e,a),g(e,f),g(f,d),g(f,u),g(f,p),v=!0,w||(S=Te(Fe.call(null,t,{text:"The minimum and maximum value across the dataset"})),w=!0)},p(C,V){(!v||V&16)&&c!==(c=Ee(C[4].min_val)+"")&&fe(d,c),(!v||V&16)&&_!==(_=Ee(C[4].max_val)+"")&&fe(p,_)},i(C){v||(h(n.$$.fragment,C),v=!0)},o(C){b(n.$$.fragment,C),v=!1},d(C){C&&m(e),B(n),w=!1,S()}}}function Ys(i){let e,l,t;return l=new Hs({props:{counts:i[5],bins:i[3],field:i[0]}}),l.$on("row-click",i[11]),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=$(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","mt-4")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const r={};o&32&&(r.counts=n[5]),o&8&&(r.bins=n[3]),o&1&&(r.field=n[0]),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){b(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function Qs(i){let e,l;return e=new Qe({props:{paragraph:!0,width:"50%"}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Js(i){let e,l,t=i[1].error.message+"",n;return{c(){e=E("p"),l=K("Error: "),n=K(t)},l(o){e=D(o,"P",{});var r=$(e);l=G(r,"Error: "),n=G(r,t),r.forEach(m)},m(o,r){N(o,e,r),g(e,l),g(e,n)},p(o,r){r&2&&t!==(t=o[1].error.message+"")&&fe(n,t)},i:W,o:W,d(o){o&&m(e)}}}function Ks(i){let e,l,t,n,o,r,s;const a=[Us,js,Ls],f=[];function c(p,v){return p[2].error?0:p[4]==null?1:2}l=c(i),t=f[l]=a[l](i);const d=[Js,Qs,Ys],u=[];function _(p,v){return p[1].error?0:p[5]==null?1:p[5].length>0?2:-1}return~(o=_(i))&&(r=u[o]=d[o](i)),{c(){e=E("div"),t.c(),n=Q(),r&&r.c(),this.h()},l(p){e=D(p,"DIV",{class:!0});var v=$(e);t.l(v),n=J(v),r&&r.l(v),v.forEach(m),this.h()},h(){I(e,"class","p-4")},m(p,v){N(p,e,v),f[l].m(e,null),g(e,n),~o&&u[o].m(e,null),s=!0},p(p,[v]){let w=l;l=c(p),l===w?f[l].p(p,v):(le(),b(f[w],1,1,()=>{f[w]=null}),ne(),t=f[l],t?t.p(p,v):(t=f[l]=a[l](p),t.c()),h(t,1),t.m(e,n));let S=o;o=_(p),o===S?~o&&u[o].p(p,v):(r&&(le(),b(u[S],1,1,()=>{u[S]=null}),ne()),~o?(r=u[o],r?r.p(p,v):(r=u[o]=d[o](p),r.c()),h(r,1),r.m(e,null)):r=null)},i(p){s||(h(t),h(r),s=!0)},o(p){b(t),b(r),s=!1},d(p){p&&m(e),f[l].d(),~o&&u[o].d()}}}function Gs(i,e,l){let t,n,o,r,s,a=W,f=()=>(a(),a=Me(n,V=>l(1,s=V)),n),c,d=W,u=()=>(d(),d=Me(t,V=>l(2,c=V)),t),_;i.$$.on_destroy.push(()=>a()),i.$$.on_destroy.push(()=>d());let{field:p}=e;const v=Ae();ge(i,v,V=>l(10,_=V));let w=null;function S(V){if(V==null)return;if(w!=null){const[z,T]=w[V.toString()];if(z!=null){const y={path:p.path,op:"greater_equal",value:z};v.addFilter(y)}if(T!=null){const y={path:p.path,op:"less",value:T};v.addFilter(y)}return}const U={path:p.path,op:"equals",value:V};v.addFilter(U)}const C=V=>S(V.detail.value);return i.$$set=V=>{"field"in V&&l(0,p=V.field)},i.$$.update=()=>{var V;if(i.$$.dirty&1025&&u(l(7,t=Ir(_.namespace,_.datasetName,{leaf_path:p.path}))),i.$$.dirty&1025&&f(l(6,n=Vr(_.namespace,_.datasetName,{leaf_path:p.path,filters:_.query.filters}))),i.$$.dirty&2&&l(5,o=s.data!=null?s.data.counts:null),i.$$.dirty&4&&l(4,r=c.data!=null?c.data:null),i.$$.dirty&2)if(((V=s.data)==null?void 0:V.bins)!=null){l(3,w={});for(const[U,z,T]of Object.values(s.data.bins))l(3,w[U]=[z,T],w)}else l(3,w=null)},[p,s,c,w,r,o,n,t,v,S,_,C]}class Zs extends $e{constructor(e){super(),ke(this,e,Gs,Ks,be,{field:0})}}function ql(i,e,l){const t=i.slice();return t[38]=e[l],t}function Ol(i,e,l){const t=i.slice();return t[41]=e[l],t}function Hl(i,e,l){const t=i.slice();return t[44]=e[l],t}function Ll(i,e,l){const t=i.slice();return t[47]=e[l],t}function Ws(i){let e,l="{}",t;return{c(){e=E("span"),t=K(l),this.h()},l(n){e=D(n,"SPAN",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){I(e,"class","font-mono")},m(n,o){N(n,e,o),g(e,t)},p:W,i:W,o:W,d(n){n&&m(e)}}}function Xs(i){let e,l,t,n;var o=tt[i[1].repeated_field.dtype];function r(s){return{props:{title:s[1].dtype}}}return o&&(l=et(o,r(i))),{c(){e=E("div"),l&&A(l.$$.fragment),t=K("[]"),this.h()},l(s){e=D(s,"DIV",{class:!0});var a=$(e);l&&H(l.$$.fragment,a),t=G(a,"[]"),a.forEach(m),this.h()},h(){I(e,"class","flex")},m(s,a){N(s,e,a),l&&R(l,e,null),g(e,t),n=!0},p(s,a){const f={};if(a[0]&2&&(f.title=s[1].dtype),a[0]&2&&o!==(o=tt[s[1].repeated_field.dtype])){if(l){le();const c=l;b(c.$$.fragment,1,0,()=>{B(c,1)}),ne()}o?(l=et(o,r(s)),A(l.$$.fragment),h(l.$$.fragment,1),R(l,e,t)):l=null}else o&&l.$set(f)},i(s){n||(l&&h(l.$$.fragment,s),n=!0)},o(s){l&&b(l.$$.fragment,s),n=!1},d(s){s&&m(e),l&&B(l)}}}function xs(i){let e,l,t;var n=tt[i[1].dtype];function o(r){return{props:{title:r[1].dtype}}}return n&&(e=et(n,o(i))),{c(){e&&A(e.$$.fragment),l=se()},l(r){e&&H(e.$$.fragment,r),l=se()},m(r,s){e&&R(e,r,s),N(r,l,s),t=!0},p(r,s){const a={};if(s[0]&2&&(a.title=r[1].dtype),s[0]&2&&n!==(n=tt[r[1].dtype])){if(e){le();const f=e;b(f.$$.fragment,1,0,()=>{B(f,1)}),ne()}n?(e=et(n,o(r)),A(e.$$.fragment),h(e.$$.fragment,1),R(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&h(e.$$.fragment,r),t=!0)},o(r){e&&b(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&B(e,r)}}}function jl(i){let e,l;return e=new Nt({props:{interactive:!0,type:"green",$$slots:{default:[la]},$$scope:{ctx:i}}}),e.$on("click",i[32]),e.$on("remove",i[33]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&16384|n[1]&524288&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ea(i){let e,l;return e=new zn({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ta(i){let e,l;return e=new Mn({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function la(i){let e,l,t,n,o,r,s,a;const f=[ta,ea],c=[];function d(u,_){return u[14]=="ASC"?0:1}return r=d(i),s=c[r]=f[r](i),{c(){e=E("div"),l=E("div"),t=K("Sorted"),n=Q(),o=E("span"),s.c(),this.h()},l(u){e=D(u,"DIV",{class:!0});var _=$(e);l=D(_,"DIV",{class:!0});var p=$(l);t=G(p,"Sorted"),p.forEach(m),n=J(_),o=D(_,"SPAN",{});var v=$(o);s.l(v),v.forEach(m),_.forEach(m),this.h()},h(){I(l,"class","mr-1"),I(e,"class","flex flex-row")},m(u,_){N(u,e,_),g(e,l),g(l,t),g(e,n),g(e,o),c[r].m(o,null),a=!0},p(u,_){let p=r;r=d(u),r!==p&&(le(),b(c[p],1,1,()=>{c[p]=null}),ne(),s=c[r],s||(s=c[r]=f[r](u),s.c()),h(s,1),s.m(o,null))},i(u){a||(h(s),a=!0)},o(u){b(s),a=!1},d(u){u&&m(e),c[r].d()}}}function Ul(i){let e,l,t=i[7],n=[];for(let r=0;r<t.length;r+=1)n[r]=Yl(Ll(i,t,r));const o=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=se()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=se()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);N(r,e,s),l=!0},p(r,s){if(s[0]&128){t=r[7];let a;for(a=0;a<t.length;a+=1){const f=Ll(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=Yl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Yl(i){let e,l;return e=new Pn({props:{filter:i[47],hidePath:!0}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&128&&(o.filter=t[47]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ql(i){let e,l;return e=new An({props:{search:i[44]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&4096&&(o.search=t[44]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Jl(i){var t;let e,l;return e=new Vn({props:{embedding:(t=i[41].signal)==null?void 0:t.signal_name}}),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var s;const r={};o[0]&65536&&(r.embedding=(s=n[41].signal)==null?void 0:s.signal_name),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function Kl(i){let e,l,t,n,o,r,s;return l=new Xe({props:{type:"cyan",icon:St}}),l.$on("click",i[34]),n=new Kr({props:{isPreview:!0}}),n.$on("click",i[35]),{c(){e=E("div"),A(l.$$.fragment),t=Q(),A(n.$$.fragment),this.h()},l(a){e=D(a,"DIV",{class:!0});var f=$(e);H(l.$$.fragment,f),f.forEach(m),t=J(a),H(n.$$.fragment,a),this.h()},h(){I(e,"class","compute-signal-preview pointer-events-auto")},m(a,f){N(a,e,f),R(l,e,null),N(a,t,f),R(n,a,f),o=!0,r||(s=Te(Fe.call(null,e,{text:`Compute signal over the column and save the result.

This may be expensive.`})),r=!0)},p:W,i(a){o||(h(l.$$.fragment,a),h(n.$$.fragment,a),o=!0)},o(a){b(l.$$.fragment,a),b(n.$$.fragment,a),o=!1},d(a){a&&m(e),B(l),a&&m(t),B(n,a),r=!1,s()}}}function Gl(i){let e,l,t,n,o,r,s;return t=new Qr({}),{c(){e=E("button"),l=E("div"),A(t.$$.fragment),this.h()},l(a){e=D(a,"BUTTON",{});var f=$(e);l=D(f,"DIV",{class:!0});var c=$(l);H(t.$$.fragment,c),c.forEach(m),f.forEach(m),this.h()},h(){I(l,"class","transition"),ye(l,"rotate-180",i[20]),ye(e,"bg-slate-300",i[20])},m(a,f){N(a,e,f),g(e,l),R(t,l,null),o=!0,r||(s=[Te(n=Fe.call(null,e,{text:i[20]?"Close statistics":"See statistics"})),Be(e,"click",i[36])],r=!0)},p(a,f){(!o||f[0]&1048576)&&ye(l,"rotate-180",a[20]),n&&Le(n.update)&&f[0]&1048576&&n.update.call(null,{text:a[20]?"Close statistics":"See statistics"}),(!o||f[0]&1048576)&&ye(e,"bg-slate-300",a[20])},i(a){o||(h(t.$$.fragment,a),o=!0)},o(a){b(t.$$.fragment,a),o=!1},d(a){a&&m(e),B(t),r=!1,We(s)}}}function Zl(i){let e,l,t,n;return l=new Zs({props:{field:i[1]}}),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(o){e=D(o,"DIV",{class:!0});var r=$(e);H(l.$$.fragment,r),r.forEach(m),this.h()},h(){I(e,"class","px-2")},m(o,r){N(o,e,r),R(l,e,null),n=!0},p(o,r){const s={};r[0]&2&&(s.field=o[1]),l.$set(s)},i(o){n||(h(l.$$.fragment,o),o&&bt(()=>{n&&(t||(t=dt(e,mt,{},!0)),t.run(1))}),n=!0)},o(o){b(l.$$.fragment,o),o&&(t||(t=dt(e,mt,{},!1)),t.run(0)),n=!1},d(o){o&&m(e),B(l),o&&t&&t.end()}}}function Wl(i){let e,l,t=i[18],n=[];for(let r=0;r<t.length;r+=1)n[r]=Xl(ql(i,t,r));const o=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=se()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=se()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);N(r,e,s),l=!0},p(r,s){if(s[0]&262415){t=r[18];let a;for(a=0;a<t.length;a+=1){const f=ql(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=Xl(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(r){ze(n,r),r&&m(e)}}}function Xl(i){let e,l;return e=new Rn({props:{schema:i[0],field:i[38],indent:i[3]+1,sourceField:i[8]&&lt(i[38],i[0])?i[1]:i[2]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.schema=t[0]),n[0]&262144&&(o.field=t[38]),n[0]&8&&(o.indent=t[3]+1),n[0]&262407&&(o.sourceField=t[8]&&lt(t[38],t[0])?t[1]:t[2]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function na(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,p,v,w,S,C,V,U,z,T,y,P,M,k,q,ee;n=new wn({props:{labelText:"Show",hideLabel:!0,checked:i[17]}}),n.$on("change",i[30]);const x=[xs,Xs,Ws],Y=[];function F(Z,te){return Z[1].dtype?0:Z[1].repeated_field&&Z[1].repeated_field.dtype?1:2}s=F(i),a=Y[s]=x[s](i);let j=i[15]&&jl(i),L=i[13]&&Ul(i),O=i[12],X=[];for(let Z=0;Z<O.length;Z+=1)X[Z]=Ql(Hl(i,O,Z));const de=Z=>b(X[Z],1,1,()=>{X[Z]=null});let he=i[16],re=[];for(let Z=0;Z<he.length;Z+=1)re[Z]=Jl(Ol(i,he,Z));const De=Z=>b(re[Z],1,1,()=>{re[Z]=null});let ue=i[4]&&i[21]&&Kl(i),ie=i[10]&&Gl(i);z=new Bs({props:{field:i[1],schema:i[0]}});let ae=i[20]&&Zl(i),me=i[18].length&&Wl(i);return{c(){e=E("div"),l=E("div"),t=E("div"),A(n.$$.fragment),o=Q(),r=E("div"),a.c(),c=Q(),d=E("button"),u=K(i[19]),p=Q(),j&&j.c(),v=Q(),L&&L.c(),w=Q();for(let Z=0;Z<X.length;Z+=1)X[Z].c();S=Q();for(let Z=0;Z<re.length;Z+=1)re[Z].c();C=Q(),ue&&ue.c(),V=Q(),ie&&ie.c(),U=Q(),A(z.$$.fragment),T=Q(),ae&&ae.c(),y=Q(),P=E("div"),me&&me.c(),this.h()},l(Z){e=D(Z,"DIV",{class:!0});var te=$(e);l=D(te,"DIV",{class:!0});var ce=$(l);t=D(ce,"DIV",{});var Oe=$(t);H(n.$$.fragment,Oe),Oe.forEach(m),o=J(ce),r=D(ce,"DIV",{class:!0});var Je=$(r);a.l(Je),Je.forEach(m),c=J(ce),d=D(ce,"BUTTON",{class:!0});var _e=$(d);u=G(_e,i[19]),_e.forEach(m),p=J(ce),j&&j.l(ce),v=J(ce),L&&L.l(ce),w=J(ce);for(let Ne=0;Ne<X.length;Ne+=1)X[Ne].l(ce);S=J(ce);for(let Ne=0;Ne<re.length;Ne+=1)re[Ne].l(ce);C=J(ce),ue&&ue.l(ce),V=J(ce),ie&&ie.l(ce),U=J(ce),H(z.$$.fragment,ce),ce.forEach(m),T=J(te),ae&&ae.l(te),y=J(te),P=D(te,"DIV",{});var oe=$(P);me&&me.l(oe),oe.forEach(m),te.forEach(m),this.h()},h(){st(t,"margin-left",i[3]*1.5+"rem"),I(r,"class","rounded-md bg-blue-200 p-0.5"),ye(r,"bg-blue-200",i[5]),I(d,"class","ml-2 grow cursor-pointer truncate whitespace-nowrap text-left text-gray-900"),d.disabled=_=!i[10],ye(d,"cursor-default",!i[10]),I(l,"class","flex w-full flex-row items-center gap-x-2 border-gray-300 px-4 hover:bg-gray-100"),ye(l,"bg-blue-50",i[5]),ye(l,"bg-emerald-100",i[4]),ye(l,"hover:bg-blue-100",i[5]),I(e,"class","border-gray-300"),ye(e,"border-b",!i[5])},m(Z,te){N(Z,e,te),g(e,l),g(l,t),R(n,t,null),g(l,o),g(l,r),Y[s].m(r,null),g(l,c),g(l,d),g(d,u),g(l,p),j&&j.m(l,null),g(l,v),L&&L.m(l,null),g(l,w);for(let ce=0;ce<X.length;ce+=1)X[ce]&&X[ce].m(l,null);g(l,S);for(let ce=0;ce<re.length;ce+=1)re[ce]&&re[ce].m(l,null);g(l,C),ue&&ue.m(l,null),g(l,V),ie&&ie.m(l,null),g(l,U),R(z,l,null),g(e,T),ae&&ae.m(e,null),g(e,y),g(e,P),me&&me.m(P,null),k=!0,q||(ee=[Te(f=Fe.call(null,r,{text:i[11]})),Be(d,"click",i[31])],q=!0)},p(Z,te){const ce={};te[0]&131072&&(ce.checked=Z[17]),n.$set(ce),te[0]&8&&st(t,"margin-left",Z[3]*1.5+"rem");let Oe=s;if(s=F(Z),s===Oe?Y[s].p(Z,te):(le(),b(Y[Oe],1,1,()=>{Y[Oe]=null}),ne(),a=Y[s],a?a.p(Z,te):(a=Y[s]=x[s](Z),a.c()),h(a,1),a.m(r,null)),f&&Le(f.update)&&te[0]&2048&&f.update.call(null,{text:Z[11]}),(!k||te[0]&32)&&ye(r,"bg-blue-200",Z[5]),(!k||te[0]&524288)&&fe(u,Z[19]),(!k||te[0]&1024&&_!==(_=!Z[10]))&&(d.disabled=_),(!k||te[0]&1024)&&ye(d,"cursor-default",!Z[10]),Z[15]?j?(j.p(Z,te),te[0]&32768&&h(j,1)):(j=jl(Z),j.c(),h(j,1),j.m(l,v)):j&&(le(),b(j,1,1,()=>{j=null}),ne()),Z[13]?L?(L.p(Z,te),te[0]&8192&&h(L,1)):(L=Ul(Z),L.c(),h(L,1),L.m(l,w)):L&&(le(),b(L,1,1,()=>{L=null}),ne()),te[0]&4096){O=Z[12];let _e;for(_e=0;_e<O.length;_e+=1){const oe=Hl(Z,O,_e);X[_e]?(X[_e].p(oe,te),h(X[_e],1)):(X[_e]=Ql(oe),X[_e].c(),h(X[_e],1),X[_e].m(l,S))}for(le(),_e=O.length;_e<X.length;_e+=1)de(_e);ne()}if(te[0]&65536){he=Z[16];let _e;for(_e=0;_e<he.length;_e+=1){const oe=Ol(Z,he,_e);re[_e]?(re[_e].p(oe,te),h(re[_e],1)):(re[_e]=Jl(oe),re[_e].c(),h(re[_e],1),re[_e].m(l,C))}for(le(),_e=he.length;_e<re.length;_e+=1)De(_e);ne()}Z[4]&&Z[21]?ue?(ue.p(Z,te),te[0]&2097168&&h(ue,1)):(ue=Kl(Z),ue.c(),h(ue,1),ue.m(l,V)):ue&&(le(),b(ue,1,1,()=>{ue=null}),ne()),Z[10]?ie?(ie.p(Z,te),te[0]&1024&&h(ie,1)):(ie=Gl(Z),ie.c(),h(ie,1),ie.m(l,U)):ie&&(le(),b(ie,1,1,()=>{ie=null}),ne());const Je={};te[0]&2&&(Je.field=Z[1]),te[0]&1&&(Je.schema=Z[0]),z.$set(Je),(!k||te[0]&32)&&ye(l,"bg-blue-50",Z[5]),(!k||te[0]&16)&&ye(l,"bg-emerald-100",Z[4]),(!k||te[0]&32)&&ye(l,"hover:bg-blue-100",Z[5]),Z[20]?ae?(ae.p(Z,te),te[0]&1048576&&h(ae,1)):(ae=Zl(Z),ae.c(),h(ae,1),ae.m(e,y)):ae&&(le(),b(ae,1,1,()=>{ae=null}),ne()),Z[18].length?me?(me.p(Z,te),te[0]&262144&&h(me,1)):(me=Wl(Z),me.c(),h(me,1),me.m(P,null)):me&&(le(),b(me,1,1,()=>{me=null}),ne()),(!k||te[0]&32)&&ye(e,"border-b",!Z[5])},i(Z){if(!k){h(n.$$.fragment,Z),h(a),h(j),h(L);for(let te=0;te<O.length;te+=1)h(X[te]);for(let te=0;te<he.length;te+=1)h(re[te]);h(ue),h(ie),h(z.$$.fragment,Z),h(ae),h(me),Z&&bt(()=>{k&&(M||(M=dt(P,mt,{},!0)),M.run(1))}),k=!0}},o(Z){b(n.$$.fragment,Z),b(a),b(j),b(L),X=X.filter(Boolean);for(let te=0;te<X.length;te+=1)b(X[te]);re=re.filter(Boolean);for(let te=0;te<re.length;te+=1)b(re[te]);b(ue),b(ie),b(z.$$.fragment,Z),b(ae),b(me),Z&&(M||(M=dt(P,mt,{},!1)),M.run(0)),k=!1},d(Z){Z&&m(e),B(n),Y[s].d(),j&&j.d(),L&&L.d(),ze(X,Z),ze(re,Z),ue&&ue.d(),ie&&ie.d(),B(z),ae&&ae.d(),me&&me.d(),Z&&M&&M.end(),q=!1,We(ee)}}}function ra(i,e,l){let t,n,o,r,s,a,f,c,d,u,_,p,v,w,S,C,V,U,z,T,y,P,M,{schema:k}=e,{field:q}=e,{sourceField:ee=void 0}=e,{indent:x=0}=e;const Y=En();ge(i,Y,ie=>l(22,M=ie));const F=Ae();ge(i,F,ie=>l(9,y=ie));const j=Ye();ge(i,j,ie=>l(29,P=ie));function L(ie){return ie!=null&&ie.repeated_field?L(ie.repeated_field):ie!=null&&ie.fields?[...Object.values(ie.fields).filter(ae=>ae.path.at(-1)!==Nr)].flatMap(ae=>{const me=L(ae);return me.some(Z=>ht(Z))?me:[ae]}).filter(ae=>{var me,Z,te,ce;return!(ae.dtype==="embedding"||ae.signal!=null&&it(ae).some(Oe=>Oe.dtype==="embedding")||((me=ae.signal)==null?void 0:me.signal_name)==="sentences"||((Z=ae.signal)==null?void 0:Z.signal_name)==="substring_search"||((te=ae.signal)==null?void 0:te.signal_name)==="semantic_similarity"||((ce=ae.signal)==null?void 0:ce.signal_name)==="concept_labels")}):[]}const O=()=>{d?F.removeSelectedColumn(r):F.addSelectedColumn(r)},X=()=>{T&&(s?F.removeExpandedColumn(r):F.addExpandedColumn(r))},de=()=>p==="ASC"?ut(F,y.query.sort_order="DESC",y):ut(F,y.query.sort_order="ASC",y),he=()=>F.removeSortBy(r),re=()=>q.signal&&S&&ee&&M.mutate([y.namespace,y.datasetName,{leaf_path:ee.path,signal:q.signal}]),De=()=>{var ie;return q.signal&&S&&Ge({command:Ze.EditPreviewConcept,namespace:y.namespace,datasetName:y.datasetName,path:ee==null?void 0:ee.path,signalName:(ie=q.signal)==null?void 0:ie.signal_name,value:q.signal})},ue=()=>{s?F.removeExpandedColumn(r):F.addExpandedColumn(r)};return i.$$set=ie=>{"schema"in ie&&l(0,k=ie.schema),"field"in ie&&l(1,q=ie.field),"sourceField"in ie&&l(2,ee=ie.sourceField),"indent"in ie&&l(3,x=ie.indent)},i.$$.update=()=>{var ie,ae,me,Z;i.$$.dirty[0]&3&&l(5,t=lt(q,k)),i.$$.dirty[0]&2&&l(21,n=ht(q)),i.$$.dirty[0]&32&&l(8,o=!t),i.$$.dirty[0]&2&&l(6,r=q.path),i.$$.dirty[0]&576&&l(20,s=y.expandedColumns[Se(r)]||!1),i.$$.dirty[0]&64&&l(28,a=r.at(-1)===kt),i.$$.dirty[0]&268435520&&l(19,f=a?r.at(-2):r.at(-1)),i.$$.dirty[0]&2&&l(18,c=L(q)),i.$$.dirty[0]&536870976&&l(17,d=(ie=P.visibleFields)==null?void 0:ie.some(te=>Ke(te.path,r))),i.$$.dirty[0]&258&&l(16,u=o?it(q).filter(te=>te.signal!=null&&it(te).some(ce=>ce.dtype==="embedding")):[]),i.$$.dirty[0]&576&&l(15,_=(ae=y.query.sort_by)==null?void 0:ae.some(te=>Ke(te,r))),i.$$.dirty[0]&512&&l(14,p=y.query.sort_order),i.$$.dirty[0]&576&&l(7,v=((me=y.query.filters)==null?void 0:me.filter(te=>Ke(te.path,r)))||[]),i.$$.dirty[0]&128&&l(13,w=v.length>0),i.$$.dirty[0]&536870976&&l(4,S=vn(((Z=P.selectRowsSchema)==null?void 0:Z.data)||null,r)),i.$$.dirty[0]&576&&l(12,C=yt(y,r)),i.$$.dirty[0]&32&&l(26,V=t?". Generated by a signal":""),i.$$.dirty[0]&2&&l(27,U=q.dtype??(q.repeated_field&&q.repeated_field.dtype?`${q.repeated_field.dtype}[]`:"object")),i.$$.dirty[0]&201326592&&l(11,z=`${U}${V}`),i.$$.dirty[0]&18&&l(10,T=_t(q)&&!S)},[k,q,ee,x,S,t,r,v,o,y,T,z,C,w,p,_,u,d,c,f,s,n,M,Y,F,j,V,U,a,P,O,X,de,he,re,De,ue]}class Rn extends $e{constructor(e){super(),ke(this,e,ra,na,be,{schema:0,field:1,sourceField:2,indent:3},null,[-1,-1])}}function xl(i,e,l){const t=i.slice();return t[3]=e[l],t}function ia(i){let e,l,t,n;return e=new Mt({props:{label:"Schema",class:"w-1/3"}}),t=new Mt({props:{label:"Query",class:"w-1/3"}}),{c(){A(e.$$.fragment),l=Q(),A(t.$$.fragment)},l(o){H(e.$$.fragment,o),l=J(o),H(t.$$.fragment,o)},m(o,r){R(e,o,r),N(o,l,r),R(t,o,r),n=!0},p:W,i(o){n||(h(e.$$.fragment,o),h(t.$$.fragment,o),n=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),n=!1},d(o){B(e,o),o&&m(l),B(t,o)}}}function sa(i){let e=[],l=new Map,t,n,o=Object.keys(i[0].data.schema.fields);const r=s=>s[3];for(let s=0;s<o.length;s+=1){let a=xl(i,o,s),f=r(a);l.set(f,e[s]=en(f,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=se()},l(s){for(let a=0;a<e.length;a+=1)e[a].l(s);t=se()},m(s,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,a);N(s,t,a),n=!0},p(s,a){a&1&&(o=Object.keys(s[0].data.schema.fields),le(),e=hn(e,a,r,1,s,o,l,t.parentNode,_n,en,t,xl),ne())},i(s){if(!n){for(let a=0;a<o.length;a+=1)h(e[a]);n=!0}},o(s){for(let a=0;a<e.length;a+=1)b(e[a]);n=!1},d(s){for(let a=0;a<e.length;a+=1)e[a].d(s);s&&m(t)}}}function aa(i){let e,l;return e=new Qe({props:{paragraph:!0,lines:3}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function en(i,e){let l,t,n;return t=new Rn({props:{schema:e[0].data.schema,field:e[0].data.schema.fields[e[3]]}}),{key:i,first:null,c(){l=se(),A(t.$$.fragment),this.h()},l(o){l=se(),H(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,r){N(o,l,r),R(t,o,r),n=!0},p(o,r){e=o;const s={};r&1&&(s.schema=e[0].data.schema),r&1&&(s.field=e[0].data.schema.fields[e[3]]),t.$set(s)},i(o){n||(h(t.$$.fragment,o),n=!0)},o(o){b(t.$$.fragment,o),n=!1},d(o){o&&m(l),B(t,o)}}}function oa(i){let e,l,t,n;const o=[aa,sa],r=[];function s(a,f){var c,d;return(c=a[0])!=null&&c.isLoading?0:(d=a[0])!=null&&d.isSuccess&&a[0].data.schema.fields!=null?1:-1}return~(e=s(i))&&(l=r[e]=o[e](i)),{c(){l&&l.c(),t=se()},l(a){l&&l.l(a),t=se()},m(a,f){~e&&r[e].m(a,f),N(a,t,f),n=!0},p(a,f){let c=e;e=s(a),e===c?~e&&r[e].p(a,f):(l&&(le(),b(r[c],1,1,()=>{r[c]=null}),ne()),~e?(l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(h(l),n=!0)},o(a){b(l),n=!1},d(a){~e&&r[e].d(a),a&&m(t)}}}function fa(i){let e,l;return e=new Ms({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ca(i){let e,l,t,n,o;return l=new zt({props:{$$slots:{default:[oa]},$$scope:{ctx:i}}}),n=new zt({props:{$$slots:{default:[fa]},$$scope:{ctx:i}}}),{c(){e=E("div"),A(l.$$.fragment),t=Q(),A(n.$$.fragment),this.h()},l(r){e=D(r,"DIV",{class:!0,slot:!0});var s=$(e);H(l.$$.fragment,s),t=J(s),H(n.$$.fragment,s),s.forEach(m),this.h()},h(){I(e,"class","h-full overflow-y-auto"),I(e,"slot","content")},m(r,s){N(r,e,s),R(l,e,null),g(e,t),R(n,e,null),o=!0},p(r,s){const a={};s&65&&(a.$$scope={dirty:s,ctx:r}),l.$set(a);const f={};s&64&&(f.$$scope={dirty:s,ctx:r}),n.$set(f)},i(r){o||(h(l.$$.fragment,r),h(n.$$.fragment,r),o=!0)},o(r){b(l.$$.fragment,r),b(n.$$.fragment,r),o=!1},d(r){r&&m(e),B(l),B(n)}}}function ua(i){let e,l,t;return l=new Gr({props:{class:"overflow-hidden border-b border-gray-200",$$slots:{content:[ca],default:[ia]},$$scope:{ctx:i}}}),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(n){e=D(n,"DIV",{class:!0});var o=$(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"class","schema flex h-full flex-col pt-4")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,[o]){const r={};o&65&&(r.$$scope={dirty:o,ctx:n}),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){b(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function da(i,e,l){let t,n;const o=Ye();return ge(i,o,r=>l(2,n=r)),i.$$.update=()=>{i.$$.dirty&4&&l(0,t=n.selectRowsSchema)},[t,o,n]}class ma extends $e{constructor(e){super(),ke(this,e,da,ua,be,{})}}function tn(i,e,l){const t=i.slice();return t[5]=e[l],t}function ha(i){let e,l="{}",t;return{c(){e=E("span"),t=K(l),this.h()},l(n){e=D(n,"SPAN",{class:!0});var o=$(e);t=G(o,l),o.forEach(m),this.h()},h(){I(e,"class","font-mono")},m(n,o){N(n,e,o),g(e,t)},p:W,i:W,o:W,d(n){n&&m(e)}}}function _a(i){let e,l,t;var n=tt[i[5].dtype];function o(r){return{props:{title:r[5].dtype}}}return n&&(e=et(n,o(i))),{c(){e&&A(e.$$.fragment),l=se()},l(r){e&&H(e.$$.fragment,r),l=se()},m(r,s){e&&R(e,r,s),N(r,l,s),t=!0},p(r,s){const a={};if(s&2&&(a.title=r[5].dtype),s&2&&n!==(n=tt[r[5].dtype])){if(e){le();const f=e;b(f.$$.fragment,1,0,()=>{B(f,1)}),ne()}n?(e=et(n,o(r)),A(e.$$.fragment),h(e.$$.fragment,1),R(e,l.parentNode,l)):e=null}else n&&e.$set(a)},i(r){t||(e&&h(e.$$.fragment,r),t=!0)},o(r){e&&b(e.$$.fragment,r),t=!1},d(r){r&&m(l),e&&B(e,r)}}}function ln(i){let e;return{c(){e=K("[]")},l(l){e=G(l,"[]")},m(l,t){N(l,e,t)},d(l){l&&m(e)}}}function nn(i){let e,l,t,n,o,r,s,a,f,c=i[5].path.indexOf(kt)>=0,d,u,_=Se(i[5].path)+"",p,v,w;function S(...y){return i[3](i[5],...y)}function C(...y){return i[4](i[5],...y)}t=new wn({props:{labelText:"Download",hideLabel:!0,checked:i[0].find(S)!=null}}),t.$on("change",C);const V=[_a,ha],U=[];function z(y,P){return y[5].dtype?0:1}s=z(i),a=U[s]=V[s](i);let T=c&&ln();return{c(){e=E("div"),l=E("div"),A(t.$$.fragment),n=Q(),o=E("div"),r=E("div"),a.c(),f=Q(),T&&T.c(),d=Q(),u=E("div"),p=K(_),v=Q(),this.h()},l(y){e=D(y,"DIV",{class:!0});var P=$(e);l=D(P,"DIV",{class:!0});var M=$(l);H(t.$$.fragment,M),M.forEach(m),n=J(P),o=D(P,"DIV",{class:!0});var k=$(o);r=D(k,"DIV",{class:!0});var q=$(r);a.l(q),f=J(q),T&&T.l(q),q.forEach(m),k.forEach(m),d=J(P),u=D(P,"DIV",{class:!0});var ee=$(u);p=G(ee,_),ee.forEach(m),v=J(P),P.forEach(m),this.h()},h(){I(l,"class","mr-2"),I(r,"class","inline-flex items-center rounded-md bg-blue-200 p-0.5"),I(o,"class","flex w-10"),I(u,"class","flex-grow"),I(e,"class","flex items-center")},m(y,P){N(y,e,P),g(e,l),R(t,l,null),g(e,n),g(e,o),g(o,r),U[s].m(r,null),g(r,f),T&&T.m(r,null),g(e,d),g(e,u),g(u,p),g(e,v),w=!0},p(y,P){i=y;const M={};P&3&&(M.checked=i[0].find(S)!=null),t.$set(M);let k=s;s=z(i),s===k?U[s].p(i,P):(le(),b(U[k],1,1,()=>{U[k]=null}),ne(),a=U[s],a?a.p(i,P):(a=U[s]=V[s](i),a.c()),h(a,1),a.m(r,f)),P&2&&(c=i[5].path.indexOf(kt)>=0),c?T||(T=ln(),T.c(),T.m(r,null)):T&&(T.d(1),T=null),(!w||P&2)&&_!==(_=Se(i[5].path)+"")&&fe(p,_)},i(y){w||(h(t.$$.fragment,y),h(a),w=!0)},o(y){b(t.$$.fragment,y),b(a),w=!1},d(y){y&&m(e),B(t),U[s].d(),T&&T.d()}}}function ga(i){let e,l,t=i[1],n=[];for(let r=0;r<t.length;r+=1)n[r]=nn(tn(i,t,r));const o=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=se()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);e=se()},m(r,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,s);N(r,e,s),l=!0},p(r,[s]){if(s&7){t=r[1];let a;for(a=0;a<t.length;a+=1){const f=tn(r,t,a);n[a]?(n[a].p(f,s),h(n[a],1)):(n[a]=nn(f),n[a].c(),h(n[a],1),n[a].m(e.parentNode,e))}for(le(),a=t.length;a<n.length;a+=1)o(a);ne()}},i(r){if(!l){for(let s=0;s<t.length;s+=1)h(n[s]);l=!0}},o(r){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)b(n[s]);l=!1},d(r){ze(n,r),r&&m(e)}}}function pa(i,e,l){let{fields:t}=e,{checkedFields:n}=e;function o(a,f){f.target.checked?(n.push(a),l(0,n)):l(0,n=n.filter(d=>d!==a))}const r=(a,f)=>Ke(f.path,a.path),s=(a,f)=>o(a,f);return i.$$set=a=>{"fields"in a&&l(1,t=a.fields),"checkedFields"in a&&l(0,n=a.checkedFields)},[n,t,o,r,s]}class wt extends $e{constructor(e){super(),ke(this,e,pa,ga,be,{fields:1,checkedFields:0})}}function rn(i,e,l){const t=i.slice();return t[29]=e[l],t}function ba(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,p,v,w,S,C,V,U,z,T,y,P,M,k,q,ee;function x(F){i[23](F)}let Y={invalid:i[8]!=i[9]};return i[8]!==void 0&&(Y.value=i[8]),V=new Or({props:Y}),Pe.push(()=>je(V,"value",x)),P=new jr({}),{c(){e=E("div"),l=E("section"),t=E("div"),n=K("Delete this dataset"),o=Q(),r=E("div"),s=E("p"),a=K("This action cannot be undone."),f=Q(),c=E("p"),d=K(`This will permanently delete the
                  `),u=E("span"),_=K(i[9]),p=K(` dataset and all its files. Please type
                  `),v=E("span"),w=K(i[9]),S=K(" to confirm."),C=Q(),A(V.$$.fragment),z=Q(),T=E("button"),y=K(`I understand, delete this dataset
                `),A(P.$$.fragment),this.h()},l(F){e=D(F,"DIV",{class:!0});var j=$(e);l=D(j,"SECTION",{class:!0});var L=$(l);t=D(L,"DIV",{class:!0});var O=$(t);n=G(O,"Delete this dataset"),O.forEach(m),o=J(L),r=D(L,"DIV",{class:!0});var X=$(r);s=D(X,"P",{class:!0});var de=$(s);a=G(de,"This action cannot be undone."),de.forEach(m),f=J(X),c=D(X,"P",{});var he=$(c);d=G(he,`This will permanently delete the
                  `),u=D(he,"SPAN",{class:!0});var re=$(u);_=G(re,i[9]),re.forEach(m),p=G(he,` dataset and all its files. Please type
                  `),v=D(he,"SPAN",{class:!0});var De=$(v);w=G(De,i[9]),De.forEach(m),S=G(he," to confirm."),he.forEach(m),X.forEach(m),C=J(L),H(V.$$.fragment,L),z=J(L),T=D(L,"BUTTON",{class:!0});var ue=$(T);y=G(ue,`I understand, delete this dataset
                `),H(P.$$.fragment,ue),ue.forEach(m),L.forEach(m),j.forEach(m),this.h()},h(){I(t,"class","text-lg text-gray-700"),I(s,"class","mb-2"),I(u,"class","font-bold"),I(v,"class","font-bold"),I(r,"class","mb-4 text-sm text-gray-500"),I(T,"class","flex cursor-pointer flex-row justify-between p-4 text-left hover:bg-gray-200"),T.disabled=M=i[8]!=i[9],ye(T,"cursor-not-allowed",i[8]!=i[9]),I(l,"class","flex flex-col gap-y-1"),I(e,"class","flex flex-col gap-y-6")},m(F,j){N(F,e,j),g(e,l),g(l,t),g(t,n),g(l,o),g(l,r),g(r,s),g(s,a),g(r,f),g(r,c),g(c,d),g(c,u),g(u,_),g(c,p),g(c,v),g(v,w),g(c,S),g(l,C),R(V,l,null),g(l,z),g(l,T),g(T,y),R(P,T,null),k=!0,q||(ee=Be(T,"click",i[24]),q=!0)},p(F,j){(!k||j[0]&512)&&fe(_,F[9]),(!k||j[0]&512)&&fe(w,F[9]);const L={};j[0]&768&&(L.invalid=F[8]!=F[9]),!U&&j[0]&256&&(U=!0,L.value=F[8],Ue(()=>U=!1)),V.$set(L),(!k||j[0]&768&&M!==(M=F[8]!=F[9]))&&(T.disabled=M),(!k||j[0]&768)&&ye(T,"cursor-not-allowed",F[8]!=F[9])},i(F){k||(h(V.$$.fragment,F),h(P.$$.fragment,F),k=!0)},o(F){b(V.$$.fragment,F),b(P.$$.fragment,F),k=!1},d(F){F&&m(e),B(V),B(P),q=!1,ee()}}}function va(i){let e,l,t,n;const o=[$a,wa],r=[];function s(a,f){return a[6].isFetching?0:1}return e=s(i),l=r[e]=o[e](i),{c(){l.c(),t=se()},l(a){l.l(a),t=se()},m(a,f){r[e].m(a,f),N(a,t,f),n=!0},p(a,f){let c=e;e=s(a),e===c?r[e].p(a,f):(le(),b(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){b(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function wa(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,p,v,w,S,C,V,U,z,T,y,P,M,k=i[3]!=null&&sn(i);const q=[Sa,ka],ee=[];function x(F,j){return F[11].isFetching?0:1}C=x(i),V=ee[C]=q[C](i);let Y=i[3]!=null&&i[4]!=null&&on(i);return{c(){e=E("div"),l=E("section"),t=E("div"),n=K("Media fields"),o=Q(),r=E("div"),s=K("These fields will be presented differently from the rest of the metadata fields."),a=Q(),k&&k.c(),f=Q(),c=E("section"),d=E("div"),u=K("Preferred embedding"),_=Q(),p=E("div"),v=K("This embedding will be used by default when indexing and querying the data."),w=Q(),S=E("div"),V.c(),U=Q(),z=E("section"),T=E("div"),y=K("Render as markdown"),P=Q(),Y&&Y.c(),this.h()},l(F){e=D(F,"DIV",{class:!0});var j=$(e);l=D(j,"SECTION",{class:!0});var L=$(l);t=D(L,"DIV",{class:!0});var O=$(t);n=G(O,"Media fields"),O.forEach(m),o=J(L),r=D(L,"DIV",{class:!0});var X=$(r);s=G(X,"These fields will be presented differently from the rest of the metadata fields."),X.forEach(m),a=J(L),k&&k.l(L),L.forEach(m),f=J(j),c=D(j,"SECTION",{class:!0});var de=$(c);d=D(de,"DIV",{class:!0});var he=$(d);u=G(he,"Preferred embedding"),he.forEach(m),_=J(de),p=D(de,"DIV",{class:!0});var re=$(p);v=G(re,"This embedding will be used by default when indexing and querying the data."),re.forEach(m),w=J(de),S=D(de,"DIV",{class:!0});var De=$(S);V.l(De),De.forEach(m),de.forEach(m),U=J(j),z=D(j,"SECTION",{class:!0});var ue=$(z);T=D(ue,"DIV",{class:!0});var ie=$(T);y=G(ie,"Render as markdown"),ie.forEach(m),P=J(ue),Y&&Y.l(ue),ue.forEach(m),j.forEach(m),this.h()},h(){I(t,"class","text-lg text-gray-700"),I(r,"class","text-sm text-gray-500"),I(l,"class","flex flex-col gap-y-1"),I(d,"class","text-lg text-gray-700"),I(p,"class","text-sm text-gray-500"),I(S,"class","w-60"),I(c,"class","flex flex-col gap-y-1"),I(T,"class","text-lg text-gray-700"),I(z,"class","flex flex-col gap-y-1"),I(e,"class","flex flex-col gap-y-6")},m(F,j){N(F,e,j),g(e,l),g(l,t),g(t,n),g(l,o),g(l,r),g(r,s),g(l,a),k&&k.m(l,null),g(e,f),g(e,c),g(c,d),g(d,u),g(c,_),g(c,p),g(p,v),g(c,w),g(c,S),ee[C].m(S,null),g(e,U),g(e,z),g(z,T),g(T,y),g(z,P),Y&&Y.m(z,null),M=!0},p(F,j){F[3]!=null?k?(k.p(F,j),j[0]&8&&h(k,1)):(k=sn(F),k.c(),h(k,1),k.m(l,null)):k&&(le(),b(k,1,1,()=>{k=null}),ne());let L=C;C=x(F),C===L?ee[C].p(F,j):(le(),b(ee[L],1,1,()=>{ee[L]=null}),ne(),V=ee[C],V?V.p(F,j):(V=ee[C]=q[C](F),V.c()),h(V,1),V.m(S,null)),F[3]!=null&&F[4]!=null?Y?(Y.p(F,j),j[0]&24&&h(Y,1)):(Y=on(F),Y.c(),h(Y,1),Y.m(z,null)):Y&&(le(),b(Y,1,1,()=>{Y=null}),ne())},i(F){M||(h(k),h(V),h(Y),M=!0)},o(F){b(k),b(V),b(Y),M=!1},d(F){F&&m(e),k&&k.d(),ee[C].d(),Y&&Y.d()}}}function $a(i){let e,l;return e=new Qe({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function sn(i){let e,l,t;function n(r){i[21](r)}let o={fields:i[5]};return i[3]!==void 0&&(o.checkedFields=i[3]),e=new wt({props:o}),Pe.push(()=>je(e,"checkedFields",n)),{c(){A(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){R(e,r,s),t=!0},p(r,s){const a={};s[0]&32&&(a.fields=r[5]),!l&&s[0]&8&&(l=!0,a.checkedFields=r[3],Ue(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function ka(i){var t;let e,l;return e=new vt({props:{selected:(t=i[6].data)==null?void 0:t.preferred_embedding,$$slots:{default:[ya]},$$scope:{ctx:i}}}),e.$on("change",i[16]),{c(){A(e.$$.fragment)},l(n){H(e.$$.fragment,n)},m(n,o){R(e,n,o),l=!0},p(n,o){var s;const r={};o[0]&64&&(r.selected=(s=n[6].data)==null?void 0:s.preferred_embedding),o[0]&2048|o[1]&2&&(r.$$scope={dirty:o,ctx:n}),e.$set(r)},i(n){l||(h(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function Sa(i){let e,l;return e=new Zr({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function an(i){let e,l;return e=new ot({props:{value:i[29].name}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&2048&&(o.value=t[29].name),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ya(i){let e,l,t,n;e=new ot({props:{value:void 0,text:"None"}});let o=i[11].data||[],r=[];for(let a=0;a<o.length;a+=1)r[a]=an(rn(i,o,a));const s=a=>b(r[a],1,1,()=>{r[a]=null});return{c(){A(e.$$.fragment),l=Q();for(let a=0;a<r.length;a+=1)r[a].c();t=se()},l(a){H(e.$$.fragment,a),l=J(a);for(let f=0;f<r.length;f+=1)r[f].l(a);t=se()},m(a,f){R(e,a,f),N(a,l,f);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(a,f);N(a,t,f),n=!0},p(a,f){if(f[0]&2048){o=a[11].data||[];let c;for(c=0;c<o.length;c+=1){const d=rn(a,o,c);r[c]?(r[c].p(d,f),h(r[c],1)):(r[c]=an(d),r[c].c(),h(r[c],1),r[c].m(t.parentNode,t))}for(le(),c=o.length;c<r.length;c+=1)s(c);ne()}},i(a){if(!n){h(e.$$.fragment,a);for(let f=0;f<o.length;f+=1)h(r[f]);n=!0}},o(a){b(e.$$.fragment,a),r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)b(r[f]);n=!1},d(a){B(e,a),a&&m(l),ze(r,a),a&&m(t)}}}function on(i){let e,l,t;function n(r){i[22](r)}let o={fields:i[3]};return i[4]!==void 0&&(o.checkedFields=i[4]),e=new wt({props:o}),Pe.push(()=>je(e,"checkedFields",n)),{c(){A(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){R(e,r,s),t=!0},p(r,s){const a={};s[0]&8&&(a.fields=r[3]),!l&&s[0]&16&&(l=!0,a.checkedFields=r[4],Ue(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Ea(i){let e,l,t,n,o,r,s,a;t=new cr({props:{items:[{title:"Fields",value:"fields"},{title:"Administration",value:"administration"}],item:i[7]}}),t.$on("select",i[20]);const f=[va,ba],c=[];function d(u,_){return u[7]==="fields"?0:u[7]==="administration"?1:-1}return~(r=d(i))&&(s=c[r]=f[r](i)),{c(){e=E("div"),l=E("div"),A(t.$$.fragment),n=Q(),o=E("div"),s&&s.c(),this.h()},l(u){e=D(u,"DIV",{class:!0});var _=$(e);l=D(_,"DIV",{class:!0});var p=$(l);H(t.$$.fragment,p),p.forEach(m),n=J(_),o=D(_,"DIV",{class:!0});var v=$(o);s&&s.l(v),v.forEach(m),_.forEach(m),this.h()},h(){I(l,"class","-ml-4 mr-4 w-96 grow-0"),I(o,"class","flex w-full flex-col gap-y-6 rounded border border-gray-300 bg-white p-4"),I(e,"class","flex flex-row")},m(u,_){N(u,e,_),g(e,l),R(t,l,null),g(e,n),g(e,o),~r&&c[r].m(o,null),a=!0},p(u,_){const p={};_[0]&128&&(p.item=u[7]),t.$set(p);let v=r;r=d(u),r===v?~r&&c[r].p(u,_):(s&&(le(),b(c[v],1,1,()=>{c[v]=null}),ne()),~r?(s=c[r],s?s.p(u,_):(s=c[r]=f[r](u),s.c()),h(s,1),s.m(o,null)):s=null)},i(u){a||(h(t.$$.fragment,u),h(s),a=!0)},o(u){b(t.$$.fragment,u),b(s),a=!1},d(u){u&&m(e),B(t),~r&&c[r].d()}}}function Da(i){let e,l,t,n,o,r;return e=new kn({props:{label:"Changes",title:"Dataset settings"}}),t=new Sn({props:{hasForm:!0,$$slots:{default:[Ea]},$$scope:{ctx:i}}}),o=new yn({props:{primaryButtonText:"Save",secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",close),{c(){A(e.$$.fragment),l=Q(),A(t.$$.fragment),n=Q(),A(o.$$.fragment)},l(s){H(e.$$.fragment,s),l=J(s),H(t.$$.fragment,s),n=J(s),H(o.$$.fragment,s)},m(s,a){R(e,s,a),N(s,l,a),R(t,s,a),N(s,n,a),R(o,s,a),r=!0},p(s,a){const f={};a[0]&7166|a[1]&2&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),h(o.$$.fragment,s),r=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),b(o.$$.fragment,s),r=!1},d(s){B(e,s),s&&m(l),B(t,s),s&&m(n),B(o,s)}}}function Ia(i){let e,l;return e=new $n({props:{open:i[0],$$slots:{default:[Da]},$$scope:{ctx:i}}}),e.$on("submit",i[17]),e.$on("close",i[25]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n[0]&1&&(o.open=t[0]),n[0]&7166|n[1]&2&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Va(i,e,l){let t,n,o,r,s,a=W,f=()=>(a(),a=Me(t,O=>l(6,s=O)),t),c,d,u;i.$$.on_destroy.push(()=>a());let{namespace:_}=e,{name:p}=e,{open:v=!1}=e,{schema:w}=e;const S=Tn();ge(i,S,O=>l(28,c=O));const C=Cn();ge(i,C,O=>l(11,d=O));const V=Cr();ge(i,V,O=>l(27,r=O));let U="fields",z=null,T=null,y=c.embedding;function P(O){y=O.target.value,y===""&&(y=void 0)}function M(){if(z==null)return;const O={ui:{media_paths:z.map(X=>X.path),markdown_paths:T==null?void 0:T.map(X=>X.path)},preferred_embedding:y};r.mutate([_,p,O],{onSuccess:()=>{l(0,v=!1)}})}let k="";const q=Tr();ge(i,q,O=>l(12,u=O));const ee=O=>l(7,U=O.detail);function x(O){z=O,l(3,z),l(6,s),l(5,o),l(19,w)}function Y(O){T=O,l(4,T),l(6,s),l(5,o),l(19,w)}function F(O){k=O,l(8,k)}const j=()=>u.mutate([_,p],{onSuccess:()=>gn("/")}),L=()=>l(0,v=!1);return i.$$set=O=>{"namespace"in O&&l(1,_=O.namespace),"name"in O&&l(2,p=O.name),"open"in O&&l(0,v=O.open),"schema"in O&&l(19,w=O.schema)},i.$$.update=()=>{var O,X,de,he;if(i.$$.dirty[0]&6&&f(l(10,t=at(_,p))),i.$$.dirty[0]&6&&l(9,n=qr(_,p)),i.$$.dirty[0]&524288&&l(5,o=Dt(w).filter(re=>re.dtype==="string"&&!Ke(re.path,[Dn])&&!lt(re,w))),i.$$.dirty[0]&104&&z==null){const re=(X=(O=s.data)==null?void 0:O.ui)==null?void 0:X.media_paths;re!=null&&l(3,z=o.filter(De=>re.some(ue=>Ke(De.path,ue))))}if(i.$$.dirty[0]&112&&T==null){const re=(he=(de=s.data)==null?void 0:de.ui)==null?void 0:he.markdown_paths;re!=null&&l(4,T=o.filter(De=>re.some(ue=>Ke(De.path,ue))))}},[v,_,p,z,T,o,s,U,k,n,t,d,u,S,C,V,P,M,q,w,ee,x,Y,F,j,L]}class Na extends $e{constructor(e){super(),ke(this,e,Va,Ia,be,{namespace:1,name:2,open:0,schema:19},null,[-1,-1])}}function Ca(i){let e,l,t;function n(r){i[13](r)}let o={fields:i[6]};return i[1]!==void 0&&(o.checkedFields=i[1]),e=new wt({props:o}),Pe.push(()=>je(e,"checkedFields",n)),{c(){A(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){R(e,r,s),t=!0},p(r,s){const a={};s&64&&(a.fields=r[6]),!l&&s&2&&(l=!0,a.checkedFields=r[1],Ue(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Ta(i){let e,l;return e=new Qe({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function fn(i){let e,l,t,n,o,r,s;const a=[Ma,Fa],f=[];function c(d,u){return d[5]==null?0:1}return o=c(i),r=f[o]=a[o](i),{c(){e=E("section"),l=E("h4"),t=K("Select enriched fields"),n=Q(),r.c(),this.h()},l(d){e=D(d,"SECTION",{});var u=$(e);l=D(u,"H4",{class:!0});var _=$(l);t=G(_,"Select enriched fields"),_.forEach(m),n=J(u),r.l(u),u.forEach(m),this.h()},h(){I(l,"class","svelte-1ge817j")},m(d,u){N(d,e,u),g(e,l),g(l,t),g(e,n),f[o].m(e,null),s=!0},p(d,u){let _=o;o=c(d),o===_?f[o].p(d,u):(le(),b(f[_],1,1,()=>{f[_]=null}),ne(),r=f[o],r?r.p(d,u):(r=f[o]=a[o](d),r.c()),h(r,1),r.m(e,null))},i(d){s||(h(r),s=!0)},o(d){b(r),s=!1},d(d){d&&m(e),f[o].d()}}}function Fa(i){let e,l,t;function n(r){i[14](r)}let o={fields:i[5]};return i[2]!==void 0&&(o.checkedFields=i[2]),e=new wt({props:o}),Pe.push(()=>je(e,"checkedFields",n)),{c(){A(e.$$.fragment)},l(r){H(e.$$.fragment,r)},m(r,s){R(e,r,s),t=!0},p(r,s){const a={};s&32&&(a.fields=r[5]),!l&&s&4&&(l=!0,a.checkedFields=r[2],Ue(()=>l=!1)),e.$set(a)},i(r){t||(h(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Ma(i){let e,l;return e=new Qe({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function cn(i){let e,l;return{c(){e=E("p"),l=K("No fields selected. Please select at least one field to download."),this.h()},l(t){e=D(t,"P",{class:!0});var n=$(e);l=G(n,"No fields selected. Please select at least one field to download."),n.forEach(m),this.h()},h(){I(e,"class","text-gray-600")},m(t,n){N(t,e,n),g(e,l)},d(t){t&&m(e)}}}function za(i){let e,l;return e=new Yr({props:{value:JSON.stringify(i[7].data,null,2),readonly:!0,rows:30,placeholder:"3 rows of data for previewing the response",class:"mb-2 font-mono"}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&128&&(o.value=JSON.stringify(t[7].data,null,2)),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Pa(i){let e,l;return e=new Qe({props:{paragraph:!0}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p:W,i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Aa(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,p,v,w,S;const C=[Ta,Ca],V=[];function U(k,q){return k[6]==null?0:1}o=U(i),r=V[o]=C[o](i);let z=(i[5]==null||i[5].length>0)&&fn(i),T=i[3].length===0&&cn();const y=[Pa,za],P=[];function M(k,q){return k[7]&&k[7].isFetching?0:k[4]&&k[7]?1:-1}return~(v=M(i))&&(w=P[v]=y[v](i)),{c(){e=E("section"),l=E("h4"),t=K("Select source fields"),n=Q(),r.c(),s=Q(),z&&z.c(),a=Q(),f=E("section"),c=E("h4"),d=K("Download preview"),u=Q(),T&&T.c(),_=Q(),p=E("div"),w&&w.c(),this.h()},l(k){e=D(k,"SECTION",{});var q=$(e);l=D(q,"H4",{class:!0});var ee=$(l);t=G(ee,"Select source fields"),ee.forEach(m),n=J(q),r.l(q),q.forEach(m),s=J(k),z&&z.l(k),a=J(k),f=D(k,"SECTION",{});var x=$(f);c=D(x,"H4",{class:!0});var Y=$(c);d=G(Y,"Download preview"),Y.forEach(m),u=J(x),T&&T.l(x),_=J(x),p=D(x,"DIV",{class:!0});var F=$(p);w&&w.l(F),F.forEach(m),x.forEach(m),this.h()},h(){I(l,"class","svelte-1ge817j"),I(c,"class","svelte-1ge817j"),I(p,"class","preview svelte-1ge817j")},m(k,q){N(k,e,q),g(e,l),g(l,t),g(e,n),V[o].m(e,null),N(k,s,q),z&&z.m(k,q),N(k,a,q),N(k,f,q),g(f,c),g(c,d),g(f,u),T&&T.m(f,null),g(f,_),g(f,p),~v&&P[v].m(p,null),S=!0},p(k,q){let ee=o;o=U(k),o===ee?V[o].p(k,q):(le(),b(V[ee],1,1,()=>{V[ee]=null}),ne(),r=V[o],r?r.p(k,q):(r=V[o]=C[o](k),r.c()),h(r,1),r.m(e,null)),k[5]==null||k[5].length>0?z?(z.p(k,q),q&32&&h(z,1)):(z=fn(k),z.c(),h(z,1),z.m(a.parentNode,a)):z&&(le(),b(z,1,1,()=>{z=null}),ne()),k[3].length===0?T||(T=cn(),T.c(),T.m(f,_)):T&&(T.d(1),T=null);let x=v;v=M(k),v===x?~v&&P[v].p(k,q):(w&&(le(),b(P[x],1,1,()=>{P[x]=null}),ne()),~v?(w=P[v],w?w.p(k,q):(w=P[v]=y[v](k),w.c()),h(w,1),w.m(p,null)):w=null)},i(k){S||(h(r),h(z),h(w),S=!0)},o(k){b(r),b(z),b(w),S=!1},d(k){k&&m(e),V[o].d(),k&&m(s),z&&z.d(k),k&&m(a),k&&m(f),T&&T.d(),~v&&P[v].d()}}}function Ra(i){let e,l,t,n,o,r;return e=new kn({props:{title:"Download data"}}),t=new Sn({props:{hasForm:!0,$$slots:{default:[Aa]},$$scope:{ctx:i}}}),o=new yn({props:{primaryButtonText:"Download",primaryButtonDisabled:i[3].length===0,secondaryButtonText:"Cancel"}}),o.$on("click:button--secondary",i[10]),{c(){A(e.$$.fragment),l=Q(),A(t.$$.fragment),n=Q(),A(o.$$.fragment)},l(s){H(e.$$.fragment,s),l=J(s),H(t.$$.fragment,s),n=J(s),H(o.$$.fragment,s)},m(s,a){R(e,s,a),N(s,l,a),R(t,s,a),N(s,n,a),R(o,s,a),r=!0},p(s,a){const f={};a&262398&&(f.$$scope={dirty:a,ctx:s}),t.$set(f);const c={};a&8&&(c.primaryButtonDisabled=s[3].length===0),o.$set(c)},i(s){r||(h(e.$$.fragment,s),h(t.$$.fragment,s),h(o.$$.fragment,s),r=!0)},o(s){b(e.$$.fragment,s),b(t.$$.fragment,s),b(o.$$.fragment,s),r=!1},d(s){B(e,s),s&&m(l),B(t,s),s&&m(n),B(o,s)}}}function Ba(i){let e,l;return e=new $n({props:{size:"lg",open:i[0],$$slots:{default:[Ra]},$$scope:{ctx:i}}}),e.$on("submit",i[9]),e.$on("close",i[15]),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,[n]){const o={};n&1&&(o.open=t[0]),n&262398&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function qa(i,e,l){let t,n,o,r,s,a,f=W,c=()=>(f(),f=Me(r,y=>l(7,a=y)),r);i.$$.on_destroy.push(()=>f());let{open:d=!1}=e,{schema:u}=e;const _=pt(),p=Ae();ge(i,p,y=>l(12,s=y));let v=[],w=[];function S(y){if(y==null)return{sourceFields:null,enrichedFields:null};const M=Dt(y).filter(q=>["embedding"].indexOf(q.dtype)===-1).filter(q=>!lt(q,y)&&q.path.at(-1)!==Dn),k=it(y).filter(q=>ht(q)).filter(q=>!it(q).some(ee=>ee.dtype==="embedding"));return{sourceFields:M,enrichedFields:k}}async function C(){const y=s.namespace,P=s.datasetName,M={combine_columns:!1,columns:o.map(ee=>ee.path)},k=`/api/v1/datasets/${y}/${P}/select_rows_download?url_safe_options=${encodeURIComponent(JSON.stringify(M))}`,q=document.createElement("a");q.download=`${y}_${P}.json`,q.href=k,document.body.appendChild(q),q.click(),q.remove()}function V(){l(0,d=!1),_("close")}function U(y){v=y,l(1,v)}function z(y){w=y,l(2,w)}const T=()=>l(0,d=!1);return i.$$set=y=>{"open"in y&&l(0,d=y.open),"schema"in y&&l(11,u=y.schema)},i.$$.update=()=>{i.$$.dirty&2048&&l(6,{sourceFields:t,enrichedFields:n}=S(u),t,(l(5,n),l(11,u))),i.$$.dirty&6&&l(3,o=[...v,...w]),i.$$.dirty&4104&&c(l(4,r=o.length>0?Fr(s.namespace,s.datasetName,{columns:o.map(y=>y.path),limit:3,combine_columns:!1}):null))},[d,v,w,o,r,n,t,a,p,C,V,u,s,U,z,T]}class Oa extends $e{constructor(e){super(),ke(this,e,qa,Ba,be,{open:0,schema:11})}}function Ha(i){let e,l;return e=new ai({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function La(i){let e,l;return e=new ri({}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function un(i){let e,l,t,n,o,r;function s(d){i[19](d)}let a={schema:i[10].data,namespace:i[0],name:i[1]};i[3]!==void 0&&(a.open=i[3]),e=new Na({props:a}),Pe.push(()=>je(e,"open",s));function f(d){i[20](d)}let c={schema:i[10].data};return i[4]!==void 0&&(c.open=i[4]),n=new Oa({props:c}),Pe.push(()=>je(n,"open",f)),{c(){A(e.$$.fragment),t=Q(),A(n.$$.fragment)},l(d){H(e.$$.fragment,d),t=J(d),H(n.$$.fragment,d)},m(d,u){R(e,d,u),N(d,t,u),R(n,d,u),r=!0},p(d,u){const _={};u&1024&&(_.schema=d[10].data),u&1&&(_.namespace=d[0]),u&2&&(_.name=d[1]),!l&&u&8&&(l=!0,_.open=d[3],Ue(()=>l=!1)),e.$set(_);const p={};u&1024&&(p.schema=d[10].data),!o&&u&16&&(o=!0,p.open=d[4],Ue(()=>o=!1)),n.$set(p)},i(d){r||(h(e.$$.fragment,d),h(n.$$.fragment,d),r=!0)},o(d){b(e.$$.fragment,d),b(n.$$.fragment,d),r=!1},d(d){B(e,d),d&&m(t),B(n,d)}}}function ja(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,p,v,w,S,C;t=new ma({});const V=[La,Ha],U=[];function z(y,P){return y[9]?1:0}r=z(i),s=U[r]=V[r](i),_=new ds({});let T=i[10].data&&un(i);return{c(){e=E("div"),l=E("div"),A(t.$$.fragment),n=Q(),o=E("div"),s.c(),d=Q(),u=E("div"),A(_.$$.fragment),p=Q(),T&&T.c(),v=se(),this.h()},l(y){e=D(y,"DIV",{class:!0});var P=$(e);l=D(P,"DIV",{class:!0});var M=$(l);H(t.$$.fragment,M),n=J(M),o=D(M,"DIV",{class:!0});var k=$(o);s.l(k),k.forEach(m),M.forEach(m),d=J(P),u=D(P,"DIV",{class:!0});var q=$(u);H(_.$$.fragment,q),q.forEach(m),P.forEach(m),p=J(y),T&&T.l(y),v=se(),this.h()},h(){I(o,"class",a=ft(`absolute right-0 top-1/2 flex
                h-8 w-4 cursor-pointer items-center justify-center
                rounded border
                border-neutral-200 bg-neutral-100
                opacity-60 hover:bg-neutral-200
                hover:opacity-100
                ${i[9]?" translate-x-full":" translate-x-1/2"}`)+" svelte-1nu5kbu"),I(l,"class",c=ft(`schema-container relative h-full ${i[9]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1nu5kbu"),I(u,"class","h-full w-2/3 flex-grow"),I(e,"class","flex h-full w-full")},m(y,P){N(y,e,P),g(e,l),R(t,l,null),g(l,n),g(l,o),U[r].m(o,null),g(e,d),g(e,u),R(_,u,null),N(y,p,P),T&&T.m(y,P),N(y,v,P),w=!0,S||(C=[Te(f=Fe.call(null,o,{text:i[9]?"Show Schema":"Hide Schema"})),Be(o,"click",i[12]),Be(o,"keypress",i[12])],S=!0)},p(y,P){let M=r;r=z(y),r!==M&&(le(),b(U[M],1,1,()=>{U[M]=null}),ne(),s=U[r],s||(s=U[r]=V[r](y),s.c()),h(s,1),s.m(o,null)),(!w||P&512&&a!==(a=ft(`absolute right-0 top-1/2 flex
                h-8 w-4 cursor-pointer items-center justify-center
                rounded border
                border-neutral-200 bg-neutral-100
                opacity-60 hover:bg-neutral-200
                hover:opacity-100
                ${y[9]?" translate-x-full":" translate-x-1/2"}`)+" svelte-1nu5kbu"))&&I(o,"class",a),f&&Le(f.update)&&P&512&&f.update.call(null,{text:y[9]?"Show Schema":"Hide Schema"}),(!w||P&512&&c!==(c=ft(`schema-container relative h-full ${y[9]?"w-0":"w-1/3"} border-r border-gray-200`)+" svelte-1nu5kbu"))&&I(l,"class",c),y[10].data?T?(T.p(y,P),P&1024&&h(T,1)):(T=un(y),T.c(),h(T,1),T.m(v.parentNode,v)):T&&(le(),b(T,1,1,()=>{T=null}),ne())},i(y){w||(h(t.$$.fragment,y),h(s),h(_.$$.fragment,y),h(T),w=!0)},o(y){b(t.$$.fragment,y),b(s),b(_.$$.fragment,y),b(T),w=!1},d(y){y&&m(e),B(t),U[r].d(),B(_),y&&m(p),T&&T.d(y),y&&m(v),S=!1,We(C)}}}function Ua(i){let e,l=i[2].namespace+"",t,n,o=i[2].datasetName+"",r,s,a;return{c(){e=E("a"),t=K(l),n=K("/"),r=K(o),this.h()},l(f){e=D(f,"A",{class:!0,href:!0});var c=$(e);t=G(c,l),n=G(c,"/"),r=G(c,o),c.forEach(m),this.h()},h(){I(e,"class","font-semibold text-black"),I(e,"href",i[6])},m(f,c){N(f,e,c),g(e,t),g(e,n),g(e,r),s||(a=Be(e,"click",i[18]),s=!0)},p(f,c){c&4&&l!==(l=f[2].namespace+"")&&fe(t,l),c&4&&o!==(o=f[2].datasetName+"")&&fe(r,o),c&64&&I(e,"href",f[6])},d(f){f&&m(e),s=!1,a()}}}function Ya(i){let e,l,t;return l=new Xe({props:{type:"outline",$$slots:{default:[Ua]},$$scope:{ctx:i}}}),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(n){e=D(n,"DIV",{slot:!0});var o=$(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"slot","header-subtext")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p(n,o){const r={};o&2097220&&(r.$$scope={dirty:o,ctx:n}),l.$set(r)},i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){b(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function Qa(i){let e,l,t;return l=new Is({}),{c(){e=E("div"),A(l.$$.fragment),this.h()},l(n){e=D(n,"DIV",{slot:!0,class:!0});var o=$(e);H(l.$$.fragment,o),o.forEach(m),this.h()},h(){I(e,"slot","header-center"),I(e,"class","flex w-full items-center")},m(n,o){N(n,e,o),R(l,e,null),t=!0},p:W,i(n){t||(h(l.$$.fragment,n),t=!0)},o(n){b(l.$$.fragment,n),t=!1},d(n){n&&m(e),B(l)}}}function dn(i){let e,l,t,n;return{c(){e=E("div"),l=K("Copied!"),this.h()},l(o){e=D(o,"DIV",{class:!0});var r=$(e);l=G(r,"Copied!"),r.forEach(m),this.h()},h(){I(e,"class","absolute right-12 z-50 mt-2 rounded border border-neutral-300 bg-neutral-50 px-4 py-1 text-xs")},m(o,r){N(o,e,r),g(e,l),n=!0},i(o){n||(t&&t.end(1),n=!0)},o(o){t=Gn(e,dr,{}),n=!1},d(o){o&&m(e),o&&t&&t.end()}}}function Ja(i){let e,l,t,n,o,r,s,a,f,c,d,u,_,p,v,w=i[5]&&dn();return r=new rt({props:{size:"field",kind:"ghost",icon:pi,iconDescription:"Copy the URL"}}),r.$on("click",i[15]),a=new rt({props:{size:"field",kind:"ghost",icon:ci,iconDescription:"Download data"}}),a.$on("click",i[16]),d=new rt({props:{disabled:!i[7],size:"field",kind:"ghost",icon:Xr,iconDescription:"Dataset settings"}}),d.$on("click",i[17]),{c(){e=E("div"),l=E("div"),t=E("div"),n=E("div"),w&&w.c(),o=Q(),A(r.$$.fragment),s=Q(),A(a.$$.fragment),f=Q(),c=E("div"),A(d.$$.fragment),this.h()},l(S){e=D(S,"DIV",{slot:!0});var C=$(e);l=D(C,"DIV",{class:!0});var V=$(l);t=D(V,"DIV",{class:!0});var U=$(t);n=D(U,"DIV",{class:!0});var z=$(n);w&&w.l(z),o=J(z),H(r.$$.fragment,z),z.forEach(m),s=J(U),H(a.$$.fragment,U),f=J(U),c=D(U,"DIV",{});var T=$(c);H(d.$$.fragment,T),T.forEach(m),U.forEach(m),V.forEach(m),C.forEach(m),this.h()},h(){I(n,"class","relative"),ye(c,"opacity-40",!i[7]),I(t,"class","flex"),I(l,"class","flex h-full flex-col"),I(e,"slot","header-right")},m(S,C){N(S,e,C),g(e,l),g(l,t),g(t,n),w&&w.m(n,null),g(n,o),R(r,n,null),g(t,s),R(a,t,null),g(t,f),g(t,c),R(d,c,null),_=!0,p||(v=Te(u=Fe.call(null,c,{text:i[7]?"":"User does not have access to update settings of this dataset."})),p=!0)},p(S,C){S[5]?w?C&32&&h(w,1):(w=dn(),w.c(),h(w,1),w.m(n,o)):w&&(le(),b(w,1,1,()=>{w=null}),ne());const V={};C&128&&(V.disabled=!S[7]),d.$set(V),u&&Le(u.update)&&C&128&&u.update.call(null,{text:S[7]?"":"User does not have access to update settings of this dataset."}),(!_||C&128)&&ye(c,"opacity-40",!S[7])},i(S){_||(h(w),h(r.$$.fragment,S),h(a.$$.fragment,S),h(d.$$.fragment,S),_=!0)},o(S){b(w),b(r.$$.fragment,S),b(a.$$.fragment,S),b(d.$$.fragment,S),_=!1},d(S){S&&m(e),w&&w.d(),B(r),B(a),B(d),p=!1,v()}}}function Ka(i){let e,l,t,n;return e=new Wn({props:{$$slots:{"header-right":[Ja],"header-center":[Qa],"header-subtext":[Ya],default:[ja]},$$scope:{ctx:i}}}),t=new ur({}),{c(){A(e.$$.fragment),l=Q(),A(t.$$.fragment)},l(o){H(e.$$.fragment,o),l=J(o),H(t.$$.fragment,o)},m(o,r){R(e,o,r),N(o,l,r),R(t,o,r),n=!0},p(o,[r]){const s={};r&2098943&&(s.$$scope={dirty:r,ctx:o}),e.$set(s)},i(o){n||(h(e.$$.fragment,o),h(t.$$.fragment,o),n=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),n=!1},d(o){B(e,o),o&&m(l),B(t,o)}}}function Ga(i,e,l){let t,n,o,r,s,a,f,c=W,d=()=>(c(),c=Me(n,k=>l(10,f=k)),n);i.$$.on_destroy.push(()=>c());let{namespace:u}=e,{datasetName:_}=e;const p=Ae();ge(i,p,k=>l(2,a=k));function v(){ut(p,a.schemaCollapsed=!a.schemaCollapsed,a)}let w=!1,S=!1;const C=Vt();ge(i,C,k=>l(14,s=k));let V=!1;const U=()=>navigator.clipboard.writeText(location.href).then(()=>{l(5,V=!0),setTimeout(()=>l(5,V=!1),2e3)},()=>{throw Error("Error copying link to clipboard.")}),z=()=>l(4,S=!0),T=()=>l(3,w=!0),y=()=>gn(r);function P(k){w=k,l(3,w)}function M(k){S=k,l(4,S)}return i.$$set=k=>{"namespace"in k&&l(0,u=k.namespace),"datasetName"in k&&l(1,_=k.datasetName)},i.$$.update=()=>{var k;i.$$.dirty&4&&l(9,t=a.schemaCollapsed),i.$$.dirty&4&&d(l(8,n=It(a.namespace,a.datasetName))),i.$$.dirty&16384&&l(7,o=(k=s.data)==null?void 0:k.access.dataset.update_settings),i.$$.dirty&3&&l(6,r=Hr(u,_))},[u,_,a,w,S,V,r,o,n,t,f,p,v,C,s,U,z,T,y,P,M]}class Za extends $e{constructor(e){super(),ke(this,e,Ga,Ka,be,{namespace:0,datasetName:1})}}function Wa(i){let e;return{c(){e=K("Page not found! Please specify a dataset.")},l(l){e=G(l,"Page not found! Please specify a dataset.")},m(l,t){N(l,e,t)},p:W,i:W,o:W,d(l){l&&m(e)}}}function Xa(i){let e=i[2],l,t,n=mn(i);return{c(){n.c(),l=se()},l(o){n.l(o),l=se()},m(o,r){n.m(o,r),N(o,l,r),t=!0},p(o,r){r&4&&be(e,e=o[2])?(le(),b(n,1,1,W),ne(),n=mn(o),n.c(),h(n,1),n.m(l.parentNode,l)):n.p(o,r)},i(o){t||(h(n),t=!0)},o(o){b(n),t=!1},d(o){o&&m(l),n.d(o)}}}function mn(i){let e,l;return e=new Za({props:{namespace:i[0],datasetName:i[1]}}),{c(){A(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,n){R(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.namespace=t[0]),n&2&&(o.datasetName=t[1]),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){b(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function xa(i){let e,l,t,n;const o=[Xa,Wa],r=[];function s(a,f){return a[2]&&a[0]&&a[1]?0:1}return e=s(i),l=r[e]=o[e](i),{c(){l.c(),t=se()},l(a){l.l(a),t=se()},m(a,f){r[e].m(a,f),N(a,t,f),n=!0},p(a,[f]){let c=e;e=s(a),e===c?r[e].p(a,f):(le(),b(r[c],1,1,()=>{r[c]=null}),ne(),l=r[e],l?l.p(a,f):(l=r[e]=o[e](a),l.c()),h(l,1),l.m(t.parentNode,t))},i(a){n||(h(l),n=!0)},o(a){b(l),n=!1},d(a){r[e].d(a),a&&m(t)}}}function eo(i,e,l){let t,n,o,r,s,a,f,c,d=W,u=()=>(d(),d=Me(f,x=>l(10,c=x)),f),_,p=W,v=()=>(p(),p=Me(t,x=>l(11,_=x)),t),w,S=W,C=()=>(S(),S=Me(a,x=>l(12,w=x)),a),V,U=W,z=()=>(U(),U=Me(r,x=>l(13,V=x)),r),T,y=W,P=()=>(y(),y=Me(o,x=>l(14,T=x)),o),M;i.$$.on_destroy.push(()=>d()),i.$$.on_destroy.push(()=>p()),i.$$.on_destroy.push(()=>S()),i.$$.on_destroy.push(()=>U()),i.$$.on_destroy.push(()=>y());let k,q;const ee=mr();return ge(i,ee,x=>l(15,M=x)),i.$$.update=()=>{var x,Y;if(i.$$.dirty&32771&&M.page==="datasets")if(M.identifier==""||M.identifier==null)l(0,k=void 0),l(1,q=void 0);else{const[F,j]=M.identifier.split("/");(k!=F||q!=j)&&(l(0,k=F),l(1,q=j))}if(i.$$.dirty&3&&v(l(2,t=k&&q?pr(ee,k,q):null)),i.$$.dirty&4&&t!=null&&hr(t),i.$$.dirty&3&&l(8,n=k&&q?br(k,q):null),i.$$.dirty&256&&n!=null&&_r(n),i.$$.dirty&3&&P(l(6,o=k&&q?at(k,q):null)),i.$$.dirty&16640&&n&&T!=null&&T.data&&n.setSettings(T.data),i.$$.dirty&3&&z(l(5,r=k&&q?It(k,q):null)),i.$$.dirty&8448&&n&&V!=null&&V.data&&n.setSchema(V.data),i.$$.dirty&8192&&l(9,s=V!=null&&V.data?Mr("string",V.data):null),i.$$.dirty&515&&C(l(4,a=k&&q&&s?zr(k,q,s.map(F=>F.path)):null)),i.$$.dirty&4352&&n&&w!=null&&w.data&&!w.isFetching&&n.setStats(w.data),i.$$.dirty&2051&&u(l(3,f=k&&q&&_?Pr(k,q,vr(_)):null)),i.$$.dirty&1280&&n&&c!=null&&c.data&&n.setSelectRowsSchema(c),i.$$.dirty&3328&&n&&_&&(x=c==null?void 0:c.data)!=null&&x.schema){const F=gr(_.selectedColumns||{},((Y=c.data)==null?void 0:Y.schema)||null);n.setVisibleFields(F)}},[k,q,t,f,a,r,o,ee,n,s,c,_,w,V,T,M]}class bo extends $e{constructor(e){super(),ke(this,e,eo,xa,be,{})}}export{bo as component};
