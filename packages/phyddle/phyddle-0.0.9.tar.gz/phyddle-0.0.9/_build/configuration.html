<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration &mdash; phyddle 0.0.6 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Pipeline" href="pipeline.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/phyddle_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.0.6
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#by-file">By file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#via-command-line">Via command line</a></li>
<li class="toctree-l2"><a class="reference internal" href="#table-summary">Table summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#special-settings">Special settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step"><code class="docutils literal notranslate"><span class="pre">step</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#proj"><code class="docutils literal notranslate"><span class="pre">proj</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pipeline.html">Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="workspace.html">Workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats.html">Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="tricks.html">Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="updates.html">Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">phyddle</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/configuration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration">
<span id="id1"></span><h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section describes how to configure settings for a phyddle analysis.
Visit <a class="reference internal" href="pipeline.html#pipeline"><span class="std std-ref">Pipeline</span></a> to learn more about how settings determine the
behavior of a phyddle analysis. Visit <a class="reference internal" href="glossary.html#glossary"><span class="std std-ref">Glossary</span></a> to learn more about
how phyddle defines different terms.</p>
</div>
<p>There are two ways to configure the settings of a phyddle analysis: through a
<a class="reference internal" href="#config-file"><span class="std std-ref">config file</span></a> or the <a class="reference internal" href="#config-cli"><span class="std std-ref">command line</span></a>.
Command line settings outrank config file settings.</p>
<section id="by-file">
<span id="config-file"></span><h2>By file<a class="headerlink" href="#by-file" title="Permalink to this heading"></a></h2>
<p>The phyddle config file is a Python dictionary of analysis arguments (<code class="docutils literal notranslate"><span class="pre">args</span></code>)
that configure how phyddle pipeline steps behave. Because it’s a Python script,
you can write code within the config file to specify your analysis, if you find
that helpful. The below example defines settings into different blocks based on
which pipeline step first needs a given setting. However, any setting might be
used by different pipeline steps, so we concatenate all settings into a single
dictionary called <code class="docutils literal notranslate"><span class="pre">args</span></code>, which is then used by all pipeline steps. Settings
configured by file can be adjusted through the <a class="reference internal" href="#config-cli"><span class="std std-ref">command line</span></a>,
if desired.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, phyddle assumes you want to use the config file called
<code class="docutils literal notranslate"><span class="pre">config.py</span></code>. Use a different config file by calling, e.g.
<code class="docutils literal notranslate"><span class="pre">./run_pipline</span> <span class="pre">--cfg</span> <span class="pre">my_other_config.py</span></code></p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#==============================================================================#</span>
<span class="c1"># Config:       Default phyddle config file                                    #</span>
<span class="c1"># Authors:      Michael Landis and Ammon Thompson                              #</span>
<span class="c1"># Date:         230804                                                         #</span>
<span class="c1"># Description:  Simple birth-death and equal-rates CTMC model in R using ape   #</span>
<span class="c1">#==============================================================================#</span>

<span class="n">args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Basic                         #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;cfg&#39;</span>                <span class="p">:</span> <span class="s1">&#39;config.py&#39;</span><span class="p">,</span>          <span class="c1"># Config file name</span>
    <span class="s1">&#39;proj&#39;</span>               <span class="p">:</span> <span class="s1">&#39;my_project&#39;</span><span class="p">,</span>         <span class="c1"># Project name(s) for pipeline step(s)</span>
    <span class="s1">&#39;step&#39;</span>               <span class="p">:</span> <span class="s1">&#39;SFTEP&#39;</span><span class="p">,</span>              <span class="c1"># Pipeline step(s) defined with (S)imulate, (F)ormat,</span>
                                                 <span class="c1">#     (T)rain, (E)stimate, (P)lot, or (A)ll</span>
    <span class="s1">&#39;verbose&#39;</span>            <span class="p">:</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span>                  <span class="c1"># Verbose output to screen?</span>
    <span class="s1">&#39;force&#39;</span>              <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>                 <span class="c1"># Arguments override config file settings</span>
    <span class="s1">&#39;make_cfg&#39;</span>           <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>                 <span class="c1"># Write default config file to &#39;config_default.py&#39;?&#39;</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Analysis                      #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;use_parallel&#39;</span>       <span class="p">:</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span>                  <span class="c1"># Use parallelization? (recommended)</span>
    <span class="s1">&#39;num_proc&#39;</span>           <span class="p">:</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span>                   <span class="c1"># Number of cores for multiprocessing (-N for all but N)</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Workspace                     #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;sim_dir&#39;</span>            <span class="p">:</span> <span class="s1">&#39;../workspace/simulate&#39;</span><span class="p">,</span>  <span class="c1"># Directory for raw simulated data</span>
    <span class="s1">&#39;fmt_dir&#39;</span>            <span class="p">:</span> <span class="s1">&#39;../workspace/format&#39;</span><span class="p">,</span>    <span class="c1"># Directory for tensor-formatted simulated data</span>
    <span class="s1">&#39;trn_dir&#39;</span>            <span class="p">:</span> <span class="s1">&#39;../workspace/train&#39;</span><span class="p">,</span>     <span class="c1"># Directory for trained networks and training output</span>
    <span class="s1">&#39;est_dir&#39;</span>            <span class="p">:</span> <span class="s1">&#39;../workspace/estimate&#39;</span><span class="p">,</span>  <span class="c1"># Directory for new datasets and estimates</span>
    <span class="s1">&#39;plt_dir&#39;</span>            <span class="p">:</span> <span class="s1">&#39;../workspace/plot&#39;</span><span class="p">,</span>      <span class="c1"># Directory for plotted results</span>
    <span class="s1">&#39;log_dir&#39;</span>            <span class="p">:</span> <span class="s1">&#39;../workspace/log&#39;</span><span class="p">,</span>       <span class="c1"># Directory for logs of analysis metadata</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Simulate                      #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;sim_command&#39;</span>        <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>                 <span class="c1"># Simulation command to run single job (see documentation)</span>
    <span class="s1">&#39;sim_logging&#39;</span>        <span class="p">:</span> <span class="s1">&#39;clean&#39;</span><span class="p">,</span>              <span class="c1"># Simulation logging style</span>
    <span class="s1">&#39;start_idx&#39;</span>          <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>                    <span class="c1"># Start replicate index for simulated training dataset</span>
    <span class="s1">&#39;end_idx&#39;</span>            <span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>                 <span class="c1"># End replicate index for simulated training dataset</span>
    <span class="s1">&#39;sim_more&#39;</span>           <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>                    <span class="c1"># Add more simulations with auto-generated indices</span>
    <span class="s1">&#39;sim_batch_size&#39;</span>     <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>                    <span class="c1"># Number of replicates per simulation command</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Format                        #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;encode_all_sim&#39;</span>     <span class="p">:</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span>                  <span class="c1"># Encode all simulated replicates into tensor?</span>
    <span class="s1">&#39;num_char&#39;</span>           <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>                 <span class="c1"># Number of characters</span>
    <span class="s1">&#39;num_states&#39;</span>         <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>                 <span class="c1"># Number of states per character</span>
    <span class="s1">&#39;min_num_taxa&#39;</span>       <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>                   <span class="c1"># Minimum number of taxa allowed when formatting</span>
    <span class="s1">&#39;max_num_taxa&#39;</span>       <span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>                 <span class="c1"># Maximum number of taxa allowed when formatting</span>
    <span class="s1">&#39;downsample_taxa&#39;</span>    <span class="p">:</span> <span class="s1">&#39;uniform&#39;</span><span class="p">,</span>            <span class="c1"># Downsampling strategy taxon count</span>
    <span class="s1">&#39;tree_width&#39;</span>         <span class="p">:</span> <span class="mi">500</span><span class="p">,</span>                  <span class="c1"># Width of phylo-state tensor</span>
    <span class="s1">&#39;tree_encode&#39;</span>        <span class="p">:</span> <span class="s1">&#39;extant&#39;</span><span class="p">,</span>             <span class="c1"># Encoding strategy for tree</span>
    <span class="s1">&#39;brlen_encode&#39;</span>       <span class="p">:</span> <span class="s1">&#39;height_brlen&#39;</span><span class="p">,</span>       <span class="c1"># Encoding strategy for branch lengths</span>
    <span class="s1">&#39;char_encode&#39;</span>        <span class="p">:</span> <span class="s1">&#39;one_hot&#39;</span><span class="p">,</span>            <span class="c1"># Encoding strategy for character data</span>
    <span class="s1">&#39;param_est&#39;</span>          <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>                 <span class="c1"># Model parameters to estimate</span>
    <span class="s1">&#39;param_data&#39;</span>         <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>                 <span class="c1"># Model parameters treated as data</span>
    <span class="s1">&#39;char_format&#39;</span>        <span class="p">:</span> <span class="s1">&#39;nexus&#39;</span><span class="p">,</span>              <span class="c1"># File format for character data</span>
    <span class="s1">&#39;tensor_format&#39;</span>      <span class="p">:</span> <span class="s1">&#39;hdf5&#39;</span><span class="p">,</span>               <span class="c1"># File format for training example tensors</span>
    <span class="s1">&#39;save_phyenc_csv&#39;</span>    <span class="p">:</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span>                  <span class="c1"># Save encoded phylogenetic tensor encoding to csv?</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Train                         #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;trn_objective&#39;</span>      <span class="p">:</span> <span class="s1">&#39;param_est&#39;</span><span class="p">,</span>          <span class="c1"># Objective of training procedure</span>
    <span class="s1">&#39;num_epochs&#39;</span>         <span class="p">:</span> <span class="mi">20</span><span class="p">,</span>                   <span class="c1"># Number of training epochs</span>
    <span class="s1">&#39;trn_batch_size&#39;</span>     <span class="p">:</span> <span class="mi">128</span><span class="p">,</span>                  <span class="c1"># Training batch sizes</span>
    <span class="s1">&#39;prop_test&#39;</span>          <span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>                 <span class="c1"># Proportion of data used as test examples (assess network performance)</span>
    <span class="s1">&#39;prop_val&#39;</span>           <span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>                 <span class="c1"># Proportion of data used as validation examples (diagnose overtraining)</span>
    <span class="s1">&#39;prop_cal&#39;</span>           <span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>                  <span class="c1"># Proportion of data used as calibration examples (calibrate CPIs)</span>
    <span class="s1">&#39;cpi_coverage&#39;</span>       <span class="p">:</span> <span class="mf">0.95</span><span class="p">,</span>                 <span class="c1"># Expected coverage percent for calibrated prediction intervals (CPIs)</span>
    <span class="s1">&#39;cpi_asymmetric&#39;</span>     <span class="p">:</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span>                  <span class="c1"># Use asymmetric (True) or symmetric (False) adjustments for CPIs?</span>
    <span class="s1">&#39;loss&#39;</span>               <span class="p">:</span> <span class="s1">&#39;mse&#39;</span><span class="p">,</span>                <span class="c1"># Loss function for optimization</span>
    <span class="s1">&#39;optimizer&#39;</span>          <span class="p">:</span> <span class="s1">&#39;adam&#39;</span><span class="p">,</span>               <span class="c1"># Method used for optimizing neural network</span>
    <span class="s1">&#39;metrics&#39;</span>            <span class="p">:</span> <span class="p">[</span><span class="s1">&#39;mae&#39;</span><span class="p">,</span> <span class="s1">&#39;acc&#39;</span><span class="p">],</span>       <span class="c1"># Recorded training metrics</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Estimate                      #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;est_prefix&#39;</span>         <span class="p">:</span> <span class="kc">None</span><span class="p">,</span>                 <span class="c1"># Predict results for this dataset</span>

    <span class="c1">#-------------------------------#</span>
    <span class="c1"># Plot                          #</span>
    <span class="c1">#-------------------------------#</span>
    <span class="s1">&#39;plot_train_color&#39;</span>   <span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>               <span class="c1"># Plotting color for training data elements</span>
    <span class="s1">&#39;plot_label_color&#39;</span>   <span class="p">:</span> <span class="s1">&#39;purple&#39;</span><span class="p">,</span>             <span class="c1"># Plotting color for training label elements</span>
    <span class="s1">&#39;plot_test_color&#39;</span>    <span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span>                <span class="c1"># Plotting color for test data elements</span>
    <span class="s1">&#39;plot_val_color&#39;</span>     <span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span>              <span class="c1"># Plotting color for validation data elements</span>
    <span class="s1">&#39;plot_aux_color&#39;</span>     <span class="p">:</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span>             <span class="c1"># Plotting color for auxiliary data elements</span>
    <span class="s1">&#39;plot_est_color&#39;</span>     <span class="p">:</span> <span class="s1">&#39;black&#39;</span><span class="p">,</span>              <span class="c1"># Plotting color for new estimation elements</span>

    <span class="p">}</span>
</pre></div>
</div>
</section>
<section id="via-command-line">
<span id="config-cli"></span><h2>Via command line<a class="headerlink" href="#via-command-line" title="Permalink to this heading"></a></h2>
<p>Settings applied through a <a class="reference internal" href="#config-file"><span class="std std-ref">config file</span></a> can be overwritten
by setting options when running phyddle from the command line. The names of
settings are the same for the command line options and in the config file.
Using command line options makes it easy to adjust the behavior of pipeline
steps without needing to edit the config file. List all settings that can be
adjusted with the command line using the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    $ ./run_phyddle.py --help

usage: run_phyddle.py [-h] [-c] [-p] [-s] [-v] [-f] [--make_cfg] [--use_parallel] [--num_proc] [--sim_dir]
                  [--fmt_dir] [--trn_dir] [--est_dir] [--plt_dir] [--log_dir] [--sim_command] [--sim_logging]
                  [--start_idx] [--end_idx] [--sim_more] [--sim_batch_size] [--encode_all_sim] [--num_char]
                  [--num_states] [--min_num_taxa] [--max_num_taxa] [--downsample_taxa] [--tree_width]
                  [--tree_encode] [--brlen_encode] [--char_encode] [--param_est] [--param_data]
                  [--char_format] [--tensor_format] [--save_phyenc_csv] [--trn_objective] [--num_epochs]
                  [--trn_batch_size] [--prop_test] [--prop_val] [--prop_cal] [--cpi_coverage]
                  [--cpi_asymmetric] [--loss] [--optimizer] [--metrics] [--est_prefix] [--plot_train_color]
                  [--plot_label_color] [--plot_test_color] [--plot_val_color] [--plot_aux_color]
                  [--plot_est_color]

phyddle pipeline config

options:
-h, --help           show this help message and exit
-c , --cfg           Config file name
-p , --proj          Project name(s) for pipeline step(s)
-s , --step          Pipeline step(s) defined with (S)imulate, (F)ormat, (T)rain, (E)stimate, (P)lot, or (A)ll
-v , --verbose       Verbose output to screen?
-f, --force          Arguments override config file settings
--make_cfg           Write default config file to &#39;config_default.py&#39;?&#39;
--use_parallel       Use parallelization? (recommended)
--num_proc           Number of cores for multiprocessing (-N for all but N)
--sim_dir            Directory for raw simulated data
--fmt_dir            Directory for tensor-formatted simulated data
--trn_dir            Directory for trained networks and training output
--est_dir            Directory for new datasets and estimates
--plt_dir            Directory for plotted results
--log_dir            Directory for logs of analysis metadata
--sim_command        Simulation command to run single job (see documentation)
--sim_logging        Simulation logging style
--start_idx          Start replicate index for simulated training dataset
--end_idx            End replicate index for simulated training dataset
--sim_more           Add more simulations with auto-generated indices
--sim_batch_size     Number of replicates per simulation command
--encode_all_sim     Encode all simulated replicates into tensor?
--num_char           Number of characters
--num_states         Number of states per character
--min_num_taxa       Minimum number of taxa allowed when formatting
--max_num_taxa       Maximum number of taxa allowed when formatting
--downsample_taxa    Downsampling strategy taxon count
--tree_width         Width of phylo-state tensor
--tree_encode        Encoding strategy for tree
--brlen_encode       Encoding strategy for branch lengths
--char_encode        Encoding strategy for character data
--param_est          Model parameters to estimate
--param_data         Model parameters treated as data
--char_format        File format for character data
--tensor_format      File format for training example tensors
--save_phyenc_csv    Save encoded phylogenetic tensor encoding to csv?
--trn_objective      Objective of training procedure
--num_epochs         Number of training epochs
--trn_batch_size     Training batch sizes
--prop_test          Proportion of data used as test examples (assess trained network performance)
--prop_val           Proportion of data used as validation examples (diagnose network overtraining)
--prop_cal           Proportion of data used as calibration examples (calibrate CPIs)
--cpi_coverage       Expected coverage percent for calibrated prediction intervals (CPIs)
--cpi_asymmetric     Use asymmetric (True) or symmetric (False) adjustments for CPIs?
--loss               Loss function for optimization
--optimizer          Method used for optimizing neural network
--metrics            Recorded training metrics
--est_prefix         Predict results for this dataset
--plot_train_color   Plotting color for training data elements
--plot_label_color   Plotting color for training label elements
--plot_test_color    Plotting color for test data elements
--plot_val_color     Plotting color for validation data elements
--plot_aux_color     Plotting color for auxiliary data elements
--plot_est_color     Plotting color for new estimation elements
</pre></div>
</div>
</section>
<section id="table-summary">
<span id="setting-summary"></span><h2>Table summary<a class="headerlink" href="#table-summary" title="Permalink to this heading"></a></h2>
<p>This section summarizes available settings
in phyddle. The <cite>Setting</cite> column is the exact name of the string that appears in
the configuration file and command-line argument list. The <cite>Step(s)</cite> identifies
all steps that use the setting: [S]imulate, [F]ormat, [T]rain, [E]stimate, and
[P]lot. The <cite>Type</cite> column is the Python variable type expected for the setting.
The <cite>Description</cite> gives a brief description of what the setting does. Visit
<a class="reference internal" href="pipeline.html#pipeline"><span class="std std-ref">Pipeline</span></a> to learn more about phyddle settings impact different pipeline
analysis steps.</p>
<table class="longtable docutils align-center" id="id3" style="width: 100%">
<caption><span class="caption-text">phyddle settings</span><a class="headerlink" href="#id3" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Setting</p></th>
<th class="head"><p>Step(s)</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">proj</span></code></p></td>
<td><p>SFTEP</p></td>
<td><p><em>str</em></p></td>
<td><p>Name of the project directory(s), <em>see detailed description</em> [<a class="reference internal" href="#setting-description-proj"><span class="std std-ref">link</span></a>]</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">step</span></code></p></td>
<td><p>SFTEP</p></td>
<td><p><em>str</em></p></td>
<td><p>Step(s) to run for analysis, <em>see detailed description</em> [<a class="reference internal" href="#setting-description-step"><span class="std std-ref">link</span></a>]</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">verbose</span></code></p></td>
<td><p>SFTEP</p></td>
<td><p><em>str</em></p></td>
<td><p>Print verbose output? True or False</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sim_dir</span></code></p></td>
<td><p>SF–––</p></td>
<td><p><em>str</em></p></td>
<td><p>Filepath to the Simulate directory</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fmt_dir</span></code></p></td>
<td><p>–FT–P</p></td>
<td><p><em>str</em></p></td>
<td><p>Filepath to the Format directory</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">trn_dir</span></code></p></td>
<td><p>––TEP</p></td>
<td><p><em>str</em></p></td>
<td><p>Filepath to the Train directory</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">est_dir</span></code></p></td>
<td><p>–––EP</p></td>
<td><p><em>str</em></p></td>
<td><p>Filepath to the Estimate directory</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plt_dir</span></code></p></td>
<td><p>––––P</p></td>
<td><p><em>str</em></p></td>
<td><p>Filepath to the Plot directory</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">log_dir</span></code></p></td>
<td><p>––––P</p></td>
<td><p><em>str</em></p></td>
<td><p>Filepath to the Log directory</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">start_idx</span></code></p></td>
<td><p>SF–––</p></td>
<td><p><em>int</em></p></td>
<td><p>Start replicate index for simulated training dataset</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">end_idx</span></code></p></td>
<td><p>SF–––</p></td>
<td><p><em>int</em></p></td>
<td><p>End replicate index for simulated training dataset</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">use_parallel</span></code></p></td>
<td><p>SF–––</p></td>
<td><p><em>str</em></p></td>
<td><p>Use multiprocessing? True or False</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">num_proc</span></code></p></td>
<td><p>SF–––</p></td>
<td><p><em>int</em></p></td>
<td><p>Number of cores for multiprocessing (when <code class="docutils literal notranslate"><span class="pre">use_parallel==True</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sim_logging</span></code></p></td>
<td><p>S––––</p></td>
<td><p><em>str</em></p></td>
<td><p>Method for handling simulation logs (<em>clean: delete, compress: zip, verbose: keep</em>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">num_char</span></code></p></td>
<td><p>–FTE–</p></td>
<td><p><em>int</em></p></td>
<td><p>Number of characters</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">num_state</span></code></p></td>
<td><p>–FTE–</p></td>
<td><p><em>int</em> or <em>int[]</em></p></td>
<td><p>Number of states per character</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min_num_taxa</span></code></p></td>
<td><p>–F–––</p></td>
<td><p><em>int</em></p></td>
<td><p>Minimum number of taxa, smaller datasets discarded</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">min_num_taxa</span></code></p></td>
<td><p>–F–––</p></td>
<td><p><em>int</em></p></td>
<td><p>Maximum number of taxa, larger datasets discarded</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tree_encode</span></code></p></td>
<td><p>–FTE–</p></td>
<td><p><em>str</em></p></td>
<td><p>How to encode tree (<cite>‘serial’</cite>: CBLV, <cite>‘extant’</cite>: CDV)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">brlen_encode</span></code></p></td>
<td><p>–FTE–</p></td>
<td><p><em>str</em></p></td>
<td><p>How to encode branch length info (<cite>‘height_only’’: minimal, `’height_brlen’</cite>: extra info)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">char_encode</span></code></p></td>
<td><p>–FTE–</p></td>
<td><p><em>str</em></p></td>
<td><p>How to encode character data (<cite>‘integer’</cite>: ordered, <cite>‘one_hot’</cite>: categorical)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">param_est</span></code></p></td>
<td><p>–F–E–</p></td>
<td><p><em>str[]</em></p></td>
<td><p>List of parameters in labels to be estimated</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">param_data</span></code></p></td>
<td><p>–F–E–</p></td>
<td><p><em>str[]</em></p></td>
<td><p>List of parameters in labels to be treated as auxiliary adata</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">char_format</span></code></p></td>
<td><p>–F–E–</p></td>
<td><p><em>str</em></p></td>
<td><p>Character data file format (<cite>‘nexus’</cite> or <cite>‘csv’</cite>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tensor_format</span></code></p></td>
<td><p>FTEP–</p></td>
<td><p><em>str</em></p></td>
<td><p>Training tensor data file format (<cite>‘hdf5’</cite> or <cite>‘csv’</cite>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">save_phyenc_csv</span></code></p></td>
<td><p>–F–––</p></td>
<td><p><em>str</em></p></td>
<td><p>Save intermediate phylogenetic tensor encodings to file?</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">trn_objective</span></code></p></td>
<td><p>––TEP</p></td>
<td><p><em>str</em></p></td>
<td><p>Training objective for network (<cite>‘param_est’</cite>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tree_width</span></code></p></td>
<td><p>––TEP</p></td>
<td><p><em>int</em></p></td>
<td><p>Number of columns in compact phylogenetic vector + states tensor</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">num_epochs</span></code></p></td>
<td><p>––TEP</p></td>
<td><p><em>int</em></p></td>
<td><p>Number of training iterations</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code></p></td>
<td><p>––TEP</p></td>
<td><p><em>int</em></p></td>
<td><p>Number of training examples per batch with all batches visited during each epoch</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">prop_test</span></code></p></td>
<td><p>––T––</p></td>
<td><p><em>float</em></p></td>
<td><p>Proportion of training examples in test dataset</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">prop_val</span></code></p></td>
<td><p>––T––</p></td>
<td><p><em>float</em></p></td>
<td><p>Proportion of training examples in validation dataset</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">prop_cal</span></code></p></td>
<td><p>––T––</p></td>
<td><p><em>float</em></p></td>
<td><p>Proportion of training examples in calibration dataset</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cpi_coverage</span></code></p></td>
<td><p>––T––</p></td>
<td><p><em>float</em></p></td>
<td><p>Percent of training examples where CPI contains (covers) true parameter value</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cpi_asymmetric</span></code></p></td>
<td><p>––T––</p></td>
<td><p><em>str</em></p></td>
<td><p>Use symmetric one-sided (False) or asymmetric two-sided (True) calibration conformity scores</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">loss</span></code></p></td>
<td><p>––T––</p></td>
<td><p><em>str</em></p></td>
<td><p>Loss function used to assess neural network fit</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">optimizer</span></code></p></td>
<td><p>––T––</p></td>
<td><p><em>str</em></p></td>
<td><p>Optimizer used to minimize loss score of network during training</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">metrics</span></code></p></td>
<td><p>––T––</p></td>
<td><p><em>str[]</em></p></td>
<td><p>Metrics to log during training history</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">est_prefix</span></code></p></td>
<td><p>–––EP</p></td>
<td><p><em>str</em></p></td>
<td><p>Name of prefix for new (biological) dataset to estimate</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plot_train_color</span></code></p></td>
<td><p>––––P</p></td>
<td><p><em>str</em></p></td>
<td><p>Plot color for training data elements</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plot_test_color</span></code></p></td>
<td><p>––––P</p></td>
<td><p><em>str</em></p></td>
<td><p>Plot color for test data elements</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plot_val_color</span></code></p></td>
<td><p>––––P</p></td>
<td><p><em>str</em></p></td>
<td><p>Plot color for validation data elements</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plot_aux_color</span></code></p></td>
<td><p>––––P</p></td>
<td><p><em>str</em></p></td>
<td><p>Plot color for auxiliary data elements</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plot_label_color</span></code></p></td>
<td><p>––––P</p></td>
<td><p><em>str</em></p></td>
<td><p>Plot color for label (parameter) elements</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plot_est_color</span></code></p></td>
<td><p>––––P</p></td>
<td><p><em>str</em></p></td>
<td><p>Plot color for estimates (for new dataset) elements</p></td>
</tr>
</tbody>
</table>
</section>
<section id="special-settings">
<span id="id2"></span><h2>Special settings<a class="headerlink" href="#special-settings" title="Permalink to this heading"></a></h2>
<p>This section provides detailed descriptions for several settings that
are not intuitive to specify, but very powerful when used correctly.</p>
<section id="step">
<span id="setting-description-step"></span><h3><code class="docutils literal notranslate"><span class="pre">step</span></code><a class="headerlink" href="#step" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">step</span></code> setting controls which steps should be applied.
Each pipeline step is represented by a capital letter:
<code class="docutils literal notranslate"><span class="pre">S</span></code> for <a class="reference internal" href="pipeline.html#simulate"><span class="std std-ref">Simulate</span></a>, <code class="docutils literal notranslate"><span class="pre">F</span></code> for <a class="reference internal" href="pipeline.html#format"><span class="std std-ref">Format</span></a>, <code class="docutils literal notranslate"><span class="pre">T</span></code> for <a class="reference internal" href="pipeline.html#train"><span class="std std-ref">Train</span></a>,
<code class="docutils literal notranslate"><span class="pre">E</span></code> for <a class="reference internal" href="pipeline.html#estimate"><span class="std std-ref">Estimate</span></a>, <code class="docutils literal notranslate"><span class="pre">P</span></code> for <a class="reference internal" href="pipeline.html#plot"><span class="std std-ref">Plot</span></a>, and <code class="docutils literal notranslate"><span class="pre">A</span></code> for all steps.</p>
<p>For example, the following two commands are equivalent</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run_phyddle.py<span class="w"> </span>--step<span class="w"> </span>A
./run_phyddle.py<span class="w"> </span>--step<span class="w"> </span>SFTEP
</pre></div>
</div>
<p>whereas calling</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run_phyddle.py<span class="w"> </span>--step<span class="w"> </span>SF
</pre></div>
</div>
<p>commands phyddle to perform the Simulate and Format steps, but not the Train,
Estimate, or Plot steps.</p>
</section>
<section id="proj">
<span id="setting-description-proj"></span><h3><code class="docutils literal notranslate"><span class="pre">proj</span></code><a class="headerlink" href="#proj" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">proj</span></code> setting controls how project names are assigned to different
pipeline steps. Typically, <code class="docutils literal notranslate"><span class="pre">proj</span></code> is provided a single project name that is
shared across all pipeline steps. For example, calling</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run_phyddle.py<span class="w"> </span>--proj<span class="w"> </span>my_project
</pre></div>
</div>
<p>causes all results from this phyddle analysis to be stored in a subdirectory
called <code class="docutils literal notranslate"><span class="pre">my_project</span></code>. The <code class="docutils literal notranslate"><span class="pre">proj</span></code> setting can also be used to specify
different project names for individual pipeline steps. For example, calling</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./run_phyddle.py<span class="w"> </span>--proj<span class="w"> </span>my_project,E:new_estimate,P:new_plot
</pre></div>
</div>
<p>would use <code class="docutils literal notranslate"><span class="pre">new_estimate</span></code> as the project name for the <code class="docutils literal notranslate"><span class="pre">E</span></code> step (Estimate),
<code class="docutils literal notranslate"><span class="pre">new_plot</span></code> for the <code class="docutils literal notranslate"><span class="pre">P</span></code> step (Plot), and <code class="docutils literal notranslate"><span class="pre">my_project</span></code> for all other steps.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pipeline.html" class="btn btn-neutral float-right" title="Pipeline" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>