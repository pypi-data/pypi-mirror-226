{"version":3,"file":"lib_index_js.d04662124e1564489298.js","mappings":"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","sources":["webpack://voila_topbar/./src/index.tsx","webpack://voila_topbar/./src/kernelStatus.tsx","webpack://voila_topbar/./src/widget.tsx"],"sourcesContent":["import {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\nimport { IThemeManager } from '@jupyterlab/apputils';\nimport { ReactWidget } from '@jupyterlab/ui-components';\nimport { IJupyterWidgetRegistry } from '@jupyter-widgets/base';\nimport { Kernel } from '@jupyterlab/services';\nimport { ITopbarConfig, TopbarElement } from './widget';\nimport * as React from 'react';\nimport { PageConfig } from '@jupyterlab/coreutils';\n/**\n * Initialization data for the voila_topbar extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'voila_topbar:plugin',\n  description: 'A Voila extension',\n  autoStart: true,\n  requires: [IThemeManager, IJupyterWidgetRegistry],\n  activate: (app: JupyterFrontEnd, themeManager: IThemeManager) => {\n    if (app.name !== 'Voila') {\n      return;\n    }\n    const kernelConnection = (app as any)?.widgetManager?.kernel as\n      | Kernel.IKernelConnection\n      | undefined;\n    const extensionConfig = JSON.parse(PageConfig.getOption('extensionConfig'));\n    const config = extensionConfig['voila_topbar'] as ITopbarConfig | undefined;\n    console.log('config', config);\n    \n    const widget = ReactWidget.create(\n      <TopbarElement\n        config={config}\n        themeManager={themeManager}\n        kernelConnection={kernelConnection}\n      />\n    );\n    widget.id = 'voila-topbar-element';\n    app.shell.add(widget, 'top');\n  }\n};\n\nexport default plugin;\n","/*\n * Copyright (c) Jupyter Development Team.\n * Distributed under the terms of the Modified BSD License.\n */\n\nimport React from 'react';\nexport namespace ProgressCircle {\n  /**\n   * Props for the ProgressBar.\n   */\n  export interface IProps {\n    /**\n     * The current progress percentage, from 0 to 100\n     */\n    progress: number;\n    /**\n     * The aria-label for the widget\n     */\n    label?: string;\n    /**\n     * Element width\n     */\n    width?: number;\n    /**\n     * Element height\n     */\n    height?: number;\n  }\n}\n\nexport function ProgressCircle(props: ProgressCircle.IProps): JSX.Element {\n  const radius = 104;\n  const d = (progress: number): string => {\n    const angle = Math.max(progress * 3.6, 0.1);\n    const rad = (angle * Math.PI) / 180,\n      x = Math.sin(rad) * radius,\n      y = Math.cos(rad) * -radius,\n      mid = angle < 180 ? 1 : 0,\n      shape =\n        `M 0 0 v -${radius} A ${radius} ${radius} 1 ` +\n        mid +\n        ' 0 ' +\n        x.toFixed(4) +\n        ' ' +\n        y.toFixed(4) +\n        ' z';\n    return shape;\n  };\n  return (\n    <div\n      className={'jp-Statusbar-ProgressCircle'}\n      role=\"progressbar\"\n      aria-label={props.label || 'Unlabelled progress circle'}\n      aria-valuemin={0}\n      aria-valuemax={100}\n      aria-valuenow={props.progress}\n      style={{ margin: 'auto' }}\n    >\n      <svg viewBox=\"0 0 250 250\">\n        <circle\n          cx=\"125\"\n          cy=\"125\"\n          r={`${radius}`}\n          strokeWidth=\"20\"\n          fill=\"none\"\n        />\n        <path\n          transform=\"translate(125,125) scale(.9)\"\n          d={d(props.progress)}\n          fill={'#f0f8ff'}\n        />\n      </svg>\n    </div>\n  );\n}\n","import { IThemeManager } from '@jupyterlab/apputils';\nimport * as React from 'react';\nimport { Kernel } from '@jupyterlab/services';\nimport { ProgressCircle } from './kernelStatus';\n\nexport interface ITopbarConfig {\n  background?: string;\n  textColor?: string;\n  title?: string;\n  icon?: string;\n  kernelActivity?: boolean;\n  themeToggle?: boolean;\n}\ninterface IProps {\n  config?: ITopbarConfig;\n  themeManager: IThemeManager;\n  kernelConnection?: Kernel.IKernelConnection;\n}\n\nexport function TopbarElement(props: IProps): JSX.Element {\n  const config = React.useMemo((): ITopbarConfig => {\n    if (props.config) {\n      return props.config;\n    }\n    return {\n      background: 'var(--jp-layout-color2)',\n      title: 'Voila Dashboard',\n      themeToggle: true,\n      kernelActivity: true,\n      textColor: 'var(--jp-ui-font-color1)'\n    };\n  }, [props.config]);\n  const [themeOptions, setThemeOptions] = React.useState<string[]>([\n    ...props.themeManager.themes\n  ]);\n  const [kernelBusy, setkernelBusy] = React.useState<0 | 100>(100);\n  React.useEffect(() => {\n    const cb = (sender: IThemeManager, args: any) => {\n      if (args.newValue.length > 0) {\n        return;\n      }\n      setThemeOptions([...props.themeManager.themes]);\n    };\n    props.themeManager.themeChanged.connect(cb);\n    const kernelCb = (sender: any, status: any) => {\n      const progress = status === 'busy' ? 0 : 100;\n      setkernelBusy(progress);\n    };\n    if (props.kernelConnection) {\n      props.kernelConnection.statusChanged.connect(kernelCb);\n    }\n\n    return () => {\n      props.themeManager.themeChanged.disconnect(cb);\n      if (props.kernelConnection) {\n        props.kernelConnection.statusChanged.disconnect(kernelCb);\n      }\n    };\n  }, [props.themeManager, props.kernelConnection]);\n\n  const onThemeChange = React.useCallback(\n    (e: React.ChangeEvent<HTMLSelectElement>) => {\n      const theme = e.currentTarget?.value;\n      if (theme) {\n        props.themeManager.setTheme(theme);\n      }\n    },\n    [props.themeManager]\n  );\n\n  const themeSelect = React.useMemo(() => {\n    return (\n      <select\n        className=\"voila-topbar-theme\"\n        onChange={onThemeChange}\n        style={{ color: config.textColor ?? 'var(--jp-ui-font-color1)' }}\n      >\n        {themeOptions.map(el => {\n          return (\n            <option\n              key={el}\n              value={el}\n              style={{\n                background: config.background ?? 'var(--jp-layout-color2)'\n              }}\n            >\n              {el}\n            </option>\n          );\n        })}\n      </select>\n    );\n  }, [themeOptions, onThemeChange, config.textColor, config.background]);\n  return (\n    <div\n      className=\"voila-topbar\"\n      style={{ background: config.background ?? 'var(--jp-layout-color2)' }}\n    >\n      <div\n        className=\"voila-topbar-title\"\n        style={{ color: config.textColor ?? 'var(--jp-ui-font-color1)' }}\n      >\n        {config.title}\n      </div>\n      {themeSelect}\n      <ProgressCircle progress={kernelBusy} width={50} height={50} />\n    </div>\n  );\n}\n"],"names":[],"sourceRoot":""}