define(["module","@jupyter-widgets/base"],((t,e)=>(()=>{"use strict";var n={146:t=>{t.exports=e},325:e=>{e.exports=t},50:(t,e,n)=>{n.r(e),n.d(e,{VERSION:()=>i,after:()=>Fe,all:()=>tn,allKeys:()=>gt,any:()=>en,assign:()=>Ft,before:()=>Le,bind:()=>we,bindAll:()=>Oe,chain:()=>ye,chunk:()=>Un,clone:()=>Ut,collect:()=>Ge,compact:()=>Mn,compose:()=>ke,constant:()=>Y,contains:()=>nn,countBy:()=>mn,create:()=>Ct,debounce:()=>Ie,default:()=>Wn,defaults:()=>Lt,defer:()=>Ee,delay:()=>Me,detect:()=>$e,difference:()=>Tn,drop:()=>On,each:()=>Je,escape:()=>ae,every:()=>tn,extend:()=>kt,extendOwn:()=>Ft,filter:()=>Ye,find:()=>$e,findIndex:()=>De,findKey:()=>Ce,findLastIndex:()=>Ve,findWhere:()=>Ke,first:()=>xn,flatten:()=>En,foldl:()=>Qe,foldr:()=>Xe,forEach:()=>Je,functions:()=>Bt,get:()=>Wt,groupBy:()=>vn,has:()=>zt,head:()=>xn,identity:()=>$t,include:()=>nn,includes:()=>nn,indexBy:()=>gn,indexOf:()=>We,initial:()=>An,inject:()=>Qe,intersection:()=>kn,invert:()=>It,invoke:()=>rn,isArguments:()=>H,isArray:()=>K,isArrayBuffer:()=>C,isBoolean:()=>E,isDataView:()=>$,isDate:()=>k,isElement:()=>T,isEmpty:()=>lt,isEqual:()=>vt,isError:()=>L,isFinite:()=>Q,isFunction:()=>V,isMap:()=>xt,isMatch:()=>st,isNaN:()=>X,isNull:()=>S,isNumber:()=>N,isObject:()=>O,isRegExp:()=>F,isSet:()=>St,isString:()=>B,isSymbol:()=>R,isTypedArray:()=>it,isUndefined:()=>M,isWeakMap:()=>Ot,isWeakSet:()=>Mt,iteratee:()=>Qt,keys:()=>ut,last:()=>Sn,lastIndexOf:()=>ze,map:()=>Ge,mapObject:()=>Yt,matcher:()=>Kt,matches:()=>Kt,max:()=>un,memoize:()=>Se,methods:()=>Bt,min:()=>ln,mixin:()=>Vn,negate:()=>Ne,noop:()=>Zt,now:()=>re,object:()=>Rn,omit:()=>wn,once:()=>Re,pairs:()=>Tt,partial:()=>je,partition:()=>yn,pick:()=>jn,pluck:()=>on,property:()=>Jt,propertyOf:()=>te,random:()=>ne,range:()=>Cn,reduce:()=>Qe,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>On,restArguments:()=>x,result:()=>ve,sample:()=>fn,select:()=>Ye,shuffle:()=>hn,size:()=>_n,some:()=>en,sortBy:()=>pn,sortedIndex:()=>Pe,tail:()=>On,take:()=>xn,tap:()=>Dt,template:()=>de,templateSettings:()=>le,throttle:()=>Te,times:()=>ee,toArray:()=>cn,toPath:()=>Vt,transpose:()=>Fn,unescape:()=>ue,union:()=>Nn,uniq:()=>Bn,unique:()=>Bn,uniqueId:()=>me,unzip:()=>Fn,values:()=>Et,where:()=>an,without:()=>In,wrap:()=>Be,zip:()=>Ln});var r={};n.r(r),n.d(r,{VERSION:()=>i,after:()=>Fe,all:()=>tn,allKeys:()=>gt,any:()=>en,assign:()=>Ft,before:()=>Le,bind:()=>we,bindAll:()=>Oe,chain:()=>ye,chunk:()=>Un,clone:()=>Ut,collect:()=>Ge,compact:()=>Mn,compose:()=>ke,constant:()=>Y,contains:()=>nn,countBy:()=>mn,create:()=>Ct,debounce:()=>Ie,default:()=>Pn,defaults:()=>Lt,defer:()=>Ee,delay:()=>Me,detect:()=>$e,difference:()=>Tn,drop:()=>On,each:()=>Je,escape:()=>ae,every:()=>tn,extend:()=>kt,extendOwn:()=>Ft,filter:()=>Ye,find:()=>$e,findIndex:()=>De,findKey:()=>Ce,findLastIndex:()=>Ve,findWhere:()=>Ke,first:()=>xn,flatten:()=>En,foldl:()=>Qe,foldr:()=>Xe,forEach:()=>Je,functions:()=>Bt,get:()=>Wt,groupBy:()=>vn,has:()=>zt,head:()=>xn,identity:()=>$t,include:()=>nn,includes:()=>nn,indexBy:()=>gn,indexOf:()=>We,initial:()=>An,inject:()=>Qe,intersection:()=>kn,invert:()=>It,invoke:()=>rn,isArguments:()=>H,isArray:()=>K,isArrayBuffer:()=>C,isBoolean:()=>E,isDataView:()=>$,isDate:()=>k,isElement:()=>T,isEmpty:()=>lt,isEqual:()=>vt,isError:()=>L,isFinite:()=>Q,isFunction:()=>V,isMap:()=>xt,isMatch:()=>st,isNaN:()=>X,isNull:()=>S,isNumber:()=>N,isObject:()=>O,isRegExp:()=>F,isSet:()=>St,isString:()=>B,isSymbol:()=>R,isTypedArray:()=>it,isUndefined:()=>M,isWeakMap:()=>Ot,isWeakSet:()=>Mt,iteratee:()=>Qt,keys:()=>ut,last:()=>Sn,lastIndexOf:()=>ze,map:()=>Ge,mapObject:()=>Yt,matcher:()=>Kt,matches:()=>Kt,max:()=>un,memoize:()=>Se,methods:()=>Bt,min:()=>ln,mixin:()=>Vn,negate:()=>Ne,noop:()=>Zt,now:()=>re,object:()=>Rn,omit:()=>wn,once:()=>Re,pairs:()=>Tt,partial:()=>je,partition:()=>yn,pick:()=>jn,pluck:()=>on,property:()=>Jt,propertyOf:()=>te,random:()=>ne,range:()=>Cn,reduce:()=>Qe,reduceRight:()=>Xe,reject:()=>Ze,rest:()=>On,restArguments:()=>x,result:()=>ve,sample:()=>fn,select:()=>Ye,shuffle:()=>hn,size:()=>_n,some:()=>en,sortBy:()=>pn,sortedIndex:()=>Pe,tail:()=>On,take:()=>xn,tap:()=>Dt,template:()=>de,templateSettings:()=>le,throttle:()=>Te,times:()=>ee,toArray:()=>cn,toPath:()=>Vt,transpose:()=>Fn,unescape:()=>ue,union:()=>Nn,uniq:()=>Bn,unique:()=>Bn,uniqueId:()=>me,unzip:()=>Fn,values:()=>Et,where:()=>an,without:()=>In,wrap:()=>Be,zip:()=>Ln});var i="1.13.6",o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},a=Array.prototype,u=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,s=a.push,c=a.slice,f=u.toString,h=u.hasOwnProperty,p="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,v=Array.isArray,g=Object.keys,m=Object.create,y=p&&ArrayBuffer.isView,_=isNaN,b=isFinite,j=!{toString:null}.propertyIsEnumerable("toString"),w=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],A=Math.pow(2,53)-1;function x(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=r,t.apply(this,o)}}function O(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function S(t){return null===t}function M(t){return void 0===t}function E(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)}function T(t){return!(!t||1!==t.nodeType)}function I(t){var e="[object "+t+"]";return function(t){return f.call(t)===e}}const B=I("String"),N=I("Number"),k=I("Date"),F=I("RegExp"),L=I("Error"),R=I("Symbol"),C=I("ArrayBuffer");var U=I("Function"),D=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof D&&(U=function(t){return"function"==typeof t||!1});const V=U,P=I("Object");var q=d&&P(new DataView(new ArrayBuffer(8))),W="undefined"!=typeof Map&&P(new Map),z=I("DataView");const $=q?function(t){return null!=t&&V(t.getInt8)&&C(t.buffer)}:z,K=v||I("Array");function J(t,e){return null!=t&&h.call(t,e)}var G=I("Arguments");!function(){G(arguments)||(G=function(t){return J(t,"callee")})}();const H=G;function Q(t){return!R(t)&&b(t)&&!isNaN(parseFloat(t))}function X(t){return N(t)&&_(t)}function Y(t){return function(){return t}}function Z(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=A}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt("byteLength"),nt=Z(et);var rt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const it=p?function(t){return y?y(t)&&!$(t):nt(t)&&rt.test(f.call(t))}:Y(!1),ot=tt("length");function at(t,e){e=function(t){for(var e={},n=t.length,r=0;r<n;++r)e[t[r]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=w.length,r=t.constructor,i=V(r)&&r.prototype||u,o="constructor";for(J(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=w[n])in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function ut(t){if(!O(t))return[];if(g)return g(t);var e=[];for(var n in t)J(t,n)&&e.push(n);return j&&at(t,e),e}function lt(t){if(null==t)return!0;var e=ot(t);return"number"==typeof e&&(K(t)||B(t)||H(t))?0===e:0===ot(ut(t))}function st(t,e){var n=ut(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0}function ct(t){return t instanceof ct?t:this instanceof ct?void(this._wrapped=t):new ct(t)}function ft(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}ct.VERSION=i,ct.prototype.value=function(){return this._wrapped},ct.prototype.valueOf=ct.prototype.toJSON=ct.prototype.value,ct.prototype.toString=function(){return String(this._wrapped)};var ht="[object DataView]";function pt(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&dt(t,e,n,r)}function dt(t,e,n,r){t instanceof ct&&(t=t._wrapped),e instanceof ct&&(e=e._wrapped);var i=f.call(t);if(i!==f.call(e))return!1;if(q&&"[object Object]"==i&&$(t)){if(!$(e))return!1;i=ht}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return l.valueOf.call(t)===l.valueOf.call(e);case"[object ArrayBuffer]":case ht:return dt(ft(t),ft(e),n,r)}var o="[object Array]"===i;if(!o&&it(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,u=e.constructor;if(a!==u&&!(V(a)&&a instanceof a&&V(u)&&u instanceof u)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var s=(n=n||[]).length;s--;)if(n[s]===t)return r[s]===e;if(n.push(t),r.push(e),o){if((s=t.length)!==e.length)return!1;for(;s--;)if(!pt(t[s],e[s],n,r))return!1}else{var c,h=ut(t);if(s=h.length,ut(e).length!==s)return!1;for(;s--;)if(!J(e,c=h[s])||!pt(t[c],e[c],n,r))return!1}return n.pop(),r.pop(),!0}function vt(t,e){return pt(t,e)}function gt(t){if(!O(t))return[];var e=[];for(var n in t)e.push(n);return j&&at(t,e),e}function mt(t){var e=ot(t);return function(n){if(null==n)return!1;var r=gt(n);if(ot(r))return!1;for(var i=0;i<e;i++)if(!V(n[t[i]]))return!1;return t!==wt||!V(n[yt])}}var yt="forEach",_t=["clear","delete"],bt=["get","has","set"],jt=_t.concat(yt,bt),wt=_t.concat(bt),At=["add"].concat(_t,yt,"has");const xt=W?mt(jt):I("Map"),Ot=W?mt(wt):I("WeakMap"),St=W?mt(At):I("Set"),Mt=I("WeakSet");function Et(t){for(var e=ut(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function Tt(t){for(var e=ut(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r}function It(t){for(var e={},n=ut(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function Bt(t){var e=[];for(var n in t)V(t[n])&&e.push(n);return e.sort()}function Nt(t,e){return function(n){var r=arguments.length;if(e&&(n=Object(n)),r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=t(o),u=a.length,l=0;l<u;l++){var s=a[l];e&&void 0!==n[s]||(n[s]=o[s])}return n}}const kt=Nt(gt),Ft=Nt(ut),Lt=Nt(gt,!0);function Rt(t){if(!O(t))return{};if(m)return m(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Ct(t,e){var n=Rt(t);return e&&Ft(n,e),n}function Ut(t){return O(t)?K(t)?t.slice():kt({},t):t}function Dt(t,e){return e(t),t}function Vt(t){return K(t)?t:[t]}function Pt(t){return ct.toPath(t)}function qt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function Wt(t,e,n){var r=qt(t,Pt(e));return M(r)?n:r}function zt(t,e){for(var n=(e=Pt(e)).length,r=0;r<n;r++){var i=e[r];if(!J(t,i))return!1;t=t[i]}return!!n}function $t(t){return t}function Kt(t){return t=Ft({},t),function(e){return st(e,t)}}function Jt(t){return t=Pt(t),function(e){return qt(e,t)}}function Gt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}}function Ht(t,e,n){return null==t?$t:V(t)?Gt(t,e,n):O(t)&&!K(t)?Kt(t):Jt(t)}function Qt(t,e){return Ht(t,e,1/0)}function Xt(t,e,n){return ct.iteratee!==Qt?ct.iteratee(t,e):Ht(t,e,n)}function Yt(t,e,n){e=Xt(e,n);for(var r=ut(t),i=r.length,o={},a=0;a<i;a++){var u=r[a];o[u]=e(t[u],u,t)}return o}function Zt(){}function te(t){return null==t?Zt:function(e){return Wt(t,e)}}function ee(t,e,n){var r=Array(Math.max(0,t));e=Gt(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r}function ne(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}ct.toPath=Vt,ct.iteratee=Qt;const re=Date.now||function(){return(new Date).getTime()};function ie(t){var e=function(e){return t[e]},n="(?:"+ut(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}}const oe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ae=ie(oe),ue=ie(It(oe)),le=ct.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var se=/(.)^/,ce={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},fe=/\\|'|\r|\n|\u2028|\u2029/g;function he(t){return"\\"+ce[t]}var pe=/^\s*(\w|\$)+\s*$/;function de(t,e,n){!e&&n&&(e=n),e=Lt({},e,ct.templateSettings);var r=RegExp([(e.escape||se).source,(e.interpolate||se).source,(e.evaluate||se).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,(function(e,n,r,a,u){return o+=t.slice(i,u).replace(fe,he),i=u+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e})),o+="';\n";var a,u=e.variable;if(u){if(!pe.test(u))throw new Error("variable is not a bare identifier: "+u)}else o="with(obj||{}){\n"+o+"}\n",u="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(u,"_",o)}catch(t){throw t.source=o,t}var l=function(t){return a.call(this,t,ct)};return l.source="function("+u+"){\n"+o+"}",l}function ve(t,e,n){var r=(e=Pt(e)).length;if(!r)return V(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=V(o)?o.call(t):o}return t}var ge=0;function me(t){var e=++ge+"";return t?t+e:e}function ye(t){var e=ct(t);return e._chain=!0,e}function _e(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=Rt(t.prototype),a=t.apply(o,i);return O(a)?a:o}var be=x((function(t,e){var n=be.placeholder,r=function(){for(var i=0,o=e.length,a=Array(o),u=0;u<o;u++)a[u]=e[u]===n?arguments[i++]:e[u];for(;i<arguments.length;)a.push(arguments[i++]);return _e(t,r,this,this,a)};return r}));be.placeholder=ct;const je=be,we=x((function(t,e,n){if(!V(t))throw new TypeError("Bind must be called on a function");var r=x((function(i){return _e(t,r,e,this,n.concat(i))}));return r})),Ae=Z(ot);function xe(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,a=ot(t);o<a;o++){var u=t[o];if(Ae(u)&&(K(u)||H(u)))if(e>1)xe(u,e-1,n,r),i=r.length;else for(var l=0,s=u.length;l<s;)r[i++]=u[l++];else n||(r[i++]=u)}return r}const Oe=x((function(t,e){var n=(e=xe(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=we(t[r],t)}return t}));function Se(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return J(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n}const Me=x((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Ee=je(Me,ct,1);function Te(t,e,n){var r,i,o,a,u=0;n||(n={});var l=function(){u=!1===n.leading?0:re(),r=null,a=t.apply(i,o),r||(i=o=null)},s=function(){var s=re();u||!1!==n.leading||(u=s);var c=e-(s-u);return i=this,o=arguments,c<=0||c>e?(r&&(clearTimeout(r),r=null),u=s,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,c)),a};return s.cancel=function(){clearTimeout(r),u=0,r=i=o=null},s}function Ie(t,e,n){var r,i,o,a,u,l=function(){var s=re()-i;e>s?r=setTimeout(l,e-s):(r=null,n||(a=t.apply(u,o)),r||(o=u=null))},s=x((function(s){return u=this,o=s,i=re(),r||(r=setTimeout(l,e),n&&(a=t.apply(u,o))),a}));return s.cancel=function(){clearTimeout(r),r=o=u=null},s}function Be(t,e){return je(e,t)}function Ne(t){return function(){return!t.apply(this,arguments)}}function ke(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}}function Fe(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Le(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Re=je(Le,2);function Ce(t,e,n){e=Xt(e,n);for(var r,i=ut(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r}function Ue(t){return function(e,n,r){n=Xt(n,r);for(var i=ot(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(n(e[o],o,e))return o;return-1}}const De=Ue(1),Ve=Ue(-1);function Pe(t,e,n,r){for(var i=(n=Xt(n,r,1))(e),o=0,a=ot(t);o<a;){var u=Math.floor((o+a)/2);n(t[u])<i?o=u+1:a=u}return o}function qe(t,e,n){return function(r,i,o){var a=0,u=ot(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+u,a):u=o>=0?Math.min(o+1,u):o+u+1;else if(n&&o&&u)return r[o=n(r,i)]===i?o:-1;if(i!=i)return(o=e(c.call(r,a,u),X))>=0?o+a:-1;for(o=t>0?a:u-1;o>=0&&o<u;o+=t)if(r[o]===i)return o;return-1}}const We=qe(1,De,Pe),ze=qe(-1,Ve);function $e(t,e,n){var r=(Ae(t)?De:Ce)(t,e,n);if(void 0!==r&&-1!==r)return t[r]}function Ke(t,e){return $e(t,Kt(e))}function Je(t,e,n){var r,i;if(e=Gt(e,n),Ae(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=ut(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t}function Ge(t,e,n){e=Xt(e,n);for(var r=!Ae(t)&&ut(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var u=r?r[a]:a;o[a]=e(t[u],u,t)}return o}function He(t){return function(e,n,r,i){var o=arguments.length>=3;return function(e,n,r,i){var o=!Ae(e)&&ut(e),a=(o||e).length,u=t>0?0:a-1;for(i||(r=e[o?o[u]:u],u+=t);u>=0&&u<a;u+=t){var l=o?o[u]:u;r=n(r,e[l],l,e)}return r}(e,Gt(n,i,4),r,o)}}const Qe=He(1),Xe=He(-1);function Ye(t,e,n){var r=[];return e=Xt(e,n),Je(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}function Ze(t,e,n){return Ye(t,Ne(Xt(e)),n)}function tn(t,e,n){e=Xt(e,n);for(var r=!Ae(t)&&ut(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0}function en(t,e,n){e=Xt(e,n);for(var r=!Ae(t)&&ut(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1}function nn(t,e,n,r){return Ae(t)||(t=Et(t)),("number"!=typeof n||r)&&(n=0),We(t,e,n)>=0}const rn=x((function(t,e,n){var r,i;return V(e)?i=e:(e=Pt(e),r=e.slice(0,-1),e=e[e.length-1]),Ge(t,(function(t){var o=i;if(!o){if(r&&r.length&&(t=qt(t,r)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function on(t,e){return Ge(t,Jt(e))}function an(t,e){return Ye(t,Kt(e))}function un(t,e,n){var r,i,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,l=(t=Ae(t)?t:Et(t)).length;u<l;u++)null!=(r=t[u])&&r>o&&(o=r);else e=Xt(e,n),Je(t,(function(t,n,r){((i=e(t,n,r))>a||i===-1/0&&o===-1/0)&&(o=t,a=i)}));return o}function ln(t,e,n){var r,i,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var u=0,l=(t=Ae(t)?t:Et(t)).length;u<l;u++)null!=(r=t[u])&&r<o&&(o=r);else e=Xt(e,n),Je(t,(function(t,n,r){((i=e(t,n,r))<a||i===1/0&&o===1/0)&&(o=t,a=i)}));return o}var sn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function cn(t){return t?K(t)?c.call(t):B(t)?t.match(sn):Ae(t)?Ge(t,$t):Et(t):[]}function fn(t,e,n){if(null==e||n)return Ae(t)||(t=Et(t)),t[ne(t.length-1)];var r=cn(t),i=ot(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var u=ne(a,o),l=r[a];r[a]=r[u],r[u]=l}return r.slice(0,e)}function hn(t){return fn(t,1/0)}function pn(t,e,n){var r=0;return e=Xt(e,n),on(Ge(t,(function(t,n,i){return{value:t,index:r++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index})),"value")}function dn(t,e){return function(n,r,i){var o=e?[[],[]]:{};return r=Xt(r,i),Je(n,(function(e,i){var a=r(e,i,n);t(o,e,a)})),o}}const vn=dn((function(t,e,n){J(t,n)?t[n].push(e):t[n]=[e]})),gn=dn((function(t,e,n){t[n]=e})),mn=dn((function(t,e,n){J(t,n)?t[n]++:t[n]=1})),yn=dn((function(t,e,n){t[n?0:1].push(e)}),!0);function _n(t){return null==t?0:Ae(t)?t.length:ut(t).length}function bn(t,e,n){return e in n}const jn=x((function(t,e){var n={},r=e[0];if(null==t)return n;V(r)?(e.length>1&&(r=Gt(r,e[1])),e=gt(t)):(r=bn,e=xe(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],u=t[a];r(u,a,t)&&(n[a]=u)}return n})),wn=x((function(t,e){var n,r=e[0];return V(r)?(r=Ne(r),e.length>1&&(n=e[1])):(e=Ge(xe(e,!1,!1),String),r=function(t,n){return!nn(e,n)}),jn(t,r,n)}));function An(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function xn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:An(t,t.length-e)}function On(t,e,n){return c.call(t,null==e||n?1:e)}function Sn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:On(t,Math.max(0,t.length-e))}function Mn(t){return Ye(t,Boolean)}function En(t,e){return xe(t,e,!1)}const Tn=x((function(t,e){return e=xe(e,!0,!0),Ye(t,(function(t){return!nn(e,t)}))})),In=x((function(t,e){return Tn(t,e)}));function Bn(t,e,n,r){E(e)||(r=n,n=e,e=!1),null!=n&&(n=Xt(n,r));for(var i=[],o=[],a=0,u=ot(t);a<u;a++){var l=t[a],s=n?n(l,a,t):l;e&&!n?(a&&o===s||i.push(l),o=s):n?nn(o,s)||(o.push(s),i.push(l)):nn(i,l)||i.push(l)}return i}const Nn=x((function(t){return Bn(xe(t,!0,!0))}));function kn(t){for(var e=[],n=arguments.length,r=0,i=ot(t);r<i;r++){var o=t[r];if(!nn(e,o)){var a;for(a=1;a<n&&nn(arguments[a],o);a++);a===n&&e.push(o)}}return e}function Fn(t){for(var e=t&&un(t,ot).length||0,n=Array(e),r=0;r<e;r++)n[r]=on(t,r);return n}const Ln=x(Fn);function Rn(t,e){for(var n={},r=0,i=ot(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n}function Cn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i}function Un(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(c.call(t,r,r+=e));return n}function Dn(t,e){return t._chain?ct(e).chain():e}function Vn(t){return Je(Bt(t),(function(e){var n=ct[e]=t[e];ct.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),Dn(this,n.apply(ct,t))}})),ct}Je(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=a[t];ct.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),Dn(this,n)}})),Je(["concat","join","slice"],(function(t){var e=a[t];ct.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Dn(this,t)}}));const Pn=ct;var qn=Vn(r);qn._=qn;const Wn=qn}},r={};function i(t){var e=r[t];if(void 0!==e)return e.exports;var o=r[t]={exports:{}};return n[t](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="";var o={};return(()=>{var t=i(325);const e=new URL(t.uri,document.location);e.pathname=e.pathname.slice(0,e.pathname.lastIndexOf("/")+1),i.p=`${e.origin}${e.pathname}`})(),(()=>{i.r(o),i.d(o,{AladinModel:()=>a,AladinView:()=>l});var t=i(146);const e=JSON.parse('{"u2":"ipyaladin","i8":"0.2.5"}');i(50);const n=(t,e=!0,n="text/javascript")=>new Promise(((r,i)=>{try{const o=document.createElement("script");o.type=n,o.async=e,o.src=t,o.addEventListener("load",(t=>{r({status:!0})})),o.addEventListener("error",(t=>{i({status:!1,message:"Failed to load the script ï¼„{FILE_URL}"})})),document.getElementsByTagName("head")[0].appendChild(o)}catch(t){i(t)}}));let r=n("https://code.jquery.com/jquery-3.6.1.min.js").then((()=>n("https://aladin.u-strasbg.fr/AladinLite/api/v3/latest/aladin.js"))).then((async()=>{await A.init}));class a extends t.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"AladinModel",_view_name:"AladinView",_model_module:e.u2,_view_module:e.u2,_model_module_version:e.i8,_view_module_version:e.i8}}}let u=0;class l extends t.DOMWidgetView{render(){r.then((()=>{this.fov_js=!1,this.fov_py=!1,this.target_js=!1,this.target_py=!1,this.div&&this.el.remove(this.div),this.div=document.createElement("div"),this.div.id="aladin-lite-div"+parseInt(u),u+=1;let t=this.model.get("height");this.div.setAttribute("style","width:100%;height:"+t+"px;");let e={},n=this.model.get("options");for(let t of n)e[this.convert_pyname_to_jsname(t)]=this.model.get(t);new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{t.id==this.div.id&&setTimeout((()=>{this.al=A.aladin([this.div],e),this.aladin_events(),this.model_events()}),1e3)}))}))})).observe(this.el,{subtree:!1,childList:!0}),this.el.appendChild(this.div)}))}convert_pyname_to_jsname(t){let e=t.split("_");for(let t=1;t<e.length;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].slice(1);return e.join("")}aladin_events(){this.al.on("zoomChanged",(t=>{this.fov_py?this.fov_py=!1:(this.fov_js=!0,this.model.set("fov",parseFloat(t.toFixed(5))),this.touch())})),this.al.on("positionChanged",(t=>{this.target_py?this.target_py=!1:(this.target_js=!0,this.model.set("target",t.ra.toFixed(6)+" "+t.dec.toFixed(6)),this.touch())}))}model_events(){this.listenTo(this.model,"change:fov",(()=>{this.fov_js?this.fov_js=!1:(this.fov_py=!0,this.al.setFoV(this.model.get("fov")))}),this),this.listenTo(this.model,"change:target",(()=>{this.target_js?this.target_js=!1:(this.target_py=!0,this.al.gotoObject(this.model.get("target")))}),this),this.listenTo(this.model,"change:coo_frame",(()=>{this.al.setFrame(this.model.get("coo_frame"))}),this),this.listenTo(this.model,"change:height",(()=>{let t=this.model.get("height");this.div.setAttribute("style","width:100%;height:"+t+"px;")}),this),this.listenTo(this.model,"change:survey",(()=>{this.al.setImageSurvey(this.model.get("survey"))}),this),this.listenTo(this.model,"change:overlay_survey",(()=>{this.al.setOverlayImageLayer(this.model.get("overlay_survey"))}),this),this.listenTo(this.model,"change:overlay_survey_opacity",(()=>{this.al.getOverlayImageLayer().setAlpha(this.model.get("overlay_survey_opacity"))}),this),this.listenTo(this.model,"change:votable_from_URL_flag",(()=>{this.al.addCatalog(A.catalogFromURL(this.model.get("votable_URL"),this.model.get("votable_options")))}),this),this.listenTo(this.model,"change:moc_from_URL_flag",(()=>{this.al.addMOC(A.MOCFromURL(this.model.get("moc_URL"),this.model.get("moc_options")))}),this),this.listenTo(this.model,"change:moc_from_dict_flag",(()=>{this.al.addMOC(A.MOCFromJSON(this.model.get("moc_dict"),this.model.get("moc_options")))}),this),this.listenTo(this.model,"change:table_flag",(()=>{let t=A.catalog({onClick:"showTable"});this.al.addCatalog(t),t.addSourcesAsArray(this.model.get("table_keys"),this.model.get("table_columns"))}),this),this.listenTo(this.model,"change:overlay_from_stcs_flag",(()=>{let t=A.graphicOverlay(this.model.get("overlay_options"));this.al.addOverlay(t),t.addFootprints(A.footprintsFromSTCS(this.model.get("stc_string")))}),this),this.listenTo(this.model,"change:listener_flag",(()=>{let t=this.model.get("listener_type");this.al.on(t,(e=>{if("select"!==t)e&&this.send({event:"callback",type:t,data:{data:e.data,dec:e.dec,ra:e.ra,x:e.x,y:e.y}});else{let n=e;for(let t of this.al.view.catalogs)t.deselectAll();let r=[];for(let t of n)t.select(),r.push({data:t.data,dec:t.dec,ra:t.ra,x:t.x,y:t.y});this.send({event:"callback",type:t,data:r})}}))}),this),this.listenTo(this.model,"change:rectangular_selection_flag",(()=>{this.al.select()})),this.listenTo(this.model,"change:thumbnail_flag",(()=>{this.al.exportAsPNG()})),this.listenTo(this.model,"change:color_map_flag",(()=>{const t=this.model.get("color_map_name");this.al.getBaseImageLayer().setColormap(t)}))}}})(),o})()));