"use strict";(self["webpackChunkSimple_Web_based_Interface_for_Scanner"]=self["webpackChunkSimple_Web_based_Interface_for_Scanner"]||[]).push([[345],{8345:(e,t,o)=>{o.r(t),o.d(t,{default:()=>b});var i=o(3673),r=o(2323);const n=["href"];function s(e,t,o,s,a,l){const c=(0,i.up)("q-img"),g=(0,i.up)("q-item-section"),m=(0,i.up)("q-btn"),p=(0,i.up)("q-item"),f=(0,i.up)("q-list"),h=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(h,{class:"col"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{class:"shadow-2 rounded-borders q-mx-lg q-my-lg",style:{width:"96%"}},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.items,(t=>((0,i.wg)(),(0,i.j4)(p,{key:t,style:{"border-bottom":"1px solid #eee"}},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{thumbnail:""},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"text-center",fit:"contain",style:{width:"128px","max-height":"128px",border:"1px solid #eee"},"img-style":{"min-width":"100%","min-height":"100%","object-fit":"cover"},src:`${t.src}`,"spinner-color":"black"},null,8,["src"])])),_:2},1024),(0,i.Wm)(g,{style:{"overflow-wrap":"break-word",hyphens:"auto","word-break":"break-all"}},{default:(0,i.w5)((()=>[(0,i._)("a",{href:t.src,style:{"font-size":"0.9rem"}},(0,r.zw)(t.filename),9,n)])),_:2},1024),(0,i.Wm)(g,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{color:"red",label:"",icon:"delete",size:"sm",onClick:o=>e.removeImage(t.filename)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}o(2100);const a=(0,i.aZ)({name:"PageScanList",data:function(){return{files:[],config:void 0}},created:function(){},computed:{items:function(){return this.files.map((e=>({filename:e,src:`http://${this.config.api_url}:${this.config.api_port}${this.config.scans_url}/${e}`,type:this.getFileType(e)})))}},mounted(){this.getJSON("config","config.json").then((e=>{this.config=e,this.$axios.get(`http://${this.config.api_url}:${this.config.api_port}/scans`).then((e=>{200==(null===e||void 0===e?void 0:e.status)?this.files=e.data:(this.$q.notify({color:"negative",message:"Error loading scans",icon:"report_problem"}),console.error(e))})).catch((e=>{this.$q.notify({color:"negative",message:"Error loading scans",icon:"report_problem"}),console.error(e)}))}))},methods:{getJSON:function(e,t){return new Promise(((o,i)=>{this.$axios.get(t).then((t=>{let i=t.data;localStorage.setItem(e,JSON.stringify(i)),o(i)})).catch((e=>{this.$q.notify({color:"negative",message:`Error loading ${t}`,icon:"report_problem"}),console.error(e),i(e)}))}))},getFileType:function(e){let t=e.split(".").pop().toLowerCase();return["jpg","jpeg","png"].includes(t)?"img":"other"},removeImage:function(e){this.$axios.delete(`http://${this.config.api_url}:${this.config.api_port}/scans/${e}`).then((t=>{200==(null===t||void 0===t?void 0:t.status)?this.files=this.files.filter((t=>t!=e)):(this.$q.notify({color:"negative",message:"Error deleting image",icon:"report_problem"}),console.error(t))})).catch((e=>{this.$q.notify({color:"negative",message:"Error deleting image",icon:"report_problem"}),console.error(e)}))}}});var l=o(4260),c=o(4379),g=o(7011),m=o(3414),p=o(2035),f=o(4027),h=o(4607),u=o(7518),d=o.n(u);const _=(0,l.Z)(a,[["render",s]]),b=_;d()(a,"components",{QPage:c.Z,QList:g.Z,QItem:m.Z,QItemSection:p.Z,QImg:f.Z,QBtn:h.Z})}}]);