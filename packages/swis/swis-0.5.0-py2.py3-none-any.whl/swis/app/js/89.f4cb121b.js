"use strict";(self["webpackChunkSimple_Web_based_Interface_for_Scanner"]=self["webpackChunkSimple_Web_based_Interface_for_Scanner"]||[]).push([[89],{7869:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var o=i(3673),n=i(2323);const s={key:0,style:{width:"128px",height:"128px",border:"1px solid #eee","vertical-align":"middle","justify-items":"center","align-items":"center",display:"flex","flex-direction":"column","justify-content":"center","align-content":"center"}},r=["href"];function l(e,t,i,l,a,c){const d=(0,o.up)("q-btn"),f=(0,o.up)("q-item-section"),p=(0,o.up)("q-icon"),h=(0,o.up)("q-img"),m=(0,o.up)("q-item"),g=(0,o.up)("q-list"),u=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(u,{class:"col"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{class:"shadow-2 rounded-borders q-mx-lg q-my-lg",style:{width:"96%"}},{default:(0,o.w5)((()=>[this.pdflist.length>0?((0,o.wg)(),(0,o.j4)(d,{key:0,label:"Create PDF",icon:"picture_as_pdf",onClick:e.createPdf,class:"q-ma-sm",color:"red"},null,8,["onClick"])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.items,(t=>((0,o.wg)(),(0,o.j4)(m,{key:t,style:{"border-bottom":"1px solid #eee"}},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{thumbnail:""},{default:(0,o.w5)((()=>[t.onpdflist||!t.filename.endsWith("png")&&!t.filename.endsWith("jpg")?t.onpdflist?((0,o.wg)(),(0,o.j4)(d,{key:1,onClick:i=>e.removeFromPdfList(t.filename),label:e.getPdfListIndex(t.filename),size:"xs",outline:"",rounded:"",style:{width:"10px","margin-left":"5px"}},null,8,["onClick","label"])):((0,o.wg)(),(0,o.j4)(d,{key:2,size:"xs",flat:"",rounded:"",style:{width:"10px","margin-left":"5px"},disabled:""})):((0,o.wg)(),(0,o.j4)(d,{key:0,onClick:i=>e.addToPdfList(t.filename),icon:"picture_as_pdf",size:"xs",outline:"",rounded:"",style:{width:"10px","margin-left":"5px"}},null,8,["onClick"]))])),_:2},1024),(0,o.Wm)(f,{thumbnail:""},{default:(0,o.w5)((()=>[t.filename.endsWith("pdf")?((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(p,{name:"picture_as_pdf",class:"text-center",fit:"contain",style:{width:"128px","max-height":"128px"},size:"64px",color:"red"})])):((0,o.wg)(),(0,o.j4)(h,{key:1,class:"text-center",fit:"contain",style:{width:"128px","max-height":"128px",border:"1px solid #eee"},"img-style":{"min-width":"100%","min-height":"100%","object-fit":"cover"},src:`${t.src}`,"spinner-color":"black"},null,8,["src"]))])),_:2},1024),(0,o.Wm)(f,{style:{"overflow-wrap":"break-word",hyphens:"auto","word-break":"break-all"}},{default:(0,o.w5)((()=>[(0,o._)("a",{href:t.src,style:{"font-size":"0.9rem"}},(0,n.zw)(t.filename),9,r)])),_:2},1024),(0,o.Wm)(f,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"red",label:"",icon:"delete",size:"sm",onClick:i=>e.removeImage(t.filename)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}i(2100);const a=(0,o.aZ)({name:"PageScanList",data:function(){return{files:[],config:void 0,pdflist:[]}},created:function(){},computed:{items:function(){return this.files.map((e=>({filename:e,src:`http://${this.config.api_url}:${this.config.api_port}${this.config.scans_url}/${e}`,type:this.getFileType(e),onpdflist:this.pdflist.includes(e)})))}},mounted(){this.getJSON("config","config.json").then((e=>{this.config=e,this.$axios.get(`http://${this.config.api_url}:${this.config.api_port}/scans`).then((e=>{200==(null===e||void 0===e?void 0:e.status)?this.files=e.data:(this.$q.notify({color:"negative",message:"Error loading scans",icon:"report_problem"}),console.error(e))})).catch((e=>{this.$q.notify({color:"negative",message:"Error loading scans",icon:"report_problem"}),console.error(e)}))}))},methods:{addToPdfList:function(e){this.pdflist.push(e)},removeFromPdfList:function(e){this.pdflist=this.pdflist.filter((t=>t!=e))},getPdfListIndex:function(e){return this.pdflist.indexOf(e)+1},createPdf:function(){return new Promise(((e,t)=>{this.$axios.post(`http://${this.config.api_url}:${this.config.api_port}/makepdf`,this.pdflist).then((e=>{200==(null===e||void 0===e?void 0:e.status)?(this.$q.notify({color:"positive",message:"PDF created",icon:"done"}),this.pdflist=[],window.open(`http://${this.config.api_url}:${this.config.api_port}/files/${e.data.filename}`,"_blank")):(this.$q.notify({color:"negative",message:'Error creating PDF. Make sure you have "convert" tool installed on server.',icon:"report_problem"}),console.error(e))}))}))},getJSON:function(e,t){return new Promise(((i,o)=>{this.$axios.get(t).then((t=>{let o=t.data;localStorage.setItem(e,JSON.stringify(o)),i(o)})).catch((e=>{this.$q.notify({color:"negative",message:`Error loading ${t}`,icon:"report_problem"}),console.error(e),o(e)}))}))},getFileType:function(e){let t=e.split(".").pop().toLowerCase();return["jpg","jpeg","png"].includes(t)?"img":"other"},removeImage:function(e){this.$axios.delete(`http://${this.config.api_url}:${this.config.api_port}/scans/${e}`).then((t=>{200==(null===t||void 0===t?void 0:t.status)?this.files=this.files.filter((t=>t!=e)):(this.$q.notify({color:"negative",message:"Error deleting image",icon:"report_problem"}),console.error(t))})).catch((e=>{this.$q.notify({color:"negative",message:"Error deleting image",icon:"report_problem"}),console.error(e)}))}}});var c=i(4260),d=i(4379),f=i(7011),p=i(4607),h=i(3414),m=i(2035),g=i(4554),u=i(4027),_=i(7518),w=i.n(_);const y=(0,c.Z)(a,[["render",l]]),x=y;w()(a,"components",{QPage:d.Z,QList:f.Z,QBtn:p.Z,QItem:h.Z,QItemSection:m.Z,QIcon:g.Z,QImg:u.Z})}}]);