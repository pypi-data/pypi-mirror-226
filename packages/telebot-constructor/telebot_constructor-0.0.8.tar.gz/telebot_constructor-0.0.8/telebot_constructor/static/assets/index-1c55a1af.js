var wt=Object.defineProperty;var xt=(t,e,n)=>e in t?wt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>(xt(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function O(){}function Et(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function ft(t){return t()}function rt(){return Object.create(null)}function H(t){t.forEach(ft)}function _t(t){return typeof t=="function"}function ht(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ct(t){return Object.keys(t).length===0}function i(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function Tt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function D(t){return document.createTextNode(t)}function w(){return D(" ")}function Bt(){return D("")}function J(t,e,n,c){return t.addEventListener(e,n,c),()=>t.removeEventListener(e,n,c)}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Lt(t){return Array.from(t.childNodes)}function lt(t,e){e=""+e,t.data!==e&&(t.data=e)}let z;function S(t){z=t}function Ot(){if(!z)throw new Error("Function called outside component initialization");return z}const j=[],st=[];let F=[];const it=[],At=Promise.resolve();let Z=!1;function It(){Z||(Z=!0,At.then(et))}function tt(t){F.push(t)}const Y=new Set;let U=0;function et(){if(U!==0)return;const t=z;do{try{for(;U<j.length;){const e=j[U];U++,S(e),St(e.$$)}}catch(e){throw j.length=0,U=0,e}for(S(null),j.length=0,U=0;st.length;)st.pop()();for(let e=0;e<F.length;e+=1){const n=F[e];Y.has(n)||(Y.add(n),n())}F.length=0}while(j.length);for(;it.length;)it.pop()();Z=!1,Y.clear(),S(t)}function St(t){if(t.fragment!==null){t.update(),H(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(tt)}}function Nt(t){const e=[],n=[];F.forEach(c=>t.indexOf(c)===-1?e.push(c):n.push(c)),n.forEach(c=>c()),F=e}const V=new Set;let R;function Pt(){R={r:0,c:[],p:R}}function Rt(){R.r||H(R.c),R=R.p}function nt(t,e){t&&t.i&&(V.delete(t),t.i(e))}function mt(t,e,n,c){if(t&&t.o){if(V.has(t))return;V.add(t),R.c.push(()=>{V.delete(t),c&&(n&&t.d(1),c())}),t.o(e)}else c&&c()}function Ht(t,e){const n=e.token={};function c(o,r,a,d){if(e.token!==n)return;e.resolved=d;let f=e.ctx;a!==void 0&&(f=f.slice(),f[a]=d);const s=o&&(e.current=o)(f);let x=!1;e.block&&(e.blocks?e.blocks.forEach((l,m)=>{m!==r&&l&&(Pt(),mt(l,1,1,()=>{e.blocks[m]===l&&(e.blocks[m]=null)}),Rt())}):e.block.d(1),s.c(),nt(s,1),s.m(e.mount(),e.anchor),x=!0),e.block=s,e.blocks&&(e.blocks[r]=s),x&&et()}if(Et(t)){const o=Ot();if(t.then(r=>{S(o),c(e.then,1,e.value,r),S(null)},r=>{if(S(o),c(e.catch,2,e.error,r),S(null),!e.hasCatch)throw r}),e.current!==e.pending)return c(e.pending,0),!0}else{if(e.current!==e.then)return c(e.then,1,e.value,t),!0;e.resolved=t}}function Mt(t,e,n){const c=e.slice(),{resolved:o}=t;t.current===t.then&&(c[t.value]=o),t.current===t.catch&&(c[t.error]=o),t.block.p(c,n)}function ut(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ut(t){t&&t.c()}function pt(t,e,n){const{fragment:c,after_update:o}=t.$$;c&&c.m(e,n),tt(()=>{const r=t.$$.on_mount.map(ft).filter(_t);t.$$.on_destroy?t.$$.on_destroy.push(...r):H(r),t.$$.on_mount=[]}),o.forEach(tt)}function gt(t,e){const n=t.$$;n.fragment!==null&&(Nt(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function jt(t,e){t.$$.dirty[0]===-1&&(j.push(t),It(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function bt(t,e,n,c,o,r,a,d=[-1]){const f=z;S(t);const s=t.$$={fragment:null,ctx:[],props:r,update:O,not_equal:o,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:rt(),dirty:d,skip_bound:!1,root:e.target||f.$$.root};a&&a(s.root);let x=!1;if(s.ctx=n?n(t,e.props||{},(l,m,...h)=>{const E=h.length?h[0]:m;return s.ctx&&o(s.ctx[l],s.ctx[l]=E)&&(!s.skip_bound&&s.bound[l]&&s.bound[l](E),x&&jt(t,l)),m}):[],s.update(),x=!0,H(s.before_update),s.fragment=c?c(s.ctx):!1,e.target){if(e.hydrate){const l=Lt(e.target);s.fragment&&s.fragment.l(l),l.forEach(y)}else s.fragment&&s.fragment.c();e.intro&&nt(t.$$.fragment),pt(t,e.target,e.anchor),et()}S(f)}class $t{constructor(){X(this,"$$");X(this,"$$set")}$destroy(){gt(this,1),this.$destroy=O}$on(e,n){if(!_t(n))return O;const c=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return c.push(n),()=>{const o=c.indexOf(n);o!==-1&&c.splice(o,1)}}$set(e){this.$$set&&!Ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Dt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Dt);const Ft="/constructor/baw.svg";function Jt(t){return{data:t,ok:!0}}function qt(t){return{error:t,ok:!1}}function zt(t){if(t.ok)return t.data;throw new Error(t.error)}async function Gt(t){const e=await t.text();return t.ok?Jt(JSON.parse(e)):qt(e)}function yt(...t){return t.map(e=>e.replace(/(^\/|\/$)/g,"")).join("/")}let W;try{W=__buildTimeReplacedApiOrigin}catch{W=window.location.origin}const kt="/constructor",Kt=new URL(kt,W).href,vt=yt(Kt,"/api");console.debug(`API origin: ${W}`);console.debug(`Base constructor path: ${kt}`);console.debug(`Base API URL: ${vt}`);const Vt=t=>yt(vt,t);async function Wt(){const t=await fetch(Vt("/config"));return await Gt(t)}function at(t,e,n){const c=t.slice();return c[9]=e[n][0],c[10]=e[n][1],c[12]=n,c}function Qt(t){return{c:O,m:O,p:O,d:O}}function Xt(t){let e,n,c,o,r,a,d,f,s,x,l,m,h,E,C,T,B,L,A,I,N,G,P,p,_,Q,ot,M=ut(Object.entries(t[0])),k=[];for(let $=0;$<M.length;$+=1)k[$]=dt(at(t,M,$));return{c(){e=u("div"),n=u("h1"),n.textContent="Telebot constructor",c=w(),o=u("div"),r=u("div");for(let $=0;$<k.length;$+=1)k[$].c();a=w(),d=u("h3"),d.textContent="Add bot",f=w(),s=u("form"),s.innerHTML='<label for="bot_name">Name</label><br/> <input type="text" id="bot_name" name="bot_name"/><br/> <label for="bot_token_secret_name">Token secret name</label><br/> <input type="text" id="bot_token_secret_name" name="bot_token_secret_name"/><br/>',x=w(),l=u("h3"),l.textContent="Feedback Handler",m=w(),h=u("label"),h.textContent="Admin chat ID",E=u("br"),C=w(),T=u("input"),B=u("br"),L=u("br"),A=w(),I=u("div"),N=u("button"),N.textContent="New bot",G=w(),P=u("button"),P.textContent="Reload config",p=w(),_=u("p"),g(n,"class","svelte-1iax5r1"),g(r,"id","container"),g(h,"for","admin_chat_id"),g(T,"type","text"),g(T,"id","admin_chat_id"),g(T,"name","admin_chat_id"),g(N,"class","svelte-1iax5r1"),g(P,"class","svelte-1iax5r1"),g(I,"class","button"),g(_,"id","newBotConfigStatus"),g(_,"class","svelte-1iax5r1")},m($,K){v($,e,K),i(e,n),i(e,c),i(e,o),i(o,r);for(let b=0;b<k.length;b+=1)k[b]&&k[b].m(r,null);i(o,a),i(o,d),i(o,f),i(o,s),i(o,x),i(o,l),i(o,m),i(o,h),i(o,E),i(o,C),i(o,T),i(o,B),i(o,L),i(o,A),i(o,I),i(I,N),i(I,G),i(I,P),i(o,p),i(o,_),Q||(ot=[J(N,"click",t[3]),J(P,"click",t[1])],Q=!0)},p($,K){if(K&5){M=ut(Object.entries($[0]));let b;for(b=0;b<M.length;b+=1){const ct=at($,M,b);k[b]?k[b].p(ct,K):(k[b]=dt(ct),k[b].c(),k[b].m(r,null))}for(;b<k.length;b+=1)k[b].d(1);k.length=M.length}},d($){$&&y(e),Tt(k,$),Q=!1,H(ot)}}}function dt(t){let e,n=t[9]+"",c,o,r,a,d,f=t[10].token_secret_name+"",s,x,l,m,h,E,C,T,B,L,A,I;function N(){return t[5](t[9])}function G(){return t[6](t[9])}function P(){return t[7](t[9])}return{c(){e=u("h3"),c=D(n),o=w(),r=u("p"),a=D("Token secret: "),d=u("code"),s=D(f),x=w(),l=u("button"),l.textContent="Start",m=w(),h=u("button"),h.textContent="Stop",E=w(),C=u("button"),C.textContent="Delete",T=w(),B=u("div"),g(r,"class","svelte-1iax5r1"),g(l,"class","svelte-1iax5r1"),g(h,"class","svelte-1iax5r1"),g(C,"class","svelte-1iax5r1"),g(B,"id",L=t[9]+"-status")},m(p,_){v(p,e,_),i(e,c),v(p,o,_),v(p,r,_),i(r,a),i(r,d),i(d,s),v(p,x,_),v(p,l,_),v(p,m,_),v(p,h,_),v(p,E,_),v(p,C,_),v(p,T,_),v(p,B,_),A||(I=[J(l,"click",N),J(h,"click",G),J(C,"click",P)],A=!0)},p(p,_){t=p,_&1&&n!==(n=t[9]+"")&&lt(c,n),_&1&&f!==(f=t[10].token_secret_name+"")&&lt(s,f),_&1&&L!==(L=t[9]+"-status")&&g(B,"id",L)},d(p){p&&(y(e),y(o),y(r),y(x),y(l),y(m),y(h),y(E),y(C),y(T),y(B)),A=!1,H(I)}}}function Yt(t){let e;return{c(){e=D("Loading...")},m(n,c){v(n,e,c)},p:O,d(n){n&&y(e)}}}function Zt(t){let e,n={ctx:t,current:null,token:null,hasCatch:!1,pending:Yt,then:Xt,catch:Qt,value:8};return Ht(t[4],n),{c(){e=Bt(),n.block.c()},m(c,o){v(c,e,o),n.block.m(c,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e},p(c,[o]){t=c,Mt(n,t,o)},i:O,o:O,d(c){c&&y(e),n.block.d(c),n.token=null,n=null}}}const q="";async function te(t){const e=await fetch(q+`/api/start/${t}`,{method:"POST"}),n=document.getElementById(`${t}-status`);n.innerHTML=await e.text()}async function ee(t){const e=await fetch(q+`/api/stop/${t}`,{method:"POST"}),n=document.getElementById(`${t}-status`);n.innerHTML=await e.text()}function ne(t,e,n){console.log(`Base path = ${q}`);let c;async function o(){n(0,c=zt(await Wt()))}async function r(l){const m=await fetch(q+`/api/config/${l}`,{method:"DELETE"}),h=document.getElementById(`${l}-status`);h.innerHTML=await m.text(),await o()}async function a(){const l=document.getElementById("bot_name"),m=document.getElementById("bot_token_secret_name"),h=document.getElementById("admin_chat_id"),E=document.getElementById("newBotConfigStatus"),C=l.value,T=m.value,B={token_secret_name:T},L=h.innerText;if(L)if(isNaN(parseInt(L))){E.innerHTML="Admin chat ID must be a number";return}else B.feedback_handler_config={admin_chat_id:parseInt(L)};if(C.length===0||T.length===0){E.innerHTML="Form not completed. Name and token are required";return}console.log(B);const A=await fetch(q+`/api/config/${encodeURIComponent(C)}`,{method:"POST",body:JSON.stringify(B)});console.log(A),A.ok?(l.innerText="",m.innerText="",h.innerText="",await o()):E.innerHTML=await A.text()}const d=o();return[c,o,r,a,d,l=>te(l),l=>ee(l),l=>r(l)]}class oe extends $t{constructor(e){super(),bt(this,e,ne,Zt,ht,{})}}function ce(t){let e,n,c,o,r,a;return r=new oe({}),{c(){e=u("main"),n=u("div"),n.innerHTML=`<img src="${Ft}" class="logo svelte-be9k4s" alt="BAW Logo"/>`,c=w(),o=u("div"),Ut(r.$$.fragment),g(o,"class","constructor")},m(d,f){v(d,e,f),i(e,n),i(e,c),i(e,o),pt(r,o,null),a=!0},p:O,i(d){a||(nt(r.$$.fragment,d),a=!0)},o(d){mt(r.$$.fragment,d),a=!1},d(d){d&&y(e),gt(r)}}}class re extends $t{constructor(e){super(),bt(this,e,null,ce,ht,{})}}new re({target:document.getElementById("app")});
