import{S as Z,e as P,s as x,f as W,g as d,h as J,j as y,n as K,k as H,y as he,m as S,o as R,Y as me,p as M,w as D,r as $,u as E,v as ee,B as ge,C as we,I as X,K as U,ag as be,am as ie,W as pe,t as ne,Q as A,x as te,Z as Y,a0 as De,F,G,an as se,a2 as Be,H as Q,a5 as Ce,a6 as Se,al as Ee}from"./index-bccac652.js";import{a as oe}from"./Button-9f7b282d.js";import{B as Ne}from"./BlockTitle-e00dde0f.js";function Te(n){let e,l;return{c(){e=W("svg"),l=W("path"),d(l,"d","M5 8l4 4 4-4z"),d(e,"class","dropdown-arrow svelte-p5edak"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","18"),d(e,"height","18"),d(e,"viewBox","0 0 18 18")},m(o,f){J(o,e,f),y(e,l)},p:K,i:K,o:K,d(o){o&&H(e)}}}class ze extends Z{constructor(e){super(),P(this,e,null,Te,x,{})}}function Je(n){let e,l;return{c(){e=W("svg"),l=W("path"),d(l,"d","M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","16"),d(e,"height","16"),d(e,"viewBox","0 0 24 24")},m(o,f){J(o,e,f),y(e,l)},p:K,i:K,o:K,d(o){o&&H(e)}}}class ve extends Z{constructor(e){super(),P(this,e,null,Je,x,{})}}function fe(n,e,l){const o=n.slice();return o[24]=e[l],o}function ue(n){let e,l,o,f,_,s=X(n[0]),t=[];for(let i=0;i<s.length;i+=1)t[i]=re(fe(n,s,i));return{c(){e=S("ul");for(let i=0;i<t.length;i+=1)t[i].c();d(e,"class","options svelte-1aonegi"),U(e,"top",n[7]),U(e,"bottom",n[8]),U(e,"max-height",`calc(${n[9]}px - var(--window-padding))`),U(e,"width",n[6]+"px")},m(i,r){J(i,e,r);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);n[21](e),o=!0,f||(_=M(e,"mousedown",be(n[20])),f=!0)},p(i,r){if(r&2053){s=X(i[0]);let u;for(u=0;u<s.length;u+=1){const p=fe(i,s,u);t[u]?t[u].p(p,r):(t[u]=re(p),t[u].c(),t[u].m(e,null))}for(;u<t.length;u+=1)t[u].d(1);t.length=s.length}r&128&&U(e,"top",i[7]),r&256&&U(e,"bottom",i[8]),r&512&&U(e,"max-height",`calc(${i[9]}px - var(--window-padding))`),r&64&&U(e,"width",i[6]+"px")},i(i){o||(i&&he(()=>{o&&(l||(l=ie(e,oe,{duration:200,y:5},!0)),l.run(1))}),o=!0)},o(i){i&&(l||(l=ie(e,oe,{duration:200,y:5},!1)),l.run(0)),o=!1},d(i){i&&H(e),pe(t,i),n[21](null),i&&l&&l.end(),f=!1,_()}}}function re(n){let e,l,o,f=n[24]+"",_,s,t,i;return{c(){e=S("li"),l=S("span"),l.textContent="âœ“",o=R(),_=ne(f),s=R(),d(l,"class","inner-item svelte-1aonegi"),A(l,"hide",!n[11].includes(n[24])),d(e,"class","item svelte-1aonegi"),d(e,"role","button"),d(e,"data-value",t=n[24]),d(e,"aria-label",i=n[24]),A(e,"selected",n[11].includes(n[24])),A(e,"active",n[2]===n[24]),A(e,"bg-gray-100",n[2]===n[24]),A(e,"dark:bg-gray-600",n[2]===n[24])},m(r,u){J(r,e,u),y(e,l),y(e,o),y(e,_),y(e,s)},p(r,u){u&2049&&A(l,"hide",!r[11].includes(r[24])),u&1&&f!==(f=r[24]+"")&&te(_,f),u&1&&t!==(t=r[24])&&d(e,"data-value",t),u&1&&i!==(i=r[24])&&d(e,"aria-label",i),u&2049&&A(e,"selected",r[11].includes(r[24])),u&5&&A(e,"active",r[2]===r[24]),u&5&&A(e,"bg-gray-100",r[2]===r[24]),u&5&&A(e,"dark:bg-gray-600",r[2]===r[24])},d(r){r&&H(e)}}}function He(n){let e,l,o,f,_;he(n[18]);let s=n[1]&&!n[3]&&ue(n);return{c(){e=S("div"),l=R(),s&&s.c(),o=me(),d(e,"class","reference")},m(t,i){J(t,e,i),n[19](e),J(t,l,i),s&&s.m(t,i),J(t,o,i),f||(_=[M(window,"scroll",n[12]),M(window,"resize",n[18])],f=!0)},p(t,[i]){t[1]&&!t[3]?s?(s.p(t,i),i&10&&D(s,1)):(s=ue(t),s.c(),D(s,1),s.m(o.parentNode,o)):s&&($(),E(s,1,1,()=>{s=null}),ee())},i(t){D(s)},o(t){E(s)},d(t){t&&(H(e),H(l),H(o)),n[19](null),s&&s.d(t),f=!1,ge(_)}}}function Ie(n,e,l){let o,{value:f=void 0}=e,{filtered:_}=e,{showOptions:s=!1}=e,{activeOption:t}=e,{disabled:i=!1}=e,r,u,p,w,O,N,B,T,v,m;function g(){const{top:h,bottom:z}=O.getBoundingClientRect();l(15,r=h),l(16,u=m-z)}let j=null;function I(){s&&(j!==null&&clearTimeout(j),j=setTimeout(()=>{g(),j=null},10))}const k=we();function q(){l(10,m=window.innerHeight)}function L(h){Y[h?"unshift":"push"](()=>{O=h,l(4,O)})}const c=h=>k("change",h);function b(h){Y[h?"unshift":"push"](()=>{N=h,l(5,N)})}return n.$$set=h=>{"value"in h&&l(14,f=h.value),"filtered"in h&&l(0,_=h.filtered),"showOptions"in h&&l(1,s=h.showOptions),"activeOption"in h&&l(2,t=h.activeOption),"disabled"in h&&l(3,i=h.disabled)},n.$$.update=()=>{if(n.$$.dirty&245810){if(s&&O){if(N&&typeof f=="string"){let z=N.querySelectorAll("li");for(const V of Array.from(z))if(V.getAttribute("data-value")===f){N.scrollTo(0,V.offsetTop);break}}g();const h=O.parentElement?.getBoundingClientRect();l(17,p=h?.height||0),l(6,w=h?.width||0)}u>r?(l(7,B=`${r}px`),l(9,v=u),l(8,T=null)):(l(8,T=`${u+p}px`),l(9,v=r-p),l(7,B=null))}n.$$.dirty&16384&&l(11,o=Array.isArray(f)?f:[f])},[_,s,t,i,O,N,w,B,T,v,m,o,I,k,f,r,u,p,q,L,c,b]}class Le extends Z{constructor(e){super(),P(this,e,Ie,He,x,{value:14,filtered:0,showOptions:1,activeOption:2,disabled:3})}}function ae(n,e,l){const o=n.slice();return o[32]=e[l],o}function Me(n){let e;return{c(){e=ne(n[1])},m(l,o){J(l,e,o)},p(l,o){o[0]&2&&te(e,l[1])},d(l){l&&H(e)}}}function ce(n){let e,l,o=X(n[0]),f=[];for(let s=0;s<o.length;s+=1)f[s]=de(ae(n,o,s));const _=s=>E(f[s],1,1,()=>{f[s]=null});return{c(){for(let s=0;s<f.length;s+=1)f[s].c();e=me()},m(s,t){for(let i=0;i<f.length;i+=1)f[i]&&f[i].m(s,t);J(s,e,t),l=!0},p(s,t){if(t[0]&24593){o=X(s[0]);let i;for(i=0;i<o.length;i+=1){const r=ae(s,o,i);f[i]?(f[i].p(r,t),D(f[i],1)):(f[i]=de(r),f[i].c(),D(f[i],1),f[i].m(e.parentNode,e))}for($(),i=o.length;i<f.length;i+=1)_(i);ee()}},i(s){if(!l){for(let t=0;t<o.length;t+=1)D(f[t]);l=!0}},o(s){f=f.filter(Boolean);for(let t=0;t<f.length;t+=1)E(f[t]);l=!1},d(s){s&&H(e),pe(f,s)}}}function _e(n){let e,l,o,f;return l=new ve({}),{c(){e=S("div"),F(l.$$.fragment),d(e,"class","token-remove svelte-1xsj8nn"),d(e,"title",o=n[13]("common.remove")+" "+n[32]),A(e,"hidden",n[4])},m(_,s){J(_,e,s),G(l,e,null),f=!0},p(_,s){(!f||s[0]&8193&&o!==(o=_[13]("common.remove")+" "+_[32]))&&d(e,"title",o),(!f||s[0]&16)&&A(e,"hidden",_[4])},i(_){f||(D(l.$$.fragment,_),f=!0)},o(_){E(l.$$.fragment,_),f=!1},d(_){_&&H(e),Q(l)}}}function de(n){let e,l,o=n[32]+"",f,_,s,t,i,r,u=!n[4]&&_e(n);function p(){return n[24](n[32])}return{c(){e=S("div"),l=S("span"),f=ne(o),_=R(),u&&u.c(),s=R(),d(l,"class","svelte-1xsj8nn"),d(e,"class","token svelte-1xsj8nn")},m(w,O){J(w,e,O),y(e,l),y(l,f),y(e,_),u&&u.m(e,null),y(e,s),t=!0,i||(r=M(e,"click",be(p)),i=!0)},p(w,O){n=w,(!t||O[0]&1)&&o!==(o=n[32]+"")&&te(f,o),n[4]?u&&($(),E(u,1,1,()=>{u=null}),ee()):u?(u.p(n,O),O[0]&16&&D(u,1)):(u=_e(n),u.c(),D(u,1),u.m(e,s))},i(w){t||(D(u),t=!0)},o(w){E(u),t=!1},d(w){w&&H(e),u&&u.d(),i=!1,r()}}}function Re(n){let e,l,o,f,_,s=n[3]&&Array.isArray(n[0]),t,i,r,u,p,w,O,N,B,T,v,m,g,j,I;l=new Ne({props:{show_label:n[5],info:n[2],$$slots:{default:[Me]},$$scope:{ctx:n}}});let k=s&&ce(n);w=new ve({}),B=new ze({});function q(c){n[28](c)}let L={showOptions:n[11],filtered:n[10],activeOption:n[9],disabled:n[4]};return n[0]!==void 0&&(L.value=n[0]),v=new Le({props:L}),Y.push(()=>De(v,"value",q)),v.$on("change",n[18]),{c(){e=S("label"),F(l.$$.fragment),o=R(),f=S("div"),_=S("div"),k&&k.c(),t=R(),i=S("div"),r=S("input"),u=R(),p=S("div"),F(w.$$.fragment),N=R(),F(B.$$.fragment),T=R(),F(v.$$.fragment),d(r,"class","border-none svelte-1xsj8nn"),r.disabled=n[4],d(r,"autocomplete","off"),A(r,"subdued",n[0]!==n[8]&&!n[7]),d(p,"class","token-remove remove-all svelte-1xsj8nn"),d(p,"title",O=n[13]("common.clear")),A(p,"hide",!n[3]||!n[0]?.length||n[4]),d(i,"class","secondary-wrap svelte-1xsj8nn"),d(_,"class","wrap-inner svelte-1xsj8nn"),A(_,"showOptions",n[11]),d(f,"class","wrap svelte-1xsj8nn"),d(e,"class","svelte-1xsj8nn"),A(e,"container",n[6])},m(c,b){J(c,e,b),G(l,e,null),y(e,o),y(e,f),y(f,_),k&&k.m(_,null),y(_,t),y(_,i),y(i,r),se(r,n[8]),n[26](r),y(i,u),y(i,p),G(w,p,null),y(i,N),G(B,i,null),y(f,T),G(v,f,null),g=!0,j||(I=[M(r,"input",n[25]),M(r,"keydown",n[19]),M(r,"keyup",n[27]),M(r,"blur",n[16]),M(r,"focus",n[17]),M(p,"click",n[15])],j=!0)},p(c,b){const h={};b[0]&32&&(h.show_label=c[5]),b[0]&4&&(h.info=c[2]),b[0]&2|b[1]&16&&(h.$$scope={dirty:b,ctx:c}),l.$set(h),b[0]&9&&(s=c[3]&&Array.isArray(c[0])),s?k?(k.p(c,b),b[0]&9&&D(k,1)):(k=ce(c),k.c(),D(k,1),k.m(_,t)):k&&($(),E(k,1,1,()=>{k=null}),ee()),(!g||b[0]&16)&&(r.disabled=c[4]),b[0]&256&&r.value!==c[8]&&se(r,c[8]),(!g||b[0]&385)&&A(r,"subdued",c[0]!==c[8]&&!c[7]),(!g||b[0]&8192&&O!==(O=c[13]("common.clear")))&&d(p,"title",O),(!g||b[0]&25)&&A(p,"hide",!c[3]||!c[0]?.length||c[4]),(!g||b[0]&2048)&&A(_,"showOptions",c[11]);const z={};b[0]&2048&&(z.showOptions=c[11]),b[0]&1024&&(z.filtered=c[10]),b[0]&512&&(z.activeOption=c[9]),b[0]&16&&(z.disabled=c[4]),!m&&b[0]&1&&(m=!0,z.value=c[0],Be(()=>m=!1)),v.$set(z),(!g||b[0]&64)&&A(e,"container",c[6])},i(c){g||(D(l.$$.fragment,c),D(k),D(w.$$.fragment,c),D(B.$$.fragment,c),D(v.$$.fragment,c),g=!0)},o(c){E(l.$$.fragment,c),E(k),E(w.$$.fragment,c),E(B.$$.fragment,c),E(v.$$.fragment,c),g=!1},d(c){c&&H(e),Q(l),k&&k.d(),n[26](null),Q(w),Q(B),Q(v),j=!1,ge(I)}}}function Ue(n,e,l){let o,f;Ce(n,Se,a=>l(13,f=a));let{label:_}=e,{info:s=void 0}=e,{value:t}=e,i=Array.isArray(t)?t.slice():t,{value_is_output:r=!1}=e,{multiselect:u=!1}=e,{max_choices:p}=e,{choices:w}=e,{disabled:O=!1}=e,{show_label:N}=e,{container:B=!0}=e,{allow_custom_value:T=!1}=e;const v=we();let m,g,j=!1,I;function k(){v("change",t),r||v("input")}Ee(()=>{l(20,r=!1)});function q(a){l(0,t),(!p||t.length<p)&&(t.push(a),v("select",{index:w.indexOf(a),value:a,selected:!0})),l(0,t)}function L(a){O||(l(0,t),l(0,t=t.filter(C=>C!==a))),v("select",{index:w.indexOf(a),value:a,selected:!1})}function c(a){l(0,t=[]),l(8,m=""),a.preventDefault()}function b(a){u?l(8,m=""):T||t!==m&&(typeof t=="string"&&m==""?l(8,m=t):(l(0,t=void 0),l(8,m=""))),l(11,j=!1),v("blur")}function h(a){v("focus"),l(11,j=!0),l(10,o=w)}function z(a){const C=a.detail.target.dataset.value;T&&l(8,m=C),C!==void 0&&(u?(t?.includes(C)?L(C):q(C),l(8,m="")):(l(0,t=C),l(8,m=C),l(11,j=!1),v("select",{index:w.indexOf(C),value:C,selected:!0}),I.blur()))}function V(a){if(a.key==="Enter"&&g!=null)u?u&&Array.isArray(t)&&(t.includes(g)?L(g):q(g),l(8,m="")):(t!==g&&(l(0,t=g),v("select",{index:w.indexOf(t),value:t,selected:!0})),l(8,m=g),l(11,j=!1),I.blur());else if(l(11,j=!0),a.key==="ArrowUp"||a.key==="ArrowDown"){g===null&&l(9,g=o[0]);const C=a.key==="ArrowUp"?-1:1,le=o.indexOf(g)+C;l(9,g=le<0?o[o.length-1]:le===o.length?o[0]:o[le]),a.preventDefault()}else a.key==="Escape"?l(11,j=!1):a.key==="Backspace"?u&&(!m||m==="")&&Array.isArray(t)&&t.length>0&&(L(t[t.length-1]),l(8,m="")):l(11,j=!0)}const ke=a=>L(a);function Oe(){m=this.value,l(8,m),l(0,t)}function ye(a){Y[a?"unshift":"push"](()=>{I=a,l(12,I)})}const Ae=()=>{T&&l(0,t=m)};function je(a){t=a,l(0,t)}return n.$$set=a=>{"label"in a&&l(1,_=a.label),"info"in a&&l(2,s=a.info),"value"in a&&l(0,t=a.value),"value_is_output"in a&&l(20,r=a.value_is_output),"multiselect"in a&&l(3,u=a.multiselect),"max_choices"in a&&l(21,p=a.max_choices),"choices"in a&&l(22,w=a.choices),"disabled"in a&&l(4,O=a.disabled),"show_label"in a&&l(5,N=a.show_label),"container"in a&&l(6,B=a.container),"allow_custom_value"in a&&l(7,T=a.allow_custom_value)},n.$$.update=()=>{n.$$.dirty[0]&1&&(typeof t=="string"||t===null)&&l(8,m=t),n.$$.dirty[0]&4194560&&l(10,o=w.filter(a=>m?a.toLowerCase().includes(m.toLowerCase()):a)),n.$$.dirty[0]&1536&&(!g||!o.includes(g))&&l(9,g=o.length?o[0]:null),n.$$.dirty[0]&8388609&&JSON.stringify(t)!=JSON.stringify(i)&&(l(23,i=Array.isArray(t)?t.slice():t),k()),n.$$.dirty[0]&8388609&&JSON.stringify(t)!=JSON.stringify(i)&&(v("change",t),l(23,i=Array.isArray(t)?t.slice():t))},[t,_,s,u,O,N,B,T,m,g,o,j,I,f,L,c,b,h,z,V,r,p,w,i,ke,Oe,ye,Ae,je]}class Ge extends Z{constructor(e){super(),P(this,e,Ue,Re,x,{label:1,info:2,value:0,value_is_output:20,multiselect:3,max_choices:21,choices:22,disabled:4,show_label:5,container:6,allow_custom_value:7},null,[-1,-1])}}export{Ge as D};
//# sourceMappingURL=Dropdown-f0c728fe.js.map
