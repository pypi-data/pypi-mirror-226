---
- name: Getting inventory details from VMWare vCenter
  hosts: localhost
  gather_facts: no
  vars:
    timeout: 600
    ansible_timeout: 600
    vcenter_hostname: 172.17.29.162
    vcenter_username: administrator@vsphere.local
    vcenter_password: 12rmc*Help
    datacenter_name: Datacenter1
    proxy_env:
      http_proxy: http://web-proxy.in.hpecorp.net:8080
      https_proxy: http://web-proxy.in.hpecorp.net:8080

  tasks:
    - name: Gathering specific VM info from datacenter
      vmware_guest_info:
        hostname: "{{ vcenter_hostname }}"
        username: "{{ vcenter_username }}"
        password: "{{ vcenter_password }}"
        validate_certs: no
        datacenter: "{{ datacenter_name }}"
        moid: vm-14023
        schema: "vsphere"
        properties: ["config.hardware.memoryMB", "guest.disk", "overallStatus"]
      register: vminfo
    - debug:
        var: vminfo
